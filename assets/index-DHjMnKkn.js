function sF(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Kh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function d2(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var p2={exports:{}},S0={},m2={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh=Symbol.for("react.element"),oF=Symbol.for("react.portal"),aF=Symbol.for("react.fragment"),lF=Symbol.for("react.strict_mode"),cF=Symbol.for("react.profiler"),uF=Symbol.for("react.provider"),fF=Symbol.for("react.context"),hF=Symbol.for("react.forward_ref"),dF=Symbol.for("react.suspense"),pF=Symbol.for("react.memo"),mF=Symbol.for("react.lazy"),_E=Symbol.iterator;function gF(n){return n===null||typeof n!="object"?null:(n=_E&&n[_E]||n["@@iterator"],typeof n=="function"?n:null)}var g2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v2=Object.assign,y2={};function Su(n,e,t){this.props=n,this.context=e,this.refs=y2,this.updater=t||g2}Su.prototype.isReactComponent={};Su.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Su.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function x2(){}x2.prototype=Su.prototype;function gA(n,e,t){this.props=n,this.context=e,this.refs=y2,this.updater=t||g2}var vA=gA.prototype=new x2;vA.constructor=gA;v2(vA,Su.prototype);vA.isPureReactComponent=!0;var AE=Array.isArray,_2=Object.prototype.hasOwnProperty,yA={current:null},A2={key:!0,ref:!0,__self:!0,__source:!0};function S2(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)_2.call(e,i)&&!A2.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Yh,type:n,key:s,ref:o,props:r,_owner:yA.current}}function vF(n,e){return{$$typeof:Yh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function xA(n){return typeof n=="object"&&n!==null&&n.$$typeof===Yh}function yF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var SE=/\/+/g;function zy(n,e){return typeof n=="object"&&n!==null&&n.key!=null?yF(""+n.key):e.toString(36)}function Hm(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Yh:case oF:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+zy(o,0):i,AE(r)?(t="",n!=null&&(t=n.replace(SE,"$&/")+"/"),Hm(r,e,t,"",function(u){return u})):r!=null&&(xA(r)&&(r=vF(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(SE,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",AE(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+zy(s,a);o+=Hm(s,e,t,l,r)}else if(l=gF(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+zy(s,a++),o+=Hm(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _p(n,e,t){if(n==null)return n;var i=[],r=0;return Hm(n,i,"","",function(s){return e.call(t,s,r++)}),i}function xF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Pi={current:null},zm={transition:null},_F={ReactCurrentDispatcher:Pi,ReactCurrentBatchConfig:zm,ReactCurrentOwner:yA};function M2(){throw Error("act(...) is not supported in production builds of React.")}It.Children={map:_p,forEach:function(n,e,t){_p(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return _p(n,function(){e++}),e},toArray:function(n){return _p(n,function(e){return e})||[]},only:function(n){if(!xA(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};It.Component=Su;It.Fragment=aF;It.Profiler=cF;It.PureComponent=gA;It.StrictMode=lF;It.Suspense=dF;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_F;It.act=M2;It.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=v2({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=yA.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)_2.call(e,l)&&!A2.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Yh,type:n.type,key:r,ref:s,props:i,_owner:o}};It.createContext=function(n){return n={$$typeof:fF,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:uF,_context:n},n.Consumer=n};It.createElement=S2;It.createFactory=function(n){var e=S2.bind(null,n);return e.type=n,e};It.createRef=function(){return{current:null}};It.forwardRef=function(n){return{$$typeof:hF,render:n}};It.isValidElement=xA;It.lazy=function(n){return{$$typeof:mF,_payload:{_status:-1,_result:n},_init:xF}};It.memo=function(n,e){return{$$typeof:pF,type:n,compare:e===void 0?null:e}};It.startTransition=function(n){var e=zm.transition;zm.transition={};try{n()}finally{zm.transition=e}};It.unstable_act=M2;It.useCallback=function(n,e){return Pi.current.useCallback(n,e)};It.useContext=function(n){return Pi.current.useContext(n)};It.useDebugValue=function(){};It.useDeferredValue=function(n){return Pi.current.useDeferredValue(n)};It.useEffect=function(n,e){return Pi.current.useEffect(n,e)};It.useId=function(){return Pi.current.useId()};It.useImperativeHandle=function(n,e,t){return Pi.current.useImperativeHandle(n,e,t)};It.useInsertionEffect=function(n,e){return Pi.current.useInsertionEffect(n,e)};It.useLayoutEffect=function(n,e){return Pi.current.useLayoutEffect(n,e)};It.useMemo=function(n,e){return Pi.current.useMemo(n,e)};It.useReducer=function(n,e,t){return Pi.current.useReducer(n,e,t)};It.useRef=function(n){return Pi.current.useRef(n)};It.useState=function(n){return Pi.current.useState(n)};It.useSyncExternalStore=function(n,e,t){return Pi.current.useSyncExternalStore(n,e,t)};It.useTransition=function(){return Pi.current.useTransition()};It.version="18.3.1";m2.exports=It;var X=m2.exports;const Nn=Kh(X),AF=sF({__proto__:null,default:Nn},[X]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SF=X,MF=Symbol.for("react.element"),wF=Symbol.for("react.fragment"),EF=Object.prototype.hasOwnProperty,CF=SF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TF={key:!0,ref:!0,__self:!0,__source:!0};function w2(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)EF.call(e,i)&&!TF.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:MF,type:n,key:s,ref:o,props:r,_owner:CF.current}}S0.Fragment=wF;S0.jsx=w2;S0.jsxs=w2;p2.exports=S0;var ne=p2.exports,b_={},E2={exports:{}},lr={},C2={exports:{}},T2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,G){var V=B.length;B.push(G);e:for(;0<V;){var q=V-1>>>1,ue=B[q];if(0<r(ue,G))B[q]=G,B[V]=ue,V=q;else break e}}function t(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var G=B[0],V=B.pop();if(V!==G){B[0]=V;e:for(var q=0,ue=B.length,be=ue>>>1;q<be;){var re=2*(q+1)-1,me=B[re],we=re+1,Ee=B[we];if(0>r(me,V))we<ue&&0>r(Ee,me)?(B[q]=Ee,B[we]=V,q=we):(B[q]=me,B[re]=V,q=re);else if(we<ue&&0>r(Ee,V))B[q]=Ee,B[we]=V,q=we;else break e}}return G}function r(B,G){var V=B.sortIndex-G.sortIndex;return V!==0?V:B.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,y=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(B){for(var G=t(u);G!==null;){if(G.callback===null)i(u);else if(G.startTime<=B)i(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(u)}}function w(B){if(A=!1,M(B),!y)if(t(l)!==null)y=!0,Z(P);else{var G=t(u);G!==null&&z(w,G.startTime-B)}}function P(B,G){y=!1,A&&(A=!1,g(D),D=-1),m=!0;var V=p;try{for(M(G),d=t(l);d!==null&&(!(d.expirationTime>G)||B&&!N());){var q=d.callback;if(typeof q=="function"){d.callback=null,p=d.priorityLevel;var ue=q(d.expirationTime<=G);G=n.unstable_now(),typeof ue=="function"?d.callback=ue:d===t(l)&&i(l),M(G)}else i(l);d=t(l)}if(d!==null)var be=!0;else{var re=t(u);re!==null&&z(w,re.startTime-G),be=!1}return be}finally{d=null,p=V,m=!1}}var b=!1,I=null,D=-1,R=5,T=-1;function N(){return!(n.unstable_now()-T<R)}function Q(){if(I!==null){var B=n.unstable_now();T=B;var G=!0;try{G=I(!0,B)}finally{G?W():(b=!1,I=null)}}else b=!1}var W;if(typeof _=="function")W=function(){_(Q)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Y=K.port2;K.port1.onmessage=Q,W=function(){Y.postMessage(null)}}else W=function(){x(Q,0)};function Z(B){I=B,b||(b=!0,W())}function z(B,G){D=x(function(){B(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,Z(P))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(B){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var V=p;p=G;try{return B()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var V=p;p=B;try{return G()}finally{p=V}},n.unstable_scheduleCallback=function(B,G,V){var q=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?q+V:q):V=q,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=V+ue,B={id:h++,callback:G,priorityLevel:B,startTime:V,expirationTime:ue,sortIndex:-1},V>q?(B.sortIndex=V,e(u,B),t(l)===null&&B===t(u)&&(A?(g(D),D=-1):A=!0,z(w,V-q))):(B.sortIndex=ue,e(l,B),y||m||(y=!0,Z(P))),B},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(B){var G=p;return function(){var V=p;p=G;try{return B.apply(this,arguments)}finally{p=V}}}})(T2);C2.exports=T2;var bF=C2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RF=X,rr=bF;function Re(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b2=new Set,ah={};function Bl(n,e){ru(n,e),ru(n+"Capture",e)}function ru(n,e){for(ah[n]=e,n=0;n<e.length;n++)b2.add(e[n])}var io=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),R_=Object.prototype.hasOwnProperty,PF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ME={},wE={};function BF(n){return R_.call(wE,n)?!0:R_.call(ME,n)?!1:PF.test(n)?wE[n]=!0:(ME[n]=!0,!1)}function IF(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function DF(n,e,t,i){if(e===null||typeof e>"u"||IF(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bi(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ti[n]=new Bi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ti[e]=new Bi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ti[n]=new Bi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ti[n]=new Bi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ti[n]=new Bi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ti[n]=new Bi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ti[n]=new Bi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ti[n]=new Bi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ti[n]=new Bi(n,5,!1,n.toLowerCase(),null,!1,!1)});var _A=/[\-:]([a-z])/g;function AA(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(_A,AA);ti[e]=new Bi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(_A,AA);ti[e]=new Bi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(_A,AA);ti[e]=new Bi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ti[n]=new Bi(n,1,!1,n.toLowerCase(),null,!1,!1)});ti.xlinkHref=new Bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ti[n]=new Bi(n,1,!1,n.toLowerCase(),null,!0,!0)});function SA(n,e,t,i){var r=ti.hasOwnProperty(e)?ti[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DF(e,t,r,i)&&(t=null),i||r===null?BF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var fo=RF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ap=Symbol.for("react.element"),Tc=Symbol.for("react.portal"),bc=Symbol.for("react.fragment"),MA=Symbol.for("react.strict_mode"),P_=Symbol.for("react.profiler"),R2=Symbol.for("react.provider"),P2=Symbol.for("react.context"),wA=Symbol.for("react.forward_ref"),B_=Symbol.for("react.suspense"),I_=Symbol.for("react.suspense_list"),EA=Symbol.for("react.memo"),Fo=Symbol.for("react.lazy"),B2=Symbol.for("react.offscreen"),EE=Symbol.iterator;function nf(n){return n===null||typeof n!="object"?null:(n=EE&&n[EE]||n["@@iterator"],typeof n=="function"?n:null)}var mn=Object.assign,Gy;function Pf(n){if(Gy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Gy=e&&e[1]||""}return`
`+Gy+n}var Vy=!1;function Wy(n,e){if(!n||Vy)return"";Vy=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Vy=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Pf(n):""}function LF(n){switch(n.tag){case 5:return Pf(n.type);case 16:return Pf("Lazy");case 13:return Pf("Suspense");case 19:return Pf("SuspenseList");case 0:case 2:case 15:return n=Wy(n.type,!1),n;case 11:return n=Wy(n.type.render,!1),n;case 1:return n=Wy(n.type,!0),n;default:return""}}function D_(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case bc:return"Fragment";case Tc:return"Portal";case P_:return"Profiler";case MA:return"StrictMode";case B_:return"Suspense";case I_:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case P2:return(n.displayName||"Context")+".Consumer";case R2:return(n._context.displayName||"Context")+".Provider";case wA:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case EA:return e=n.displayName||null,e!==null?e:D_(n.type)||"Memo";case Fo:e=n._payload,n=n._init;try{return D_(n(e))}catch{}}return null}function NF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D_(e);case 8:return e===MA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function na(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function I2(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FF(n){var e=I2(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Sp(n){n._valueTracker||(n._valueTracker=FF(n))}function D2(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=I2(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function rg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function L_(n,e){var t=e.checked;return mn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function CE(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=na(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function L2(n,e){e=e.checked,e!=null&&SA(n,"checked",e,!1)}function N_(n,e){L2(n,e);var t=na(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?F_(n,e.type,t):e.hasOwnProperty("defaultValue")&&F_(n,e.type,na(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function TE(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function F_(n,e,t){(e!=="number"||rg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Bf=Array.isArray;function Yc(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+na(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function O_(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return mn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function bE(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Re(92));if(Bf(t)){if(1<t.length)throw Error(Re(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:na(t)}}function N2(n,e){var t=na(e.value),i=na(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function RE(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function F2(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function U_(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?F2(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Mp,O2=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Mp=Mp||document.createElement("div"),Mp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function lh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},OF=["Webkit","ms","Moz","O"];Object.keys(Of).forEach(function(n){OF.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Of[e]=Of[n]})});function U2(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Of.hasOwnProperty(n)&&Of[n]?(""+e).trim():e+"px"}function k2(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=U2(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var UF=mn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function k_(n,e){if(e){if(UF[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function H_(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z_=null;function CA(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var G_=null,Qc=null,Zc=null;function PE(n){if(n=qh(n)){if(typeof G_!="function")throw Error(Re(280));var e=n.stateNode;e&&(e=T0(e),G_(n.stateNode,n.type,e))}}function H2(n){Qc?Zc?Zc.push(n):Zc=[n]:Qc=n}function z2(){if(Qc){var n=Qc,e=Zc;if(Zc=Qc=null,PE(n),e)for(n=0;n<e.length;n++)PE(e[n])}}function G2(n,e){return n(e)}function V2(){}var jy=!1;function W2(n,e,t){if(jy)return n(e,t);jy=!0;try{return G2(n,e,t)}finally{jy=!1,(Qc!==null||Zc!==null)&&(V2(),z2())}}function ch(n,e){var t=n.stateNode;if(t===null)return null;var i=T0(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Re(231,e,typeof t));return t}var V_=!1;if(io)try{var rf={};Object.defineProperty(rf,"passive",{get:function(){V_=!0}}),window.addEventListener("test",rf,rf),window.removeEventListener("test",rf,rf)}catch{V_=!1}function kF(n,e,t,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Uf=!1,sg=null,og=!1,W_=null,HF={onError:function(n){Uf=!0,sg=n}};function zF(n,e,t,i,r,s,o,a,l){Uf=!1,sg=null,kF.apply(HF,arguments)}function GF(n,e,t,i,r,s,o,a,l){if(zF.apply(this,arguments),Uf){if(Uf){var u=sg;Uf=!1,sg=null}else throw Error(Re(198));og||(og=!0,W_=u)}}function Il(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function j2(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function BE(n){if(Il(n)!==n)throw Error(Re(188))}function VF(n){var e=n.alternate;if(!e){if(e=Il(n),e===null)throw Error(Re(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return BE(r),n;if(s===i)return BE(r),e;s=s.sibling}throw Error(Re(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Re(189))}}if(t.alternate!==i)throw Error(Re(190))}if(t.tag!==3)throw Error(Re(188));return t.stateNode.current===t?n:e}function X2(n){return n=VF(n),n!==null?J2(n):null}function J2(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=J2(n);if(e!==null)return e;n=n.sibling}return null}var K2=rr.unstable_scheduleCallback,IE=rr.unstable_cancelCallback,WF=rr.unstable_shouldYield,jF=rr.unstable_requestPaint,En=rr.unstable_now,XF=rr.unstable_getCurrentPriorityLevel,TA=rr.unstable_ImmediatePriority,Y2=rr.unstable_UserBlockingPriority,ag=rr.unstable_NormalPriority,JF=rr.unstable_LowPriority,Q2=rr.unstable_IdlePriority,M0=null,_s=null;function KF(n){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(M0,n,void 0,(n.current.flags&128)===128)}catch{}}var Yr=Math.clz32?Math.clz32:ZF,YF=Math.log,QF=Math.LN2;function ZF(n){return n>>>=0,n===0?32:31-(YF(n)/QF|0)|0}var wp=64,Ep=4194304;function If(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function lg(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=If(a):(s&=o,s!==0&&(i=If(s)))}else o=t&~r,o!==0?i=If(o):s!==0&&(i=If(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Yr(e),r=1<<t,i|=n[t],e&=~r;return i}function qF(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $F(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Yr(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=qF(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function j_(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Z2(){var n=wp;return wp<<=1,!(wp&4194240)&&(wp=64),n}function Xy(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Qh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Yr(e),n[e]=t}function eO(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Yr(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function bA(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Yr(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Jt=0;function q2(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var $2,RA,eP,tP,nP,X_=!1,Cp=[],jo=null,Xo=null,Jo=null,uh=new Map,fh=new Map,ko=[],tO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DE(n,e){switch(n){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":uh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(e.pointerId)}}function sf(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=qh(e),e!==null&&RA(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function nO(n,e,t,i,r){switch(e){case"focusin":return jo=sf(jo,n,e,t,i,r),!0;case"dragenter":return Xo=sf(Xo,n,e,t,i,r),!0;case"mouseover":return Jo=sf(Jo,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return uh.set(s,sf(uh.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,fh.set(s,sf(fh.get(s)||null,n,e,t,i,r)),!0}return!1}function iP(n){var e=Za(n.target);if(e!==null){var t=Il(e);if(t!==null){if(e=t.tag,e===13){if(e=j2(t),e!==null){n.blockedOn=e,nP(n.priority,function(){eP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Gm(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=J_(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);z_=i,t.target.dispatchEvent(i),z_=null}else return e=qh(t),e!==null&&RA(e),n.blockedOn=t,!1;e.shift()}return!0}function LE(n,e,t){Gm(n)&&t.delete(e)}function iO(){X_=!1,jo!==null&&Gm(jo)&&(jo=null),Xo!==null&&Gm(Xo)&&(Xo=null),Jo!==null&&Gm(Jo)&&(Jo=null),uh.forEach(LE),fh.forEach(LE)}function of(n,e){n.blockedOn===e&&(n.blockedOn=null,X_||(X_=!0,rr.unstable_scheduleCallback(rr.unstable_NormalPriority,iO)))}function hh(n){function e(r){return of(r,n)}if(0<Cp.length){of(Cp[0],n);for(var t=1;t<Cp.length;t++){var i=Cp[t];i.blockedOn===n&&(i.blockedOn=null)}}for(jo!==null&&of(jo,n),Xo!==null&&of(Xo,n),Jo!==null&&of(Jo,n),uh.forEach(e),fh.forEach(e),t=0;t<ko.length;t++)i=ko[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ko.length&&(t=ko[0],t.blockedOn===null);)iP(t),t.blockedOn===null&&ko.shift()}var qc=fo.ReactCurrentBatchConfig,cg=!0;function rO(n,e,t,i){var r=Jt,s=qc.transition;qc.transition=null;try{Jt=1,PA(n,e,t,i)}finally{Jt=r,qc.transition=s}}function sO(n,e,t,i){var r=Jt,s=qc.transition;qc.transition=null;try{Jt=4,PA(n,e,t,i)}finally{Jt=r,qc.transition=s}}function PA(n,e,t,i){if(cg){var r=J_(n,e,t,i);if(r===null)nx(n,e,i,ug,t),DE(n,i);else if(nO(r,n,e,t,i))i.stopPropagation();else if(DE(n,i),e&4&&-1<tO.indexOf(n)){for(;r!==null;){var s=qh(r);if(s!==null&&$2(s),s=J_(n,e,t,i),s===null&&nx(n,e,i,ug,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else nx(n,e,i,null,t)}}var ug=null;function J_(n,e,t,i){if(ug=null,n=CA(i),n=Za(n),n!==null)if(e=Il(n),e===null)n=null;else if(t=e.tag,t===13){if(n=j2(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ug=n,null}function rP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XF()){case TA:return 1;case Y2:return 4;case ag:case JF:return 16;case Q2:return 536870912;default:return 16}default:return 16}}var Go=null,BA=null,Vm=null;function sP(){if(Vm)return Vm;var n,e=BA,t=e.length,i,r="value"in Go?Go.value:Go.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Vm=r.slice(n,1<i?1-i:void 0)}function Wm(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Tp(){return!0}function NE(){return!1}function cr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Tp:NE,this.isPropagationStopped=NE,this}return mn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Tp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Tp)},persist:function(){},isPersistent:Tp}),e}var Mu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},IA=cr(Mu),Zh=mn({},Mu,{view:0,detail:0}),oO=cr(Zh),Jy,Ky,af,w0=mn({},Zh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DA,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==af&&(af&&n.type==="mousemove"?(Jy=n.screenX-af.screenX,Ky=n.screenY-af.screenY):Ky=Jy=0,af=n),Jy)},movementY:function(n){return"movementY"in n?n.movementY:Ky}}),FE=cr(w0),aO=mn({},w0,{dataTransfer:0}),lO=cr(aO),cO=mn({},Zh,{relatedTarget:0}),Yy=cr(cO),uO=mn({},Mu,{animationName:0,elapsedTime:0,pseudoElement:0}),fO=cr(uO),hO=mn({},Mu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),dO=cr(hO),pO=mn({},Mu,{data:0}),OE=cr(pO),mO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yO(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=vO[n])?!!e[n]:!1}function DA(){return yO}var xO=mn({},Zh,{key:function(n){if(n.key){var e=mO[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Wm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?gO[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DA,charCode:function(n){return n.type==="keypress"?Wm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Wm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),_O=cr(xO),AO=mn({},w0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UE=cr(AO),SO=mn({},Zh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DA}),MO=cr(SO),wO=mn({},Mu,{propertyName:0,elapsedTime:0,pseudoElement:0}),EO=cr(wO),CO=mn({},w0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),TO=cr(CO),bO=[9,13,27,32],LA=io&&"CompositionEvent"in window,kf=null;io&&"documentMode"in document&&(kf=document.documentMode);var RO=io&&"TextEvent"in window&&!kf,oP=io&&(!LA||kf&&8<kf&&11>=kf),kE=" ",HE=!1;function aP(n,e){switch(n){case"keyup":return bO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Rc=!1;function PO(n,e){switch(n){case"compositionend":return lP(e);case"keypress":return e.which!==32?null:(HE=!0,kE);case"textInput":return n=e.data,n===kE&&HE?null:n;default:return null}}function BO(n,e){if(Rc)return n==="compositionend"||!LA&&aP(n,e)?(n=sP(),Vm=BA=Go=null,Rc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oP&&e.locale!=="ko"?null:e.data;default:return null}}var IO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!IO[n.type]:e==="textarea"}function cP(n,e,t,i){H2(i),e=fg(e,"onChange"),0<e.length&&(t=new IA("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Hf=null,dh=null;function DO(n){_P(n,0)}function E0(n){var e=Ic(n);if(D2(e))return n}function LO(n,e){if(n==="change")return e}var uP=!1;if(io){var Qy;if(io){var Zy="oninput"in document;if(!Zy){var GE=document.createElement("div");GE.setAttribute("oninput","return;"),Zy=typeof GE.oninput=="function"}Qy=Zy}else Qy=!1;uP=Qy&&(!document.documentMode||9<document.documentMode)}function VE(){Hf&&(Hf.detachEvent("onpropertychange",fP),dh=Hf=null)}function fP(n){if(n.propertyName==="value"&&E0(dh)){var e=[];cP(e,dh,n,CA(n)),W2(DO,e)}}function NO(n,e,t){n==="focusin"?(VE(),Hf=e,dh=t,Hf.attachEvent("onpropertychange",fP)):n==="focusout"&&VE()}function FO(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return E0(dh)}function OO(n,e){if(n==="click")return E0(e)}function UO(n,e){if(n==="input"||n==="change")return E0(e)}function kO(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var $r=typeof Object.is=="function"?Object.is:kO;function ph(n,e){if($r(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!R_.call(e,r)||!$r(n[r],e[r]))return!1}return!0}function WE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jE(n,e){var t=WE(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=WE(t)}}function hP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?hP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function dP(){for(var n=window,e=rg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=rg(n.document)}return e}function NA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function HO(n){var e=dP(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&hP(t.ownerDocument.documentElement,t)){if(i!==null&&NA(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=jE(t,s);var o=jE(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var zO=io&&"documentMode"in document&&11>=document.documentMode,Pc=null,K_=null,zf=null,Y_=!1;function XE(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Y_||Pc==null||Pc!==rg(i)||(i=Pc,"selectionStart"in i&&NA(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),zf&&ph(zf,i)||(zf=i,i=fg(K_,"onSelect"),0<i.length&&(e=new IA("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Pc)))}function bp(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Bc={animationend:bp("Animation","AnimationEnd"),animationiteration:bp("Animation","AnimationIteration"),animationstart:bp("Animation","AnimationStart"),transitionend:bp("Transition","TransitionEnd")},qy={},pP={};io&&(pP=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function C0(n){if(qy[n])return qy[n];if(!Bc[n])return n;var e=Bc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in pP)return qy[n]=e[t];return n}var mP=C0("animationend"),gP=C0("animationiteration"),vP=C0("animationstart"),yP=C0("transitionend"),xP=new Map,JE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ca(n,e){xP.set(n,e),Bl(e,[n])}for(var $y=0;$y<JE.length;$y++){var ex=JE[$y],GO=ex.toLowerCase(),VO=ex[0].toUpperCase()+ex.slice(1);ca(GO,"on"+VO)}ca(mP,"onAnimationEnd");ca(gP,"onAnimationIteration");ca(vP,"onAnimationStart");ca("dblclick","onDoubleClick");ca("focusin","onFocus");ca("focusout","onBlur");ca(yP,"onTransitionEnd");ru("onMouseEnter",["mouseout","mouseover"]);ru("onMouseLeave",["mouseout","mouseover"]);ru("onPointerEnter",["pointerout","pointerover"]);ru("onPointerLeave",["pointerout","pointerover"]);Bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Df="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Df));function KE(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,GF(i,e,void 0,n),n.currentTarget=null}function _P(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;KE(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;KE(r,a,u),s=l}}}if(og)throw n=W_,og=!1,W_=null,n}function nn(n,e){var t=e[e1];t===void 0&&(t=e[e1]=new Set);var i=n+"__bubble";t.has(i)||(AP(e,n,2,!1),t.add(i))}function tx(n,e,t){var i=0;e&&(i|=4),AP(t,n,i,e)}var Rp="_reactListening"+Math.random().toString(36).slice(2);function mh(n){if(!n[Rp]){n[Rp]=!0,b2.forEach(function(t){t!=="selectionchange"&&(WO.has(t)||tx(t,!1,n),tx(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Rp]||(e[Rp]=!0,tx("selectionchange",!1,e))}}function AP(n,e,t,i){switch(rP(e)){case 1:var r=rO;break;case 4:r=sO;break;default:r=PA}t=r.bind(null,e,t,n),r=void 0,!V_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function nx(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Za(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}W2(function(){var u=s,h=CA(t),d=[];e:{var p=xP.get(n);if(p!==void 0){var m=IA,y=n;switch(n){case"keypress":if(Wm(t)===0)break e;case"keydown":case"keyup":m=_O;break;case"focusin":y="focus",m=Yy;break;case"focusout":y="blur",m=Yy;break;case"beforeblur":case"afterblur":m=Yy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=FE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=lO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=MO;break;case mP:case gP:case vP:m=fO;break;case yP:m=EO;break;case"scroll":m=oO;break;case"wheel":m=TO;break;case"copy":case"cut":case"paste":m=dO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=UE}var A=(e&4)!==0,x=!A&&n==="scroll",g=A?p!==null?p+"Capture":null:p;A=[];for(var _=u,M;_!==null;){M=_;var w=M.stateNode;if(M.tag===5&&w!==null&&(M=w,g!==null&&(w=ch(_,g),w!=null&&A.push(gh(_,w,M)))),x)break;_=_.return}0<A.length&&(p=new m(p,y,null,t,h),d.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==z_&&(y=t.relatedTarget||t.fromElement)&&(Za(y)||y[ro]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=u,y=y?Za(y):null,y!==null&&(x=Il(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(A=FE,w="onMouseLeave",g="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(A=UE,w="onPointerLeave",g="onPointerEnter",_="pointer"),x=m==null?p:Ic(m),M=y==null?p:Ic(y),p=new A(w,_+"leave",m,t,h),p.target=x,p.relatedTarget=M,w=null,Za(h)===u&&(A=new A(g,_+"enter",y,t,h),A.target=M,A.relatedTarget=x,w=A),x=w,m&&y)t:{for(A=m,g=y,_=0,M=A;M;M=tc(M))_++;for(M=0,w=g;w;w=tc(w))M++;for(;0<_-M;)A=tc(A),_--;for(;0<M-_;)g=tc(g),M--;for(;_--;){if(A===g||g!==null&&A===g.alternate)break t;A=tc(A),g=tc(g)}A=null}else A=null;m!==null&&YE(d,p,m,A,!1),y!==null&&x!==null&&YE(d,x,y,A,!0)}}e:{if(p=u?Ic(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var P=LO;else if(zE(p))if(uP)P=UO;else{P=FO;var b=NO}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=OO);if(P&&(P=P(n,u))){cP(d,P,t,h);break e}b&&b(n,p,u),n==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&F_(p,"number",p.value)}switch(b=u?Ic(u):window,n){case"focusin":(zE(b)||b.contentEditable==="true")&&(Pc=b,K_=u,zf=null);break;case"focusout":zf=K_=Pc=null;break;case"mousedown":Y_=!0;break;case"contextmenu":case"mouseup":case"dragend":Y_=!1,XE(d,t,h);break;case"selectionchange":if(zO)break;case"keydown":case"keyup":XE(d,t,h)}var I;if(LA)e:{switch(n){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Rc?aP(n,t)&&(D="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(oP&&t.locale!=="ko"&&(Rc||D!=="onCompositionStart"?D==="onCompositionEnd"&&Rc&&(I=sP()):(Go=h,BA="value"in Go?Go.value:Go.textContent,Rc=!0)),b=fg(u,D),0<b.length&&(D=new OE(D,n,null,t,h),d.push({event:D,listeners:b}),I?D.data=I:(I=lP(t),I!==null&&(D.data=I)))),(I=RO?PO(n,t):BO(n,t))&&(u=fg(u,"onBeforeInput"),0<u.length&&(h=new OE("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=I))}_P(d,e)})}function gh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function fg(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ch(n,t),s!=null&&i.unshift(gh(n,s,r)),s=ch(n,e),s!=null&&i.push(gh(n,s,r))),n=n.return}return i}function tc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function YE(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=ch(t,s),l!=null&&o.unshift(gh(t,l,a))):r||(l=ch(t,s),l!=null&&o.push(gh(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var jO=/\r\n?/g,XO=/\u0000|\uFFFD/g;function QE(n){return(typeof n=="string"?n:""+n).replace(jO,`
`).replace(XO,"")}function Pp(n,e,t){if(e=QE(e),QE(n)!==e&&t)throw Error(Re(425))}function hg(){}var Q_=null,Z_=null;function q_(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $_=typeof setTimeout=="function"?setTimeout:void 0,JO=typeof clearTimeout=="function"?clearTimeout:void 0,ZE=typeof Promise=="function"?Promise:void 0,KO=typeof queueMicrotask=="function"?queueMicrotask:typeof ZE<"u"?function(n){return ZE.resolve(null).then(n).catch(YO)}:$_;function YO(n){setTimeout(function(){throw n})}function ix(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),hh(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);hh(e)}function Ko(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function qE(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var wu=Math.random().toString(36).slice(2),ys="__reactFiber$"+wu,vh="__reactProps$"+wu,ro="__reactContainer$"+wu,e1="__reactEvents$"+wu,QO="__reactListeners$"+wu,ZO="__reactHandles$"+wu;function Za(n){var e=n[ys];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ro]||t[ys]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=qE(n);n!==null;){if(t=n[ys])return t;n=qE(n)}return e}n=t,t=n.parentNode}return null}function qh(n){return n=n[ys]||n[ro],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ic(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Re(33))}function T0(n){return n[vh]||null}var t1=[],Dc=-1;function ua(n){return{current:n}}function sn(n){0>Dc||(n.current=t1[Dc],t1[Dc]=null,Dc--)}function en(n,e){Dc++,t1[Dc]=n.current,n.current=e}var ia={},xi=ua(ia),zi=ua(!1),yl=ia;function su(n,e){var t=n.type.contextTypes;if(!t)return ia;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Gi(n){return n=n.childContextTypes,n!=null}function dg(){sn(zi),sn(xi)}function $E(n,e,t){if(xi.current!==ia)throw Error(Re(168));en(xi,e),en(zi,t)}function SP(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Re(108,NF(n)||"Unknown",r));return mn({},t,i)}function pg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ia,yl=xi.current,en(xi,n),en(zi,zi.current),!0}function eC(n,e,t){var i=n.stateNode;if(!i)throw Error(Re(169));t?(n=SP(n,e,yl),i.__reactInternalMemoizedMergedChildContext=n,sn(zi),sn(xi),en(xi,n)):sn(zi),en(zi,t)}var Gs=null,b0=!1,rx=!1;function MP(n){Gs===null?Gs=[n]:Gs.push(n)}function qO(n){b0=!0,MP(n)}function fa(){if(!rx&&Gs!==null){rx=!0;var n=0,e=Jt;try{var t=Gs;for(Jt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Gs=null,b0=!1}catch(r){throw Gs!==null&&(Gs=Gs.slice(n+1)),K2(TA,fa),r}finally{Jt=e,rx=!1}}return null}var Lc=[],Nc=0,mg=null,gg=0,Er=[],Cr=0,xl=null,Xs=1,Js="";function za(n,e){Lc[Nc++]=gg,Lc[Nc++]=mg,mg=n,gg=e}function wP(n,e,t){Er[Cr++]=Xs,Er[Cr++]=Js,Er[Cr++]=xl,xl=n;var i=Xs;n=Js;var r=32-Yr(i)-1;i&=~(1<<r),t+=1;var s=32-Yr(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Xs=1<<32-Yr(e)+r|t<<r|i,Js=s+n}else Xs=1<<s|t<<r|i,Js=n}function FA(n){n.return!==null&&(za(n,1),wP(n,1,0))}function OA(n){for(;n===mg;)mg=Lc[--Nc],Lc[Nc]=null,gg=Lc[--Nc],Lc[Nc]=null;for(;n===xl;)xl=Er[--Cr],Er[Cr]=null,Js=Er[--Cr],Er[Cr]=null,Xs=Er[--Cr],Er[Cr]=null}var nr=null,$i=null,cn=!1,Jr=null;function EP(n,e){var t=br(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function tC(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,nr=n,$i=Ko(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,nr=n,$i=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=xl!==null?{id:Xs,overflow:Js}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=br(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,nr=n,$i=null,!0):!1;default:return!1}}function n1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function i1(n){if(cn){var e=$i;if(e){var t=e;if(!tC(n,e)){if(n1(n))throw Error(Re(418));e=Ko(t.nextSibling);var i=nr;e&&tC(n,e)?EP(i,t):(n.flags=n.flags&-4097|2,cn=!1,nr=n)}}else{if(n1(n))throw Error(Re(418));n.flags=n.flags&-4097|2,cn=!1,nr=n}}}function nC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;nr=n}function Bp(n){if(n!==nr)return!1;if(!cn)return nC(n),cn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!q_(n.type,n.memoizedProps)),e&&(e=$i)){if(n1(n))throw CP(),Error(Re(418));for(;e;)EP(n,e),e=Ko(e.nextSibling)}if(nC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Re(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){$i=Ko(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}$i=null}}else $i=nr?Ko(n.stateNode.nextSibling):null;return!0}function CP(){for(var n=$i;n;)n=Ko(n.nextSibling)}function ou(){$i=nr=null,cn=!1}function UA(n){Jr===null?Jr=[n]:Jr.push(n)}var $O=fo.ReactCurrentBatchConfig;function lf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Re(309));var i=t.stateNode}if(!i)throw Error(Re(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Re(284));if(!t._owner)throw Error(Re(290,n))}return n}function Ip(n,e){throw n=Object.prototype.toString.call(e),Error(Re(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function iC(n){var e=n._init;return e(n._payload)}function TP(n){function e(g,_){if(n){var M=g.deletions;M===null?(g.deletions=[_],g.flags|=16):M.push(_)}}function t(g,_){if(!n)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function i(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function r(g,_){return g=qo(g,_),g.index=0,g.sibling=null,g}function s(g,_,M){return g.index=M,n?(M=g.alternate,M!==null?(M=M.index,M<_?(g.flags|=2,_):M):(g.flags|=2,_)):(g.flags|=1048576,_)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,_,M,w){return _===null||_.tag!==6?(_=fx(M,g.mode,w),_.return=g,_):(_=r(_,M),_.return=g,_)}function l(g,_,M,w){var P=M.type;return P===bc?h(g,_,M.props.children,w,M.key):_!==null&&(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Fo&&iC(P)===_.type)?(w=r(_,M.props),w.ref=lf(g,_,M),w.return=g,w):(w=Zm(M.type,M.key,M.props,null,g.mode,w),w.ref=lf(g,_,M),w.return=g,w)}function u(g,_,M,w){return _===null||_.tag!==4||_.stateNode.containerInfo!==M.containerInfo||_.stateNode.implementation!==M.implementation?(_=hx(M,g.mode,w),_.return=g,_):(_=r(_,M.children||[]),_.return=g,_)}function h(g,_,M,w,P){return _===null||_.tag!==7?(_=ul(M,g.mode,w,P),_.return=g,_):(_=r(_,M),_.return=g,_)}function d(g,_,M){if(typeof _=="string"&&_!==""||typeof _=="number")return _=fx(""+_,g.mode,M),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ap:return M=Zm(_.type,_.key,_.props,null,g.mode,M),M.ref=lf(g,null,_),M.return=g,M;case Tc:return _=hx(_,g.mode,M),_.return=g,_;case Fo:var w=_._init;return d(g,w(_._payload),M)}if(Bf(_)||nf(_))return _=ul(_,g.mode,M,null),_.return=g,_;Ip(g,_)}return null}function p(g,_,M,w){var P=_!==null?_.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return P!==null?null:a(g,_,""+M,w);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Ap:return M.key===P?l(g,_,M,w):null;case Tc:return M.key===P?u(g,_,M,w):null;case Fo:return P=M._init,p(g,_,P(M._payload),w)}if(Bf(M)||nf(M))return P!==null?null:h(g,_,M,w,null);Ip(g,M)}return null}function m(g,_,M,w,P){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(M)||null,a(_,g,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ap:return g=g.get(w.key===null?M:w.key)||null,l(_,g,w,P);case Tc:return g=g.get(w.key===null?M:w.key)||null,u(_,g,w,P);case Fo:var b=w._init;return m(g,_,M,b(w._payload),P)}if(Bf(w)||nf(w))return g=g.get(M)||null,h(_,g,w,P,null);Ip(_,w)}return null}function y(g,_,M,w){for(var P=null,b=null,I=_,D=_=0,R=null;I!==null&&D<M.length;D++){I.index>D?(R=I,I=null):R=I.sibling;var T=p(g,I,M[D],w);if(T===null){I===null&&(I=R);break}n&&I&&T.alternate===null&&e(g,I),_=s(T,_,D),b===null?P=T:b.sibling=T,b=T,I=R}if(D===M.length)return t(g,I),cn&&za(g,D),P;if(I===null){for(;D<M.length;D++)I=d(g,M[D],w),I!==null&&(_=s(I,_,D),b===null?P=I:b.sibling=I,b=I);return cn&&za(g,D),P}for(I=i(g,I);D<M.length;D++)R=m(I,g,D,M[D],w),R!==null&&(n&&R.alternate!==null&&I.delete(R.key===null?D:R.key),_=s(R,_,D),b===null?P=R:b.sibling=R,b=R);return n&&I.forEach(function(N){return e(g,N)}),cn&&za(g,D),P}function A(g,_,M,w){var P=nf(M);if(typeof P!="function")throw Error(Re(150));if(M=P.call(M),M==null)throw Error(Re(151));for(var b=P=null,I=_,D=_=0,R=null,T=M.next();I!==null&&!T.done;D++,T=M.next()){I.index>D?(R=I,I=null):R=I.sibling;var N=p(g,I,T.value,w);if(N===null){I===null&&(I=R);break}n&&I&&N.alternate===null&&e(g,I),_=s(N,_,D),b===null?P=N:b.sibling=N,b=N,I=R}if(T.done)return t(g,I),cn&&za(g,D),P;if(I===null){for(;!T.done;D++,T=M.next())T=d(g,T.value,w),T!==null&&(_=s(T,_,D),b===null?P=T:b.sibling=T,b=T);return cn&&za(g,D),P}for(I=i(g,I);!T.done;D++,T=M.next())T=m(I,g,D,T.value,w),T!==null&&(n&&T.alternate!==null&&I.delete(T.key===null?D:T.key),_=s(T,_,D),b===null?P=T:b.sibling=T,b=T);return n&&I.forEach(function(Q){return e(g,Q)}),cn&&za(g,D),P}function x(g,_,M,w){if(typeof M=="object"&&M!==null&&M.type===bc&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case Ap:e:{for(var P=M.key,b=_;b!==null;){if(b.key===P){if(P=M.type,P===bc){if(b.tag===7){t(g,b.sibling),_=r(b,M.props.children),_.return=g,g=_;break e}}else if(b.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Fo&&iC(P)===b.type){t(g,b.sibling),_=r(b,M.props),_.ref=lf(g,b,M),_.return=g,g=_;break e}t(g,b);break}else e(g,b);b=b.sibling}M.type===bc?(_=ul(M.props.children,g.mode,w,M.key),_.return=g,g=_):(w=Zm(M.type,M.key,M.props,null,g.mode,w),w.ref=lf(g,_,M),w.return=g,g=w)}return o(g);case Tc:e:{for(b=M.key;_!==null;){if(_.key===b)if(_.tag===4&&_.stateNode.containerInfo===M.containerInfo&&_.stateNode.implementation===M.implementation){t(g,_.sibling),_=r(_,M.children||[]),_.return=g,g=_;break e}else{t(g,_);break}else e(g,_);_=_.sibling}_=hx(M,g.mode,w),_.return=g,g=_}return o(g);case Fo:return b=M._init,x(g,_,b(M._payload),w)}if(Bf(M))return y(g,_,M,w);if(nf(M))return A(g,_,M,w);Ip(g,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,_!==null&&_.tag===6?(t(g,_.sibling),_=r(_,M),_.return=g,g=_):(t(g,_),_=fx(M,g.mode,w),_.return=g,g=_),o(g)):t(g,_)}return x}var au=TP(!0),bP=TP(!1),vg=ua(null),yg=null,Fc=null,kA=null;function HA(){kA=Fc=yg=null}function zA(n){var e=vg.current;sn(vg),n._currentValue=e}function r1(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function $c(n,e){yg=n,kA=Fc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ki=!0),n.firstContext=null)}function Ir(n){var e=n._currentValue;if(kA!==n)if(n={context:n,memoizedValue:e,next:null},Fc===null){if(yg===null)throw Error(Re(308));Fc=n,yg.dependencies={lanes:0,firstContext:n}}else Fc=Fc.next=n;return e}var qa=null;function GA(n){qa===null?qa=[n]:qa.push(n)}function RP(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,GA(e)):(t.next=r.next,r.next=t),e.interleaved=t,so(n,i)}function so(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Oo=!1;function VA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Zs(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Yo(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Ot&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,so(n,t)}return r=i.interleaved,r===null?(e.next=e,GA(i)):(e.next=r.next,r.next=e),i.interleaved=e,so(n,t)}function jm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,bA(n,t)}}function rC(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function xg(n,e,t,i){var r=n.updateQueue;Oo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,A=a;switch(p=e,m=t,A.tag){case 1:if(y=A.payload,typeof y=="function"){d=y.call(m,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=A.payload,p=typeof y=="function"?y.call(m,d,p):y,p==null)break e;d=mn({},d,p);break e;case 2:Oo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Al|=o,n.lanes=o,n.memoizedState=d}}function sC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Re(191,r));r.call(i)}}}var $h={},As=ua($h),yh=ua($h),xh=ua($h);function $a(n){if(n===$h)throw Error(Re(174));return n}function WA(n,e){switch(en(xh,e),en(yh,n),en(As,$h),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:U_(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=U_(e,n)}sn(As),en(As,e)}function lu(){sn(As),sn(yh),sn(xh)}function BP(n){$a(xh.current);var e=$a(As.current),t=U_(e,n.type);e!==t&&(en(yh,n),en(As,t))}function jA(n){yh.current===n&&(sn(As),sn(yh))}var fn=ua(0);function _g(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sx=[];function XA(){for(var n=0;n<sx.length;n++)sx[n]._workInProgressVersionPrimary=null;sx.length=0}var Xm=fo.ReactCurrentDispatcher,ox=fo.ReactCurrentBatchConfig,_l=0,pn=null,Ln=null,jn=null,Ag=!1,Gf=!1,_h=0,eU=0;function oi(){throw Error(Re(321))}function JA(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!$r(n[t],e[t]))return!1;return!0}function KA(n,e,t,i,r,s){if(_l=s,pn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xm.current=n===null||n.memoizedState===null?rU:sU,n=t(i,r),Gf){s=0;do{if(Gf=!1,_h=0,25<=s)throw Error(Re(301));s+=1,jn=Ln=null,e.updateQueue=null,Xm.current=oU,n=t(i,r)}while(Gf)}if(Xm.current=Sg,e=Ln!==null&&Ln.next!==null,_l=0,jn=Ln=pn=null,Ag=!1,e)throw Error(Re(300));return n}function YA(){var n=_h!==0;return _h=0,n}function vs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jn===null?pn.memoizedState=jn=n:jn=jn.next=n,jn}function Dr(){if(Ln===null){var n=pn.alternate;n=n!==null?n.memoizedState:null}else n=Ln.next;var e=jn===null?pn.memoizedState:jn.next;if(e!==null)jn=e,Ln=n;else{if(n===null)throw Error(Re(310));Ln=n,n={memoizedState:Ln.memoizedState,baseState:Ln.baseState,baseQueue:Ln.baseQueue,queue:Ln.queue,next:null},jn===null?pn.memoizedState=jn=n:jn=jn.next=n}return jn}function Ah(n,e){return typeof e=="function"?e(n):e}function ax(n){var e=Dr(),t=e.queue;if(t===null)throw Error(Re(311));t.lastRenderedReducer=n;var i=Ln,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((_l&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,pn.lanes|=h,Al|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,$r(i,e.memoizedState)||(ki=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,pn.lanes|=s,Al|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function lx(n){var e=Dr(),t=e.queue;if(t===null)throw Error(Re(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);$r(s,e.memoizedState)||(ki=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function IP(){}function DP(n,e){var t=pn,i=Dr(),r=e(),s=!$r(i.memoizedState,r);if(s&&(i.memoizedState=r,ki=!0),i=i.queue,QA(FP.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||jn!==null&&jn.memoizedState.tag&1){if(t.flags|=2048,Sh(9,NP.bind(null,t,i,r,e),void 0,null),Xn===null)throw Error(Re(349));_l&30||LP(t,e,r)}return r}function LP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function NP(n,e,t,i){e.value=t,e.getSnapshot=i,OP(e)&&UP(n)}function FP(n,e,t){return t(function(){OP(e)&&UP(n)})}function OP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!$r(n,t)}catch{return!0}}function UP(n){var e=so(n,1);e!==null&&Qr(e,n,1,-1)}function oC(n){var e=vs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ah,lastRenderedState:n},e.queue=n,n=n.dispatch=iU.bind(null,pn,n),[e.memoizedState,n]}function Sh(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=pn.updateQueue,e===null?(e={lastEffect:null,stores:null},pn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function kP(){return Dr().memoizedState}function Jm(n,e,t,i){var r=vs();pn.flags|=n,r.memoizedState=Sh(1|e,t,void 0,i===void 0?null:i)}function R0(n,e,t,i){var r=Dr();i=i===void 0?null:i;var s=void 0;if(Ln!==null){var o=Ln.memoizedState;if(s=o.destroy,i!==null&&JA(i,o.deps)){r.memoizedState=Sh(e,t,s,i);return}}pn.flags|=n,r.memoizedState=Sh(1|e,t,s,i)}function aC(n,e){return Jm(8390656,8,n,e)}function QA(n,e){return R0(2048,8,n,e)}function HP(n,e){return R0(4,2,n,e)}function zP(n,e){return R0(4,4,n,e)}function GP(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function VP(n,e,t){return t=t!=null?t.concat([n]):null,R0(4,4,GP.bind(null,e,n),t)}function ZA(){}function WP(n,e){var t=Dr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&JA(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function jP(n,e){var t=Dr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&JA(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function XP(n,e,t){return _l&21?($r(t,e)||(t=Z2(),pn.lanes|=t,Al|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ki=!0),n.memoizedState=t)}function tU(n,e){var t=Jt;Jt=t!==0&&4>t?t:4,n(!0);var i=ox.transition;ox.transition={};try{n(!1),e()}finally{Jt=t,ox.transition=i}}function JP(){return Dr().memoizedState}function nU(n,e,t){var i=Zo(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},KP(n))YP(e,t);else if(t=RP(n,e,t,i),t!==null){var r=bi();Qr(t,n,i,r),QP(t,e,i)}}function iU(n,e,t){var i=Zo(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(KP(n))YP(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,$r(a,o)){var l=e.interleaved;l===null?(r.next=r,GA(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=RP(n,e,r,i),t!==null&&(r=bi(),Qr(t,n,i,r),QP(t,e,i))}}function KP(n){var e=n.alternate;return n===pn||e!==null&&e===pn}function YP(n,e){Gf=Ag=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function QP(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,bA(n,t)}}var Sg={readContext:Ir,useCallback:oi,useContext:oi,useEffect:oi,useImperativeHandle:oi,useInsertionEffect:oi,useLayoutEffect:oi,useMemo:oi,useReducer:oi,useRef:oi,useState:oi,useDebugValue:oi,useDeferredValue:oi,useTransition:oi,useMutableSource:oi,useSyncExternalStore:oi,useId:oi,unstable_isNewReconciler:!1},rU={readContext:Ir,useCallback:function(n,e){return vs().memoizedState=[n,e===void 0?null:e],n},useContext:Ir,useEffect:aC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Jm(4194308,4,GP.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Jm(4194308,4,n,e)},useInsertionEffect:function(n,e){return Jm(4,2,n,e)},useMemo:function(n,e){var t=vs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=vs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=nU.bind(null,pn,n),[i.memoizedState,n]},useRef:function(n){var e=vs();return n={current:n},e.memoizedState=n},useState:oC,useDebugValue:ZA,useDeferredValue:function(n){return vs().memoizedState=n},useTransition:function(){var n=oC(!1),e=n[0];return n=tU.bind(null,n[1]),vs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=pn,r=vs();if(cn){if(t===void 0)throw Error(Re(407));t=t()}else{if(t=e(),Xn===null)throw Error(Re(349));_l&30||LP(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,aC(FP.bind(null,i,s,n),[n]),i.flags|=2048,Sh(9,NP.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=vs(),e=Xn.identifierPrefix;if(cn){var t=Js,i=Xs;t=(i&~(1<<32-Yr(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=_h++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=eU++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},sU={readContext:Ir,useCallback:WP,useContext:Ir,useEffect:QA,useImperativeHandle:VP,useInsertionEffect:HP,useLayoutEffect:zP,useMemo:jP,useReducer:ax,useRef:kP,useState:function(){return ax(Ah)},useDebugValue:ZA,useDeferredValue:function(n){var e=Dr();return XP(e,Ln.memoizedState,n)},useTransition:function(){var n=ax(Ah)[0],e=Dr().memoizedState;return[n,e]},useMutableSource:IP,useSyncExternalStore:DP,useId:JP,unstable_isNewReconciler:!1},oU={readContext:Ir,useCallback:WP,useContext:Ir,useEffect:QA,useImperativeHandle:VP,useInsertionEffect:HP,useLayoutEffect:zP,useMemo:jP,useReducer:lx,useRef:kP,useState:function(){return lx(Ah)},useDebugValue:ZA,useDeferredValue:function(n){var e=Dr();return Ln===null?e.memoizedState=n:XP(e,Ln.memoizedState,n)},useTransition:function(){var n=lx(Ah)[0],e=Dr().memoizedState;return[n,e]},useMutableSource:IP,useSyncExternalStore:DP,useId:JP,unstable_isNewReconciler:!1};function Vr(n,e){if(n&&n.defaultProps){e=mn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function s1(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:mn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var P0={isMounted:function(n){return(n=n._reactInternals)?Il(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=bi(),r=Zo(n),s=Zs(i,r);s.payload=e,t!=null&&(s.callback=t),e=Yo(n,s,r),e!==null&&(Qr(e,n,r,i),jm(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=bi(),r=Zo(n),s=Zs(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Yo(n,s,r),e!==null&&(Qr(e,n,r,i),jm(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=bi(),i=Zo(n),r=Zs(t,i);r.tag=2,e!=null&&(r.callback=e),e=Yo(n,r,i),e!==null&&(Qr(e,n,i,t),jm(e,n,i))}};function lC(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!ph(t,i)||!ph(r,s):!0}function ZP(n,e,t){var i=!1,r=ia,s=e.contextType;return typeof s=="object"&&s!==null?s=Ir(s):(r=Gi(e)?yl:xi.current,i=e.contextTypes,s=(i=i!=null)?su(n,r):ia),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=P0,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function cC(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&P0.enqueueReplaceState(e,e.state,null)}function o1(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},VA(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ir(s):(s=Gi(e)?yl:xi.current,r.context=su(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(s1(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&P0.enqueueReplaceState(r,r.state,null),xg(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function cu(n,e){try{var t="",i=e;do t+=LF(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function cx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function a1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var aU=typeof WeakMap=="function"?WeakMap:Map;function qP(n,e,t){t=Zs(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){wg||(wg=!0,v1=i),a1(n,e)},t}function $P(n,e,t){t=Zs(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){a1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){a1(n,e),typeof i!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function uC(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new aU;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=AU.bind(null,n,e,t),e.then(n,n))}function fC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function hC(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Zs(-1,1),e.tag=2,Yo(t,e,1))),t.lanes|=1),n)}var lU=fo.ReactCurrentOwner,ki=!1;function Ci(n,e,t,i){e.child=n===null?bP(e,null,t,i):au(e,n.child,t,i)}function dC(n,e,t,i,r){t=t.render;var s=e.ref;return $c(e,r),i=KA(n,e,t,i,s,r),t=YA(),n!==null&&!ki?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,oo(n,e,r)):(cn&&t&&FA(e),e.flags|=1,Ci(n,e,i,r),e.child)}function pC(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!sS(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,eB(n,e,s,i,r)):(n=Zm(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:ph,t(o,i)&&n.ref===e.ref)return oo(n,e,r)}return e.flags|=1,n=qo(s,i),n.ref=e.ref,n.return=e,e.child=n}function eB(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(ph(s,i)&&n.ref===e.ref)if(ki=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(ki=!0);else return e.lanes=n.lanes,oo(n,e,r)}return l1(n,e,t,i,r)}function tB(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},en(Uc,Zi),Zi|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,en(Uc,Zi),Zi|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,en(Uc,Zi),Zi|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,en(Uc,Zi),Zi|=i;return Ci(n,e,r,t),e.child}function nB(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function l1(n,e,t,i,r){var s=Gi(t)?yl:xi.current;return s=su(e,s),$c(e,r),t=KA(n,e,t,i,s,r),i=YA(),n!==null&&!ki?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,oo(n,e,r)):(cn&&i&&FA(e),e.flags|=1,Ci(n,e,t,r),e.child)}function mC(n,e,t,i,r){if(Gi(t)){var s=!0;pg(e)}else s=!1;if($c(e,r),e.stateNode===null)Km(n,e),ZP(e,t,i),o1(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Ir(u):(u=Gi(t)?yl:xi.current,u=su(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&cC(e,o,i,u),Oo=!1;var p=e.memoizedState;o.state=p,xg(e,i,o,r),l=e.memoizedState,a!==i||p!==l||zi.current||Oo?(typeof h=="function"&&(s1(e,t,h,i),l=e.memoizedState),(a=Oo||lC(e,t,a,i,p,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,PP(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Vr(e.type,a),o.props=u,d=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ir(l):(l=Gi(t)?yl:xi.current,l=su(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&cC(e,o,i,l),Oo=!1,p=e.memoizedState,o.state=p,xg(e,i,o,r);var y=e.memoizedState;a!==d||p!==y||zi.current||Oo?(typeof m=="function"&&(s1(e,t,m,i),y=e.memoizedState),(u=Oo||lC(e,t,u,i,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return c1(n,e,t,i,s,r)}function c1(n,e,t,i,r,s){nB(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&eC(e,t,!1),oo(n,e,s);i=e.stateNode,lU.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=au(e,n.child,null,s),e.child=au(e,null,a,s)):Ci(n,e,a,s),e.memoizedState=i.state,r&&eC(e,t,!0),e.child}function iB(n){var e=n.stateNode;e.pendingContext?$E(n,e.pendingContext,e.pendingContext!==e.context):e.context&&$E(n,e.context,!1),WA(n,e.containerInfo)}function gC(n,e,t,i,r){return ou(),UA(r),e.flags|=256,Ci(n,e,t,i),e.child}var u1={dehydrated:null,treeContext:null,retryLane:0};function f1(n){return{baseLanes:n,cachePool:null,transitions:null}}function rB(n,e,t){var i=e.pendingProps,r=fn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),en(fn,r&1),n===null)return i1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=D0(o,i,0,null),n=ul(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=f1(t),e.memoizedState=u1,n):qA(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return cU(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=qo(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=qo(a,s):(s=ul(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?f1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=u1,i}return s=n.child,n=s.sibling,i=qo(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function qA(n,e){return e=D0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Dp(n,e,t,i){return i!==null&&UA(i),au(e,n.child,null,t),n=qA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function cU(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=cx(Error(Re(422))),Dp(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=D0({mode:"visible",children:i.children},r,0,null),s=ul(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&au(e,n.child,null,o),e.child.memoizedState=f1(o),e.memoizedState=u1,s);if(!(e.mode&1))return Dp(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Re(419)),i=cx(s,i,void 0),Dp(n,e,o,i)}if(a=(o&n.childLanes)!==0,ki||a){if(i=Xn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,so(n,r),Qr(i,n,r,-1))}return rS(),i=cx(Error(Re(421))),Dp(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=SU.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,$i=Ko(r.nextSibling),nr=e,cn=!0,Jr=null,n!==null&&(Er[Cr++]=Xs,Er[Cr++]=Js,Er[Cr++]=xl,Xs=n.id,Js=n.overflow,xl=e),e=qA(e,i.children),e.flags|=4096,e)}function vC(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),r1(n.return,e,t)}function ux(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function sB(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ci(n,e,i.children,t),i=fn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vC(n,t,e);else if(n.tag===19)vC(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(en(fn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&_g(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),ux(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&_g(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}ux(e,!0,t,null,s);break;case"together":ux(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Km(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function oo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Al|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Re(153));if(e.child!==null){for(n=e.child,t=qo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=qo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function uU(n,e,t){switch(e.tag){case 3:iB(e),ou();break;case 5:BP(e);break;case 1:Gi(e.type)&&pg(e);break;case 4:WA(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;en(vg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(en(fn,fn.current&1),e.flags|=128,null):t&e.child.childLanes?rB(n,e,t):(en(fn,fn.current&1),n=oo(n,e,t),n!==null?n.sibling:null);en(fn,fn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return sB(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),en(fn,fn.current),i)break;return null;case 22:case 23:return e.lanes=0,tB(n,e,t)}return oo(n,e,t)}var oB,h1,aB,lB;oB=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};h1=function(){};aB=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,$a(As.current);var s=null;switch(t){case"input":r=L_(n,r),i=L_(n,i),s=[];break;case"select":r=mn({},r,{value:void 0}),i=mn({},i,{value:void 0}),s=[];break;case"textarea":r=O_(n,r),i=O_(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=hg)}k_(t,i);var o;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ah.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ah.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&nn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};lB=function(n,e,t,i){t!==i&&(e.flags|=4)};function cf(n,e){if(!cn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ai(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function fU(n,e,t){var i=e.pendingProps;switch(OA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(e),null;case 1:return Gi(e.type)&&dg(),ai(e),null;case 3:return i=e.stateNode,lu(),sn(zi),sn(xi),XA(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Bp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jr!==null&&(_1(Jr),Jr=null))),h1(n,e),ai(e),null;case 5:jA(e);var r=$a(xh.current);if(t=e.type,n!==null&&e.stateNode!=null)aB(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Re(166));return ai(e),null}if(n=$a(As.current),Bp(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[ys]=e,i[vh]=s,n=(e.mode&1)!==0,t){case"dialog":nn("cancel",i),nn("close",i);break;case"iframe":case"object":case"embed":nn("load",i);break;case"video":case"audio":for(r=0;r<Df.length;r++)nn(Df[r],i);break;case"source":nn("error",i);break;case"img":case"image":case"link":nn("error",i),nn("load",i);break;case"details":nn("toggle",i);break;case"input":CE(i,s),nn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},nn("invalid",i);break;case"textarea":bE(i,s),nn("invalid",i)}k_(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Pp(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Pp(i.textContent,a,n),r=["children",""+a]):ah.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&nn("scroll",i)}switch(t){case"input":Sp(i),TE(i,s,!0);break;case"textarea":Sp(i),RE(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=hg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=F2(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[ys]=e,n[vh]=i,oB(n,e,!1,!1),e.stateNode=n;e:{switch(o=H_(t,i),t){case"dialog":nn("cancel",n),nn("close",n),r=i;break;case"iframe":case"object":case"embed":nn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Df.length;r++)nn(Df[r],n);r=i;break;case"source":nn("error",n),r=i;break;case"img":case"image":case"link":nn("error",n),nn("load",n),r=i;break;case"details":nn("toggle",n),r=i;break;case"input":CE(n,i),r=L_(n,i),nn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=mn({},i,{value:void 0}),nn("invalid",n);break;case"textarea":bE(n,i),r=O_(n,i),nn("invalid",n);break;default:r=i}k_(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?k2(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&O2(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&lh(n,l):typeof l=="number"&&lh(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ah.hasOwnProperty(s)?l!=null&&s==="onScroll"&&nn("scroll",n):l!=null&&SA(n,s,l,o))}switch(t){case"input":Sp(n),TE(n,i,!1);break;case"textarea":Sp(n),RE(n);break;case"option":i.value!=null&&n.setAttribute("value",""+na(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Yc(n,!!i.multiple,s,!1):i.defaultValue!=null&&Yc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=hg)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ai(e),null;case 6:if(n&&e.stateNode!=null)lB(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Re(166));if(t=$a(xh.current),$a(As.current),Bp(e)){if(i=e.stateNode,t=e.memoizedProps,i[ys]=e,(s=i.nodeValue!==t)&&(n=nr,n!==null))switch(n.tag){case 3:Pp(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Pp(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[ys]=e,e.stateNode=i}return ai(e),null;case 13:if(sn(fn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(cn&&$i!==null&&e.mode&1&&!(e.flags&128))CP(),ou(),e.flags|=98560,s=!1;else if(s=Bp(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Re(317));s[ys]=e}else ou(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ai(e),s=!1}else Jr!==null&&(_1(Jr),Jr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||fn.current&1?Fn===0&&(Fn=3):rS())),e.updateQueue!==null&&(e.flags|=4),ai(e),null);case 4:return lu(),h1(n,e),n===null&&mh(e.stateNode.containerInfo),ai(e),null;case 10:return zA(e.type._context),ai(e),null;case 17:return Gi(e.type)&&dg(),ai(e),null;case 19:if(sn(fn),s=e.memoizedState,s===null)return ai(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)cf(s,!1);else{if(Fn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=_g(n),o!==null){for(e.flags|=128,cf(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return en(fn,fn.current&1|2),e.child}n=n.sibling}s.tail!==null&&En()>uu&&(e.flags|=128,i=!0,cf(s,!1),e.lanes=4194304)}else{if(!i)if(n=_g(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),cf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!cn)return ai(e),null}else 2*En()-s.renderingStartTime>uu&&t!==1073741824&&(e.flags|=128,i=!0,cf(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=En(),e.sibling=null,t=fn.current,en(fn,i?t&1|2:t&1),e):(ai(e),null);case 22:case 23:return iS(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Zi&1073741824&&(ai(e),e.subtreeFlags&6&&(e.flags|=8192)):ai(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function hU(n,e){switch(OA(e),e.tag){case 1:return Gi(e.type)&&dg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return lu(),sn(zi),sn(xi),XA(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return jA(e),null;case 13:if(sn(fn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));ou()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return sn(fn),null;case 4:return lu(),null;case 10:return zA(e.type._context),null;case 22:case 23:return iS(),null;case 24:return null;default:return null}}var Lp=!1,di=!1,dU=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function Oc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){xn(n,e,i)}else t.current=null}function d1(n,e,t){try{t()}catch(i){xn(n,e,i)}}var yC=!1;function pU(n,e){if(Q_=cg,n=dP(),NA(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=n,p=null;t:for(;;){for(var m;d!==t||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===n)break t;if(p===t&&++u===r&&(a=o),p===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Z_={focusedElem:n,selectionRange:t},cg=!1,Qe=e;Qe!==null;)if(e=Qe,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Qe=n;else for(;Qe!==null;){e=Qe;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var A=y.memoizedProps,x=y.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?A:Vr(e.type,A),x);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(w){xn(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,Qe=n;break}Qe=e.return}return y=yC,yC=!1,y}function Vf(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&d1(e,t,s)}r=r.next}while(r!==i)}}function B0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function p1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function cB(n){var e=n.alternate;e!==null&&(n.alternate=null,cB(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ys],delete e[vh],delete e[e1],delete e[QO],delete e[ZO])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function uB(n){return n.tag===5||n.tag===3||n.tag===4}function xC(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||uB(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function m1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=hg));else if(i!==4&&(n=n.child,n!==null))for(m1(n,e,t),n=n.sibling;n!==null;)m1(n,e,t),n=n.sibling}function g1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(g1(n,e,t),n=n.sibling;n!==null;)g1(n,e,t),n=n.sibling}var Qn=null,Xr=!1;function Mo(n,e,t){for(t=t.child;t!==null;)fB(n,e,t),t=t.sibling}function fB(n,e,t){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(M0,t)}catch{}switch(t.tag){case 5:di||Oc(t,e);case 6:var i=Qn,r=Xr;Qn=null,Mo(n,e,t),Qn=i,Xr=r,Qn!==null&&(Xr?(n=Qn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Qn.removeChild(t.stateNode));break;case 18:Qn!==null&&(Xr?(n=Qn,t=t.stateNode,n.nodeType===8?ix(n.parentNode,t):n.nodeType===1&&ix(n,t),hh(n)):ix(Qn,t.stateNode));break;case 4:i=Qn,r=Xr,Qn=t.stateNode.containerInfo,Xr=!0,Mo(n,e,t),Qn=i,Xr=r;break;case 0:case 11:case 14:case 15:if(!di&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&d1(t,e,o),r=r.next}while(r!==i)}Mo(n,e,t);break;case 1:if(!di&&(Oc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){xn(t,e,a)}Mo(n,e,t);break;case 21:Mo(n,e,t);break;case 22:t.mode&1?(di=(i=di)||t.memoizedState!==null,Mo(n,e,t),di=i):Mo(n,e,t);break;default:Mo(n,e,t)}}function _C(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new dU),e.forEach(function(i){var r=MU.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function kr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qn=a.stateNode,Xr=!1;break e;case 3:Qn=a.stateNode.containerInfo,Xr=!0;break e;case 4:Qn=a.stateNode.containerInfo,Xr=!0;break e}a=a.return}if(Qn===null)throw Error(Re(160));fB(s,o,r),Qn=null,Xr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){xn(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hB(e,n),e=e.sibling}function hB(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(kr(e,n),gs(n),i&4){try{Vf(3,n,n.return),B0(3,n)}catch(A){xn(n,n.return,A)}try{Vf(5,n,n.return)}catch(A){xn(n,n.return,A)}}break;case 1:kr(e,n),gs(n),i&512&&t!==null&&Oc(t,t.return);break;case 5:if(kr(e,n),gs(n),i&512&&t!==null&&Oc(t,t.return),n.flags&32){var r=n.stateNode;try{lh(r,"")}catch(A){xn(n,n.return,A)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&L2(r,s),H_(a,o);var u=H_(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?k2(r,d):h==="dangerouslySetInnerHTML"?O2(r,d):h==="children"?lh(r,d):SA(r,h,d,u)}switch(a){case"input":N_(r,s);break;case"textarea":N2(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Yc(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Yc(r,!!s.multiple,s.defaultValue,!0):Yc(r,!!s.multiple,s.multiple?[]:"",!1))}r[vh]=s}catch(A){xn(n,n.return,A)}}break;case 6:if(kr(e,n),gs(n),i&4){if(n.stateNode===null)throw Error(Re(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(A){xn(n,n.return,A)}}break;case 3:if(kr(e,n),gs(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{hh(e.containerInfo)}catch(A){xn(n,n.return,A)}break;case 4:kr(e,n),gs(n);break;case 13:kr(e,n),gs(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(tS=En())),i&4&&_C(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(di=(u=di)||h,kr(e,n),di=u):kr(e,n),gs(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(Qe=n,h=n.child;h!==null;){for(d=Qe=h;Qe!==null;){switch(p=Qe,m=p.child,p.tag){case 0:case 11:case 14:case 15:Vf(4,p,p.return);break;case 1:Oc(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(A){xn(i,t,A)}}break;case 5:Oc(p,p.return);break;case 22:if(p.memoizedState!==null){SC(d);continue}}m!==null?(m.return=p,Qe=m):SC(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=U2("display",o))}catch(A){xn(n,n.return,A)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(A){xn(n,n.return,A)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:kr(e,n),gs(n),i&4&&_C(n);break;case 21:break;default:kr(e,n),gs(n)}}function gs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(uB(t)){var i=t;break e}t=t.return}throw Error(Re(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(lh(r,""),i.flags&=-33);var s=xC(n);g1(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=xC(n);m1(n,a,o);break;default:throw Error(Re(161))}}catch(l){xn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function mU(n,e,t){Qe=n,dB(n)}function dB(n,e,t){for(var i=(n.mode&1)!==0;Qe!==null;){var r=Qe,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Lp;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||di;a=Lp;var u=di;if(Lp=o,(di=l)&&!u)for(Qe=r;Qe!==null;)o=Qe,l=o.child,o.tag===22&&o.memoizedState!==null?MC(r):l!==null?(l.return=o,Qe=l):MC(r);for(;s!==null;)Qe=s,dB(s),s=s.sibling;Qe=r,Lp=a,di=u}AC(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Qe=s):AC(n)}}function AC(n){for(;Qe!==null;){var e=Qe;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:di||B0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!di)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Vr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sC(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}sC(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&hh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}di||e.flags&512&&p1(e)}catch(p){xn(e,e.return,p)}}if(e===n){Qe=null;break}if(t=e.sibling,t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function SC(n){for(;Qe!==null;){var e=Qe;if(e===n){Qe=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Qe=t;break}Qe=e.return}}function MC(n){for(;Qe!==null;){var e=Qe;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{B0(4,e)}catch(l){xn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){xn(e,r,l)}}var s=e.return;try{p1(e)}catch(l){xn(e,s,l)}break;case 5:var o=e.return;try{p1(e)}catch(l){xn(e,o,l)}}}catch(l){xn(e,e.return,l)}if(e===n){Qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Qe=a;break}Qe=e.return}}var gU=Math.ceil,Mg=fo.ReactCurrentDispatcher,$A=fo.ReactCurrentOwner,Br=fo.ReactCurrentBatchConfig,Ot=0,Xn=null,Bn=null,$n=0,Zi=0,Uc=ua(0),Fn=0,Mh=null,Al=0,I0=0,eS=0,Wf=null,Ui=null,tS=0,uu=1/0,Hs=null,wg=!1,v1=null,Qo=null,Np=!1,Vo=null,Eg=0,jf=0,y1=null,Ym=-1,Qm=0;function bi(){return Ot&6?En():Ym!==-1?Ym:Ym=En()}function Zo(n){return n.mode&1?Ot&2&&$n!==0?$n&-$n:$O.transition!==null?(Qm===0&&(Qm=Z2()),Qm):(n=Jt,n!==0||(n=window.event,n=n===void 0?16:rP(n.type)),n):1}function Qr(n,e,t,i){if(50<jf)throw jf=0,y1=null,Error(Re(185));Qh(n,t,i),(!(Ot&2)||n!==Xn)&&(n===Xn&&(!(Ot&2)&&(I0|=t),Fn===4&&Ho(n,$n)),Vi(n,i),t===1&&Ot===0&&!(e.mode&1)&&(uu=En()+500,b0&&fa()))}function Vi(n,e){var t=n.callbackNode;$F(n,e);var i=lg(n,n===Xn?$n:0);if(i===0)t!==null&&IE(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&IE(t),e===1)n.tag===0?qO(wC.bind(null,n)):MP(wC.bind(null,n)),KO(function(){!(Ot&6)&&fa()}),t=null;else{switch(q2(i)){case 1:t=TA;break;case 4:t=Y2;break;case 16:t=ag;break;case 536870912:t=Q2;break;default:t=ag}t=AB(t,pB.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function pB(n,e){if(Ym=-1,Qm=0,Ot&6)throw Error(Re(327));var t=n.callbackNode;if(eu()&&n.callbackNode!==t)return null;var i=lg(n,n===Xn?$n:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Cg(n,i);else{e=i;var r=Ot;Ot|=2;var s=gB();(Xn!==n||$n!==e)&&(Hs=null,uu=En()+500,cl(n,e));do try{xU();break}catch(a){mB(n,a)}while(!0);HA(),Mg.current=s,Ot=r,Bn!==null?e=0:(Xn=null,$n=0,e=Fn)}if(e!==0){if(e===2&&(r=j_(n),r!==0&&(i=r,e=x1(n,r))),e===1)throw t=Mh,cl(n,0),Ho(n,i),Vi(n,En()),t;if(e===6)Ho(n,i);else{if(r=n.current.alternate,!(i&30)&&!vU(r)&&(e=Cg(n,i),e===2&&(s=j_(n),s!==0&&(i=s,e=x1(n,s))),e===1))throw t=Mh,cl(n,0),Ho(n,i),Vi(n,En()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Re(345));case 2:Ga(n,Ui,Hs);break;case 3:if(Ho(n,i),(i&130023424)===i&&(e=tS+500-En(),10<e)){if(lg(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){bi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=$_(Ga.bind(null,n,Ui,Hs),e);break}Ga(n,Ui,Hs);break;case 4:if(Ho(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Yr(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=En()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*gU(i/1960))-i,10<i){n.timeoutHandle=$_(Ga.bind(null,n,Ui,Hs),i);break}Ga(n,Ui,Hs);break;case 5:Ga(n,Ui,Hs);break;default:throw Error(Re(329))}}}return Vi(n,En()),n.callbackNode===t?pB.bind(null,n):null}function x1(n,e){var t=Wf;return n.current.memoizedState.isDehydrated&&(cl(n,e).flags|=256),n=Cg(n,e),n!==2&&(e=Ui,Ui=t,e!==null&&_1(e)),n}function _1(n){Ui===null?Ui=n:Ui.push.apply(Ui,n)}function vU(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!$r(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ho(n,e){for(e&=~eS,e&=~I0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Yr(e),i=1<<t;n[t]=-1,e&=~i}}function wC(n){if(Ot&6)throw Error(Re(327));eu();var e=lg(n,0);if(!(e&1))return Vi(n,En()),null;var t=Cg(n,e);if(n.tag!==0&&t===2){var i=j_(n);i!==0&&(e=i,t=x1(n,i))}if(t===1)throw t=Mh,cl(n,0),Ho(n,e),Vi(n,En()),t;if(t===6)throw Error(Re(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ga(n,Ui,Hs),Vi(n,En()),null}function nS(n,e){var t=Ot;Ot|=1;try{return n(e)}finally{Ot=t,Ot===0&&(uu=En()+500,b0&&fa())}}function Sl(n){Vo!==null&&Vo.tag===0&&!(Ot&6)&&eu();var e=Ot;Ot|=1;var t=Br.transition,i=Jt;try{if(Br.transition=null,Jt=1,n)return n()}finally{Jt=i,Br.transition=t,Ot=e,!(Ot&6)&&fa()}}function iS(){Zi=Uc.current,sn(Uc)}function cl(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,JO(t)),Bn!==null)for(t=Bn.return;t!==null;){var i=t;switch(OA(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&dg();break;case 3:lu(),sn(zi),sn(xi),XA();break;case 5:jA(i);break;case 4:lu();break;case 13:sn(fn);break;case 19:sn(fn);break;case 10:zA(i.type._context);break;case 22:case 23:iS()}t=t.return}if(Xn=n,Bn=n=qo(n.current,null),$n=Zi=e,Fn=0,Mh=null,eS=I0=Al=0,Ui=Wf=null,qa!==null){for(e=0;e<qa.length;e++)if(t=qa[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}qa=null}return n}function mB(n,e){do{var t=Bn;try{if(HA(),Xm.current=Sg,Ag){for(var i=pn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ag=!1}if(_l=0,jn=Ln=pn=null,Gf=!1,_h=0,$A.current=null,t===null||t.return===null){Fn=1,Mh=e,Bn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=$n,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=fC(o);if(m!==null){m.flags&=-257,hC(m,o,a,s,e),m.mode&1&&uC(s,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var A=new Set;A.add(l),e.updateQueue=A}else y.add(l);break e}else{if(!(e&1)){uC(s,u,e),rS();break e}l=Error(Re(426))}}else if(cn&&a.mode&1){var x=fC(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),hC(x,o,a,s,e),UA(cu(l,a));break e}}s=l=cu(l,a),Fn!==4&&(Fn=2),Wf===null?Wf=[s]:Wf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=qP(s,l,e);rC(s,g);break e;case 1:a=l;var _=s.type,M=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Qo===null||!Qo.has(M)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=$P(s,a,e);rC(s,w);break e}}s=s.return}while(s!==null)}yB(t)}catch(P){e=P,Bn===t&&t!==null&&(Bn=t=t.return);continue}break}while(!0)}function gB(){var n=Mg.current;return Mg.current=Sg,n===null?Sg:n}function rS(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Xn===null||!(Al&268435455)&&!(I0&268435455)||Ho(Xn,$n)}function Cg(n,e){var t=Ot;Ot|=2;var i=gB();(Xn!==n||$n!==e)&&(Hs=null,cl(n,e));do try{yU();break}catch(r){mB(n,r)}while(!0);if(HA(),Ot=t,Mg.current=i,Bn!==null)throw Error(Re(261));return Xn=null,$n=0,Fn}function yU(){for(;Bn!==null;)vB(Bn)}function xU(){for(;Bn!==null&&!WF();)vB(Bn)}function vB(n){var e=_B(n.alternate,n,Zi);n.memoizedProps=n.pendingProps,e===null?yB(n):Bn=e,$A.current=null}function yB(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=hU(t,e),t!==null){t.flags&=32767,Bn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Fn=6,Bn=null;return}}else if(t=fU(t,e,Zi),t!==null){Bn=t;return}if(e=e.sibling,e!==null){Bn=e;return}Bn=e=n}while(e!==null);Fn===0&&(Fn=5)}function Ga(n,e,t){var i=Jt,r=Br.transition;try{Br.transition=null,Jt=1,_U(n,e,t,i)}finally{Br.transition=r,Jt=i}return null}function _U(n,e,t,i){do eu();while(Vo!==null);if(Ot&6)throw Error(Re(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Re(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(eO(n,s),n===Xn&&(Bn=Xn=null,$n=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Np||(Np=!0,AB(ag,function(){return eu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Br.transition,Br.transition=null;var o=Jt;Jt=1;var a=Ot;Ot|=4,$A.current=null,pU(n,t),hB(t,n),HO(Z_),cg=!!Q_,Z_=Q_=null,n.current=t,mU(t),jF(),Ot=a,Jt=o,Br.transition=s}else n.current=t;if(Np&&(Np=!1,Vo=n,Eg=r),s=n.pendingLanes,s===0&&(Qo=null),KF(t.stateNode),Vi(n,En()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(wg)throw wg=!1,n=v1,v1=null,n;return Eg&1&&n.tag!==0&&eu(),s=n.pendingLanes,s&1?n===y1?jf++:(jf=0,y1=n):jf=0,fa(),null}function eu(){if(Vo!==null){var n=q2(Eg),e=Br.transition,t=Jt;try{if(Br.transition=null,Jt=16>n?16:n,Vo===null)var i=!1;else{if(n=Vo,Vo=null,Eg=0,Ot&6)throw Error(Re(331));var r=Ot;for(Ot|=4,Qe=n.current;Qe!==null;){var s=Qe,o=s.child;if(Qe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Qe=u;Qe!==null;){var h=Qe;switch(h.tag){case 0:case 11:case 15:Vf(8,h,s)}var d=h.child;if(d!==null)d.return=h,Qe=d;else for(;Qe!==null;){h=Qe;var p=h.sibling,m=h.return;if(cB(h),h===u){Qe=null;break}if(p!==null){p.return=m,Qe=p;break}Qe=m}}}var y=s.alternate;if(y!==null){var A=y.child;if(A!==null){y.child=null;do{var x=A.sibling;A.sibling=null,A=x}while(A!==null)}}Qe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Qe=o;else e:for(;Qe!==null;){if(s=Qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vf(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Qe=g;break e}Qe=s.return}}var _=n.current;for(Qe=_;Qe!==null;){o=Qe;var M=o.child;if(o.subtreeFlags&2064&&M!==null)M.return=o,Qe=M;else e:for(o=_;Qe!==null;){if(a=Qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:B0(9,a)}}catch(P){xn(a,a.return,P)}if(a===o){Qe=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Qe=w;break e}Qe=a.return}}if(Ot=r,fa(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(M0,n)}catch{}i=!0}return i}finally{Jt=t,Br.transition=e}}return!1}function EC(n,e,t){e=cu(t,e),e=qP(n,e,1),n=Yo(n,e,1),e=bi(),n!==null&&(Qh(n,1,e),Vi(n,e))}function xn(n,e,t){if(n.tag===3)EC(n,n,t);else for(;e!==null;){if(e.tag===3){EC(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Qo===null||!Qo.has(i))){n=cu(t,n),n=$P(e,n,1),e=Yo(e,n,1),n=bi(),e!==null&&(Qh(e,1,n),Vi(e,n));break}}e=e.return}}function AU(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=bi(),n.pingedLanes|=n.suspendedLanes&t,Xn===n&&($n&t)===t&&(Fn===4||Fn===3&&($n&130023424)===$n&&500>En()-tS?cl(n,0):eS|=t),Vi(n,e)}function xB(n,e){e===0&&(n.mode&1?(e=Ep,Ep<<=1,!(Ep&130023424)&&(Ep=4194304)):e=1);var t=bi();n=so(n,e),n!==null&&(Qh(n,e,t),Vi(n,t))}function SU(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),xB(n,t)}function MU(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Re(314))}i!==null&&i.delete(e),xB(n,t)}var _B;_B=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||zi.current)ki=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ki=!1,uU(n,e,t);ki=!!(n.flags&131072)}else ki=!1,cn&&e.flags&1048576&&wP(e,gg,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Km(n,e),n=e.pendingProps;var r=su(e,xi.current);$c(e,t),r=KA(null,e,i,n,r,t);var s=YA();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gi(i)?(s=!0,pg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,VA(e),r.updater=P0,e.stateNode=r,r._reactInternals=e,o1(e,i,n,t),e=c1(null,e,i,!0,s,t)):(e.tag=0,cn&&s&&FA(e),Ci(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Km(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=EU(i),n=Vr(i,n),r){case 0:e=l1(null,e,i,n,t);break e;case 1:e=mC(null,e,i,n,t);break e;case 11:e=dC(null,e,i,n,t);break e;case 14:e=pC(null,e,i,Vr(i.type,n),t);break e}throw Error(Re(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),l1(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),mC(n,e,i,r,t);case 3:e:{if(iB(e),n===null)throw Error(Re(387));i=e.pendingProps,s=e.memoizedState,r=s.element,PP(n,e),xg(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=cu(Error(Re(423)),e),e=gC(n,e,i,t,r);break e}else if(i!==r){r=cu(Error(Re(424)),e),e=gC(n,e,i,t,r);break e}else for($i=Ko(e.stateNode.containerInfo.firstChild),nr=e,cn=!0,Jr=null,t=bP(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ou(),i===r){e=oo(n,e,t);break e}Ci(n,e,i,t)}e=e.child}return e;case 5:return BP(e),n===null&&i1(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,q_(i,r)?o=null:s!==null&&q_(i,s)&&(e.flags|=32),nB(n,e),Ci(n,e,o,t),e.child;case 6:return n===null&&i1(e),null;case 13:return rB(n,e,t);case 4:return WA(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=au(e,null,i,t):Ci(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),dC(n,e,i,r,t);case 7:return Ci(n,e,e.pendingProps,t),e.child;case 8:return Ci(n,e,e.pendingProps.children,t),e.child;case 12:return Ci(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,en(vg,i._currentValue),i._currentValue=o,s!==null)if($r(s.value,o)){if(s.children===r.children&&!zi.current){e=oo(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Zs(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),r1(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Re(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),r1(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ci(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,$c(e,t),r=Ir(r),i=i(r),e.flags|=1,Ci(n,e,i,t),e.child;case 14:return i=e.type,r=Vr(i,e.pendingProps),r=Vr(i.type,r),pC(n,e,i,r,t);case 15:return eB(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Vr(i,r),Km(n,e),e.tag=1,Gi(i)?(n=!0,pg(e)):n=!1,$c(e,t),ZP(e,i,r),o1(e,i,r,t),c1(null,e,i,!0,n,t);case 19:return sB(n,e,t);case 22:return tB(n,e,t)}throw Error(Re(156,e.tag))};function AB(n,e){return K2(n,e)}function wU(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(n,e,t,i){return new wU(n,e,t,i)}function sS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function EU(n){if(typeof n=="function")return sS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===wA)return 11;if(n===EA)return 14}return 2}function qo(n,e){var t=n.alternate;return t===null?(t=br(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Zm(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")sS(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case bc:return ul(t.children,r,s,e);case MA:o=8,r|=8;break;case P_:return n=br(12,t,e,r|2),n.elementType=P_,n.lanes=s,n;case B_:return n=br(13,t,e,r),n.elementType=B_,n.lanes=s,n;case I_:return n=br(19,t,e,r),n.elementType=I_,n.lanes=s,n;case B2:return D0(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R2:o=10;break e;case P2:o=9;break e;case wA:o=11;break e;case EA:o=14;break e;case Fo:o=16,i=null;break e}throw Error(Re(130,n==null?n:typeof n,""))}return e=br(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function ul(n,e,t,i){return n=br(7,n,i,e),n.lanes=t,n}function D0(n,e,t,i){return n=br(22,n,i,e),n.elementType=B2,n.lanes=t,n.stateNode={isHidden:!1},n}function fx(n,e,t){return n=br(6,n,null,e),n.lanes=t,n}function hx(n,e,t){return e=br(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function CU(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xy(0),this.expirationTimes=Xy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xy(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function oS(n,e,t,i,r,s,o,a,l){return n=new CU(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=br(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},VA(s),n}function TU(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function SB(n){if(!n)return ia;n=n._reactInternals;e:{if(Il(n)!==n||n.tag!==1)throw Error(Re(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(n.tag===1){var t=n.type;if(Gi(t))return SP(n,t,e)}return e}function MB(n,e,t,i,r,s,o,a,l){return n=oS(t,i,!0,n,r,s,o,a,l),n.context=SB(null),t=n.current,i=bi(),r=Zo(t),s=Zs(i,r),s.callback=e??null,Yo(t,s,r),n.current.lanes=r,Qh(n,r,i),Vi(n,i),n}function L0(n,e,t,i){var r=e.current,s=bi(),o=Zo(r);return t=SB(t),e.context===null?e.context=t:e.pendingContext=t,e=Zs(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Yo(r,e,o),n!==null&&(Qr(n,r,o,s),jm(n,r,o)),o}function Tg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function CC(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function aS(n,e){CC(n,e),(n=n.alternate)&&CC(n,e)}function bU(){return null}var wB=typeof reportError=="function"?reportError:function(n){console.error(n)};function lS(n){this._internalRoot=n}N0.prototype.render=lS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Re(409));L0(n,e,null,null)};N0.prototype.unmount=lS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Sl(function(){L0(null,n,null,null)}),e[ro]=null}};function N0(n){this._internalRoot=n}N0.prototype.unstable_scheduleHydration=function(n){if(n){var e=tP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ko.length&&e!==0&&e<ko[t].priority;t++);ko.splice(t,0,n),t===0&&iP(n)}};function cS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function F0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function TC(){}function RU(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Tg(o);s.call(u)}}var o=MB(e,i,n,0,null,!1,!1,"",TC);return n._reactRootContainer=o,n[ro]=o.current,mh(n.nodeType===8?n.parentNode:n),Sl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Tg(l);a.call(u)}}var l=oS(n,0,!1,null,null,!1,!1,"",TC);return n._reactRootContainer=l,n[ro]=l.current,mh(n.nodeType===8?n.parentNode:n),Sl(function(){L0(e,l,t,i)}),l}function O0(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Tg(o);a.call(l)}}L0(e,o,n,r)}else o=RU(t,e,n,r,i);return Tg(o)}$2=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=If(e.pendingLanes);t!==0&&(bA(e,t|1),Vi(e,En()),!(Ot&6)&&(uu=En()+500,fa()))}break;case 13:Sl(function(){var i=so(n,1);if(i!==null){var r=bi();Qr(i,n,1,r)}}),aS(n,1)}};RA=function(n){if(n.tag===13){var e=so(n,134217728);if(e!==null){var t=bi();Qr(e,n,134217728,t)}aS(n,134217728)}};eP=function(n){if(n.tag===13){var e=Zo(n),t=so(n,e);if(t!==null){var i=bi();Qr(t,n,e,i)}aS(n,e)}};tP=function(){return Jt};nP=function(n,e){var t=Jt;try{return Jt=n,e()}finally{Jt=t}};G_=function(n,e,t){switch(e){case"input":if(N_(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=T0(i);if(!r)throw Error(Re(90));D2(i),N_(i,r)}}}break;case"textarea":N2(n,t);break;case"select":e=t.value,e!=null&&Yc(n,!!t.multiple,e,!1)}};G2=nS;V2=Sl;var PU={usingClientEntryPoint:!1,Events:[qh,Ic,T0,H2,z2,nS]},uf={findFiberByHostInstance:Za,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BU={bundleType:uf.bundleType,version:uf.version,rendererPackageName:uf.rendererPackageName,rendererConfig:uf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=X2(n),n===null?null:n.stateNode},findFiberByHostInstance:uf.findFiberByHostInstance||bU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fp.isDisabled&&Fp.supportsFiber)try{M0=Fp.inject(BU),_s=Fp}catch{}}lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PU;lr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cS(e))throw Error(Re(200));return TU(n,e,null,t)};lr.createRoot=function(n,e){if(!cS(n))throw Error(Re(299));var t=!1,i="",r=wB;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=oS(n,1,!1,null,null,t,!1,i,r),n[ro]=e.current,mh(n.nodeType===8?n.parentNode:n),new lS(e)};lr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Re(188)):(n=Object.keys(n).join(","),Error(Re(268,n)));return n=X2(e),n=n===null?null:n.stateNode,n};lr.flushSync=function(n){return Sl(n)};lr.hydrate=function(n,e,t){if(!F0(e))throw Error(Re(200));return O0(null,n,e,!0,t)};lr.hydrateRoot=function(n,e,t){if(!cS(n))throw Error(Re(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=wB;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=MB(e,null,n,1,t??null,r,!1,s,o),n[ro]=e.current,mh(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new N0(e)};lr.render=function(n,e,t){if(!F0(e))throw Error(Re(200));return O0(null,n,e,!1,t)};lr.unmountComponentAtNode=function(n){if(!F0(n))throw Error(Re(40));return n._reactRootContainer?(Sl(function(){O0(null,null,n,!1,function(){n._reactRootContainer=null,n[ro]=null})}),!0):!1};lr.unstable_batchedUpdates=nS;lr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!F0(t))throw Error(Re(200));if(n==null||n._reactInternals===void 0)throw Error(Re(38));return O0(n,e,t,!1,i)};lr.version="18.3.1-next-f1338f8080-20240426";function EB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EB)}catch(n){console.error(n)}}EB(),E2.exports=lr;var uS=E2.exports,CB,bC=uS;CB=b_.createRoot=bC.createRoot,b_.hydrateRoot=bC.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wh(){return wh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},wh.apply(this,arguments)}var el;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(el||(el={}));const RC="popstate";function IU(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return A1("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:bg(r)}return LU(e,t,null,n)}function Zr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function DU(){return Math.random().toString(36).substr(2,8)}function PC(n,e){return{usr:n.state,key:n.key,idx:e}}function A1(n,e,t,i){return t===void 0&&(t=null),wh({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?U0(e):e,{state:t,key:e&&e.key||i||DU()})}function bg(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function U0(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function LU(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=el.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(wh({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=el.Pop;let x=h(),g=x==null?null:x-u;u=x,l&&l({action:a,location:A.location,delta:g})}function p(x,g){a=el.Push;let _=A1(A.location,x,g);u=h()+1;let M=PC(_,u),w=A.createHref(_);try{o.pushState(M,"",w)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;r.location.assign(w)}s&&l&&l({action:a,location:A.location,delta:1})}function m(x,g){a=el.Replace;let _=A1(A.location,x,g);u=h();let M=PC(_,u),w=A.createHref(_);o.replaceState(M,"",w),s&&l&&l({action:a,location:A.location,delta:0})}function y(x){let g=r.location.origin!=="null"?r.location.origin:r.location.href,_=typeof x=="string"?x:bg(x);return _=_.replace(/ $/,"%20"),Zr(g,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,g)}let A={get action(){return a},get location(){return n(r,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(RC,d),l=x,()=>{r.removeEventListener(RC,d),l=null}},createHref(x){return e(r,x)},createURL:y,encodeLocation(x){let g=y(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(x){return o.go(x)}};return A}var BC;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(BC||(BC={}));function TB(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function NU(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?U0(n):n;return{pathname:t?t.startsWith("/")?t:FU(t,e):e,search:UU(i),hash:kU(r)}}function FU(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function dx(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OU(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function bB(n,e){let t=OU(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function RB(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=U0(n):(r=wh({},n),Zr(!r.pathname||!r.pathname.includes("?"),dx("?","pathname","search",r)),Zr(!r.pathname||!r.pathname.includes("#"),dx("#","pathname","hash",r)),Zr(!r.search||!r.search.includes("#"),dx("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;r.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=NU(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const PB=n=>n.join("/").replace(/\/\/+/g,"/"),UU=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kU=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,BB=["post","put","patch","delete"];new Set(BB);const HU=["get",...BB];new Set(HU);/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rg(){return Rg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Rg.apply(this,arguments)}const IB=X.createContext(null),Eu=X.createContext(null),fS=X.createContext(null),k0=X.createContext({outlet:null,matches:[],isDataRoute:!1});function zU(n,e){let{relative:t}=e===void 0?{}:e;H0()||Zr(!1);let{basename:i,navigator:r}=X.useContext(Eu),{hash:s,pathname:o,search:a}=LB(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:PB([i,o])),r.createHref({pathname:l,search:a,hash:s})}function H0(){return X.useContext(fS)!=null}function hS(){return H0()||Zr(!1),X.useContext(fS).location}function DB(n){X.useContext(Eu).static||X.useLayoutEffect(n)}function GU(){let{isDataRoute:n}=X.useContext(k0);return n?JU():VU()}function VU(){H0()||Zr(!1);let n=X.useContext(IB),{basename:e,future:t,navigator:i}=X.useContext(Eu),{matches:r}=X.useContext(k0),{pathname:s}=hS(),o=JSON.stringify(bB(r,t.v7_relativeSplatPath)),a=X.useRef(!1);return DB(()=>{a.current=!0}),X.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=RB(u,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:PB([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,n])}function LB(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=X.useContext(Eu),{matches:r}=X.useContext(k0),{pathname:s}=hS(),o=JSON.stringify(bB(r,i.v7_relativeSplatPath));return X.useMemo(()=>RB(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}var NB=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(NB||{}),FB=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(FB||{});function WU(n){let e=X.useContext(IB);return e||Zr(!1),e}function jU(n){let e=X.useContext(k0);return e||Zr(!1),e}function XU(n){let e=jU(),t=e.matches[e.matches.length-1];return t.route.id||Zr(!1),t.route.id}function JU(){let{router:n}=WU(NB.UseNavigateStable),e=XU(FB.UseNavigateStable),t=X.useRef(!1);return DB(()=>{t.current=!0}),X.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Rg({fromRouteId:e},s)))},[n,e])}function KU(n){let{basename:e="/",children:t=null,location:i,navigationType:r=el.Pop,navigator:s,static:o=!1,future:a}=n;H0()&&Zr(!1);let l=e.replace(/^\/*/,"/"),u=X.useMemo(()=>({basename:l,navigator:s,static:o,future:Rg({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=U0(i));let{pathname:h="/",search:d="",hash:p="",state:m=null,key:y="default"}=i,A=X.useMemo(()=>{let x=TB(h,l);return x==null?null:{location:{pathname:x,search:d,hash:p,state:m,key:y},navigationType:r}},[l,h,d,p,m,y,r]);return A==null?null:X.createElement(Eu.Provider,{value:u},X.createElement(fS.Provider,{children:t,value:A}))}new Promise(()=>{});/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function S1(){return S1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},S1.apply(this,arguments)}function YU(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function QU(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ZU(n,e){return n.button===0&&(!e||e==="_self")&&!QU(n)}const qU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],$U="6";try{window.__reactRouterVersion=$U}catch{}const ek="startTransition",IC=AF[ek];function tk(n){let{basename:e,children:t,future:i,window:r}=n,s=X.useRef();s.current==null&&(s.current=IU({window:r,v5Compat:!0}));let o=s.current,[a,l]=X.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},h=X.useCallback(d=>{u&&IC?IC(()=>l(d)):l(d)},[l,u]);return X.useLayoutEffect(()=>o.listen(h),[o,h]),X.createElement(KU,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const nk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ik=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rk=X.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,p=YU(e,qU),{basename:m}=X.useContext(Eu),y,A=!1;if(typeof u=="string"&&ik.test(u)&&(y=u,nk))try{let M=new URL(window.location.href),w=u.startsWith("//")?new URL(M.protocol+u):new URL(u),P=TB(w.pathname,m);w.origin===M.origin&&P!=null?u=P+w.search+w.hash:A=!0}catch{}let x=zU(u,{relative:r}),g=sk(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,unstable_viewTransition:d});function _(M){i&&i(M),M.defaultPrevented||g(M)}return X.createElement("a",S1({},p,{href:y||x,onClick:A||s?i:_,ref:t,target:l}))});var DC;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(DC||(DC={}));var LC;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(LC||(LC={}));function sk(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=GU(),u=hS(),h=LB(n,{relative:o});return X.useCallback(d=>{if(ZU(d,t)){d.preventDefault();let p=i!==void 0?i:bg(u)===bg(h);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,h,i,r,t,n,s,o,a])}const ok=({src:n,alt:e})=>ne.jsx("div",{className:"circle-container ",children:ne.jsx("img",{src:n,alt:e,className:"circle-image "})});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ed="166",Va={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Wa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},OB=0,M1=1,UB=2,ak=3,kB=0,z0=1,Xf=2,Wr=3,Cs=0,Ri=1,Tr=2,qs=0,fl=1,w1=2,E1=3,C1=4,HB=5,zo=100,zB=101,GB=102,VB=103,WB=104,jB=200,XB=201,JB=202,KB=203,Pg=204,Bg=205,YB=206,QB=207,ZB=208,qB=209,$B=210,eI=211,tI=212,nI=213,iI=214,rI=0,sI=1,oI=2,Eh=3,aI=4,lI=5,cI=6,uI=7,td=0,fI=1,hI=2,Ss=0,dI=1,pI=2,mI=3,dS=4,gI=5,vI=6,yI=7,T1="attached",xI="detached",G0=300,ao=301,ra=302,Ch=303,Th=304,Cu=306,sa=1e3,er=1001,fu=1002,On=1003,V0=1004,lk=1004,tl=1005,ck=1005,An=1006,tu=1007,uk=1007,Rr=1008,fk=1008,es=1009,pS=1010,mS=1011,hu=1012,W0=1013,lo=1014,Hi=1015,Tu=1016,j0=1017,X0=1018,Ml=1020,gS=35902,vS=1021,yS=1022,pi=1023,xS=1024,_S=1025,hl=1026,wl=1027,J0=1028,nd=1029,AS=1030,K0=1031,hk=1032,Y0=1033,Jf=33776,Kf=33777,Yf=33778,Qf=33779,Ig=35840,Dg=35841,Lg=35842,Ng=35843,Fg=36196,Og=37492,Ug=37496,kg=37808,Hg=37809,zg=37810,Gg=37811,Vg=37812,Wg=37813,jg=37814,Xg=37815,Jg=37816,Kg=37817,Yg=37818,Qg=37819,Zg=37820,qg=37821,Zf=36492,$g=36494,e0=36495,SS=36283,t0=36284,n0=36285,i0=36286,_I=2200,AI=2201,SI=2202,du=2300,pu=2301,qm=2302,nl=2400,il=2401,bh=2402,Q0=2500,MS=2501,MI=0,wS=1,r0=2,wI=3200,EI=3201,ha=0,CI=1,Ws="",Mr="srgb",ho="srgb-linear",Z0="display-p3",id="display-p3-linear",Rh="linear",qt="srgb",Ph="rec709",Bh="p3",dk=0,ja=7680,pk=7681,mk=7682,gk=7683,vk=34055,yk=34056,xk=5386,_k=512,Ak=513,Sk=514,Mk=515,wk=516,Ek=517,Ck=518,b1=519,TI=512,bI=513,RI=514,ES=515,PI=516,BI=517,II=518,DI=519,Ih=35044,Tk=35048,bk=35040,Rk=35045,Pk=35049,Bk=35041,Ik=35046,Dk=35050,Lk=35042,Nk="100",R1="300 es",xs=2e3,Dh=2001;class Ts{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const li=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let NC=1234567;const dl=Math.PI/180,mu=180/Math.PI;function ir(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(li[n&255]+li[n>>8&255]+li[n>>16&255]+li[n>>24&255]+"-"+li[e&255]+li[e>>8&255]+"-"+li[e>>16&15|64]+li[e>>24&255]+"-"+li[t&63|128]+li[t>>8&255]+"-"+li[t>>16&255]+li[t>>24&255]+li[i&255]+li[i>>8&255]+li[i>>16&255]+li[i>>24&255]).toLowerCase()}function _n(n,e,t){return Math.max(e,Math.min(t,n))}function CS(n,e){return(n%e+e)%e}function Fk(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Ok(n,e,t){return n!==e?(t-n)/(e-n):0}function qf(n,e,t){return(1-t)*n+t*e}function Uk(n,e,t,i){return qf(n,e,1-Math.exp(-t*i))}function kk(n,e=1){return e-Math.abs(CS(n,e*2)-e)}function Hk(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function zk(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Gk(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Vk(n,e){return n+Math.random()*(e-n)}function Wk(n){return n*(.5-Math.random())}function jk(n){n!==void 0&&(NC=n);let e=NC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Xk(n){return n*dl}function Jk(n){return n*mu}function Kk(n){return(n&n-1)===0&&n!==0}function Yk(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Qk(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Zk(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+i)/2),h=o((e+i)/2),d=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),y=o((i-e)/2);switch(r){case"XYX":n.set(a*h,l*d,l*p,a*u);break;case"YZY":n.set(l*p,a*h,l*d,a*u);break;case"ZXZ":n.set(l*d,l*p,a*h,a*u);break;case"XZX":n.set(a*h,l*y,l*m,a*u);break;case"YXY":n.set(l*m,a*h,l*y,a*u);break;case"ZYZ":n.set(l*y,l*m,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ti(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ct(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const LI={DEG2RAD:dl,RAD2DEG:mu,generateUUID:ir,clamp:_n,euclideanModulo:CS,mapLinear:Fk,inverseLerp:Ok,lerp:qf,damp:Uk,pingpong:kk,smoothstep:Hk,smootherstep:zk,randInt:Gk,randFloat:Vk,randFloatSpread:Wk,seededRandom:jk,degToRad:Xk,radToDeg:Jk,isPowerOfTwo:Kk,ceilPowerOfTwo:Yk,floorPowerOfTwo:Qk,setQuaternionFromProperEuler:Zk,normalize:Ct,denormalize:Ti};class pe{constructor(e=0,t=0){pe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(_n(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Et{constructor(e,t,i,r,s,o,a,l,u){Et.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u)}set(e,t,i,r,s,o,a,l,u){const h=this.elements;return h[0]=e,h[1]=r,h[2]=a,h[3]=t,h[4]=s,h[5]=l,h[6]=i,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],h=i[4],d=i[7],p=i[2],m=i[5],y=i[8],A=r[0],x=r[3],g=r[6],_=r[1],M=r[4],w=r[7],P=r[2],b=r[5],I=r[8];return s[0]=o*A+a*_+l*P,s[3]=o*x+a*M+l*b,s[6]=o*g+a*w+l*I,s[1]=u*A+h*_+d*P,s[4]=u*x+h*M+d*b,s[7]=u*g+h*w+d*I,s[2]=p*A+m*_+y*P,s[5]=p*x+m*M+y*b,s[8]=p*g+m*w+y*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t*o*h-t*a*u-i*s*h+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=h*o-a*u,p=a*l-h*s,m=u*s-o*l,y=t*d+i*p+r*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/y;return e[0]=d*A,e[1]=(r*u-h*i)*A,e[2]=(a*i-r*o)*A,e[3]=p*A,e[4]=(h*t-r*l)*A,e[5]=(r*s-a*t)*A,e[6]=m*A,e[7]=(i*l-u*t)*A,e[8]=(o*t-i*s)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(px.makeScale(e,t)),this}rotate(e){return this.premultiply(px.makeRotation(-e)),this}translate(e,t){return this.premultiply(px.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const px=new Et;function NI(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const qk={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function kc(n,e){return new qk[n](e)}function Lh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function FI(){const n=Lh("canvas");return n.style.display="block",n}const FC={};function TS(n){n in FC||(FC[n]=!0,console.warn(n))}function $k(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}const OC=new Et().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),UC=new Et().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Op={[ho]:{transfer:Rh,primaries:Ph,toReference:n=>n,fromReference:n=>n},[Mr]:{transfer:qt,primaries:Ph,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[id]:{transfer:Rh,primaries:Bh,toReference:n=>n.applyMatrix3(UC),fromReference:n=>n.applyMatrix3(OC)},[Z0]:{transfer:qt,primaries:Bh,toReference:n=>n.convertSRGBToLinear().applyMatrix3(UC),fromReference:n=>n.applyMatrix3(OC).convertLinearToSRGB()}},e4=new Set([ho,id]),Vt={enabled:!0,_workingColorSpace:ho,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!e4.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Op[e].toReference,r=Op[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Op[n].primaries},getTransfer:function(n){return n===Ws?Rh:Op[n].transfer}};function nu(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function mx(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let nc;class OI{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{nc===void 0&&(nc=Lh("canvas")),nc.width=e.width,nc.height=e.height;const i=nc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=nc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Lh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=nu(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(nu(t[i]/255)*255):t[i]=nu(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let t4=0;class rl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:t4++}),this.uuid=ir(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(gx(r[o].image)):s.push(gx(r[o]))}else s=gx(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function gx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?OI.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let n4=0;class on extends Ts{constructor(e=on.DEFAULT_IMAGE,t=on.DEFAULT_MAPPING,i=er,r=er,s=An,o=Rr,a=pi,l=es,u=on.DEFAULT_ANISOTROPY,h=Ws){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:n4++}),this.uuid=ir(),this.name="",this.source=new rl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new pe(0,0),this.repeat=new pe(1,1),this.center=new pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Et,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==G0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case sa:e.x=e.x-Math.floor(e.x);break;case er:e.x=e.x<0?0:1;break;case fu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case sa:e.y=e.y-Math.floor(e.y);break;case er:e.y=e.y<0?0:1;break;case fu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}on.DEFAULT_IMAGE=null;on.DEFAULT_MAPPING=G0;on.DEFAULT_ANISOTROPY=1;class Wt{constructor(e=0,t=0,i=0,r=1){Wt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],h=l[4],d=l[8],p=l[1],m=l[5],y=l[9],A=l[2],x=l[6],g=l[10];if(Math.abs(h-p)<.01&&Math.abs(d-A)<.01&&Math.abs(y-x)<.01){if(Math.abs(h+p)<.1&&Math.abs(d+A)<.1&&Math.abs(y+x)<.1&&Math.abs(u+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(u+1)/2,w=(m+1)/2,P=(g+1)/2,b=(h+p)/4,I=(d+A)/4,D=(y+x)/4;return M>w&&M>P?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=b/i,s=I/i):w>P?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=b/r,s=D/r):P<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(P),i=I/s,r=D/s),this.set(i,r,s,t),this}let _=Math.sqrt((x-y)*(x-y)+(d-A)*(d-A)+(p-h)*(p-h));return Math.abs(_)<.001&&(_=1),this.x=(x-y)/_,this.y=(d-A)/_,this.z=(p-h)/_,this.w=Math.acos((u+m+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class UI extends Ts{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Wt(0,0,e,t),this.scissorTest=!1,this.viewport=new Wt(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:An,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new on(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new rl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ts extends UI{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class q0 extends on{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=On,this.minFilter=On,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class i4 extends ts{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new q0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class bS extends on{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=On,this.minFilter=On,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class r4 extends ts{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new bS(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Jn{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],u=i[r+1],h=i[r+2],d=i[r+3];const p=s[o+0],m=s[o+1],y=s[o+2],A=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=h,e[t+3]=d;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=y,e[t+3]=A;return}if(d!==A||l!==p||u!==m||h!==y){let x=1-a;const g=l*p+u*m+h*y+d*A,_=g>=0?1:-1,M=1-g*g;if(M>Number.EPSILON){const P=Math.sqrt(M),b=Math.atan2(P,g*_);x=Math.sin(x*b)/P,a=Math.sin(a*b)/P}const w=a*_;if(l=l*x+p*w,u=u*x+m*w,h=h*x+y*w,d=d*x+A*w,x===1-a){const P=1/Math.sqrt(l*l+u*u+h*h+d*d);l*=P,u*=P,h*=P,d*=P}}e[t]=l,e[t+1]=u,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],h=i[r+3],d=s[o],p=s[o+1],m=s[o+2],y=s[o+3];return e[t]=a*y+h*d+l*m-u*p,e[t+1]=l*y+h*p+u*d-a*m,e[t+2]=u*y+h*m+a*p-l*d,e[t+3]=h*y-a*d-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),h=a(r/2),d=a(s/2),p=l(i/2),m=l(r/2),y=l(s/2);switch(o){case"XYZ":this._x=p*h*d+u*m*y,this._y=u*m*d-p*h*y,this._z=u*h*y+p*m*d,this._w=u*h*d-p*m*y;break;case"YXZ":this._x=p*h*d+u*m*y,this._y=u*m*d-p*h*y,this._z=u*h*y-p*m*d,this._w=u*h*d+p*m*y;break;case"ZXY":this._x=p*h*d-u*m*y,this._y=u*m*d+p*h*y,this._z=u*h*y+p*m*d,this._w=u*h*d-p*m*y;break;case"ZYX":this._x=p*h*d-u*m*y,this._y=u*m*d+p*h*y,this._z=u*h*y-p*m*d,this._w=u*h*d+p*m*y;break;case"YZX":this._x=p*h*d+u*m*y,this._y=u*m*d+p*h*y,this._z=u*h*y-p*m*d,this._w=u*h*d-p*m*y;break;case"XZY":this._x=p*h*d-u*m*y,this._y=u*m*d-p*h*y,this._z=u*h*y+p*m*d,this._w=u*h*d+p*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],h=t[6],d=t[10],p=i+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(h-l)*m,this._y=(s-u)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(h-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+u)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-u)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+h)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+u)/m,this._y=(l+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_n(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,h=t._w;return this._x=i*h+o*a+r*u-s*l,this._y=r*h+o*l+s*a-i*u,this._z=s*h+o*u+i*l-r*a,this._w=o*h-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),h=Math.atan2(u,a),d=Math.sin((1-t)*h)/u,p=Math.sin(t*h)/u;return this._w=o*d+this._w*p,this._x=i*d+this._x*p,this._y=r*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class U{constructor(e=0,t=0,i=0){U.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(kC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(kC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*i),h=2*(a*t-s*r),d=2*(s*i-o*t);return this.x=t+l*u+o*d-a*h,this.y=i+l*h+a*u-s*d,this.z=r+l*d+s*h-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return vx.copy(this).projectOnVector(e),this.sub(vx)}reflect(e){return this.sub(vx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(_n(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const vx=new U,kC=new Jn;class vi{constructor(e=new U(1/0,1/0,1/0),t=new U(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Hr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Hr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Hr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Hr):Hr.fromBufferAttribute(s,o),Hr.applyMatrix4(e.matrixWorld),this.expandByPoint(Hr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Up.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Up.copy(i.boundingBox)),Up.applyMatrix4(e.matrixWorld),this.union(Up)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Hr),Hr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ff),kp.subVectors(this.max,ff),ic.subVectors(e.a,ff),rc.subVectors(e.b,ff),sc.subVectors(e.c,ff),wo.subVectors(rc,ic),Eo.subVectors(sc,rc),Ca.subVectors(ic,sc);let t=[0,-wo.z,wo.y,0,-Eo.z,Eo.y,0,-Ca.z,Ca.y,wo.z,0,-wo.x,Eo.z,0,-Eo.x,Ca.z,0,-Ca.x,-wo.y,wo.x,0,-Eo.y,Eo.x,0,-Ca.y,Ca.x,0];return!yx(t,ic,rc,sc,kp)||(t=[1,0,0,0,1,0,0,0,1],!yx(t,ic,rc,sc,kp))?!1:(Hp.crossVectors(wo,Eo),t=[Hp.x,Hp.y,Hp.z],yx(t,ic,rc,sc,kp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Hr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ls[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ls[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ls[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ls[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ls[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ls[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ls[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ls[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ls),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ls=[new U,new U,new U,new U,new U,new U,new U,new U],Hr=new U,Up=new vi,ic=new U,rc=new U,sc=new U,wo=new U,Eo=new U,Ca=new U,ff=new U,kp=new U,Hp=new U,Ta=new U;function yx(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Ta.fromArray(n,s);const a=r.x*Math.abs(Ta.x)+r.y*Math.abs(Ta.y)+r.z*Math.abs(Ta.z),l=e.dot(Ta),u=t.dot(Ta),h=i.dot(Ta);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>a)return!1}return!0}const s4=new vi,hf=new U,xx=new U;class ei{constructor(e=new U,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):s4.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;hf.subVectors(e,this.center);const t=hf.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(hf,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(xx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(hf.copy(e.center).add(xx)),this.expandByPoint(hf.copy(e.center).sub(xx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ns=new U,_x=new U,zp=new U,Co=new U,Ax=new U,Gp=new U,Sx=new U;class Dl{constructor(e=new U,t=new U(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ns)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ns.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ns.copy(this.origin).addScaledVector(this.direction,t),Ns.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){_x.copy(e).add(t).multiplyScalar(.5),zp.copy(t).sub(e).normalize(),Co.copy(this.origin).sub(_x);const s=e.distanceTo(t)*.5,o=-this.direction.dot(zp),a=Co.dot(this.direction),l=-Co.dot(zp),u=Co.lengthSq(),h=Math.abs(1-o*o);let d,p,m,y;if(h>0)if(d=o*l-a,p=o*a-l,y=s*h,d>=0)if(p>=-y)if(p<=y){const A=1/h;d*=A,p*=A,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+u}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;else p<=-y?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u):p<=y?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+u);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(_x).addScaledVector(zp,p),m}intersectSphere(e,t){Ns.subVectors(e.center,this.origin);const i=Ns.dot(this.direction),r=Ns.dot(Ns)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),h>=0?(s=(e.min.y-p.y)*h,o=(e.max.y-p.y)*h):(s=(e.max.y-p.y)*h,o=(e.min.y-p.y)*h),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ns)!==null}intersectTriangle(e,t,i,r,s){Ax.subVectors(t,e),Gp.subVectors(i,e),Sx.crossVectors(Ax,Gp);let o=this.direction.dot(Sx),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Co.subVectors(this.origin,e);const l=a*this.direction.dot(Gp.crossVectors(Co,Gp));if(l<0)return null;const u=a*this.direction.dot(Ax.cross(Co));if(u<0||l+u>o)return null;const h=-a*Co.dot(Sx);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ft{constructor(e,t,i,r,s,o,a,l,u,h,d,p,m,y,A,x){ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u,h,d,p,m,y,A,x)}set(e,t,i,r,s,o,a,l,u,h,d,p,m,y,A,x){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=h,g[10]=d,g[14]=p,g[3]=m,g[7]=y,g[11]=A,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ft().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/oc.setFromMatrixColumn(e,0).length(),s=1/oc.setFromMatrixColumn(e,1).length(),o=1/oc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*h,m=o*d,y=a*h,A=a*d;t[0]=l*h,t[4]=-l*d,t[8]=u,t[1]=m+y*u,t[5]=p-A*u,t[9]=-a*l,t[2]=A-p*u,t[6]=y+m*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*h,m=l*d,y=u*h,A=u*d;t[0]=p+A*a,t[4]=y*a-m,t[8]=o*u,t[1]=o*d,t[5]=o*h,t[9]=-a,t[2]=m*a-y,t[6]=A+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*h,m=l*d,y=u*h,A=u*d;t[0]=p-A*a,t[4]=-o*d,t[8]=y+m*a,t[1]=m+y*a,t[5]=o*h,t[9]=A-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*h,m=o*d,y=a*h,A=a*d;t[0]=l*h,t[4]=y*u-m,t[8]=p*u+A,t[1]=l*d,t[5]=A*u+p,t[9]=m*u-y,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,y=a*l,A=a*u;t[0]=l*h,t[4]=A-p*d,t[8]=y*d+m,t[1]=d,t[5]=o*h,t[9]=-a*h,t[2]=-u*h,t[6]=m*d+y,t[10]=p-A*d}else if(e.order==="XZY"){const p=o*l,m=o*u,y=a*l,A=a*u;t[0]=l*h,t[4]=-d,t[8]=u*h,t[1]=p*d+A,t[5]=o*h,t[9]=m*d-y,t[2]=y*d-m,t[6]=a*h,t[10]=A*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(o4,e,a4)}lookAt(e,t,i){const r=this.elements;return Yi.subVectors(e,t),Yi.lengthSq()===0&&(Yi.z=1),Yi.normalize(),To.crossVectors(i,Yi),To.lengthSq()===0&&(Math.abs(i.z)===1?Yi.x+=1e-4:Yi.z+=1e-4,Yi.normalize(),To.crossVectors(i,Yi)),To.normalize(),Vp.crossVectors(Yi,To),r[0]=To.x,r[4]=Vp.x,r[8]=Yi.x,r[1]=To.y,r[5]=Vp.y,r[9]=Yi.y,r[2]=To.z,r[6]=Vp.z,r[10]=Yi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],h=i[1],d=i[5],p=i[9],m=i[13],y=i[2],A=i[6],x=i[10],g=i[14],_=i[3],M=i[7],w=i[11],P=i[15],b=r[0],I=r[4],D=r[8],R=r[12],T=r[1],N=r[5],Q=r[9],W=r[13],K=r[2],Y=r[6],Z=r[10],z=r[14],B=r[3],G=r[7],V=r[11],q=r[15];return s[0]=o*b+a*T+l*K+u*B,s[4]=o*I+a*N+l*Y+u*G,s[8]=o*D+a*Q+l*Z+u*V,s[12]=o*R+a*W+l*z+u*q,s[1]=h*b+d*T+p*K+m*B,s[5]=h*I+d*N+p*Y+m*G,s[9]=h*D+d*Q+p*Z+m*V,s[13]=h*R+d*W+p*z+m*q,s[2]=y*b+A*T+x*K+g*B,s[6]=y*I+A*N+x*Y+g*G,s[10]=y*D+A*Q+x*Z+g*V,s[14]=y*R+A*W+x*z+g*q,s[3]=_*b+M*T+w*K+P*B,s[7]=_*I+M*N+w*Y+P*G,s[11]=_*D+M*Q+w*Z+P*V,s[15]=_*R+M*W+w*z+P*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],h=e[2],d=e[6],p=e[10],m=e[14],y=e[3],A=e[7],x=e[11],g=e[15];return y*(+s*l*d-r*u*d-s*a*p+i*u*p+r*a*m-i*l*m)+A*(+t*l*m-t*u*p+s*o*p-r*o*m+r*u*h-s*l*h)+x*(+t*u*d-t*a*m-s*o*d+i*o*m+s*a*h-i*u*h)+g*(-r*a*h-t*l*d+t*a*p+r*o*d-i*o*p+i*l*h)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=e[9],p=e[10],m=e[11],y=e[12],A=e[13],x=e[14],g=e[15],_=d*x*u-A*p*u+A*l*m-a*x*m-d*l*g+a*p*g,M=y*p*u-h*x*u-y*l*m+o*x*m+h*l*g-o*p*g,w=h*A*u-y*d*u+y*a*m-o*A*m-h*a*g+o*d*g,P=y*d*l-h*A*l-y*a*p+o*A*p+h*a*x-o*d*x,b=t*_+i*M+r*w+s*P;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/b;return e[0]=_*I,e[1]=(A*p*s-d*x*s-A*r*m+i*x*m+d*r*g-i*p*g)*I,e[2]=(a*x*s-A*l*s+A*r*u-i*x*u-a*r*g+i*l*g)*I,e[3]=(d*l*s-a*p*s-d*r*u+i*p*u+a*r*m-i*l*m)*I,e[4]=M*I,e[5]=(h*x*s-y*p*s+y*r*m-t*x*m-h*r*g+t*p*g)*I,e[6]=(y*l*s-o*x*s-y*r*u+t*x*u+o*r*g-t*l*g)*I,e[7]=(o*p*s-h*l*s+h*r*u-t*p*u-o*r*m+t*l*m)*I,e[8]=w*I,e[9]=(y*d*s-h*A*s-y*i*m+t*A*m+h*i*g-t*d*g)*I,e[10]=(o*A*s-y*a*s+y*i*u-t*A*u-o*i*g+t*a*g)*I,e[11]=(h*a*s-o*d*s-h*i*u+t*d*u+o*i*m-t*a*m)*I,e[12]=P*I,e[13]=(h*A*r-y*d*r+y*i*p-t*A*p-h*i*x+t*d*x)*I,e[14]=(y*a*r-o*A*r-y*i*l+t*A*l+o*i*x-t*a*x)*I,e[15]=(o*d*r-h*a*r+h*i*l-t*d*l-o*i*p+t*a*p)*I,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,h=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,h*a+i,h*l-r*o,0,u*l-r*a,h*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,h=o+o,d=a+a,p=s*u,m=s*h,y=s*d,A=o*h,x=o*d,g=a*d,_=l*u,M=l*h,w=l*d,P=i.x,b=i.y,I=i.z;return r[0]=(1-(A+g))*P,r[1]=(m+w)*P,r[2]=(y-M)*P,r[3]=0,r[4]=(m-w)*b,r[5]=(1-(p+g))*b,r[6]=(x+_)*b,r[7]=0,r[8]=(y+M)*I,r[9]=(x-_)*I,r[10]=(1-(p+A))*I,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=oc.set(r[0],r[1],r[2]).length();const o=oc.set(r[4],r[5],r[6]).length(),a=oc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],zr.copy(this);const u=1/s,h=1/o,d=1/a;return zr.elements[0]*=u,zr.elements[1]*=u,zr.elements[2]*=u,zr.elements[4]*=h,zr.elements[5]*=h,zr.elements[6]*=h,zr.elements[8]*=d,zr.elements[9]*=d,zr.elements[10]*=d,t.setFromRotationMatrix(zr),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=xs){const l=this.elements,u=2*s/(t-e),h=2*s/(i-r),d=(t+e)/(t-e),p=(i+r)/(i-r);let m,y;if(a===xs)m=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(a===Dh)m=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=xs){const l=this.elements,u=1/(t-e),h=1/(i-r),d=1/(o-s),p=(t+e)*u,m=(i+r)*h;let y,A;if(a===xs)y=(o+s)*d,A=-2*d;else if(a===Dh)y=s*d,A=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=A,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const oc=new U,zr=new ft,o4=new U(0,0,0),a4=new U(1,1,1),To=new U,Vp=new U,Yi=new U,HC=new ft,zC=new Jn;class sr{constructor(e=0,t=0,i=0,r=sr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],h=r[9],d=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(_n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-_n(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(_n(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-_n(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(_n(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-_n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return HC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(HC,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return zC.setFromEuler(this),this.setFromQuaternion(zC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}sr.DEFAULT_ORDER="XYZ";class pl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let l4=0;const GC=new U,ac=new Jn,Fs=new ft,Wp=new U,df=new U,c4=new U,u4=new Jn,VC=new U(1,0,0),WC=new U(0,1,0),jC=new U(0,0,1),XC={type:"added"},f4={type:"removed"},lc={type:"childadded",child:null},Mx={type:"childremoved",child:null};class Nt extends Ts{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:l4++}),this.uuid=ir(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Nt.DEFAULT_UP.clone();const e=new U,t=new sr,i=new Jn,r=new U(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ft},normalMatrix:{value:new Et}}),this.matrix=new ft,this.matrixWorld=new ft,this.matrixAutoUpdate=Nt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Nt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new pl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ac.setFromAxisAngle(e,t),this.quaternion.multiply(ac),this}rotateOnWorldAxis(e,t){return ac.setFromAxisAngle(e,t),this.quaternion.premultiply(ac),this}rotateX(e){return this.rotateOnAxis(VC,e)}rotateY(e){return this.rotateOnAxis(WC,e)}rotateZ(e){return this.rotateOnAxis(jC,e)}translateOnAxis(e,t){return GC.copy(e).applyQuaternion(this.quaternion),this.position.add(GC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(VC,e)}translateY(e){return this.translateOnAxis(WC,e)}translateZ(e){return this.translateOnAxis(jC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fs.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Wp.copy(e):Wp.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),df.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fs.lookAt(df,Wp,this.up):Fs.lookAt(Wp,df,this.up),this.quaternion.setFromRotationMatrix(Fs),r&&(Fs.extractRotation(r.matrixWorld),ac.setFromRotationMatrix(Fs),this.quaternion.premultiply(ac.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(XC),lc.child=e,this.dispatchEvent(lc),lc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(f4),Mx.child=e,this.dispatchEvent(Mx),Mx.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Fs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fs),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(XC),lc.child=e,this.dispatchEvent(lc),lc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(df,e,c4),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(df,u4,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,h=l.length;u<h;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),h=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),y=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),h.length>0&&(i.images=h),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),y.length>0&&(i.nodes=y)}return i.object=r,i;function o(a){const l=[];for(const u in a){const h=a[u];delete h.metadata,l.push(h)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Nt.DEFAULT_UP=new U(0,1,0);Nt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Nt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Gr=new U,Os=new U,wx=new U,Us=new U,cc=new U,uc=new U,JC=new U,Ex=new U,Cx=new U,Tx=new U;class qi{constructor(e=new U,t=new U,i=new U){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Gr.subVectors(e,t),r.cross(Gr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Gr.subVectors(r,t),Os.subVectors(i,t),wx.subVectors(e,t);const o=Gr.dot(Gr),a=Gr.dot(Os),l=Gr.dot(wx),u=Os.dot(Os),h=Os.dot(wx),d=o*u-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,m=(u*l-a*h)*p,y=(o*h-a*l)*p;return s.set(1-m-y,y,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Us)===null?!1:Us.x>=0&&Us.y>=0&&Us.x+Us.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Us)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Us.x),l.addScaledVector(o,Us.y),l.addScaledVector(a,Us.z),l)}static isFrontFacing(e,t,i,r){return Gr.subVectors(i,t),Os.subVectors(e,t),Gr.cross(Os).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Gr.subVectors(this.c,this.b),Os.subVectors(this.a,this.b),Gr.cross(Os).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return qi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return qi.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return qi.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return qi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return qi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;cc.subVectors(r,i),uc.subVectors(s,i),Ex.subVectors(e,i);const l=cc.dot(Ex),u=uc.dot(Ex);if(l<=0&&u<=0)return t.copy(i);Cx.subVectors(e,r);const h=cc.dot(Cx),d=uc.dot(Cx);if(h>=0&&d<=h)return t.copy(r);const p=l*d-h*u;if(p<=0&&l>=0&&h<=0)return o=l/(l-h),t.copy(i).addScaledVector(cc,o);Tx.subVectors(e,s);const m=cc.dot(Tx),y=uc.dot(Tx);if(y>=0&&m<=y)return t.copy(s);const A=m*u-l*y;if(A<=0&&u>=0&&y<=0)return a=u/(u-y),t.copy(i).addScaledVector(uc,a);const x=h*y-m*d;if(x<=0&&d-h>=0&&m-y>=0)return JC.subVectors(s,r),a=(d-h)/(d-h+(m-y)),t.copy(r).addScaledVector(JC,a);const g=1/(x+A+p);return o=A*g,a=p*g,t.copy(i).addScaledVector(cc,o).addScaledVector(uc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const kI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bo={h:0,s:0,l:0},jp={h:0,s:0,l:0};function bx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Oe{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Mr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Vt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Vt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Vt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Vt.workingColorSpace){if(e=CS(e,1),t=_n(t,0,1),i=_n(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=bx(o,s,e+1/3),this.g=bx(o,s,e),this.b=bx(o,s,e-1/3)}return Vt.toWorkingColorSpace(this,r),this}setStyle(e,t=Mr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Mr){const i=kI[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=nu(e.r),this.g=nu(e.g),this.b=nu(e.b),this}copyLinearToSRGB(e){return this.r=mx(e.r),this.g=mx(e.g),this.b=mx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Mr){return Vt.fromWorkingColorSpace(ci.copy(this),e),Math.round(_n(ci.r*255,0,255))*65536+Math.round(_n(ci.g*255,0,255))*256+Math.round(_n(ci.b*255,0,255))}getHexString(e=Mr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Vt.workingColorSpace){Vt.fromWorkingColorSpace(ci.copy(this),t);const i=ci.r,r=ci.g,s=ci.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const h=(a+o)/2;if(a===o)l=0,u=0;else{const d=o-a;switch(u=h<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=h,e}getRGB(e,t=Vt.workingColorSpace){return Vt.fromWorkingColorSpace(ci.copy(this),t),e.r=ci.r,e.g=ci.g,e.b=ci.b,e}getStyle(e=Mr){Vt.fromWorkingColorSpace(ci.copy(this),e);const t=ci.r,i=ci.g,r=ci.b;return e!==Mr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(bo),this.setHSL(bo.h+e,bo.s+t,bo.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(bo),e.getHSL(jp);const i=qf(bo.h,jp.h,t),r=qf(bo.s,jp.s,t),s=qf(bo.l,jp.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ci=new Oe;Oe.NAMES=kI;let h4=0;class In extends Ts{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:h4++}),this.uuid=ir(),this.name="",this.type="Material",this.blending=fl,this.side=Cs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Pg,this.blendDst=Bg,this.blendEquation=zo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Oe(0,0,0),this.blendAlpha=0,this.depthFunc=Eh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=b1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ja,this.stencilZFail=ja,this.stencilZPass=ja,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==fl&&(i.blending=this.blending),this.side!==Cs&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Pg&&(i.blendSrc=this.blendSrc),this.blendDst!==Bg&&(i.blendDst=this.blendDst),this.blendEquation!==zo&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Eh&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==b1&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ja&&(i.stencilFail=this.stencilFail),this.stencilZFail!==ja&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ja&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class tr extends In{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new sr,this.combine=td,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const js=d4();function d4(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,h=0;for(;!(u&8388608);)u<<=1,h-=8388608;u&=-8388609,h+=947912704,s[l]=u|h}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Oi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=_n(n,-65504,65504),js.floatView[0]=n;const e=js.uint32View[0],t=e>>23&511;return js.baseTable[t]+((e&8388607)>>js.shiftTable[t])}function Lf(n){const e=n>>10;return js.uint32View[0]=js.mantissaTable[js.offsetTable[e]+(n&1023)]+js.exponentTable[e],js.floatView[0]}const p4={toHalfFloat:Oi,fromHalfFloat:Lf},Pn=new U,Xp=new pe;class Ut{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Ih,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Hi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return TS("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Xp.fromBufferAttribute(this,t),Xp.applyMatrix3(e),this.setXY(t,Xp.x,Xp.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Pn.fromBufferAttribute(this,t),Pn.applyMatrix3(e),this.setXYZ(t,Pn.x,Pn.y,Pn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Pn.fromBufferAttribute(this,t),Pn.applyMatrix4(e),this.setXYZ(t,Pn.x,Pn.y,Pn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Pn.fromBufferAttribute(this,t),Pn.applyNormalMatrix(e),this.setXYZ(t,Pn.x,Pn.y,Pn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Pn.fromBufferAttribute(this,t),Pn.transformDirection(e),this.setXYZ(t,Pn.x,Pn.y,Pn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ti(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ct(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ti(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ti(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ti(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ti(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),r=Ct(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),r=Ct(r,this.array),s=Ct(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Ih&&(e.usage=this.usage),e}}class m4 extends Ut{constructor(e,t,i){super(new Int8Array(e),t,i)}}class g4 extends Ut{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class v4 extends Ut{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class y4 extends Ut{constructor(e,t,i){super(new Int16Array(e),t,i)}}class RS extends Ut{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class x4 extends Ut{constructor(e,t,i){super(new Int32Array(e),t,i)}}class PS extends Ut{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class _4 extends Ut{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Lf(this.array[e*this.itemSize]);return this.normalized&&(t=Ti(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize]=Oi(t),this}getY(e){let t=Lf(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ti(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+1]=Oi(t),this}getZ(e){let t=Lf(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ti(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+2]=Oi(t),this}getW(e){let t=Lf(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ti(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+3]=Oi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array)),this.array[e+0]=Oi(t),this.array[e+1]=Oi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),r=Ct(r,this.array)),this.array[e+0]=Oi(t),this.array[e+1]=Oi(i),this.array[e+2]=Oi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),r=Ct(r,this.array),s=Ct(s,this.array)),this.array[e+0]=Oi(t),this.array[e+1]=Oi(i),this.array[e+2]=Oi(r),this.array[e+3]=Oi(s),this}}class tt extends Ut{constructor(e,t,i){super(new Float32Array(e),t,i)}}let A4=0;const yr=new ft,Rx=new Nt,fc=new U,Qi=new vi,pf=new vi,Wn=new U;class wt extends Ts{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:A4++}),this.uuid=ir(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(NI(e)?PS:RS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Et().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return yr.makeRotationFromQuaternion(e),this.applyMatrix4(yr),this}rotateX(e){return yr.makeRotationX(e),this.applyMatrix4(yr),this}rotateY(e){return yr.makeRotationY(e),this.applyMatrix4(yr),this}rotateZ(e){return yr.makeRotationZ(e),this.applyMatrix4(yr),this}translate(e,t,i){return yr.makeTranslation(e,t,i),this.applyMatrix4(yr),this}scale(e,t,i){return yr.makeScale(e,t,i),this.applyMatrix4(yr),this}lookAt(e){return Rx.lookAt(e),Rx.updateMatrix(),this.applyMatrix4(Rx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fc).negate(),this.translate(fc.x,fc.y,fc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new tt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new U(-1/0,-1/0,-1/0),new U(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Qi.setFromBufferAttribute(s),this.morphTargetsRelative?(Wn.addVectors(this.boundingBox.min,Qi.min),this.boundingBox.expandByPoint(Wn),Wn.addVectors(this.boundingBox.max,Qi.max),this.boundingBox.expandByPoint(Wn)):(this.boundingBox.expandByPoint(Qi.min),this.boundingBox.expandByPoint(Qi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ei);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new U,1/0);return}if(e){const i=this.boundingSphere.center;if(Qi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];pf.setFromBufferAttribute(a),this.morphTargetsRelative?(Wn.addVectors(Qi.min,pf.min),Qi.expandByPoint(Wn),Wn.addVectors(Qi.max,pf.max),Qi.expandByPoint(Wn)):(Qi.expandByPoint(pf.min),Qi.expandByPoint(pf.max))}Qi.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Wn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Wn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,h=a.count;u<h;u++)Wn.fromBufferAttribute(a,u),l&&(fc.fromBufferAttribute(e,u),Wn.add(fc)),r=Math.max(r,i.distanceToSquared(Wn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ut(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let D=0;D<i.count;D++)a[D]=new U,l[D]=new U;const u=new U,h=new U,d=new U,p=new pe,m=new pe,y=new pe,A=new U,x=new U;function g(D,R,T){u.fromBufferAttribute(i,D),h.fromBufferAttribute(i,R),d.fromBufferAttribute(i,T),p.fromBufferAttribute(s,D),m.fromBufferAttribute(s,R),y.fromBufferAttribute(s,T),h.sub(u),d.sub(u),m.sub(p),y.sub(p);const N=1/(m.x*y.y-y.x*m.y);isFinite(N)&&(A.copy(h).multiplyScalar(y.y).addScaledVector(d,-m.y).multiplyScalar(N),x.copy(d).multiplyScalar(m.x).addScaledVector(h,-y.x).multiplyScalar(N),a[D].add(A),a[R].add(A),a[T].add(A),l[D].add(x),l[R].add(x),l[T].add(x))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let D=0,R=_.length;D<R;++D){const T=_[D],N=T.start,Q=T.count;for(let W=N,K=N+Q;W<K;W+=3)g(e.getX(W+0),e.getX(W+1),e.getX(W+2))}const M=new U,w=new U,P=new U,b=new U;function I(D){P.fromBufferAttribute(r,D),b.copy(P);const R=a[D];M.copy(R),M.sub(P.multiplyScalar(P.dot(R))).normalize(),w.crossVectors(b,R);const N=w.dot(l[D])<0?-1:1;o.setXYZW(D,M.x,M.y,M.z,N)}for(let D=0,R=_.length;D<R;++D){const T=_[D],N=T.start,Q=T.count;for(let W=N,K=N+Q;W<K;W+=3)I(e.getX(W+0)),I(e.getX(W+1)),I(e.getX(W+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ut(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new U,s=new U,o=new U,a=new U,l=new U,u=new U,h=new U,d=new U;if(e)for(let p=0,m=e.count;p<m;p+=3){const y=e.getX(p+0),A=e.getX(p+1),x=e.getX(p+2);r.fromBufferAttribute(t,y),s.fromBufferAttribute(t,A),o.fromBufferAttribute(t,x),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),a.fromBufferAttribute(i,y),l.fromBufferAttribute(i,A),u.fromBufferAttribute(i,x),a.add(h),l.add(h),u.add(h),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(A,l.x,l.y,l.z),i.setXYZ(x,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),i.setXYZ(p+0,h.x,h.y,h.z),i.setXYZ(p+1,h.x,h.y,h.z),i.setXYZ(p+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Wn.fromBufferAttribute(e,t),Wn.normalize(),e.setXYZ(t,Wn.x,Wn.y,Wn.z)}toNonIndexed(){function e(a,l){const u=a.array,h=a.itemSize,d=a.normalized,p=new u.constructor(l.length*h);let m=0,y=0;for(let A=0,x=l.length;A<x;A++){a.isInterleavedBufferAttribute?m=l[A]*a.data.stride+a.offset:m=l[A]*h;for(let g=0;g<h;g++)p[y++]=u[m++]}return new Ut(p,h,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new wt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let h=0,d=u.length;h<d;h++){const p=u[h],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d];h.push(m.toJSON(e.data))}h.length>0&&(r[l]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const h=r[u];this.setAttribute(u,h.clone(t))}const s=e.morphAttributes;for(const u in s){const h=[],d=s[u];for(let p=0,m=d.length;p<m;p++)h.push(d[p].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,h=o.length;u<h;u++){const d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const KC=new ft,ba=new Dl,Jp=new ei,YC=new U,hc=new U,dc=new U,pc=new U,Px=new U,Kp=new U,Yp=new pe,Qp=new pe,Zp=new pe,QC=new U,ZC=new U,qC=new U,qp=new U,$p=new U;class Cn extends Nt{constructor(e=new wt,t=new tr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Kp.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const h=a[l],d=s[l];h!==0&&(Px.fromBufferAttribute(d,e),o?Kp.addScaledVector(Px,h):Kp.addScaledVector(Px.sub(t),h))}t.add(Kp)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Jp.copy(i.boundingSphere),Jp.applyMatrix4(s),ba.copy(e.ray).recast(e.near),!(Jp.containsPoint(ba.origin)===!1&&(ba.intersectSphere(Jp,YC)===null||ba.origin.distanceToSquared(YC)>(e.far-e.near)**2))&&(KC.copy(s).invert(),ba.copy(e.ray).applyMatrix4(KC),!(i.boundingBox!==null&&ba.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ba)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,h=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let y=0,A=p.length;y<A;y++){const x=p[y],g=o[x.materialIndex],_=Math.max(x.start,m.start),M=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let w=_,P=M;w<P;w+=3){const b=a.getX(w),I=a.getX(w+1),D=a.getX(w+2);r=em(this,g,e,i,u,h,d,b,I,D),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),A=Math.min(a.count,m.start+m.count);for(let x=y,g=A;x<g;x+=3){const _=a.getX(x),M=a.getX(x+1),w=a.getX(x+2);r=em(this,o,e,i,u,h,d,_,M,w),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let y=0,A=p.length;y<A;y++){const x=p[y],g=o[x.materialIndex],_=Math.max(x.start,m.start),M=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let w=_,P=M;w<P;w+=3){const b=w,I=w+1,D=w+2;r=em(this,g,e,i,u,h,d,b,I,D),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),A=Math.min(l.count,m.start+m.count);for(let x=y,g=A;x<g;x+=3){const _=x,M=x+1,w=x+2;r=em(this,o,e,i,u,h,d,_,M,w),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function S4(n,e,t,i,r,s,o,a){let l;if(e.side===Ri?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Cs,a),l===null)return null;$p.copy(a),$p.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo($p);return u<t.near||u>t.far?null:{distance:u,point:$p.clone(),object:n}}function em(n,e,t,i,r,s,o,a,l,u){n.getVertexPosition(a,hc),n.getVertexPosition(l,dc),n.getVertexPosition(u,pc);const h=S4(n,e,t,i,hc,dc,pc,qp);if(h){r&&(Yp.fromBufferAttribute(r,a),Qp.fromBufferAttribute(r,l),Zp.fromBufferAttribute(r,u),h.uv=qi.getInterpolation(qp,hc,dc,pc,Yp,Qp,Zp,new pe)),s&&(Yp.fromBufferAttribute(s,a),Qp.fromBufferAttribute(s,l),Zp.fromBufferAttribute(s,u),h.uv1=qi.getInterpolation(qp,hc,dc,pc,Yp,Qp,Zp,new pe)),o&&(QC.fromBufferAttribute(o,a),ZC.fromBufferAttribute(o,l),qC.fromBufferAttribute(o,u),h.normal=qi.getInterpolation(qp,hc,dc,pc,QC,ZC,qC,new U),h.normal.dot(i.direction)>0&&h.normal.multiplyScalar(-1));const d={a,b:l,c:u,normal:new U,materialIndex:0};qi.getNormal(hc,dc,pc,d.normal),h.face=d}return h}class Ll extends wt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],h=[],d=[];let p=0,m=0;y("z","y","x",-1,-1,i,t,e,o,s,0),y("z","y","x",1,-1,i,t,-e,o,s,1),y("x","z","y",1,1,e,i,t,r,o,2),y("x","z","y",1,-1,e,i,-t,r,o,3),y("x","y","z",1,-1,e,t,i,r,s,4),y("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new tt(u,3)),this.setAttribute("normal",new tt(h,3)),this.setAttribute("uv",new tt(d,2));function y(A,x,g,_,M,w,P,b,I,D,R){const T=w/I,N=P/D,Q=w/2,W=P/2,K=b/2,Y=I+1,Z=D+1;let z=0,B=0;const G=new U;for(let V=0;V<Z;V++){const q=V*N-W;for(let ue=0;ue<Y;ue++){const be=ue*T-Q;G[A]=be*_,G[x]=q*M,G[g]=K,u.push(G.x,G.y,G.z),G[A]=0,G[x]=0,G[g]=b>0?1:-1,h.push(G.x,G.y,G.z),d.push(ue/I),d.push(1-V/D),z+=1}}for(let V=0;V<D;V++)for(let q=0;q<I;q++){const ue=p+q+Y*V,be=p+q+Y*(V+1),re=p+(q+1)+Y*(V+1),me=p+(q+1)+Y*V;l.push(ue,be,me),l.push(be,re,me),B+=6}a.addGroup(m,B,R),m+=B,p+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ll(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function gu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ei(n){const e={};for(let t=0;t<n.length;t++){const i=gu(n[t]);for(const r in i)e[r]=i[r]}return e}function M4(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function HI(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Vt.workingColorSpace}const zI={clone:gu,merge:Ei};var w4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,E4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ns extends In{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=w4,this.fragmentShader=E4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=gu(e.uniforms),this.uniformsGroups=M4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class rd extends Nt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ft,this.projectionMatrix=new ft,this.projectionMatrixInverse=new ft,this.coordinateSystem=xs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ro=new U,$C=new pe,eT=new pe;class rn extends rd{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=mu*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(dl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return mu*2*Math.atan(Math.tan(dl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Ro.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Ro.x,Ro.y).multiplyScalar(-e/Ro.z),Ro.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Ro.x,Ro.y).multiplyScalar(-e/Ro.z)}getViewSize(e,t){return this.getViewBounds(e,$C,eT),t.subVectors(eT,$C)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(dl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const mc=-90,gc=1;class BS extends Nt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new rn(mc,gc,e,t);r.layers=this.layers,this.add(r);const s=new rn(mc,gc,e,t);s.layers=this.layers,this.add(s);const o=new rn(mc,gc,e,t);o.layers=this.layers,this.add(o);const a=new rn(mc,gc,e,t);a.layers=this.layers,this.add(a);const l=new rn(mc,gc,e,t);l.layers=this.layers,this.add(l);const u=new rn(mc,gc,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===xs)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Dh)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,h]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const A=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=A,e.setRenderTarget(i,5,r),e.render(t,h),e.setRenderTarget(d,p,m),e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class sd extends on{constructor(e,t,i,r,s,o,a,l,u,h){e=e!==void 0?e:[],t=t!==void 0?t:ao,super(e,t,i,r,s,o,a,l,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class IS extends ts{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new sd(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:An}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ll(5,5,5),s=new ns({name:"CubemapFromEquirect",uniforms:gu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ri,blending:qs});s.uniforms.tEquirect.value=t;const o=new Cn(r,s),a=t.minFilter;return t.minFilter===Rr&&(t.minFilter=An),new BS(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const Bx=new U,C4=new U,T4=new Et;class Vs{constructor(e=new U(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Bx.subVectors(i,t).cross(C4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Bx),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||T4.getNormalMatrix(e),r=this.coplanarPoint(Bx).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ra=new ei,tm=new U;class od{constructor(e=new Vs,t=new Vs,i=new Vs,r=new Vs,s=new Vs,o=new Vs){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=xs){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],h=r[5],d=r[6],p=r[7],m=r[8],y=r[9],A=r[10],x=r[11],g=r[12],_=r[13],M=r[14],w=r[15];if(i[0].setComponents(l-s,p-u,x-m,w-g).normalize(),i[1].setComponents(l+s,p+u,x+m,w+g).normalize(),i[2].setComponents(l+o,p+h,x+y,w+_).normalize(),i[3].setComponents(l-o,p-h,x-y,w-_).normalize(),i[4].setComponents(l-a,p-d,x-A,w-M).normalize(),t===xs)i[5].setComponents(l+a,p+d,x+A,w+M).normalize();else if(t===Dh)i[5].setComponents(a,d,A,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ra.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ra.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ra)}intersectsSprite(e){return Ra.center.set(0,0,0),Ra.radius=.7071067811865476,Ra.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ra)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(tm.x=r.normal.x>0?e.max.x:e.min.x,tm.y=r.normal.y>0?e.max.y:e.min.y,tm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(tm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function GI(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function b4(n){const e=new WeakMap;function t(a,l){const u=a.array,h=a.usage,d=u.byteLength,p=n.createBuffer();n.bindBuffer(l,p),n.bufferData(l,u,h),a.onUploadCallback();let m;if(u instanceof Float32Array)m=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)m=n.SHORT;else if(u instanceof Uint32Array)m=n.UNSIGNED_INT;else if(u instanceof Int32Array)m=n.INT;else if(u instanceof Int8Array)m=n.BYTE;else if(u instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,l,u){const h=l.array,d=l._updateRange,p=l.updateRanges;if(n.bindBuffer(u,a),d.count===-1&&p.length===0&&n.bufferSubData(u,0,h),p.length!==0){for(let m=0,y=p.length;m<y;m++){const A=p[m];n.bufferSubData(u,A.start*h.BYTES_PER_ELEMENT,h,A.start,A.count)}l.clearUpdateRanges()}d.count!==-1&&(n.bufferSubData(u,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count),d.count=-1),l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const h=e.get(a);(!h||h.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:s,update:o}}class bu extends wt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,h=l+1,d=e/a,p=t/l,m=[],y=[],A=[],x=[];for(let g=0;g<h;g++){const _=g*p-o;for(let M=0;M<u;M++){const w=M*d-s;y.push(w,-_,0),A.push(0,0,1),x.push(M/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<a;_++){const M=_+u*g,w=_+u*(g+1),P=_+1+u*(g+1),b=_+1+u*g;m.push(M,w,b),m.push(w,P,b)}this.setIndex(m),this.setAttribute("position",new tt(y,3)),this.setAttribute("normal",new tt(A,3)),this.setAttribute("uv",new tt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bu(e.width,e.height,e.widthSegments,e.heightSegments)}}var R4=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,P4=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,B4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,I4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,D4=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,L4=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,N4=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,F4=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,O4=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,U4=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,k4=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,H4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,z4=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,G4=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,V4=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,W4=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,j4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,X4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,J4=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,K4=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Y4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Q4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Z4=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,q4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,$4=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,eH=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,tH=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,nH=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,iH=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,rH=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,sH="gl_FragColor = linearToOutputTexel( gl_FragColor );",oH=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,aH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,lH=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,cH=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,uH=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,fH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,hH=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,dH=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,pH=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,mH=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gH=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,vH=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,yH=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,xH=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,_H=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,AH=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,SH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,MH=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,wH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,EH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,CH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,TH=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bH=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,RH=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,PH=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,BH=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,IH=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,DH=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,LH=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,NH=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,FH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,OH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,UH=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,HH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zH=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,GH=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,VH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,WH=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,jH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,XH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,JH=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,KH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,YH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,QH=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ZH=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,qH=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,$H=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ez=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,tz=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,nz=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,iz=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,rz=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,sz=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,oz=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,az=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,lz=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,cz=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,uz=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,fz=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,hz=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,dz=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,pz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,mz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,gz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,vz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,yz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,xz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,_z=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Az=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Sz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Mz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,wz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ez=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Cz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Tz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const bz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Rz=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Pz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Bz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Iz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Dz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Lz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Nz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Fz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Oz=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Uz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,kz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Hz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Gz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Vz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Jz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Yz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Qz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,$z=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eG=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tG=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nG=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,iG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rG=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sG=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,oG=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,aG=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Tt={alphahash_fragment:R4,alphahash_pars_fragment:P4,alphamap_fragment:B4,alphamap_pars_fragment:I4,alphatest_fragment:D4,alphatest_pars_fragment:L4,aomap_fragment:N4,aomap_pars_fragment:F4,batching_pars_vertex:O4,batching_vertex:U4,begin_vertex:k4,beginnormal_vertex:H4,bsdfs:z4,iridescence_fragment:G4,bumpmap_pars_fragment:V4,clipping_planes_fragment:W4,clipping_planes_pars_fragment:j4,clipping_planes_pars_vertex:X4,clipping_planes_vertex:J4,color_fragment:K4,color_pars_fragment:Y4,color_pars_vertex:Q4,color_vertex:Z4,common:q4,cube_uv_reflection_fragment:$4,defaultnormal_vertex:eH,displacementmap_pars_vertex:tH,displacementmap_vertex:nH,emissivemap_fragment:iH,emissivemap_pars_fragment:rH,colorspace_fragment:sH,colorspace_pars_fragment:oH,envmap_fragment:aH,envmap_common_pars_fragment:lH,envmap_pars_fragment:cH,envmap_pars_vertex:uH,envmap_physical_pars_fragment:AH,envmap_vertex:fH,fog_vertex:hH,fog_pars_vertex:dH,fog_fragment:pH,fog_pars_fragment:mH,gradientmap_pars_fragment:gH,lightmap_pars_fragment:vH,lights_lambert_fragment:yH,lights_lambert_pars_fragment:xH,lights_pars_begin:_H,lights_toon_fragment:SH,lights_toon_pars_fragment:MH,lights_phong_fragment:wH,lights_phong_pars_fragment:EH,lights_physical_fragment:CH,lights_physical_pars_fragment:TH,lights_fragment_begin:bH,lights_fragment_maps:RH,lights_fragment_end:PH,logdepthbuf_fragment:BH,logdepthbuf_pars_fragment:IH,logdepthbuf_pars_vertex:DH,logdepthbuf_vertex:LH,map_fragment:NH,map_pars_fragment:FH,map_particle_fragment:OH,map_particle_pars_fragment:UH,metalnessmap_fragment:kH,metalnessmap_pars_fragment:HH,morphinstance_vertex:zH,morphcolor_vertex:GH,morphnormal_vertex:VH,morphtarget_pars_vertex:WH,morphtarget_vertex:jH,normal_fragment_begin:XH,normal_fragment_maps:JH,normal_pars_fragment:KH,normal_pars_vertex:YH,normal_vertex:QH,normalmap_pars_fragment:ZH,clearcoat_normal_fragment_begin:qH,clearcoat_normal_fragment_maps:$H,clearcoat_pars_fragment:ez,iridescence_pars_fragment:tz,opaque_fragment:nz,packing:iz,premultiplied_alpha_fragment:rz,project_vertex:sz,dithering_fragment:oz,dithering_pars_fragment:az,roughnessmap_fragment:lz,roughnessmap_pars_fragment:cz,shadowmap_pars_fragment:uz,shadowmap_pars_vertex:fz,shadowmap_vertex:hz,shadowmask_pars_fragment:dz,skinbase_vertex:pz,skinning_pars_vertex:mz,skinning_vertex:gz,skinnormal_vertex:vz,specularmap_fragment:yz,specularmap_pars_fragment:xz,tonemapping_fragment:_z,tonemapping_pars_fragment:Az,transmission_fragment:Sz,transmission_pars_fragment:Mz,uv_pars_fragment:wz,uv_pars_vertex:Ez,uv_vertex:Cz,worldpos_vertex:Tz,background_vert:bz,background_frag:Rz,backgroundCube_vert:Pz,backgroundCube_frag:Bz,cube_vert:Iz,cube_frag:Dz,depth_vert:Lz,depth_frag:Nz,distanceRGBA_vert:Fz,distanceRGBA_frag:Oz,equirect_vert:Uz,equirect_frag:kz,linedashed_vert:Hz,linedashed_frag:zz,meshbasic_vert:Gz,meshbasic_frag:Vz,meshlambert_vert:Wz,meshlambert_frag:jz,meshmatcap_vert:Xz,meshmatcap_frag:Jz,meshnormal_vert:Kz,meshnormal_frag:Yz,meshphong_vert:Qz,meshphong_frag:Zz,meshphysical_vert:qz,meshphysical_frag:$z,meshtoon_vert:eG,meshtoon_frag:tG,points_vert:nG,points_frag:iG,shadow_vert:rG,shadow_frag:sG,sprite_vert:oG,sprite_frag:aG},ke={common:{diffuse:{value:new Oe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Et},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Et}},envmap:{envMap:{value:null},envMapRotation:{value:new Et},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Et}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Et}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Et},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Et},normalScale:{value:new pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Et},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Et}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Et}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Et}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Oe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Oe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0},uvTransform:{value:new Et}},sprite:{diffuse:{value:new Oe(16777215)},opacity:{value:1},center:{value:new pe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Et},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0}}},Kr={basic:{uniforms:Ei([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.fog]),vertexShader:Tt.meshbasic_vert,fragmentShader:Tt.meshbasic_frag},lambert:{uniforms:Ei([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,ke.lights,{emissive:{value:new Oe(0)}}]),vertexShader:Tt.meshlambert_vert,fragmentShader:Tt.meshlambert_frag},phong:{uniforms:Ei([ke.common,ke.specularmap,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,ke.lights,{emissive:{value:new Oe(0)},specular:{value:new Oe(1118481)},shininess:{value:30}}]),vertexShader:Tt.meshphong_vert,fragmentShader:Tt.meshphong_frag},standard:{uniforms:Ei([ke.common,ke.envmap,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.roughnessmap,ke.metalnessmap,ke.fog,ke.lights,{emissive:{value:new Oe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag},toon:{uniforms:Ei([ke.common,ke.aomap,ke.lightmap,ke.emissivemap,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.gradientmap,ke.fog,ke.lights,{emissive:{value:new Oe(0)}}]),vertexShader:Tt.meshtoon_vert,fragmentShader:Tt.meshtoon_frag},matcap:{uniforms:Ei([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,ke.fog,{matcap:{value:null}}]),vertexShader:Tt.meshmatcap_vert,fragmentShader:Tt.meshmatcap_frag},points:{uniforms:Ei([ke.points,ke.fog]),vertexShader:Tt.points_vert,fragmentShader:Tt.points_frag},dashed:{uniforms:Ei([ke.common,ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Tt.linedashed_vert,fragmentShader:Tt.linedashed_frag},depth:{uniforms:Ei([ke.common,ke.displacementmap]),vertexShader:Tt.depth_vert,fragmentShader:Tt.depth_frag},normal:{uniforms:Ei([ke.common,ke.bumpmap,ke.normalmap,ke.displacementmap,{opacity:{value:1}}]),vertexShader:Tt.meshnormal_vert,fragmentShader:Tt.meshnormal_frag},sprite:{uniforms:Ei([ke.sprite,ke.fog]),vertexShader:Tt.sprite_vert,fragmentShader:Tt.sprite_frag},background:{uniforms:{uvTransform:{value:new Et},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Tt.background_vert,fragmentShader:Tt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Et}},vertexShader:Tt.backgroundCube_vert,fragmentShader:Tt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Tt.cube_vert,fragmentShader:Tt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Tt.equirect_vert,fragmentShader:Tt.equirect_frag},distanceRGBA:{uniforms:Ei([ke.common,ke.displacementmap,{referencePosition:{value:new U},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Tt.distanceRGBA_vert,fragmentShader:Tt.distanceRGBA_frag},shadow:{uniforms:Ei([ke.lights,ke.fog,{color:{value:new Oe(0)},opacity:{value:1}}]),vertexShader:Tt.shadow_vert,fragmentShader:Tt.shadow_frag}};Kr.physical={uniforms:Ei([Kr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Et},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Et},clearcoatNormalScale:{value:new pe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Et},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Et},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Et},sheen:{value:0},sheenColor:{value:new Oe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Et},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Et},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Et},transmissionSamplerSize:{value:new pe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Et},attenuationDistance:{value:0},attenuationColor:{value:new Oe(0)},specularColor:{value:new Oe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Et},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Et},anisotropyVector:{value:new pe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Et}}]),vertexShader:Tt.meshphysical_vert,fragmentShader:Tt.meshphysical_frag};const nm={r:0,b:0,g:0},Pa=new sr,lG=new ft;function cG(n,e,t,i,r,s,o){const a=new Oe(0);let l=s===!0?0:1,u,h,d=null,p=0,m=null;function y(_){let M=_.isScene===!0?_.background:null;return M&&M.isTexture&&(M=(_.backgroundBlurriness>0?t:e).get(M)),M}function A(_){let M=!1;const w=y(_);w===null?g(a,l):w&&w.isColor&&(g(w,1),M=!0);const P=n.xr.getEnvironmentBlendMode();P==="additive"?i.buffers.color.setClear(0,0,0,1,o):P==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||M)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(_,M){const w=y(M);w&&(w.isCubeTexture||w.mapping===Cu)?(h===void 0&&(h=new Cn(new Ll(1,1,1),new ns({name:"BackgroundCubeMaterial",uniforms:gu(Kr.backgroundCube.uniforms),vertexShader:Kr.backgroundCube.vertexShader,fragmentShader:Kr.backgroundCube.fragmentShader,side:Ri,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(P,b,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),Pa.copy(M.backgroundRotation),Pa.x*=-1,Pa.y*=-1,Pa.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(Pa.y*=-1,Pa.z*=-1),h.material.uniforms.envMap.value=w,h.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(lG.makeRotationFromEuler(Pa)),h.material.toneMapped=Vt.getTransfer(w.colorSpace)!==qt,(d!==w||p!==w.version||m!==n.toneMapping)&&(h.material.needsUpdate=!0,d=w,p=w.version,m=n.toneMapping),h.layers.enableAll(),_.unshift(h,h.geometry,h.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new Cn(new bu(2,2),new ns({name:"BackgroundMaterial",uniforms:gu(Kr.background.uniforms),vertexShader:Kr.background.vertexShader,fragmentShader:Kr.background.fragmentShader,side:Cs,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,u.material.toneMapped=Vt.getTransfer(w.colorSpace)!==qt,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(d!==w||p!==w.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=w,p=w.version,m=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null))}function g(_,M){_.getRGB(nm,HI(n)),i.buffers.color.setClear(nm.r,nm.g,nm.b,M,o)}return{getClearColor:function(){return a},setClearColor:function(_,M=1){a.set(_),l=M,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,g(a,l)},render:A,addToRenderList:x}}function uG(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=p(null);let s=r,o=!1;function a(T,N,Q,W,K){let Y=!1;const Z=d(W,Q,N);s!==Z&&(s=Z,u(s.object)),Y=m(T,W,Q,K),Y&&y(T,W,Q,K),K!==null&&e.update(K,n.ELEMENT_ARRAY_BUFFER),(Y||o)&&(o=!1,w(T,N,Q,W),K!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(K).buffer))}function l(){return n.createVertexArray()}function u(T){return n.bindVertexArray(T)}function h(T){return n.deleteVertexArray(T)}function d(T,N,Q){const W=Q.wireframe===!0;let K=i[T.id];K===void 0&&(K={},i[T.id]=K);let Y=K[N.id];Y===void 0&&(Y={},K[N.id]=Y);let Z=Y[W];return Z===void 0&&(Z=p(l()),Y[W]=Z),Z}function p(T){const N=[],Q=[],W=[];for(let K=0;K<t;K++)N[K]=0,Q[K]=0,W[K]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:Q,attributeDivisors:W,object:T,attributes:{},index:null}}function m(T,N,Q,W){const K=s.attributes,Y=N.attributes;let Z=0;const z=Q.getAttributes();for(const B in z)if(z[B].location>=0){const V=K[B];let q=Y[B];if(q===void 0&&(B==="instanceMatrix"&&T.instanceMatrix&&(q=T.instanceMatrix),B==="instanceColor"&&T.instanceColor&&(q=T.instanceColor)),V===void 0||V.attribute!==q||q&&V.data!==q.data)return!0;Z++}return s.attributesNum!==Z||s.index!==W}function y(T,N,Q,W){const K={},Y=N.attributes;let Z=0;const z=Q.getAttributes();for(const B in z)if(z[B].location>=0){let V=Y[B];V===void 0&&(B==="instanceMatrix"&&T.instanceMatrix&&(V=T.instanceMatrix),B==="instanceColor"&&T.instanceColor&&(V=T.instanceColor));const q={};q.attribute=V,V&&V.data&&(q.data=V.data),K[B]=q,Z++}s.attributes=K,s.attributesNum=Z,s.index=W}function A(){const T=s.newAttributes;for(let N=0,Q=T.length;N<Q;N++)T[N]=0}function x(T){g(T,0)}function g(T,N){const Q=s.newAttributes,W=s.enabledAttributes,K=s.attributeDivisors;Q[T]=1,W[T]===0&&(n.enableVertexAttribArray(T),W[T]=1),K[T]!==N&&(n.vertexAttribDivisor(T,N),K[T]=N)}function _(){const T=s.newAttributes,N=s.enabledAttributes;for(let Q=0,W=N.length;Q<W;Q++)N[Q]!==T[Q]&&(n.disableVertexAttribArray(Q),N[Q]=0)}function M(T,N,Q,W,K,Y,Z){Z===!0?n.vertexAttribIPointer(T,N,Q,K,Y):n.vertexAttribPointer(T,N,Q,W,K,Y)}function w(T,N,Q,W){A();const K=W.attributes,Y=Q.getAttributes(),Z=N.defaultAttributeValues;for(const z in Y){const B=Y[z];if(B.location>=0){let G=K[z];if(G===void 0&&(z==="instanceMatrix"&&T.instanceMatrix&&(G=T.instanceMatrix),z==="instanceColor"&&T.instanceColor&&(G=T.instanceColor)),G!==void 0){const V=G.normalized,q=G.itemSize,ue=e.get(G);if(ue===void 0)continue;const be=ue.buffer,re=ue.type,me=ue.bytesPerElement,we=re===n.INT||re===n.UNSIGNED_INT||G.gpuType===W0;if(G.isInterleavedBufferAttribute){const Ee=G.data,nt=Ee.stride,dt=G.offset;if(Ee.isInstancedInterleavedBuffer){for(let Ke=0;Ke<B.locationSize;Ke++)g(B.location+Ke,Ee.meshPerAttribute);T.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let Ke=0;Ke<B.locationSize;Ke++)x(B.location+Ke);n.bindBuffer(n.ARRAY_BUFFER,be);for(let Ke=0;Ke<B.locationSize;Ke++)M(B.location+Ke,q/B.locationSize,re,V,nt*me,(dt+q/B.locationSize*Ke)*me,we)}else{if(G.isInstancedBufferAttribute){for(let Ee=0;Ee<B.locationSize;Ee++)g(B.location+Ee,G.meshPerAttribute);T.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let Ee=0;Ee<B.locationSize;Ee++)x(B.location+Ee);n.bindBuffer(n.ARRAY_BUFFER,be);for(let Ee=0;Ee<B.locationSize;Ee++)M(B.location+Ee,q/B.locationSize,re,V,q*me,q/B.locationSize*Ee*me,we)}}else if(Z!==void 0){const V=Z[z];if(V!==void 0)switch(V.length){case 2:n.vertexAttrib2fv(B.location,V);break;case 3:n.vertexAttrib3fv(B.location,V);break;case 4:n.vertexAttrib4fv(B.location,V);break;default:n.vertexAttrib1fv(B.location,V)}}}}_()}function P(){D();for(const T in i){const N=i[T];for(const Q in N){const W=N[Q];for(const K in W)h(W[K].object),delete W[K];delete N[Q]}delete i[T]}}function b(T){if(i[T.id]===void 0)return;const N=i[T.id];for(const Q in N){const W=N[Q];for(const K in W)h(W[K].object),delete W[K];delete N[Q]}delete i[T.id]}function I(T){for(const N in i){const Q=i[N];if(Q[T.id]===void 0)continue;const W=Q[T.id];for(const K in W)h(W[K].object),delete W[K];delete Q[T.id]}}function D(){R(),o=!0,s!==r&&(s=r,u(s.object))}function R(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:D,resetDefaultState:R,dispose:P,releaseStatesOfGeometry:b,releaseStatesOfProgram:I,initAttributes:A,enableAttribute:x,disableUnusedAttributes:_}}function fG(n,e,t){let i;function r(u){i=u}function s(u,h){n.drawArrays(i,u,h),t.update(h,i,1)}function o(u,h,d){d!==0&&(n.drawArraysInstanced(i,u,h,d),t.update(h,i,d))}function a(u,h,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,h,0,d);let m=0;for(let y=0;y<d;y++)m+=h[y];t.update(m,i,1)}function l(u,h,d,p){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let y=0;y<u.length;y++)o(u[y],h[y],p[y]);else{m.multiDrawArraysInstancedWEBGL(i,u,0,h,0,p,0,d);let y=0;for(let A=0;A<d;A++)y+=h[A];for(let A=0;A<p.length;A++)t.update(y,i,p[A])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function hG(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const b=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(b){return!(b!==pi&&i.convert(b)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(b){const I=b===Tu&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(b!==es&&i.convert(b)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&b!==Hi&&!I)}function l(b){if(b==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";b="mediump"}return b==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const h=l(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);const d=t.logarithmicDepthBuffer===!0,p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),A=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),g=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),M=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=m>0,P=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:d,maxTextures:p,maxVertexTextures:m,maxTextureSize:y,maxCubemapSize:A,maxAttributes:x,maxVertexUniforms:g,maxVaryings:_,maxFragmentUniforms:M,vertexTextures:w,maxSamples:P}}function dG(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Vs,a=new Et,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||i!==0||r;return r=p,i=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){t=h(d,p,0)},this.setState=function(d,p,m){const y=d.clippingPlanes,A=d.clipIntersection,x=d.clipShadows,g=n.get(d);if(!r||y===null||y.length===0||s&&!x)s?h(null):u();else{const _=s?0:i,M=_*4;let w=g.clippingState||null;l.value=w,w=h(y,p,M,m);for(let P=0;P!==M;++P)w[P]=t[P];g.clippingState=w,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=_}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function h(d,p,m,y){const A=d!==null?d.length:0;let x=null;if(A!==0){if(x=l.value,y!==!0||x===null){const g=m+A*4,_=p.matrixWorldInverse;a.getNormalMatrix(_),(x===null||x.length<g)&&(x=new Float32Array(g));for(let M=0,w=m;M!==A;++M,w+=4)o.copy(d[M]).applyMatrix4(_,a),o.normal.toArray(x,w),x[w+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,x}}function pG(n){let e=new WeakMap;function t(o,a){return a===Ch?o.mapping=ao:a===Th&&(o.mapping=ra),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Ch||a===Th)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new IS(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Pr extends rd{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Hc=4,tT=[.125,.215,.35,.446,.526,.582],Qa=20,Ix=new Pr,nT=new Oe;let Dx=null,Lx=0,Nx=0,Fx=!1;const Xa=(1+Math.sqrt(5))/2,vc=1/Xa,iT=[new U(-Xa,vc,0),new U(Xa,vc,0),new U(-vc,0,Xa),new U(vc,0,Xa),new U(0,Xa,-vc),new U(0,Xa,vc),new U(-1,1,-1),new U(1,1,-1),new U(-1,1,1),new U(1,1,1)];class P1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Dx=this._renderer.getRenderTarget(),Lx=this._renderer.getActiveCubeFace(),Nx=this._renderer.getActiveMipmapLevel(),Fx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=oT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=sT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Dx,Lx,Nx),this._renderer.xr.enabled=Fx,e.scissorTest=!1,im(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ao||e.mapping===ra?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Dx=this._renderer.getRenderTarget(),Lx=this._renderer.getActiveCubeFace(),Nx=this._renderer.getActiveMipmapLevel(),Fx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:An,minFilter:An,generateMipmaps:!1,type:Tu,format:pi,colorSpace:ho,depthBuffer:!1},r=rT(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=rT(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=mG(s)),this._blurMaterial=gG(s,e,t)}return r}_compileMaterial(e){const t=new Cn(this._lodPlanes[0],e);this._renderer.compile(t,Ix)}_sceneToCubeUV(e,t,i,r){const a=new rn(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,p=h.toneMapping;h.getClearColor(nT),h.toneMapping=Ss,h.autoClear=!1;const m=new tr({name:"PMREM.Background",side:Ri,depthWrite:!1,depthTest:!1}),y=new Cn(new Ll,m);let A=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,A=!0):(m.color.copy(nT),A=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):_===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const M=this._cubeSize;im(r,_*M,g>2?M:0,M,M),h.setRenderTarget(r),A&&h.render(y,a),h.render(e,a)}y.geometry.dispose(),y.material.dispose(),h.toneMapping=p,h.autoClear=d,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===ao||e.mapping===ra;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=oT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=sT());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Cn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;im(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,Ix)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=iT[(r-s-1)%iT.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const h=3,d=new Cn(this._lodPlanes[r],u),p=u.uniforms,m=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Qa-1),A=s/y,x=isFinite(s)?1+Math.floor(h*A):Qa;x>Qa&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Qa}`);const g=[];let _=0;for(let I=0;I<Qa;++I){const D=I/A,R=Math.exp(-D*D/2);g.push(R),I===0?_+=R:I<x&&(_+=2*R)}for(let I=0;I<g.length;I++)g[I]=g[I]/_;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:M}=this;p.dTheta.value=y,p.mipInt.value=M-i;const w=this._sizeLods[r],P=3*w*(r>M-Hc?r-M+Hc:0),b=4*(this._cubeSize-w);im(t,P,b,3*w,2*w),l.setRenderTarget(t),l.render(d,Ix)}}function mG(n){const e=[],t=[],i=[];let r=n;const s=n-Hc+1+tT.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Hc?l=tT[o-n+Hc-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),h=-u,d=1+u,p=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,y=6,A=3,x=2,g=1,_=new Float32Array(A*y*m),M=new Float32Array(x*y*m),w=new Float32Array(g*y*m);for(let b=0;b<m;b++){const I=b%3*2/3-1,D=b>2?0:-1,R=[I,D,0,I+2/3,D,0,I+2/3,D+1,0,I,D,0,I+2/3,D+1,0,I,D+1,0];_.set(R,A*y*b),M.set(p,x*y*b);const T=[b,b,b,b,b,b];w.set(T,g*y*b)}const P=new wt;P.setAttribute("position",new Ut(_,A)),P.setAttribute("uv",new Ut(M,x)),P.setAttribute("faceIndex",new Ut(w,g)),e.push(P),r>Hc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function rT(n,e,t){const i=new ts(n,e,t);return i.texture.mapping=Cu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function im(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function gG(n,e,t){const i=new Float32Array(Qa),r=new U(0,1,0);return new ns({name:"SphericalGaussianBlur",defines:{n:Qa,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:DS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:qs,depthTest:!1,depthWrite:!1})}function sT(){return new ns({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:DS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:qs,depthTest:!1,depthWrite:!1})}function oT(){return new ns({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:DS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:qs,depthTest:!1,depthWrite:!1})}function DS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function vG(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===Ch||l===Th,h=l===ao||l===ra;if(u||h){let d=e.get(a);const p=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return t===null&&(t=new P1(n)),d=u?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const m=a.image;return u&&m&&m.height>0||h&&m&&r(m)?(t===null&&(t=new P1(n)),d=u?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function r(a){let l=0;const u=6;for(let h=0;h<u;h++)a[h]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function yG(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&TS("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function xG(n,e,t,i){const r={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);for(const y in p.morphAttributes){const A=p.morphAttributes[y];for(let x=0,g=A.length;x<g;x++)e.remove(A[x])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(d,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const y in p)e.update(p[y],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const y in m){const A=m[y];for(let x=0,g=A.length;x<g;x++)e.update(A[x],n.ARRAY_BUFFER)}}function u(d){const p=[],m=d.index,y=d.attributes.position;let A=0;if(m!==null){const _=m.array;A=m.version;for(let M=0,w=_.length;M<w;M+=3){const P=_[M+0],b=_[M+1],I=_[M+2];p.push(P,b,b,I,I,P)}}else if(y!==void 0){const _=y.array;A=y.version;for(let M=0,w=_.length/3-1;M<w;M+=3){const P=M+0,b=M+1,I=M+2;p.push(P,b,b,I,I,P)}}else return;const x=new(NI(p)?PS:RS)(p,1);x.version=A;const g=s.get(d);g&&e.remove(g),s.set(d,x)}function h(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&u(d)}else u(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:h}}function _G(n,e,t){let i;function r(p){i=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){n.drawElements(i,m,s,p*o),t.update(m,i,1)}function u(p,m,y){y!==0&&(n.drawElementsInstanced(i,m,s,p*o,y),t.update(m,i,y))}function h(p,m,y){if(y===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,p,0,y);let x=0;for(let g=0;g<y;g++)x+=m[g];t.update(x,i,1)}function d(p,m,y,A){if(y===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let g=0;g<p.length;g++)u(p[g]/o,m[g],A[g]);else{x.multiDrawElementsInstancedWEBGL(i,m,0,s,p,0,A,0,y);let g=0;for(let _=0;_<y;_++)g+=m[_];for(let _=0;_<A.length;_++)t.update(g,i,A[_])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=d}function AG(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function SG(n,e,t){const i=new WeakMap,r=new Wt;function s(o,a,l){const u=o.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=h!==void 0?h.length:0;let p=i.get(a);if(p===void 0||p.count!==d){let R=function(){I.dispose(),i.delete(a),a.removeEventListener("dispose",R)};p!==void 0&&p.texture.dispose();const m=a.morphAttributes.position!==void 0,y=a.morphAttributes.normal!==void 0,A=a.morphAttributes.color!==void 0,x=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],_=a.morphAttributes.color||[];let M=0;m===!0&&(M=1),y===!0&&(M=2),A===!0&&(M=3);let w=a.attributes.position.count*M,P=1;w>e.maxTextureSize&&(P=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const b=new Float32Array(w*P*4*d),I=new q0(b,w,P,d);I.type=Hi,I.needsUpdate=!0;const D=M*4;for(let T=0;T<d;T++){const N=x[T],Q=g[T],W=_[T],K=w*P*4*T;for(let Y=0;Y<N.count;Y++){const Z=Y*D;m===!0&&(r.fromBufferAttribute(N,Y),b[K+Z+0]=r.x,b[K+Z+1]=r.y,b[K+Z+2]=r.z,b[K+Z+3]=0),y===!0&&(r.fromBufferAttribute(Q,Y),b[K+Z+4]=r.x,b[K+Z+5]=r.y,b[K+Z+6]=r.z,b[K+Z+7]=0),A===!0&&(r.fromBufferAttribute(W,Y),b[K+Z+8]=r.x,b[K+Z+9]=r.y,b[K+Z+10]=r.z,b[K+Z+11]=W.itemSize===4?r.w:1)}}p={count:d,texture:I,size:new pe(w,P)},i.set(a,p),a.addEventListener("dispose",R)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let m=0;for(let A=0;A<u.length;A++)m+=u[A];const y=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(n,"morphTargetBaseInfluence",y),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",p.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",p.size)}return{update:s}}function MG(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,h=l.geometry,d=e.get(l,h);if(r.get(d)!==u&&(e.update(d),r.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return d}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}class LS extends on{constructor(e,t,i,r,s,o,a,l,u,h=hl){if(h!==hl&&h!==wl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&h===hl&&(i=lo),i===void 0&&h===wl&&(i=Ml),super(null,r,s,o,a,l,h,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:On,this.minFilter=l!==void 0?l:On,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const VI=new on,aT=new LS(1,1),WI=new q0,jI=new bS,XI=new sd,lT=[],cT=[],uT=new Float32Array(16),fT=new Float32Array(9),hT=new Float32Array(4);function Ru(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=lT[r];if(s===void 0&&(s=new Float32Array(r),lT[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Un(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function kn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function $0(n,e){let t=cT[e];t===void 0&&(t=new Int32Array(e),cT[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function wG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function EG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2fv(this.addr,e),kn(t,e)}}function CG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Un(t,e))return;n.uniform3fv(this.addr,e),kn(t,e)}}function TG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4fv(this.addr,e),kn(t,e)}}function bG(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Un(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),kn(t,e)}else{if(Un(t,i))return;hT.set(i),n.uniformMatrix2fv(this.addr,!1,hT),kn(t,i)}}function RG(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Un(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),kn(t,e)}else{if(Un(t,i))return;fT.set(i),n.uniformMatrix3fv(this.addr,!1,fT),kn(t,i)}}function PG(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Un(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),kn(t,e)}else{if(Un(t,i))return;uT.set(i),n.uniformMatrix4fv(this.addr,!1,uT),kn(t,i)}}function BG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function IG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2iv(this.addr,e),kn(t,e)}}function DG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Un(t,e))return;n.uniform3iv(this.addr,e),kn(t,e)}}function LG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4iv(this.addr,e),kn(t,e)}}function NG(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function FG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2uiv(this.addr,e),kn(t,e)}}function OG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Un(t,e))return;n.uniform3uiv(this.addr,e),kn(t,e)}}function UG(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4uiv(this.addr,e),kn(t,e)}}function kG(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(aT.compareFunction=ES,s=aT):s=VI,t.setTexture2D(e||s,r)}function HG(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||jI,r)}function zG(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||XI,r)}function GG(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||WI,r)}function VG(n){switch(n){case 5126:return wG;case 35664:return EG;case 35665:return CG;case 35666:return TG;case 35674:return bG;case 35675:return RG;case 35676:return PG;case 5124:case 35670:return BG;case 35667:case 35671:return IG;case 35668:case 35672:return DG;case 35669:case 35673:return LG;case 5125:return NG;case 36294:return FG;case 36295:return OG;case 36296:return UG;case 35678:case 36198:case 36298:case 36306:case 35682:return kG;case 35679:case 36299:case 36307:return HG;case 35680:case 36300:case 36308:case 36293:return zG;case 36289:case 36303:case 36311:case 36292:return GG}}function WG(n,e){n.uniform1fv(this.addr,e)}function jG(n,e){const t=Ru(e,this.size,2);n.uniform2fv(this.addr,t)}function XG(n,e){const t=Ru(e,this.size,3);n.uniform3fv(this.addr,t)}function JG(n,e){const t=Ru(e,this.size,4);n.uniform4fv(this.addr,t)}function KG(n,e){const t=Ru(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function YG(n,e){const t=Ru(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function QG(n,e){const t=Ru(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function ZG(n,e){n.uniform1iv(this.addr,e)}function qG(n,e){n.uniform2iv(this.addr,e)}function $G(n,e){n.uniform3iv(this.addr,e)}function eV(n,e){n.uniform4iv(this.addr,e)}function tV(n,e){n.uniform1uiv(this.addr,e)}function nV(n,e){n.uniform2uiv(this.addr,e)}function iV(n,e){n.uniform3uiv(this.addr,e)}function rV(n,e){n.uniform4uiv(this.addr,e)}function sV(n,e,t){const i=this.cache,r=e.length,s=$0(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),kn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||VI,s[o])}function oV(n,e,t){const i=this.cache,r=e.length,s=$0(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),kn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||jI,s[o])}function aV(n,e,t){const i=this.cache,r=e.length,s=$0(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),kn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||XI,s[o])}function lV(n,e,t){const i=this.cache,r=e.length,s=$0(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),kn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||WI,s[o])}function cV(n){switch(n){case 5126:return WG;case 35664:return jG;case 35665:return XG;case 35666:return JG;case 35674:return KG;case 35675:return YG;case 35676:return QG;case 5124:case 35670:return ZG;case 35667:case 35671:return qG;case 35668:case 35672:return $G;case 35669:case 35673:return eV;case 5125:return tV;case 36294:return nV;case 36295:return iV;case 36296:return rV;case 35678:case 36198:case 36298:case 36306:case 35682:return sV;case 35679:case 36299:case 36307:return oV;case 35680:case 36300:case 36308:case 36293:return aV;case 36289:case 36303:case 36311:case 36292:return lV}}class uV{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=VG(t.type)}}class fV{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=cV(t.type)}}class hV{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const Ox=/(\w+)(\])?(\[|\.)?/g;function dT(n,e){n.seq.push(e),n.map[e.id]=e}function dV(n,e,t){const i=n.name,r=i.length;for(Ox.lastIndex=0;;){const s=Ox.exec(i),o=Ox.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){dT(t,u===void 0?new uV(a,n,e):new fV(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new hV(a),dT(t,d)),t=d}}}class $m{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);dV(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function pT(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const pV=37297;let mV=0;function gV(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function vV(n){const e=Vt.getPrimaries(Vt.workingColorSpace),t=Vt.getPrimaries(n);let i;switch(e===t?i="":e===Bh&&t===Ph?i="LinearDisplayP3ToLinearSRGB":e===Ph&&t===Bh&&(i="LinearSRGBToLinearDisplayP3"),n){case ho:case id:return[i,"LinearTransferOETF"];case Mr:case Z0:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function mT(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+gV(n.getShaderSource(e),o)}else return r}function yV(n,e){const t=vV(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function xV(n,e){let t;switch(e){case dI:t="Linear";break;case pI:t="Reinhard";break;case mI:t="OptimizedCineon";break;case dS:t="ACESFilmic";break;case vI:t="AgX";break;case yI:t="Neutral";break;case gI:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function _V(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Nf).join(`
`)}function AV(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function SV(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Nf(n){return n!==""}function gT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function vT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const MV=/^[ \t]*#include +<([\w\d./]+)>/gm;function B1(n){return n.replace(MV,EV)}const wV=new Map;function EV(n,e){let t=Tt[e];if(t===void 0){const i=wV.get(e);if(i!==void 0)t=Tt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return B1(t)}const CV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function yT(n){return n.replace(CV,TV)}function TV(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function xT(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function bV(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===z0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Xf?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Wr&&(e="SHADOWMAP_TYPE_VSM"),e}function RV(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ao:case ra:e="ENVMAP_TYPE_CUBE";break;case Cu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function PV(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ra:e="ENVMAP_MODE_REFRACTION";break}return e}function BV(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case td:e="ENVMAP_BLENDING_MULTIPLY";break;case fI:e="ENVMAP_BLENDING_MIX";break;case hI:e="ENVMAP_BLENDING_ADD";break}return e}function IV(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function DV(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=bV(t),u=RV(t),h=PV(t),d=BV(t),p=IV(t),m=_V(t),y=AV(s),A=r.createProgram();let x,g,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Nf).join(`
`),x.length>0&&(x+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y].filter(Nf).join(`
`),g.length>0&&(g+=`
`)):(x=[xT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Nf).join(`
`),g=[xT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,y,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ss?"#define TONE_MAPPING":"",t.toneMapping!==Ss?Tt.tonemapping_pars_fragment:"",t.toneMapping!==Ss?xV("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Tt.colorspace_pars_fragment,yV("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Nf).join(`
`)),o=B1(o),o=gT(o,t),o=vT(o,t),a=B1(a),a=gT(a,t),a=vT(a,t),o=yT(o),a=yT(a),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",t.glslVersion===R1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===R1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const M=_+x+o,w=_+g+a,P=pT(r,r.VERTEX_SHADER,M),b=pT(r,r.FRAGMENT_SHADER,w);r.attachShader(A,P),r.attachShader(A,b),t.index0AttributeName!==void 0?r.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(A,0,"position"),r.linkProgram(A);function I(N){if(n.debug.checkShaderErrors){const Q=r.getProgramInfoLog(A).trim(),W=r.getShaderInfoLog(P).trim(),K=r.getShaderInfoLog(b).trim();let Y=!0,Z=!0;if(r.getProgramParameter(A,r.LINK_STATUS)===!1)if(Y=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,A,P,b);else{const z=mT(r,P,"vertex"),B=mT(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(A,r.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+Q+`
`+z+`
`+B)}else Q!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Q):(W===""||K==="")&&(Z=!1);Z&&(N.diagnostics={runnable:Y,programLog:Q,vertexShader:{log:W,prefix:x},fragmentShader:{log:K,prefix:g}})}r.deleteShader(P),r.deleteShader(b),D=new $m(r,A),R=SV(r,A)}let D;this.getUniforms=function(){return D===void 0&&I(this),D};let R;this.getAttributes=function(){return R===void 0&&I(this),R};let T=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return T===!1&&(T=r.getProgramParameter(A,pV)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=mV++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=P,this.fragmentShader=b,this}let LV=0;class NV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new FV(e),t.set(e,i)),i}}class FV{constructor(e){this.id=LV++,this.code=e,this.usedTimes=0}}function OV(n,e,t,i,r,s,o){const a=new pl,l=new NV,u=new Set,h=[],d=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(R){return u.add(R),R===0?"uv":`uv${R}`}function x(R,T,N,Q,W){const K=Q.fog,Y=W.geometry,Z=R.isMeshStandardMaterial?Q.environment:null,z=(R.isMeshStandardMaterial?t:e).get(R.envMap||Z),B=z&&z.mapping===Cu?z.image.height:null,G=y[R.type];R.precision!==null&&(m=r.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));const V=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,q=V!==void 0?V.length:0;let ue=0;Y.morphAttributes.position!==void 0&&(ue=1),Y.morphAttributes.normal!==void 0&&(ue=2),Y.morphAttributes.color!==void 0&&(ue=3);let be,re,me,we;if(G){const Te=Kr[G];be=Te.vertexShader,re=Te.fragmentShader}else be=R.vertexShader,re=R.fragmentShader,l.update(R),me=l.getVertexShaderID(R),we=l.getFragmentShaderID(R);const Ee=n.getRenderTarget(),nt=W.isInstancedMesh===!0,dt=W.isBatchedMesh===!0,Ke=!!R.map,He=!!R.matcap,O=!!z,ye=!!R.aoMap,Me=!!R.lightMap,Ie=!!R.bumpMap,he=!!R.normalMap,Ye=!!R.displacementMap,Le=!!R.emissiveMap,Ge=!!R.metalnessMap,H=!!R.roughnessMap,L=R.anisotropy>0,se=R.clearcoat>0,xe=R.dispersion>0,_e=R.iridescence>0,Ae=R.sheen>0,$e=R.transmission>0,Pe=L&&!!R.anisotropyMap,We=se&&!!R.clearcoatMap,vt=se&&!!R.clearcoatNormalMap,Ce=se&&!!R.clearcoatRoughnessMap,ze=_e&&!!R.iridescenceMap,bt=_e&&!!R.iridescenceThicknessMap,lt=Ae&&!!R.sheenColorMap,je=Ae&&!!R.sheenRoughnessMap,J=!!R.specularMap,ge=!!R.specularColorMap,Ue=!!R.specularIntensityMap,j=$e&&!!R.transmissionMap,Se=$e&&!!R.thicknessMap,de=!!R.gradientMap,ve=!!R.alphaMap,Ne=R.alphaTest>0,at=!!R.alphaHash,yt=!!R.extensions;let Dt=Ss;R.toneMapped&&(Ee===null||Ee.isXRRenderTarget===!0)&&(Dt=n.toneMapping);const st={shaderID:G,shaderType:R.type,shaderName:R.name,vertexShader:be,fragmentShader:re,defines:R.defines,customVertexShaderID:me,customFragmentShaderID:we,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,batching:dt,batchingColor:dt&&W._colorsTexture!==null,instancing:nt,instancingColor:nt&&W.instanceColor!==null,instancingMorph:nt&&W.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Ee===null?n.outputColorSpace:Ee.isXRRenderTarget===!0?Ee.texture.colorSpace:ho,alphaToCoverage:!!R.alphaToCoverage,map:Ke,matcap:He,envMap:O,envMapMode:O&&z.mapping,envMapCubeUVHeight:B,aoMap:ye,lightMap:Me,bumpMap:Ie,normalMap:he,displacementMap:p&&Ye,emissiveMap:Le,normalMapObjectSpace:he&&R.normalMapType===CI,normalMapTangentSpace:he&&R.normalMapType===ha,metalnessMap:Ge,roughnessMap:H,anisotropy:L,anisotropyMap:Pe,clearcoat:se,clearcoatMap:We,clearcoatNormalMap:vt,clearcoatRoughnessMap:Ce,dispersion:xe,iridescence:_e,iridescenceMap:ze,iridescenceThicknessMap:bt,sheen:Ae,sheenColorMap:lt,sheenRoughnessMap:je,specularMap:J,specularColorMap:ge,specularIntensityMap:Ue,transmission:$e,transmissionMap:j,thicknessMap:Se,gradientMap:de,opaque:R.transparent===!1&&R.blending===fl&&R.alphaToCoverage===!1,alphaMap:ve,alphaTest:Ne,alphaHash:at,combine:R.combine,mapUv:Ke&&A(R.map.channel),aoMapUv:ye&&A(R.aoMap.channel),lightMapUv:Me&&A(R.lightMap.channel),bumpMapUv:Ie&&A(R.bumpMap.channel),normalMapUv:he&&A(R.normalMap.channel),displacementMapUv:Ye&&A(R.displacementMap.channel),emissiveMapUv:Le&&A(R.emissiveMap.channel),metalnessMapUv:Ge&&A(R.metalnessMap.channel),roughnessMapUv:H&&A(R.roughnessMap.channel),anisotropyMapUv:Pe&&A(R.anisotropyMap.channel),clearcoatMapUv:We&&A(R.clearcoatMap.channel),clearcoatNormalMapUv:vt&&A(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ce&&A(R.clearcoatRoughnessMap.channel),iridescenceMapUv:ze&&A(R.iridescenceMap.channel),iridescenceThicknessMapUv:bt&&A(R.iridescenceThicknessMap.channel),sheenColorMapUv:lt&&A(R.sheenColorMap.channel),sheenRoughnessMapUv:je&&A(R.sheenRoughnessMap.channel),specularMapUv:J&&A(R.specularMap.channel),specularColorMapUv:ge&&A(R.specularColorMap.channel),specularIntensityMapUv:Ue&&A(R.specularIntensityMap.channel),transmissionMapUv:j&&A(R.transmissionMap.channel),thicknessMapUv:Se&&A(R.thicknessMap.channel),alphaMapUv:ve&&A(R.alphaMap.channel),vertexTangents:!!Y.attributes.tangent&&(he||L),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!Y.attributes.uv&&(Ke||ve),fog:!!K,useFog:R.fog===!0,fogExp2:!!K&&K.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:W.isSkinnedMesh===!0,morphTargets:Y.morphAttributes.position!==void 0,morphNormals:Y.morphAttributes.normal!==void 0,morphColors:Y.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:ue,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:Dt,decodeVideoTexture:Ke&&R.map.isVideoTexture===!0&&Vt.getTransfer(R.map.colorSpace)===qt,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Tr,flipSided:R.side===Ri,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:yt&&R.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(yt&&R.extensions.multiDraw===!0||dt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return st.vertexUv1s=u.has(1),st.vertexUv2s=u.has(2),st.vertexUv3s=u.has(3),u.clear(),st}function g(R){const T=[];if(R.shaderID?T.push(R.shaderID):(T.push(R.customVertexShaderID),T.push(R.customFragmentShaderID)),R.defines!==void 0)for(const N in R.defines)T.push(N),T.push(R.defines[N]);return R.isRawShaderMaterial===!1&&(_(T,R),M(T,R),T.push(n.outputColorSpace)),T.push(R.customProgramCacheKey),T.join()}function _(R,T){R.push(T.precision),R.push(T.outputColorSpace),R.push(T.envMapMode),R.push(T.envMapCubeUVHeight),R.push(T.mapUv),R.push(T.alphaMapUv),R.push(T.lightMapUv),R.push(T.aoMapUv),R.push(T.bumpMapUv),R.push(T.normalMapUv),R.push(T.displacementMapUv),R.push(T.emissiveMapUv),R.push(T.metalnessMapUv),R.push(T.roughnessMapUv),R.push(T.anisotropyMapUv),R.push(T.clearcoatMapUv),R.push(T.clearcoatNormalMapUv),R.push(T.clearcoatRoughnessMapUv),R.push(T.iridescenceMapUv),R.push(T.iridescenceThicknessMapUv),R.push(T.sheenColorMapUv),R.push(T.sheenRoughnessMapUv),R.push(T.specularMapUv),R.push(T.specularColorMapUv),R.push(T.specularIntensityMapUv),R.push(T.transmissionMapUv),R.push(T.thicknessMapUv),R.push(T.combine),R.push(T.fogExp2),R.push(T.sizeAttenuation),R.push(T.morphTargetsCount),R.push(T.morphAttributeCount),R.push(T.numDirLights),R.push(T.numPointLights),R.push(T.numSpotLights),R.push(T.numSpotLightMaps),R.push(T.numHemiLights),R.push(T.numRectAreaLights),R.push(T.numDirLightShadows),R.push(T.numPointLightShadows),R.push(T.numSpotLightShadows),R.push(T.numSpotLightShadowsWithMaps),R.push(T.numLightProbes),R.push(T.shadowMapType),R.push(T.toneMapping),R.push(T.numClippingPlanes),R.push(T.numClipIntersection),R.push(T.depthPacking)}function M(R,T){a.disableAll(),T.supportsVertexTextures&&a.enable(0),T.instancing&&a.enable(1),T.instancingColor&&a.enable(2),T.instancingMorph&&a.enable(3),T.matcap&&a.enable(4),T.envMap&&a.enable(5),T.normalMapObjectSpace&&a.enable(6),T.normalMapTangentSpace&&a.enable(7),T.clearcoat&&a.enable(8),T.iridescence&&a.enable(9),T.alphaTest&&a.enable(10),T.vertexColors&&a.enable(11),T.vertexAlphas&&a.enable(12),T.vertexUv1s&&a.enable(13),T.vertexUv2s&&a.enable(14),T.vertexUv3s&&a.enable(15),T.vertexTangents&&a.enable(16),T.anisotropy&&a.enable(17),T.alphaHash&&a.enable(18),T.batching&&a.enable(19),T.dispersion&&a.enable(20),T.batchingColor&&a.enable(21),R.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.skinning&&a.enable(4),T.morphTargets&&a.enable(5),T.morphNormals&&a.enable(6),T.morphColors&&a.enable(7),T.premultipliedAlpha&&a.enable(8),T.shadowMapEnabled&&a.enable(9),T.doubleSided&&a.enable(10),T.flipSided&&a.enable(11),T.useDepthPacking&&a.enable(12),T.dithering&&a.enable(13),T.transmission&&a.enable(14),T.sheen&&a.enable(15),T.opaque&&a.enable(16),T.pointsUvs&&a.enable(17),T.decodeVideoTexture&&a.enable(18),T.alphaToCoverage&&a.enable(19),R.push(a.mask)}function w(R){const T=y[R.type];let N;if(T){const Q=Kr[T];N=zI.clone(Q.uniforms)}else N=R.uniforms;return N}function P(R,T){let N;for(let Q=0,W=h.length;Q<W;Q++){const K=h[Q];if(K.cacheKey===T){N=K,++N.usedTimes;break}}return N===void 0&&(N=new DV(n,T,R,s),h.push(N)),N}function b(R){if(--R.usedTimes===0){const T=h.indexOf(R);h[T]=h[h.length-1],h.pop(),R.destroy()}}function I(R){l.remove(R)}function D(){l.dispose()}return{getParameters:x,getProgramCacheKey:g,getUniforms:w,acquireProgram:P,releaseProgram:b,releaseShaderCache:I,programs:h,dispose:D}}function UV(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function kV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function _T(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function AT(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(d,p,m,y,A,x){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:p,material:m,groupOrder:y,renderOrder:d.renderOrder,z:A,group:x},n[e]=g):(g.id=d.id,g.object=d,g.geometry=p,g.material=m,g.groupOrder=y,g.renderOrder=d.renderOrder,g.z=A,g.group=x),e++,g}function a(d,p,m,y,A,x){const g=o(d,p,m,y,A,x);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(d,p,m,y,A,x){const g=o(d,p,m,y,A,x);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function u(d,p){t.length>1&&t.sort(d||kV),i.length>1&&i.sort(p||_T),r.length>1&&r.sort(p||_T)}function h(){for(let d=e,p=n.length;d<p;d++){const m=n[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:h,sort:u}}function HV(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new AT,n.set(i,[o])):r>=s.length?(o=new AT,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function zV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new U,color:new Oe};break;case"SpotLight":t={position:new U,direction:new U,color:new Oe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new U,color:new Oe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new U,skyColor:new Oe,groundColor:new Oe};break;case"RectAreaLight":t={color:new Oe,position:new U,halfWidth:new U,halfHeight:new U};break}return n[e.id]=t,t}}}function GV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let VV=0;function WV(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function jV(n){const e=new zV,t=GV(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new U);const r=new U,s=new ft,o=new ft;function a(u){let h=0,d=0,p=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let m=0,y=0,A=0,x=0,g=0,_=0,M=0,w=0,P=0,b=0,I=0;u.sort(WV);for(let R=0,T=u.length;R<T;R++){const N=u[R],Q=N.color,W=N.intensity,K=N.distance,Y=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)h+=Q.r*W,d+=Q.g*W,p+=Q.b*W;else if(N.isLightProbe){for(let Z=0;Z<9;Z++)i.probe[Z].addScaledVector(N.sh.coefficients[Z],W);I++}else if(N.isDirectionalLight){const Z=e.get(N);if(Z.color.copy(N.color).multiplyScalar(N.intensity),N.castShadow){const z=N.shadow,B=t.get(N);B.shadowIntensity=z.intensity,B.shadowBias=z.bias,B.shadowNormalBias=z.normalBias,B.shadowRadius=z.radius,B.shadowMapSize=z.mapSize,i.directionalShadow[m]=B,i.directionalShadowMap[m]=Y,i.directionalShadowMatrix[m]=N.shadow.matrix,_++}i.directional[m]=Z,m++}else if(N.isSpotLight){const Z=e.get(N);Z.position.setFromMatrixPosition(N.matrixWorld),Z.color.copy(Q).multiplyScalar(W),Z.distance=K,Z.coneCos=Math.cos(N.angle),Z.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),Z.decay=N.decay,i.spot[A]=Z;const z=N.shadow;if(N.map&&(i.spotLightMap[P]=N.map,P++,z.updateMatrices(N),N.castShadow&&b++),i.spotLightMatrix[A]=z.matrix,N.castShadow){const B=t.get(N);B.shadowIntensity=z.intensity,B.shadowBias=z.bias,B.shadowNormalBias=z.normalBias,B.shadowRadius=z.radius,B.shadowMapSize=z.mapSize,i.spotShadow[A]=B,i.spotShadowMap[A]=Y,w++}A++}else if(N.isRectAreaLight){const Z=e.get(N);Z.color.copy(Q).multiplyScalar(W),Z.halfWidth.set(N.width*.5,0,0),Z.halfHeight.set(0,N.height*.5,0),i.rectArea[x]=Z,x++}else if(N.isPointLight){const Z=e.get(N);if(Z.color.copy(N.color).multiplyScalar(N.intensity),Z.distance=N.distance,Z.decay=N.decay,N.castShadow){const z=N.shadow,B=t.get(N);B.shadowIntensity=z.intensity,B.shadowBias=z.bias,B.shadowNormalBias=z.normalBias,B.shadowRadius=z.radius,B.shadowMapSize=z.mapSize,B.shadowCameraNear=z.camera.near,B.shadowCameraFar=z.camera.far,i.pointShadow[y]=B,i.pointShadowMap[y]=Y,i.pointShadowMatrix[y]=N.shadow.matrix,M++}i.point[y]=Z,y++}else if(N.isHemisphereLight){const Z=e.get(N);Z.skyColor.copy(N.color).multiplyScalar(W),Z.groundColor.copy(N.groundColor).multiplyScalar(W),i.hemi[g]=Z,g++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ke.LTC_FLOAT_1,i.rectAreaLTC2=ke.LTC_FLOAT_2):(i.rectAreaLTC1=ke.LTC_HALF_1,i.rectAreaLTC2=ke.LTC_HALF_2)),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=p;const D=i.hash;(D.directionalLength!==m||D.pointLength!==y||D.spotLength!==A||D.rectAreaLength!==x||D.hemiLength!==g||D.numDirectionalShadows!==_||D.numPointShadows!==M||D.numSpotShadows!==w||D.numSpotMaps!==P||D.numLightProbes!==I)&&(i.directional.length=m,i.spot.length=A,i.rectArea.length=x,i.point.length=y,i.hemi.length=g,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=w,i.spotShadowMap.length=w,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=w+P-b,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=b,i.numLightProbes=I,D.directionalLength=m,D.pointLength=y,D.spotLength=A,D.rectAreaLength=x,D.hemiLength=g,D.numDirectionalShadows=_,D.numPointShadows=M,D.numSpotShadows=w,D.numSpotMaps=P,D.numLightProbes=I,i.version=VV++)}function l(u,h){let d=0,p=0,m=0,y=0,A=0;const x=h.matrixWorldInverse;for(let g=0,_=u.length;g<_;g++){const M=u[g];if(M.isDirectionalLight){const w=i.directional[d];w.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(x),d++}else if(M.isSpotLight){const w=i.spot[m];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(x),w.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),w.direction.sub(r),w.direction.transformDirection(x),m++}else if(M.isRectAreaLight){const w=i.rectArea[y];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(x),o.identity(),s.copy(M.matrixWorld),s.premultiply(x),o.extractRotation(s),w.halfWidth.set(M.width*.5,0,0),w.halfHeight.set(0,M.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),y++}else if(M.isPointLight){const w=i.point[p];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(x),p++}else if(M.isHemisphereLight){const w=i.hemi[A];w.direction.setFromMatrixPosition(M.matrixWorld),w.direction.transformDirection(x),A++}}}return{setup:a,setupView:l,state:i}}function ST(n){const e=new jV(n),t=[],i=[];function r(h){u.camera=h,t.length=0,i.length=0}function s(h){t.push(h)}function o(h){i.push(h)}function a(){e.setup(t)}function l(h){e.setupView(t,h)}const u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function XV(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new ST(n),e.set(r,[a])):s>=o.length?(a=new ST(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class NS extends In{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=wI,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class FS extends In{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const JV=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,KV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function YV(n,e,t){let i=new od;const r=new pe,s=new pe,o=new Wt,a=new NS({depthPacking:EI}),l=new FS,u={},h=t.maxTextureSize,d={[Cs]:Ri,[Ri]:Cs,[Tr]:Tr},p=new ns({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pe},radius:{value:4}},vertexShader:JV,fragmentShader:KV}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const y=new wt;y.setAttribute("position",new Ut(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Cn(y,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=z0;let g=this.type;this.render=function(b,I,D){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||b.length===0)return;const R=n.getRenderTarget(),T=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),Q=n.state;Q.setBlending(qs),Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);const W=g!==Wr&&this.type===Wr,K=g===Wr&&this.type!==Wr;for(let Y=0,Z=b.length;Y<Z;Y++){const z=b[Y],B=z.shadow;if(B===void 0){console.warn("THREE.WebGLShadowMap:",z,"has no shadow.");continue}if(B.autoUpdate===!1&&B.needsUpdate===!1)continue;r.copy(B.mapSize);const G=B.getFrameExtents();if(r.multiply(G),s.copy(B.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/G.x),r.x=s.x*G.x,B.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/G.y),r.y=s.y*G.y,B.mapSize.y=s.y)),B.map===null||W===!0||K===!0){const q=this.type!==Wr?{minFilter:On,magFilter:On}:{};B.map!==null&&B.map.dispose(),B.map=new ts(r.x,r.y,q),B.map.texture.name=z.name+".shadowMap",B.camera.updateProjectionMatrix()}n.setRenderTarget(B.map),n.clear();const V=B.getViewportCount();for(let q=0;q<V;q++){const ue=B.getViewport(q);o.set(s.x*ue.x,s.y*ue.y,s.x*ue.z,s.y*ue.w),Q.viewport(o),B.updateMatrices(z,q),i=B.getFrustum(),w(I,D,B.camera,z,this.type)}B.isPointLightShadow!==!0&&this.type===Wr&&_(B,D),B.needsUpdate=!1}g=this.type,x.needsUpdate=!1,n.setRenderTarget(R,T,N)};function _(b,I){const D=e.update(A);p.defines.VSM_SAMPLES!==b.blurSamples&&(p.defines.VSM_SAMPLES=b.blurSamples,m.defines.VSM_SAMPLES=b.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new ts(r.x,r.y)),p.uniforms.shadow_pass.value=b.map.texture,p.uniforms.resolution.value=b.mapSize,p.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(I,null,D,p,A,null),m.uniforms.shadow_pass.value=b.mapPass.texture,m.uniforms.resolution.value=b.mapSize,m.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(I,null,D,m,A,null)}function M(b,I,D,R){let T=null;const N=D.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(N!==void 0)T=N;else if(T=D.isPointLight===!0?l:a,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const Q=T.uuid,W=I.uuid;let K=u[Q];K===void 0&&(K={},u[Q]=K);let Y=K[W];Y===void 0&&(Y=T.clone(),K[W]=Y,I.addEventListener("dispose",P)),T=Y}if(T.visible=I.visible,T.wireframe=I.wireframe,R===Wr?T.side=I.shadowSide!==null?I.shadowSide:I.side:T.side=I.shadowSide!==null?I.shadowSide:d[I.side],T.alphaMap=I.alphaMap,T.alphaTest=I.alphaTest,T.map=I.map,T.clipShadows=I.clipShadows,T.clippingPlanes=I.clippingPlanes,T.clipIntersection=I.clipIntersection,T.displacementMap=I.displacementMap,T.displacementScale=I.displacementScale,T.displacementBias=I.displacementBias,T.wireframeLinewidth=I.wireframeLinewidth,T.linewidth=I.linewidth,D.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const Q=n.properties.get(T);Q.light=D}return T}function w(b,I,D,R,T){if(b.visible===!1)return;if(b.layers.test(I.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&T===Wr)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,b.matrixWorld);const W=e.update(b),K=b.material;if(Array.isArray(K)){const Y=W.groups;for(let Z=0,z=Y.length;Z<z;Z++){const B=Y[Z],G=K[B.materialIndex];if(G&&G.visible){const V=M(b,G,R,T);b.onBeforeShadow(n,b,I,D,W,V,B),n.renderBufferDirect(D,null,W,V,b,B),b.onAfterShadow(n,b,I,D,W,V,B)}}}else if(K.visible){const Y=M(b,K,R,T);b.onBeforeShadow(n,b,I,D,W,Y,null),n.renderBufferDirect(D,null,W,Y,b,null),b.onAfterShadow(n,b,I,D,W,Y,null)}}const Q=b.children;for(let W=0,K=Q.length;W<K;W++)w(Q[W],I,D,R,T)}function P(b){b.target.removeEventListener("dispose",P);for(const D in u){const R=u[D],T=b.target.uuid;T in R&&(R[T].dispose(),delete R[T])}}}function QV(n){function e(){let j=!1;const Se=new Wt;let de=null;const ve=new Wt(0,0,0,0);return{setMask:function(Ne){de!==Ne&&!j&&(n.colorMask(Ne,Ne,Ne,Ne),de=Ne)},setLocked:function(Ne){j=Ne},setClear:function(Ne,at,yt,Dt,st){st===!0&&(Ne*=Dt,at*=Dt,yt*=Dt),Se.set(Ne,at,yt,Dt),ve.equals(Se)===!1&&(n.clearColor(Ne,at,yt,Dt),ve.copy(Se))},reset:function(){j=!1,de=null,ve.set(-1,0,0,0)}}}function t(){let j=!1,Se=null,de=null,ve=null;return{setTest:function(Ne){Ne?we(n.DEPTH_TEST):Ee(n.DEPTH_TEST)},setMask:function(Ne){Se!==Ne&&!j&&(n.depthMask(Ne),Se=Ne)},setFunc:function(Ne){if(de!==Ne){switch(Ne){case rI:n.depthFunc(n.NEVER);break;case sI:n.depthFunc(n.ALWAYS);break;case oI:n.depthFunc(n.LESS);break;case Eh:n.depthFunc(n.LEQUAL);break;case aI:n.depthFunc(n.EQUAL);break;case lI:n.depthFunc(n.GEQUAL);break;case cI:n.depthFunc(n.GREATER);break;case uI:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}de=Ne}},setLocked:function(Ne){j=Ne},setClear:function(Ne){ve!==Ne&&(n.clearDepth(Ne),ve=Ne)},reset:function(){j=!1,Se=null,de=null,ve=null}}}function i(){let j=!1,Se=null,de=null,ve=null,Ne=null,at=null,yt=null,Dt=null,st=null;return{setTest:function(Te){j||(Te?we(n.STENCIL_TEST):Ee(n.STENCIL_TEST))},setMask:function(Te){Se!==Te&&!j&&(n.stencilMask(Te),Se=Te)},setFunc:function(Te,ct,Lt){(de!==Te||ve!==ct||Ne!==Lt)&&(n.stencilFunc(Te,ct,Lt),de=Te,ve=ct,Ne=Lt)},setOp:function(Te,ct,Lt){(at!==Te||yt!==ct||Dt!==Lt)&&(n.stencilOp(Te,ct,Lt),at=Te,yt=ct,Dt=Lt)},setLocked:function(Te){j=Te},setClear:function(Te){st!==Te&&(n.clearStencil(Te),st=Te)},reset:function(){j=!1,Se=null,de=null,ve=null,Ne=null,at=null,yt=null,Dt=null,st=null}}}const r=new e,s=new t,o=new i,a=new WeakMap,l=new WeakMap;let u={},h={},d=new WeakMap,p=[],m=null,y=!1,A=null,x=null,g=null,_=null,M=null,w=null,P=null,b=new Oe(0,0,0),I=0,D=!1,R=null,T=null,N=null,Q=null,W=null;const K=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,Z=0;const z=n.getParameter(n.VERSION);z.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(z)[1]),Y=Z>=1):z.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),Y=Z>=2);let B=null,G={};const V=n.getParameter(n.SCISSOR_BOX),q=n.getParameter(n.VIEWPORT),ue=new Wt().fromArray(V),be=new Wt().fromArray(q);function re(j,Se,de,ve){const Ne=new Uint8Array(4),at=n.createTexture();n.bindTexture(j,at),n.texParameteri(j,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(j,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let yt=0;yt<de;yt++)j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY?n.texImage3D(Se,0,n.RGBA,1,1,ve,0,n.RGBA,n.UNSIGNED_BYTE,Ne):n.texImage2D(Se+yt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ne);return at}const me={};me[n.TEXTURE_2D]=re(n.TEXTURE_2D,n.TEXTURE_2D,1),me[n.TEXTURE_CUBE_MAP]=re(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),me[n.TEXTURE_2D_ARRAY]=re(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),me[n.TEXTURE_3D]=re(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),we(n.DEPTH_TEST),s.setFunc(Eh),Ie(!1),he(M1),we(n.CULL_FACE),ye(qs);function we(j){u[j]!==!0&&(n.enable(j),u[j]=!0)}function Ee(j){u[j]!==!1&&(n.disable(j),u[j]=!1)}function nt(j,Se){return h[j]!==Se?(n.bindFramebuffer(j,Se),h[j]=Se,j===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=Se),j===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=Se),!0):!1}function dt(j,Se){let de=p,ve=!1;if(j){de=d.get(Se),de===void 0&&(de=[],d.set(Se,de));const Ne=j.textures;if(de.length!==Ne.length||de[0]!==n.COLOR_ATTACHMENT0){for(let at=0,yt=Ne.length;at<yt;at++)de[at]=n.COLOR_ATTACHMENT0+at;de.length=Ne.length,ve=!0}}else de[0]!==n.BACK&&(de[0]=n.BACK,ve=!0);ve&&n.drawBuffers(de)}function Ke(j){return m!==j?(n.useProgram(j),m=j,!0):!1}const He={[zo]:n.FUNC_ADD,[zB]:n.FUNC_SUBTRACT,[GB]:n.FUNC_REVERSE_SUBTRACT};He[VB]=n.MIN,He[WB]=n.MAX;const O={[jB]:n.ZERO,[XB]:n.ONE,[JB]:n.SRC_COLOR,[Pg]:n.SRC_ALPHA,[$B]:n.SRC_ALPHA_SATURATE,[ZB]:n.DST_COLOR,[YB]:n.DST_ALPHA,[KB]:n.ONE_MINUS_SRC_COLOR,[Bg]:n.ONE_MINUS_SRC_ALPHA,[qB]:n.ONE_MINUS_DST_COLOR,[QB]:n.ONE_MINUS_DST_ALPHA,[eI]:n.CONSTANT_COLOR,[tI]:n.ONE_MINUS_CONSTANT_COLOR,[nI]:n.CONSTANT_ALPHA,[iI]:n.ONE_MINUS_CONSTANT_ALPHA};function ye(j,Se,de,ve,Ne,at,yt,Dt,st,Te){if(j===qs){y===!0&&(Ee(n.BLEND),y=!1);return}if(y===!1&&(we(n.BLEND),y=!0),j!==HB){if(j!==A||Te!==D){if((x!==zo||M!==zo)&&(n.blendEquation(n.FUNC_ADD),x=zo,M=zo),Te)switch(j){case fl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case w1:n.blendFunc(n.ONE,n.ONE);break;case E1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case C1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}else switch(j){case fl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case w1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case E1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case C1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}g=null,_=null,w=null,P=null,b.set(0,0,0),I=0,A=j,D=Te}return}Ne=Ne||Se,at=at||de,yt=yt||ve,(Se!==x||Ne!==M)&&(n.blendEquationSeparate(He[Se],He[Ne]),x=Se,M=Ne),(de!==g||ve!==_||at!==w||yt!==P)&&(n.blendFuncSeparate(O[de],O[ve],O[at],O[yt]),g=de,_=ve,w=at,P=yt),(Dt.equals(b)===!1||st!==I)&&(n.blendColor(Dt.r,Dt.g,Dt.b,st),b.copy(Dt),I=st),A=j,D=!1}function Me(j,Se){j.side===Tr?Ee(n.CULL_FACE):we(n.CULL_FACE);let de=j.side===Ri;Se&&(de=!de),Ie(de),j.blending===fl&&j.transparent===!1?ye(qs):ye(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),s.setFunc(j.depthFunc),s.setTest(j.depthTest),s.setMask(j.depthWrite),r.setMask(j.colorWrite);const ve=j.stencilWrite;o.setTest(ve),ve&&(o.setMask(j.stencilWriteMask),o.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),o.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),Le(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?we(n.SAMPLE_ALPHA_TO_COVERAGE):Ee(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ie(j){R!==j&&(j?n.frontFace(n.CW):n.frontFace(n.CCW),R=j)}function he(j){j!==OB?(we(n.CULL_FACE),j!==T&&(j===M1?n.cullFace(n.BACK):j===UB?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ee(n.CULL_FACE),T=j}function Ye(j){j!==N&&(Y&&n.lineWidth(j),N=j)}function Le(j,Se,de){j?(we(n.POLYGON_OFFSET_FILL),(Q!==Se||W!==de)&&(n.polygonOffset(Se,de),Q=Se,W=de)):Ee(n.POLYGON_OFFSET_FILL)}function Ge(j){j?we(n.SCISSOR_TEST):Ee(n.SCISSOR_TEST)}function H(j){j===void 0&&(j=n.TEXTURE0+K-1),B!==j&&(n.activeTexture(j),B=j)}function L(j,Se,de){de===void 0&&(B===null?de=n.TEXTURE0+K-1:de=B);let ve=G[de];ve===void 0&&(ve={type:void 0,texture:void 0},G[de]=ve),(ve.type!==j||ve.texture!==Se)&&(B!==de&&(n.activeTexture(de),B=de),n.bindTexture(j,Se||me[j]),ve.type=j,ve.texture=Se)}function se(){const j=G[B];j!==void 0&&j.type!==void 0&&(n.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function xe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function _e(){try{n.compressedTexImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ae(){try{n.texSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function $e(){try{n.texSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Pe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function We(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function vt(){try{n.texStorage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ce(){try{n.texStorage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function ze(){try{n.texImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function bt(){try{n.texImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function lt(j){ue.equals(j)===!1&&(n.scissor(j.x,j.y,j.z,j.w),ue.copy(j))}function je(j){be.equals(j)===!1&&(n.viewport(j.x,j.y,j.z,j.w),be.copy(j))}function J(j,Se){let de=l.get(Se);de===void 0&&(de=new WeakMap,l.set(Se,de));let ve=de.get(j);ve===void 0&&(ve=n.getUniformBlockIndex(Se,j.name),de.set(j,ve))}function ge(j,Se){const ve=l.get(Se).get(j);a.get(Se)!==ve&&(n.uniformBlockBinding(Se,ve,j.__bindingPointIndex),a.set(Se,ve))}function Ue(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},B=null,G={},h={},d=new WeakMap,p=[],m=null,y=!1,A=null,x=null,g=null,_=null,M=null,w=null,P=null,b=new Oe(0,0,0),I=0,D=!1,R=null,T=null,N=null,Q=null,W=null,ue.set(0,0,n.canvas.width,n.canvas.height),be.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:we,disable:Ee,bindFramebuffer:nt,drawBuffers:dt,useProgram:Ke,setBlending:ye,setMaterial:Me,setFlipSided:Ie,setCullFace:he,setLineWidth:Ye,setPolygonOffset:Le,setScissorTest:Ge,activeTexture:H,bindTexture:L,unbindTexture:se,compressedTexImage2D:xe,compressedTexImage3D:_e,texImage2D:ze,texImage3D:bt,updateUBOMapping:J,uniformBlockBinding:ge,texStorage2D:vt,texStorage3D:Ce,texSubImage2D:Ae,texSubImage3D:$e,compressedTexSubImage2D:Pe,compressedTexSubImage3D:We,scissor:lt,viewport:je,reset:Ue}}function ZV(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function qV(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function $V(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function I1(n,e,t,i){const r=e5(i);switch(t){case vS:return n*e;case xS:return n*e;case _S:return n*e*2;case J0:return n*e/r.components*r.byteLength;case nd:return n*e/r.components*r.byteLength;case AS:return n*e*2/r.components*r.byteLength;case K0:return n*e*2/r.components*r.byteLength;case yS:return n*e*3/r.components*r.byteLength;case pi:return n*e*4/r.components*r.byteLength;case Y0:return n*e*4/r.components*r.byteLength;case Jf:case Kf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Yf:case Qf:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Dg:case Ng:return Math.max(n,16)*Math.max(e,8)/4;case Ig:case Lg:return Math.max(n,8)*Math.max(e,8)/2;case Fg:case Og:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Ug:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case kg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Hg:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case zg:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Gg:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Vg:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Wg:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case jg:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Xg:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Jg:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Kg:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Yg:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Qg:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Zg:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case qg:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Zf:case $g:case e0:return Math.ceil(n/4)*Math.ceil(e/4)*16;case SS:case t0:return Math.ceil(n/4)*Math.ceil(e/4)*8;case n0:case i0:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function e5(n){switch(n){case es:case pS:return{byteLength:1,components:1};case hu:case mS:case Tu:return{byteLength:2,components:1};case j0:case X0:return{byteLength:2,components:4};case lo:case W0:case Hi:return{byteLength:4,components:1};case gS:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const t5={contain:ZV,cover:qV,fill:$V,getByteLength:I1};function n5(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new pe,h=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(H,L){return m?new OffscreenCanvas(H,L):Lh("canvas")}function A(H,L,se){let xe=1;const _e=Ge(H);if((_e.width>se||_e.height>se)&&(xe=se/Math.max(_e.width,_e.height)),xe<1)if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap||typeof VideoFrame<"u"&&H instanceof VideoFrame){const Ae=Math.floor(xe*_e.width),$e=Math.floor(xe*_e.height);d===void 0&&(d=y(Ae,$e));const Pe=L?y(Ae,$e):d;return Pe.width=Ae,Pe.height=$e,Pe.getContext("2d").drawImage(H,0,0,Ae,$e),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+_e.width+"x"+_e.height+") to ("+Ae+"x"+$e+")."),Pe}else return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+_e.width+"x"+_e.height+")."),H;return H}function x(H){return H.generateMipmaps&&H.minFilter!==On&&H.minFilter!==An}function g(H){n.generateMipmap(H)}function _(H,L,se,xe,_e=!1){if(H!==null){if(n[H]!==void 0)return n[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let Ae=L;if(L===n.RED&&(se===n.FLOAT&&(Ae=n.R32F),se===n.HALF_FLOAT&&(Ae=n.R16F),se===n.UNSIGNED_BYTE&&(Ae=n.R8)),L===n.RED_INTEGER&&(se===n.UNSIGNED_BYTE&&(Ae=n.R8UI),se===n.UNSIGNED_SHORT&&(Ae=n.R16UI),se===n.UNSIGNED_INT&&(Ae=n.R32UI),se===n.BYTE&&(Ae=n.R8I),se===n.SHORT&&(Ae=n.R16I),se===n.INT&&(Ae=n.R32I)),L===n.RG&&(se===n.FLOAT&&(Ae=n.RG32F),se===n.HALF_FLOAT&&(Ae=n.RG16F),se===n.UNSIGNED_BYTE&&(Ae=n.RG8)),L===n.RG_INTEGER&&(se===n.UNSIGNED_BYTE&&(Ae=n.RG8UI),se===n.UNSIGNED_SHORT&&(Ae=n.RG16UI),se===n.UNSIGNED_INT&&(Ae=n.RG32UI),se===n.BYTE&&(Ae=n.RG8I),se===n.SHORT&&(Ae=n.RG16I),se===n.INT&&(Ae=n.RG32I)),L===n.RGB&&se===n.UNSIGNED_INT_5_9_9_9_REV&&(Ae=n.RGB9_E5),L===n.RGBA){const $e=_e?Rh:Vt.getTransfer(xe);se===n.FLOAT&&(Ae=n.RGBA32F),se===n.HALF_FLOAT&&(Ae=n.RGBA16F),se===n.UNSIGNED_BYTE&&(Ae=$e===qt?n.SRGB8_ALPHA8:n.RGBA8),se===n.UNSIGNED_SHORT_4_4_4_4&&(Ae=n.RGBA4),se===n.UNSIGNED_SHORT_5_5_5_1&&(Ae=n.RGB5_A1)}return(Ae===n.R16F||Ae===n.R32F||Ae===n.RG16F||Ae===n.RG32F||Ae===n.RGBA16F||Ae===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ae}function M(H,L){let se;return H?L===null||L===lo||L===Ml?se=n.DEPTH24_STENCIL8:L===Hi?se=n.DEPTH32F_STENCIL8:L===hu&&(se=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):L===null||L===lo||L===Ml?se=n.DEPTH_COMPONENT24:L===Hi?se=n.DEPTH_COMPONENT32F:L===hu&&(se=n.DEPTH_COMPONENT16),se}function w(H,L){return x(H)===!0||H.isFramebufferTexture&&H.minFilter!==On&&H.minFilter!==An?Math.log2(Math.max(L.width,L.height))+1:H.mipmaps!==void 0&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?L.mipmaps.length:1}function P(H){const L=H.target;L.removeEventListener("dispose",P),I(L),L.isVideoTexture&&h.delete(L)}function b(H){const L=H.target;L.removeEventListener("dispose",b),R(L)}function I(H){const L=i.get(H);if(L.__webglInit===void 0)return;const se=H.source,xe=p.get(se);if(xe){const _e=xe[L.__cacheKey];_e.usedTimes--,_e.usedTimes===0&&D(H),Object.keys(xe).length===0&&p.delete(se)}i.remove(H)}function D(H){const L=i.get(H);n.deleteTexture(L.__webglTexture);const se=H.source,xe=p.get(se);delete xe[L.__cacheKey],o.memory.textures--}function R(H){const L=i.get(H);if(H.depthTexture&&H.depthTexture.dispose(),H.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++){if(Array.isArray(L.__webglFramebuffer[xe]))for(let _e=0;_e<L.__webglFramebuffer[xe].length;_e++)n.deleteFramebuffer(L.__webglFramebuffer[xe][_e]);else n.deleteFramebuffer(L.__webglFramebuffer[xe]);L.__webglDepthbuffer&&n.deleteRenderbuffer(L.__webglDepthbuffer[xe])}else{if(Array.isArray(L.__webglFramebuffer))for(let xe=0;xe<L.__webglFramebuffer.length;xe++)n.deleteFramebuffer(L.__webglFramebuffer[xe]);else n.deleteFramebuffer(L.__webglFramebuffer);if(L.__webglDepthbuffer&&n.deleteRenderbuffer(L.__webglDepthbuffer),L.__webglMultisampledFramebuffer&&n.deleteFramebuffer(L.__webglMultisampledFramebuffer),L.__webglColorRenderbuffer)for(let xe=0;xe<L.__webglColorRenderbuffer.length;xe++)L.__webglColorRenderbuffer[xe]&&n.deleteRenderbuffer(L.__webglColorRenderbuffer[xe]);L.__webglDepthRenderbuffer&&n.deleteRenderbuffer(L.__webglDepthRenderbuffer)}const se=H.textures;for(let xe=0,_e=se.length;xe<_e;xe++){const Ae=i.get(se[xe]);Ae.__webglTexture&&(n.deleteTexture(Ae.__webglTexture),o.memory.textures--),i.remove(se[xe])}i.remove(H)}let T=0;function N(){T=0}function Q(){const H=T;return H>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+r.maxTextures),T+=1,H}function W(H){const L=[];return L.push(H.wrapS),L.push(H.wrapT),L.push(H.wrapR||0),L.push(H.magFilter),L.push(H.minFilter),L.push(H.anisotropy),L.push(H.internalFormat),L.push(H.format),L.push(H.type),L.push(H.generateMipmaps),L.push(H.premultiplyAlpha),L.push(H.flipY),L.push(H.unpackAlignment),L.push(H.colorSpace),L.join()}function K(H,L){const se=i.get(H);if(H.isVideoTexture&&Ye(H),H.isRenderTargetTexture===!1&&H.version>0&&se.__version!==H.version){const xe=H.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{be(se,H,L);return}}t.bindTexture(n.TEXTURE_2D,se.__webglTexture,n.TEXTURE0+L)}function Y(H,L){const se=i.get(H);if(H.version>0&&se.__version!==H.version){be(se,H,L);return}t.bindTexture(n.TEXTURE_2D_ARRAY,se.__webglTexture,n.TEXTURE0+L)}function Z(H,L){const se=i.get(H);if(H.version>0&&se.__version!==H.version){be(se,H,L);return}t.bindTexture(n.TEXTURE_3D,se.__webglTexture,n.TEXTURE0+L)}function z(H,L){const se=i.get(H);if(H.version>0&&se.__version!==H.version){re(se,H,L);return}t.bindTexture(n.TEXTURE_CUBE_MAP,se.__webglTexture,n.TEXTURE0+L)}const B={[sa]:n.REPEAT,[er]:n.CLAMP_TO_EDGE,[fu]:n.MIRRORED_REPEAT},G={[On]:n.NEAREST,[V0]:n.NEAREST_MIPMAP_NEAREST,[tl]:n.NEAREST_MIPMAP_LINEAR,[An]:n.LINEAR,[tu]:n.LINEAR_MIPMAP_NEAREST,[Rr]:n.LINEAR_MIPMAP_LINEAR},V={[TI]:n.NEVER,[DI]:n.ALWAYS,[bI]:n.LESS,[ES]:n.LEQUAL,[RI]:n.EQUAL,[II]:n.GEQUAL,[PI]:n.GREATER,[BI]:n.NOTEQUAL};function q(H,L){if(L.type===Hi&&e.has("OES_texture_float_linear")===!1&&(L.magFilter===An||L.magFilter===tu||L.magFilter===tl||L.magFilter===Rr||L.minFilter===An||L.minFilter===tu||L.minFilter===tl||L.minFilter===Rr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(H,n.TEXTURE_WRAP_S,B[L.wrapS]),n.texParameteri(H,n.TEXTURE_WRAP_T,B[L.wrapT]),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,B[L.wrapR]),n.texParameteri(H,n.TEXTURE_MAG_FILTER,G[L.magFilter]),n.texParameteri(H,n.TEXTURE_MIN_FILTER,G[L.minFilter]),L.compareFunction&&(n.texParameteri(H,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(H,n.TEXTURE_COMPARE_FUNC,V[L.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(L.magFilter===On||L.minFilter!==tl&&L.minFilter!==Rr||L.type===Hi&&e.has("OES_texture_float_linear")===!1)return;if(L.anisotropy>1||i.get(L).__currentAnisotropy){const se=e.get("EXT_texture_filter_anisotropic");n.texParameterf(H,se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,r.getMaxAnisotropy())),i.get(L).__currentAnisotropy=L.anisotropy}}}function ue(H,L){let se=!1;H.__webglInit===void 0&&(H.__webglInit=!0,L.addEventListener("dispose",P));const xe=L.source;let _e=p.get(xe);_e===void 0&&(_e={},p.set(xe,_e));const Ae=W(L);if(Ae!==H.__cacheKey){_e[Ae]===void 0&&(_e[Ae]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,se=!0),_e[Ae].usedTimes++;const $e=_e[H.__cacheKey];$e!==void 0&&(_e[H.__cacheKey].usedTimes--,$e.usedTimes===0&&D(L)),H.__cacheKey=Ae,H.__webglTexture=_e[Ae].texture}return se}function be(H,L,se){let xe=n.TEXTURE_2D;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(xe=n.TEXTURE_2D_ARRAY),L.isData3DTexture&&(xe=n.TEXTURE_3D);const _e=ue(H,L),Ae=L.source;t.bindTexture(xe,H.__webglTexture,n.TEXTURE0+se);const $e=i.get(Ae);if(Ae.version!==$e.__version||_e===!0){t.activeTexture(n.TEXTURE0+se);const Pe=Vt.getPrimaries(Vt.workingColorSpace),We=L.colorSpace===Ws?null:Vt.getPrimaries(L.colorSpace),vt=L.colorSpace===Ws||Pe===We?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,L.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,L.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,vt);let Ce=A(L.image,!1,r.maxTextureSize);Ce=Le(L,Ce);const ze=s.convert(L.format,L.colorSpace),bt=s.convert(L.type);let lt=_(L.internalFormat,ze,bt,L.colorSpace,L.isVideoTexture);q(xe,L);let je;const J=L.mipmaps,ge=L.isVideoTexture!==!0,Ue=$e.__version===void 0||_e===!0,j=Ae.dataReady,Se=w(L,Ce);if(L.isDepthTexture)lt=M(L.format===wl,L.type),Ue&&(ge?t.texStorage2D(n.TEXTURE_2D,1,lt,Ce.width,Ce.height):t.texImage2D(n.TEXTURE_2D,0,lt,Ce.width,Ce.height,0,ze,bt,null));else if(L.isDataTexture)if(J.length>0){ge&&Ue&&t.texStorage2D(n.TEXTURE_2D,Se,lt,J[0].width,J[0].height);for(let de=0,ve=J.length;de<ve;de++)je=J[de],ge?j&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,je.width,je.height,ze,bt,je.data):t.texImage2D(n.TEXTURE_2D,de,lt,je.width,je.height,0,ze,bt,je.data);L.generateMipmaps=!1}else ge?(Ue&&t.texStorage2D(n.TEXTURE_2D,Se,lt,Ce.width,Ce.height),j&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ce.width,Ce.height,ze,bt,Ce.data)):t.texImage2D(n.TEXTURE_2D,0,lt,Ce.width,Ce.height,0,ze,bt,Ce.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){ge&&Ue&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Se,lt,J[0].width,J[0].height,Ce.depth);for(let de=0,ve=J.length;de<ve;de++)if(je=J[de],L.format!==pi)if(ze!==null)if(ge){if(j)if(L.layerUpdates.size>0){const Ne=I1(je.width,je.height,L.format,L.type);for(const at of L.layerUpdates){const yt=je.data.subarray(at*Ne/je.data.BYTES_PER_ELEMENT,(at+1)*Ne/je.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,at,je.width,je.height,1,ze,yt,0,0)}L.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,je.width,je.height,Ce.depth,ze,je.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,de,lt,je.width,je.height,Ce.depth,0,je.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ge?j&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,de,0,0,0,je.width,je.height,Ce.depth,ze,bt,je.data):t.texImage3D(n.TEXTURE_2D_ARRAY,de,lt,je.width,je.height,Ce.depth,0,ze,bt,je.data)}else{ge&&Ue&&t.texStorage2D(n.TEXTURE_2D,Se,lt,J[0].width,J[0].height);for(let de=0,ve=J.length;de<ve;de++)je=J[de],L.format!==pi?ze!==null?ge?j&&t.compressedTexSubImage2D(n.TEXTURE_2D,de,0,0,je.width,je.height,ze,je.data):t.compressedTexImage2D(n.TEXTURE_2D,de,lt,je.width,je.height,0,je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ge?j&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,je.width,je.height,ze,bt,je.data):t.texImage2D(n.TEXTURE_2D,de,lt,je.width,je.height,0,ze,bt,je.data)}else if(L.isDataArrayTexture)if(ge){if(Ue&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Se,lt,Ce.width,Ce.height,Ce.depth),j)if(L.layerUpdates.size>0){const de=I1(Ce.width,Ce.height,L.format,L.type);for(const ve of L.layerUpdates){const Ne=Ce.data.subarray(ve*de/Ce.data.BYTES_PER_ELEMENT,(ve+1)*de/Ce.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ve,Ce.width,Ce.height,1,ze,bt,Ne)}L.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ce.width,Ce.height,Ce.depth,ze,bt,Ce.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,lt,Ce.width,Ce.height,Ce.depth,0,ze,bt,Ce.data);else if(L.isData3DTexture)ge?(Ue&&t.texStorage3D(n.TEXTURE_3D,Se,lt,Ce.width,Ce.height,Ce.depth),j&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ce.width,Ce.height,Ce.depth,ze,bt,Ce.data)):t.texImage3D(n.TEXTURE_3D,0,lt,Ce.width,Ce.height,Ce.depth,0,ze,bt,Ce.data);else if(L.isFramebufferTexture){if(Ue)if(ge)t.texStorage2D(n.TEXTURE_2D,Se,lt,Ce.width,Ce.height);else{let de=Ce.width,ve=Ce.height;for(let Ne=0;Ne<Se;Ne++)t.texImage2D(n.TEXTURE_2D,Ne,lt,de,ve,0,ze,bt,null),de>>=1,ve>>=1}}else if(J.length>0){if(ge&&Ue){const de=Ge(J[0]);t.texStorage2D(n.TEXTURE_2D,Se,lt,de.width,de.height)}for(let de=0,ve=J.length;de<ve;de++)je=J[de],ge?j&&t.texSubImage2D(n.TEXTURE_2D,de,0,0,ze,bt,je):t.texImage2D(n.TEXTURE_2D,de,lt,ze,bt,je);L.generateMipmaps=!1}else if(ge){if(Ue){const de=Ge(Ce);t.texStorage2D(n.TEXTURE_2D,Se,lt,de.width,de.height)}j&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ze,bt,Ce)}else t.texImage2D(n.TEXTURE_2D,0,lt,ze,bt,Ce);x(L)&&g(xe),$e.__version=Ae.version,L.onUpdate&&L.onUpdate(L)}H.__version=L.version}function re(H,L,se){if(L.image.length!==6)return;const xe=ue(H,L),_e=L.source;t.bindTexture(n.TEXTURE_CUBE_MAP,H.__webglTexture,n.TEXTURE0+se);const Ae=i.get(_e);if(_e.version!==Ae.__version||xe===!0){t.activeTexture(n.TEXTURE0+se);const $e=Vt.getPrimaries(Vt.workingColorSpace),Pe=L.colorSpace===Ws?null:Vt.getPrimaries(L.colorSpace),We=L.colorSpace===Ws||$e===Pe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,L.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,L.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,We);const vt=L.isCompressedTexture||L.image[0].isCompressedTexture,Ce=L.image[0]&&L.image[0].isDataTexture,ze=[];for(let ve=0;ve<6;ve++)!vt&&!Ce?ze[ve]=A(L.image[ve],!0,r.maxCubemapSize):ze[ve]=Ce?L.image[ve].image:L.image[ve],ze[ve]=Le(L,ze[ve]);const bt=ze[0],lt=s.convert(L.format,L.colorSpace),je=s.convert(L.type),J=_(L.internalFormat,lt,je,L.colorSpace),ge=L.isVideoTexture!==!0,Ue=Ae.__version===void 0||xe===!0,j=_e.dataReady;let Se=w(L,bt);q(n.TEXTURE_CUBE_MAP,L);let de;if(vt){ge&&Ue&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Se,J,bt.width,bt.height);for(let ve=0;ve<6;ve++){de=ze[ve].mipmaps;for(let Ne=0;Ne<de.length;Ne++){const at=de[Ne];L.format!==pi?lt!==null?ge?j&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ne,0,0,at.width,at.height,lt,at.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ne,J,at.width,at.height,0,at.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ge?j&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ne,0,0,at.width,at.height,lt,je,at.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ne,J,at.width,at.height,0,lt,je,at.data)}}}else{if(de=L.mipmaps,ge&&Ue){de.length>0&&Se++;const ve=Ge(ze[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Se,J,ve.width,ve.height)}for(let ve=0;ve<6;ve++)if(Ce){ge?j&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,ze[ve].width,ze[ve].height,lt,je,ze[ve].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,J,ze[ve].width,ze[ve].height,0,lt,je,ze[ve].data);for(let Ne=0;Ne<de.length;Ne++){const yt=de[Ne].image[ve].image;ge?j&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ne+1,0,0,yt.width,yt.height,lt,je,yt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ne+1,J,yt.width,yt.height,0,lt,je,yt.data)}}else{ge?j&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,0,0,lt,je,ze[ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,0,J,lt,je,ze[ve]);for(let Ne=0;Ne<de.length;Ne++){const at=de[Ne];ge?j&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ne+1,0,0,lt,je,at.image[ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ve,Ne+1,J,lt,je,at.image[ve])}}}x(L)&&g(n.TEXTURE_CUBE_MAP),Ae.__version=_e.version,L.onUpdate&&L.onUpdate(L)}H.__version=L.version}function me(H,L,se,xe,_e,Ae){const $e=s.convert(se.format,se.colorSpace),Pe=s.convert(se.type),We=_(se.internalFormat,$e,Pe,se.colorSpace);if(!i.get(L).__hasExternalTextures){const Ce=Math.max(1,L.width>>Ae),ze=Math.max(1,L.height>>Ae);_e===n.TEXTURE_3D||_e===n.TEXTURE_2D_ARRAY?t.texImage3D(_e,Ae,We,Ce,ze,L.depth,0,$e,Pe,null):t.texImage2D(_e,Ae,We,Ce,ze,0,$e,Pe,null)}t.bindFramebuffer(n.FRAMEBUFFER,H),he(L)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,xe,_e,i.get(se).__webglTexture,0,Ie(L)):(_e===n.TEXTURE_2D||_e>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&_e<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,xe,_e,i.get(se).__webglTexture,Ae),t.bindFramebuffer(n.FRAMEBUFFER,null)}function we(H,L,se){if(n.bindRenderbuffer(n.RENDERBUFFER,H),L.depthBuffer){const xe=L.depthTexture,_e=xe&&xe.isDepthTexture?xe.type:null,Ae=M(L.stencilBuffer,_e),$e=L.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Pe=Ie(L);he(L)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pe,Ae,L.width,L.height):se?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pe,Ae,L.width,L.height):n.renderbufferStorage(n.RENDERBUFFER,Ae,L.width,L.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,$e,n.RENDERBUFFER,H)}else{const xe=L.textures;for(let _e=0;_e<xe.length;_e++){const Ae=xe[_e],$e=s.convert(Ae.format,Ae.colorSpace),Pe=s.convert(Ae.type),We=_(Ae.internalFormat,$e,Pe,Ae.colorSpace),vt=Ie(L);se&&he(L)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,vt,We,L.width,L.height):he(L)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,vt,We,L.width,L.height):n.renderbufferStorage(n.RENDERBUFFER,We,L.width,L.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ee(H,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,H),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(L.depthTexture).__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),K(L.depthTexture,0);const xe=i.get(L.depthTexture).__webglTexture,_e=Ie(L);if(L.depthTexture.format===hl)he(L)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0);else if(L.depthTexture.format===wl)he(L)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0,_e):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function nt(H){const L=i.get(H),se=H.isWebGLCubeRenderTarget===!0;if(H.depthTexture&&!L.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");Ee(L.__webglFramebuffer,H)}else if(se){L.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)t.bindFramebuffer(n.FRAMEBUFFER,L.__webglFramebuffer[xe]),L.__webglDepthbuffer[xe]=n.createRenderbuffer(),we(L.__webglDepthbuffer[xe],H,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,L.__webglFramebuffer),L.__webglDepthbuffer=n.createRenderbuffer(),we(L.__webglDepthbuffer,H,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function dt(H,L,se){const xe=i.get(H);L!==void 0&&me(xe.__webglFramebuffer,H,H.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),se!==void 0&&nt(H)}function Ke(H){const L=H.texture,se=i.get(H),xe=i.get(L);H.addEventListener("dispose",b);const _e=H.textures,Ae=H.isWebGLCubeRenderTarget===!0,$e=_e.length>1;if($e||(xe.__webglTexture===void 0&&(xe.__webglTexture=n.createTexture()),xe.__version=L.version,o.memory.textures++),Ae){se.__webglFramebuffer=[];for(let Pe=0;Pe<6;Pe++)if(L.mipmaps&&L.mipmaps.length>0){se.__webglFramebuffer[Pe]=[];for(let We=0;We<L.mipmaps.length;We++)se.__webglFramebuffer[Pe][We]=n.createFramebuffer()}else se.__webglFramebuffer[Pe]=n.createFramebuffer()}else{if(L.mipmaps&&L.mipmaps.length>0){se.__webglFramebuffer=[];for(let Pe=0;Pe<L.mipmaps.length;Pe++)se.__webglFramebuffer[Pe]=n.createFramebuffer()}else se.__webglFramebuffer=n.createFramebuffer();if($e)for(let Pe=0,We=_e.length;Pe<We;Pe++){const vt=i.get(_e[Pe]);vt.__webglTexture===void 0&&(vt.__webglTexture=n.createTexture(),o.memory.textures++)}if(H.samples>0&&he(H)===!1){se.__webglMultisampledFramebuffer=n.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let Pe=0;Pe<_e.length;Pe++){const We=_e[Pe];se.__webglColorRenderbuffer[Pe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,se.__webglColorRenderbuffer[Pe]);const vt=s.convert(We.format,We.colorSpace),Ce=s.convert(We.type),ze=_(We.internalFormat,vt,Ce,We.colorSpace,H.isXRRenderTarget===!0),bt=Ie(H);n.renderbufferStorageMultisample(n.RENDERBUFFER,bt,ze,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pe,n.RENDERBUFFER,se.__webglColorRenderbuffer[Pe])}n.bindRenderbuffer(n.RENDERBUFFER,null),H.depthBuffer&&(se.__webglDepthRenderbuffer=n.createRenderbuffer(),we(se.__webglDepthRenderbuffer,H,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ae){t.bindTexture(n.TEXTURE_CUBE_MAP,xe.__webglTexture),q(n.TEXTURE_CUBE_MAP,L);for(let Pe=0;Pe<6;Pe++)if(L.mipmaps&&L.mipmaps.length>0)for(let We=0;We<L.mipmaps.length;We++)me(se.__webglFramebuffer[Pe][We],H,L,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,We);else me(se.__webglFramebuffer[Pe],H,L,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0);x(L)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if($e){for(let Pe=0,We=_e.length;Pe<We;Pe++){const vt=_e[Pe],Ce=i.get(vt);t.bindTexture(n.TEXTURE_2D,Ce.__webglTexture),q(n.TEXTURE_2D,vt),me(se.__webglFramebuffer,H,vt,n.COLOR_ATTACHMENT0+Pe,n.TEXTURE_2D,0),x(vt)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let Pe=n.TEXTURE_2D;if((H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(Pe=H.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Pe,xe.__webglTexture),q(Pe,L),L.mipmaps&&L.mipmaps.length>0)for(let We=0;We<L.mipmaps.length;We++)me(se.__webglFramebuffer[We],H,L,n.COLOR_ATTACHMENT0,Pe,We);else me(se.__webglFramebuffer,H,L,n.COLOR_ATTACHMENT0,Pe,0);x(L)&&g(Pe),t.unbindTexture()}H.depthBuffer&&nt(H)}function He(H){const L=H.textures;for(let se=0,xe=L.length;se<xe;se++){const _e=L[se];if(x(_e)){const Ae=H.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,$e=i.get(_e).__webglTexture;t.bindTexture(Ae,$e),g(Ae),t.unbindTexture()}}}const O=[],ye=[];function Me(H){if(H.samples>0){if(he(H)===!1){const L=H.textures,se=H.width,xe=H.height;let _e=n.COLOR_BUFFER_BIT;const Ae=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,$e=i.get(H),Pe=L.length>1;if(Pe)for(let We=0;We<L.length;We++)t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+We,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+We,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,$e.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglFramebuffer);for(let We=0;We<L.length;We++){if(H.resolveDepthBuffer&&(H.depthBuffer&&(_e|=n.DEPTH_BUFFER_BIT),H.stencilBuffer&&H.resolveStencilBuffer&&(_e|=n.STENCIL_BUFFER_BIT)),Pe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,$e.__webglColorRenderbuffer[We]);const vt=i.get(L[We]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,vt,0)}n.blitFramebuffer(0,0,se,xe,0,0,se,xe,_e,n.NEAREST),l===!0&&(O.length=0,ye.length=0,O.push(n.COLOR_ATTACHMENT0+We),H.depthBuffer&&H.resolveDepthBuffer===!1&&(O.push(Ae),ye.push(Ae),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,ye)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,O))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Pe)for(let We=0;We<L.length;We++){t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+We,n.RENDERBUFFER,$e.__webglColorRenderbuffer[We]);const vt=i.get(L[We]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+We,n.TEXTURE_2D,vt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglMultisampledFramebuffer)}else if(H.depthBuffer&&H.resolveDepthBuffer===!1&&l){const L=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[L])}}}function Ie(H){return Math.min(r.maxSamples,H.samples)}function he(H){const L=i.get(H);return H.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function Ye(H){const L=o.render.frame;h.get(H)!==L&&(h.set(H,L),H.update())}function Le(H,L){const se=H.colorSpace,xe=H.format,_e=H.type;return H.isCompressedTexture===!0||H.isVideoTexture===!0||se!==ho&&se!==Ws&&(Vt.getTransfer(se)===qt?(xe!==pi||_e!==es)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",se)),L}function Ge(H){return typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement?(u.width=H.naturalWidth||H.width,u.height=H.naturalHeight||H.height):typeof VideoFrame<"u"&&H instanceof VideoFrame?(u.width=H.displayWidth,u.height=H.displayHeight):(u.width=H.width,u.height=H.height),u}this.allocateTextureUnit=Q,this.resetTextureUnits=N,this.setTexture2D=K,this.setTexture2DArray=Y,this.setTexture3D=Z,this.setTextureCube=z,this.rebindTextures=dt,this.setupRenderTarget=Ke,this.updateRenderTargetMipmap=He,this.updateMultisampleRenderTarget=Me,this.setupDepthRenderbuffer=nt,this.setupFrameBufferTexture=me,this.useMultisampledRTT=he}function JI(n,e){function t(i,r=Ws){let s;const o=Vt.getTransfer(r);if(i===es)return n.UNSIGNED_BYTE;if(i===j0)return n.UNSIGNED_SHORT_4_4_4_4;if(i===X0)return n.UNSIGNED_SHORT_5_5_5_1;if(i===gS)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===pS)return n.BYTE;if(i===mS)return n.SHORT;if(i===hu)return n.UNSIGNED_SHORT;if(i===W0)return n.INT;if(i===lo)return n.UNSIGNED_INT;if(i===Hi)return n.FLOAT;if(i===Tu)return n.HALF_FLOAT;if(i===vS)return n.ALPHA;if(i===yS)return n.RGB;if(i===pi)return n.RGBA;if(i===xS)return n.LUMINANCE;if(i===_S)return n.LUMINANCE_ALPHA;if(i===hl)return n.DEPTH_COMPONENT;if(i===wl)return n.DEPTH_STENCIL;if(i===J0)return n.RED;if(i===nd)return n.RED_INTEGER;if(i===AS)return n.RG;if(i===K0)return n.RG_INTEGER;if(i===Y0)return n.RGBA_INTEGER;if(i===Jf||i===Kf||i===Yf||i===Qf)if(o===qt)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===Jf)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Kf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Yf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Qf)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===Jf)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Kf)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Yf)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Qf)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Ig||i===Dg||i===Lg||i===Ng)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Ig)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Dg)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Lg)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Ng)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Fg||i===Og||i===Ug)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Fg||i===Og)return o===qt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Ug)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===kg||i===Hg||i===zg||i===Gg||i===Vg||i===Wg||i===jg||i===Xg||i===Jg||i===Kg||i===Yg||i===Qg||i===Zg||i===qg)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===kg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Hg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===zg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Gg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Vg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Wg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===jg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Xg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Jg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Kg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Yg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Qg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Zg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===qg)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Zf||i===$g||i===e0)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Zf)return o===qt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===$g)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===e0)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===SS||i===t0||i===n0||i===i0)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Zf)return s.COMPRESSED_RED_RGTC1_EXT;if(i===t0)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===n0)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===i0)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Ml?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class KI extends rn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ks extends Nt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const i5={type:"move"};class Ux{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ks,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ks,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new U,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new U),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ks,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new U,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new U),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const A of e.hand.values()){const x=t.getJointPose(A,i),g=this._getHandJoint(u,A);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const h=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],p=h.position.distanceTo(d.position),m=.02,y=.005;u.inputState.pinching&&p>m+y?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-y&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(i5)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Ks;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const r5=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,s5=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class o5{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new on,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new ns({vertexShader:r5,fragmentShader:s5,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Cn(new bu(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class a5 extends Ts{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,h=null,d=null,p=null,m=null,y=null;const A=new o5,x=t.getContextAttributes();let g=null,_=null;const M=[],w=[],P=new pe;let b=null;const I=new rn;I.layers.enable(1),I.viewport=new Wt;const D=new rn;D.layers.enable(2),D.viewport=new Wt;const R=[I,D],T=new KI;T.layers.enable(1),T.layers.enable(2);let N=null,Q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let me=M[re];return me===void 0&&(me=new Ux,M[re]=me),me.getTargetRaySpace()},this.getControllerGrip=function(re){let me=M[re];return me===void 0&&(me=new Ux,M[re]=me),me.getGripSpace()},this.getHand=function(re){let me=M[re];return me===void 0&&(me=new Ux,M[re]=me),me.getHandSpace()};function W(re){const me=w.indexOf(re.inputSource);if(me===-1)return;const we=M[me];we!==void 0&&(we.update(re.inputSource,re.frame,u||o),we.dispatchEvent({type:re.type,data:re.inputSource}))}function K(){r.removeEventListener("select",W),r.removeEventListener("selectstart",W),r.removeEventListener("selectend",W),r.removeEventListener("squeeze",W),r.removeEventListener("squeezestart",W),r.removeEventListener("squeezeend",W),r.removeEventListener("end",K),r.removeEventListener("inputsourceschange",Y);for(let re=0;re<M.length;re++){const me=w[re];me!==null&&(w[re]=null,M[re].disconnect(me))}N=null,Q=null,A.reset(),e.setRenderTarget(g),m=null,p=null,d=null,r=null,_=null,be.stop(),i.isPresenting=!1,e.setPixelRatio(b),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){s=re,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){a=re,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(re){u=re},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(re){if(r=re,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",W),r.addEventListener("selectstart",W),r.addEventListener("selectend",W),r.addEventListener("squeeze",W),r.addEventListener("squeezestart",W),r.addEventListener("squeezeend",W),r.addEventListener("end",K),r.addEventListener("inputsourceschange",Y),x.xrCompatible!==!0&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(P),r.renderState.layers===void 0){const me={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,me),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),_=new ts(m.framebufferWidth,m.framebufferHeight,{format:pi,type:es,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let me=null,we=null,Ee=null;x.depth&&(Ee=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,me=x.stencil?wl:hl,we=x.stencil?Ml:lo);const nt={colorFormat:t.RGBA8,depthFormat:Ee,scaleFactor:s};d=new XRWebGLBinding(r,t),p=d.createProjectionLayer(nt),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),_=new ts(p.textureWidth,p.textureHeight,{format:pi,type:es,depthTexture:new LS(p.textureWidth,p.textureHeight,we,void 0,void 0,void 0,void 0,void 0,void 0,me),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),be.setContext(r),be.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};function Y(re){for(let me=0;me<re.removed.length;me++){const we=re.removed[me],Ee=w.indexOf(we);Ee>=0&&(w[Ee]=null,M[Ee].disconnect(we))}for(let me=0;me<re.added.length;me++){const we=re.added[me];let Ee=w.indexOf(we);if(Ee===-1){for(let dt=0;dt<M.length;dt++)if(dt>=w.length){w.push(we),Ee=dt;break}else if(w[dt]===null){w[dt]=we,Ee=dt;break}if(Ee===-1)break}const nt=M[Ee];nt&&nt.connect(we)}}const Z=new U,z=new U;function B(re,me,we){Z.setFromMatrixPosition(me.matrixWorld),z.setFromMatrixPosition(we.matrixWorld);const Ee=Z.distanceTo(z),nt=me.projectionMatrix.elements,dt=we.projectionMatrix.elements,Ke=nt[14]/(nt[10]-1),He=nt[14]/(nt[10]+1),O=(nt[9]+1)/nt[5],ye=(nt[9]-1)/nt[5],Me=(nt[8]-1)/nt[0],Ie=(dt[8]+1)/dt[0],he=Ke*Me,Ye=Ke*Ie,Le=Ee/(-Me+Ie),Ge=Le*-Me;me.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(Ge),re.translateZ(Le),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert();const H=Ke+Le,L=He+Le,se=he-Ge,xe=Ye+(Ee-Ge),_e=O*He/L*H,Ae=ye*He/L*H;re.projectionMatrix.makePerspective(se,xe,_e,Ae,H,L),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}function G(re,me){me===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(me.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(r===null)return;A.texture!==null&&(re.near=A.depthNear,re.far=A.depthFar),T.near=D.near=I.near=re.near,T.far=D.far=I.far=re.far,(N!==T.near||Q!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),N=T.near,Q=T.far,I.near=N,I.far=Q,D.near=N,D.far=Q,I.updateProjectionMatrix(),D.updateProjectionMatrix(),re.updateProjectionMatrix());const me=re.parent,we=T.cameras;G(T,me);for(let Ee=0;Ee<we.length;Ee++)G(we[Ee],me);we.length===2?B(T,I,D):T.projectionMatrix.copy(I.projectionMatrix),V(re,T,me)};function V(re,me,we){we===null?re.matrix.copy(me.matrixWorld):(re.matrix.copy(we.matrixWorld),re.matrix.invert(),re.matrix.multiply(me.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0),re.projectionMatrix.copy(me.projectionMatrix),re.projectionMatrixInverse.copy(me.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=mu*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(re){l=re,p!==null&&(p.fixedFoveation=re),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=re)},this.hasDepthSensing=function(){return A.texture!==null},this.getDepthSensingMesh=function(){return A.getMesh(T)};let q=null;function ue(re,me){if(h=me.getViewerPose(u||o),y=me,h!==null){const we=h.views;m!==null&&(e.setRenderTargetFramebuffer(_,m.framebuffer),e.setRenderTarget(_));let Ee=!1;we.length!==T.cameras.length&&(T.cameras.length=0,Ee=!0);for(let dt=0;dt<we.length;dt++){const Ke=we[dt];let He=null;if(m!==null)He=m.getViewport(Ke);else{const ye=d.getViewSubImage(p,Ke);He=ye.viewport,dt===0&&(e.setRenderTargetTextures(_,ye.colorTexture,p.ignoreDepthValues?void 0:ye.depthStencilTexture),e.setRenderTarget(_))}let O=R[dt];O===void 0&&(O=new rn,O.layers.enable(dt),O.viewport=new Wt,R[dt]=O),O.matrix.fromArray(Ke.transform.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale),O.projectionMatrix.fromArray(Ke.projectionMatrix),O.projectionMatrixInverse.copy(O.projectionMatrix).invert(),O.viewport.set(He.x,He.y,He.width,He.height),dt===0&&(T.matrix.copy(O.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),Ee===!0&&T.cameras.push(O)}const nt=r.enabledFeatures;if(nt&&nt.includes("depth-sensing")){const dt=d.getDepthInformation(we[0]);dt&&dt.isValid&&dt.texture&&A.init(e,dt,r.renderState)}}for(let we=0;we<M.length;we++){const Ee=w[we],nt=M[we];Ee!==null&&nt!==void 0&&nt.update(Ee,me,u||o)}q&&q(re,me),me.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:me}),y=null}const be=new GI;be.setAnimationLoop(ue),this.setAnimationLoop=function(re){q=re},this.dispose=function(){}}}const Ba=new sr,l5=new ft;function c5(n,e){function t(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function i(x,g){g.color.getRGB(x.fogColor.value,HI(n)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function r(x,g,_,M,w){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),d(x,g)):g.isMeshPhongMaterial?(s(x,g),h(x,g)):g.isMeshStandardMaterial?(s(x,g),p(x,g),g.isMeshPhysicalMaterial&&m(x,g,w)):g.isMeshMatcapMaterial?(s(x,g),y(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),A(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(o(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,_,M):g.isSpriteMaterial?u(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,t(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===Ri&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,t(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===Ri&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,t(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,t(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const _=e.get(g),M=_.envMap,w=_.envMapRotation;M&&(x.envMap.value=M,Ba.copy(w),Ba.x*=-1,Ba.y*=-1,Ba.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Ba.y*=-1,Ba.z*=-1),x.envMapRotation.value.setFromMatrix4(l5.makeRotationFromEuler(Ba)),x.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap&&(x.lightMap.value=g.lightMap,x.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,x.lightMapTransform)),g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,x.aoMapTransform))}function o(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,_,M){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*_,x.scale.value=M*.5,g.map&&(x.map.value=g.map,t(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function u(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function h(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function d(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function p(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,x.roughnessMapTransform)),g.envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function m(x,g,_){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Ri&&x.clearcoatNormalScale.value.negate())),g.dispersion>0&&(x.dispersion.value=g.dispersion),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(x.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(x.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,x.specularIntensityMapTransform))}function y(x,g){g.matcap&&(x.matcap.value=g.matcap)}function A(x,g){const _=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function u5(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,M){const w=M.program;i.uniformBlockBinding(_,w)}function u(_,M){let w=r[_.id];w===void 0&&(y(_),w=h(_),r[_.id]=w,_.addEventListener("dispose",x));const P=M.program;i.updateUBOMapping(_,P);const b=e.render.frame;s[_.id]!==b&&(p(_),s[_.id]=b)}function h(_){const M=d();_.__bindingPointIndex=M;const w=n.createBuffer(),P=_.__size,b=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,P,b),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,w),w}function d(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(_){const M=r[_.id],w=_.uniforms,P=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let b=0,I=w.length;b<I;b++){const D=Array.isArray(w[b])?w[b]:[w[b]];for(let R=0,T=D.length;R<T;R++){const N=D[R];if(m(N,b,R,P)===!0){const Q=N.__offset,W=Array.isArray(N.value)?N.value:[N.value];let K=0;for(let Y=0;Y<W.length;Y++){const Z=W[Y],z=A(Z);typeof Z=="number"||typeof Z=="boolean"?(N.__data[0]=Z,n.bufferSubData(n.UNIFORM_BUFFER,Q+K,N.__data)):Z.isMatrix3?(N.__data[0]=Z.elements[0],N.__data[1]=Z.elements[1],N.__data[2]=Z.elements[2],N.__data[3]=0,N.__data[4]=Z.elements[3],N.__data[5]=Z.elements[4],N.__data[6]=Z.elements[5],N.__data[7]=0,N.__data[8]=Z.elements[6],N.__data[9]=Z.elements[7],N.__data[10]=Z.elements[8],N.__data[11]=0):(Z.toArray(N.__data,K),K+=z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Q,N.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(_,M,w,P){const b=_.value,I=M+"_"+w;if(P[I]===void 0)return typeof b=="number"||typeof b=="boolean"?P[I]=b:P[I]=b.clone(),!0;{const D=P[I];if(typeof b=="number"||typeof b=="boolean"){if(D!==b)return P[I]=b,!0}else if(D.equals(b)===!1)return D.copy(b),!0}return!1}function y(_){const M=_.uniforms;let w=0;const P=16;for(let I=0,D=M.length;I<D;I++){const R=Array.isArray(M[I])?M[I]:[M[I]];for(let T=0,N=R.length;T<N;T++){const Q=R[T],W=Array.isArray(Q.value)?Q.value:[Q.value];for(let K=0,Y=W.length;K<Y;K++){const Z=W[K],z=A(Z),B=w%P;B!==0&&P-B<z.boundary&&(w+=P-B),Q.__data=new Float32Array(z.storage/Float32Array.BYTES_PER_ELEMENT),Q.__offset=w,w+=z.storage}}}const b=w%P;return b>0&&(w+=P-b),_.__size=w,_.__cache={},this}function A(_){const M={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(M.boundary=4,M.storage=4):_.isVector2?(M.boundary=8,M.storage=8):_.isVector3||_.isColor?(M.boundary=16,M.storage=12):_.isVector4?(M.boundary=16,M.storage=16):_.isMatrix3?(M.boundary=48,M.storage=48):_.isMatrix4?(M.boundary=64,M.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),M}function x(_){const M=_.target;M.removeEventListener("dispose",x);const w=o.indexOf(M.__bindingPointIndex);o.splice(w,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}function g(){for(const _ in r)n.deleteBuffer(r[_]);o=[],r={},s={}}return{bind:l,update:u,dispose:g}}class YI{constructor(e={}){const{canvas:t=FI(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),y=new Int32Array(4);let A=null,x=null;const g=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Mr,this.toneMapping=Ss,this.toneMappingExposure=1;const M=this;let w=!1,P=0,b=0,I=null,D=-1,R=null;const T=new Wt,N=new Wt;let Q=null;const W=new Oe(0);let K=0,Y=t.width,Z=t.height,z=1,B=null,G=null;const V=new Wt(0,0,Y,Z),q=new Wt(0,0,Y,Z);let ue=!1;const be=new od;let re=!1,me=!1;const we=new ft,Ee=new U,nt=new Wt,dt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ke=!1;function He(){return I===null?z:1}let O=i;function ye(F,ee){return t.getContext(F,ee)}try{const F={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ed}`),t.addEventListener("webglcontextlost",de,!1),t.addEventListener("webglcontextrestored",ve,!1),t.addEventListener("webglcontextcreationerror",Ne,!1),O===null){const ee="webgl2";if(O=ye(ee,F),O===null)throw ye(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}let Me,Ie,he,Ye,Le,Ge,H,L,se,xe,_e,Ae,$e,Pe,We,vt,Ce,ze,bt,lt,je,J,ge,Ue;function j(){Me=new yG(O),Me.init(),J=new JI(O,Me),Ie=new hG(O,Me,e,J),he=new QV(O),Ye=new AG(O),Le=new UV,Ge=new n5(O,Me,he,Le,Ie,J,Ye),H=new pG(M),L=new vG(M),se=new b4(O),ge=new uG(O,se),xe=new xG(O,se,Ye,ge),_e=new MG(O,xe,se,Ye),bt=new SG(O,Ie,Ge),vt=new dG(Le),Ae=new OV(M,H,L,Me,Ie,ge,vt),$e=new c5(M,Le),Pe=new HV,We=new XV(Me),ze=new cG(M,H,L,he,_e,p,l),Ce=new YV(M,_e,Ie),Ue=new u5(O,Ye,Ie,he),lt=new fG(O,Me,Ye),je=new _G(O,Me,Ye),Ye.programs=Ae.programs,M.capabilities=Ie,M.extensions=Me,M.properties=Le,M.renderLists=Pe,M.shadowMap=Ce,M.state=he,M.info=Ye}j();const Se=new a5(M,O);this.xr=Se,this.getContext=function(){return O},this.getContextAttributes=function(){return O.getContextAttributes()},this.forceContextLoss=function(){const F=Me.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=Me.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return z},this.setPixelRatio=function(F){F!==void 0&&(z=F,this.setSize(Y,Z,!1))},this.getSize=function(F){return F.set(Y,Z)},this.setSize=function(F,ee,ae=!0){if(Se.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=F,Z=ee,t.width=Math.floor(F*z),t.height=Math.floor(ee*z),ae===!0&&(t.style.width=F+"px",t.style.height=ee+"px"),this.setViewport(0,0,F,ee)},this.getDrawingBufferSize=function(F){return F.set(Y*z,Z*z).floor()},this.setDrawingBufferSize=function(F,ee,ae){Y=F,Z=ee,z=ae,t.width=Math.floor(F*ae),t.height=Math.floor(ee*ae),this.setViewport(0,0,F,ee)},this.getCurrentViewport=function(F){return F.copy(T)},this.getViewport=function(F){return F.copy(V)},this.setViewport=function(F,ee,ae,le){F.isVector4?V.set(F.x,F.y,F.z,F.w):V.set(F,ee,ae,le),he.viewport(T.copy(V).multiplyScalar(z).round())},this.getScissor=function(F){return F.copy(q)},this.setScissor=function(F,ee,ae,le){F.isVector4?q.set(F.x,F.y,F.z,F.w):q.set(F,ee,ae,le),he.scissor(N.copy(q).multiplyScalar(z).round())},this.getScissorTest=function(){return ue},this.setScissorTest=function(F){he.setScissorTest(ue=F)},this.setOpaqueSort=function(F){B=F},this.setTransparentSort=function(F){G=F},this.getClearColor=function(F){return F.copy(ze.getClearColor())},this.setClearColor=function(){ze.setClearColor.apply(ze,arguments)},this.getClearAlpha=function(){return ze.getClearAlpha()},this.setClearAlpha=function(){ze.setClearAlpha.apply(ze,arguments)},this.clear=function(F=!0,ee=!0,ae=!0){let le=0;if(F){let ie=!1;if(I!==null){const De=I.texture.format;ie=De===Y0||De===K0||De===nd}if(ie){const De=I.texture.type,Je=De===es||De===lo||De===hu||De===Ml||De===j0||De===X0,et=ze.getClearColor(),qe=ze.getClearAlpha(),ht=et.r,mt=et.g,ut=et.b;Je?(m[0]=ht,m[1]=mt,m[2]=ut,m[3]=qe,O.clearBufferuiv(O.COLOR,0,m)):(y[0]=ht,y[1]=mt,y[2]=ut,y[3]=qe,O.clearBufferiv(O.COLOR,0,y))}else le|=O.COLOR_BUFFER_BIT}ee&&(le|=O.DEPTH_BUFFER_BIT),ae&&(le|=O.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),O.clear(le)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",de,!1),t.removeEventListener("webglcontextrestored",ve,!1),t.removeEventListener("webglcontextcreationerror",Ne,!1),Pe.dispose(),We.dispose(),Le.dispose(),H.dispose(),L.dispose(),_e.dispose(),ge.dispose(),Ue.dispose(),Ae.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",Lt),Se.removeEventListener("sessionend",Ii),Nr.stop()};function de(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const F=Ye.autoReset,ee=Ce.enabled,ae=Ce.autoUpdate,le=Ce.needsUpdate,ie=Ce.type;j(),Ye.autoReset=F,Ce.enabled=ee,Ce.autoUpdate=ae,Ce.needsUpdate=le,Ce.type=ie}function Ne(F){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function at(F){const ee=F.target;ee.removeEventListener("dispose",at),yt(ee)}function yt(F){Dt(F),Le.remove(F)}function Dt(F){const ee=Le.get(F).programs;ee!==void 0&&(ee.forEach(function(ae){Ae.releaseProgram(ae)}),F.isShaderMaterial&&Ae.releaseShaderCache(F))}this.renderBufferDirect=function(F,ee,ae,le,ie,De){ee===null&&(ee=dt);const Je=ie.isMesh&&ie.matrixWorld.determinant()<0,et=Lv(F,ee,ae,le,ie);he.setMaterial(le,Je);let qe=ae.index,ht=1;if(le.wireframe===!0){if(qe=xe.getWireframeAttribute(ae),qe===void 0)return;ht=2}const mt=ae.drawRange,ut=ae.attributes.position;let kt=mt.start*ht,Yt=(mt.start+mt.count)*ht;De!==null&&(kt=Math.max(kt,De.start*ht),Yt=Math.min(Yt,(De.start+De.count)*ht)),qe!==null?(kt=Math.max(kt,0),Yt=Math.min(Yt,qe.count)):ut!=null&&(kt=Math.max(kt,0),Yt=Math.min(Yt,ut.count));const jt=Yt-kt;if(jt<0||jt===1/0)return;ge.setup(ie,le,et,ae,qe);let gn,ot=lt;if(qe!==null&&(gn=se.get(qe),ot=je,ot.setIndex(gn)),ie.isMesh)le.wireframe===!0?(he.setLineWidth(le.wireframeLinewidth*He()),ot.setMode(O.LINES)):ot.setMode(O.TRIANGLES);else if(ie.isLine){let Fe=le.linewidth;Fe===void 0&&(Fe=1),he.setLineWidth(Fe*He()),ie.isLineSegments?ot.setMode(O.LINES):ie.isLineLoop?ot.setMode(O.LINE_LOOP):ot.setMode(O.LINE_STRIP)}else ie.isPoints?ot.setMode(O.POINTS):ie.isSprite&&ot.setMode(O.TRIANGLES);if(ie.isBatchedMesh)if(ie._multiDrawInstances!==null)ot.renderMultiDrawInstances(ie._multiDrawStarts,ie._multiDrawCounts,ie._multiDrawCount,ie._multiDrawInstances);else if(Me.get("WEBGL_multi_draw"))ot.renderMultiDraw(ie._multiDrawStarts,ie._multiDrawCounts,ie._multiDrawCount);else{const Fe=ie._multiDrawStarts,Qt=ie._multiDrawCounts,xt=ie._multiDrawCount,Zt=qe?se.get(qe).bytesPerElement:1,Di=Le.get(le).currentProgram.getUniforms();for(let Tn=0;Tn<xt;Tn++)Di.setValue(O,"_gl_DrawID",Tn),ot.render(Fe[Tn]/Zt,Qt[Tn])}else if(ie.isInstancedMesh)ot.renderInstances(kt,jt,ie.count);else if(ae.isInstancedBufferGeometry){const Fe=ae._maxInstanceCount!==void 0?ae._maxInstanceCount:1/0,Qt=Math.min(ae.instanceCount,Fe);ot.renderInstances(kt,jt,Qt)}else ot.render(kt,jt)};function st(F,ee,ae){F.transparent===!0&&F.side===Tr&&F.forceSinglePass===!1?(F.side=Ri,F.needsUpdate=!0,Hl(F,ee,ae),F.side=Cs,F.needsUpdate=!0,Hl(F,ee,ae),F.side=Tr):Hl(F,ee,ae)}this.compile=function(F,ee,ae=null){ae===null&&(ae=F),x=We.get(ae),x.init(ee),_.push(x),ae.traverseVisible(function(ie){ie.isLight&&ie.layers.test(ee.layers)&&(x.pushLight(ie),ie.castShadow&&x.pushShadow(ie))}),F!==ae&&F.traverseVisible(function(ie){ie.isLight&&ie.layers.test(ee.layers)&&(x.pushLight(ie),ie.castShadow&&x.pushShadow(ie))}),x.setupLights();const le=new Set;return F.traverse(function(ie){const De=ie.material;if(De)if(Array.isArray(De))for(let Je=0;Je<De.length;Je++){const et=De[Je];st(et,ae,ie),le.add(et)}else st(De,ae,ie),le.add(De)}),_.pop(),x=null,le},this.compileAsync=function(F,ee,ae=null){const le=this.compile(F,ee,ae);return new Promise(ie=>{function De(){if(le.forEach(function(Je){Le.get(Je).currentProgram.isReady()&&le.delete(Je)}),le.size===0){ie(F);return}setTimeout(De,10)}Me.get("KHR_parallel_shader_compile")!==null?De():setTimeout(De,10)})};let Te=null;function ct(F){Te&&Te(F)}function Lt(){Nr.stop()}function Ii(){Nr.start()}const Nr=new GI;Nr.setAnimationLoop(ct),typeof self<"u"&&Nr.setContext(self),this.setAnimationLoop=function(F){Te=F,Se.setAnimationLoop(F),F===null?Nr.stop():Nr.start()},Se.addEventListener("sessionstart",Lt),Se.addEventListener("sessionend",Ii),this.render=function(F,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),Se.enabled===!0&&Se.isPresenting===!0&&(Se.cameraAutoUpdate===!0&&Se.updateCamera(ee),ee=Se.getCamera()),F.isScene===!0&&F.onBeforeRender(M,F,ee,I),x=We.get(F,_.length),x.init(ee),_.push(x),we.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),be.setFromProjectionMatrix(we),me=this.localClippingEnabled,re=vt.init(this.clippingPlanes,me),A=Pe.get(F,g.length),A.init(),g.push(A),Se.enabled===!0&&Se.isPresenting===!0){const De=M.xr.getDepthSensingMesh();De!==null&&Nu(De,ee,-1/0,M.sortObjects)}Nu(F,ee,0,M.sortObjects),A.finish(),M.sortObjects===!0&&A.sort(B,G),Ke=Se.enabled===!1||Se.isPresenting===!1||Se.hasDepthSensing()===!1,Ke&&ze.addToRenderList(A,F),this.info.render.frame++,re===!0&&vt.beginShadows();const ae=x.state.shadowsArray;Ce.render(ae,F,ee),re===!0&&vt.endShadows(),this.info.autoReset===!0&&this.info.reset();const le=A.opaque,ie=A.transmissive;if(x.setupLights(),ee.isArrayCamera){const De=ee.cameras;if(ie.length>0)for(let Je=0,et=De.length;Je<et;Je++){const qe=De[Je];Ul(le,ie,F,qe)}Ke&&ze.render(F);for(let Je=0,et=De.length;Je<et;Je++){const qe=De[Je];Fu(A,F,qe,qe.viewport)}}else ie.length>0&&Ul(le,ie,F,ee),Ke&&ze.render(F),Fu(A,F,ee);I!==null&&(Ge.updateMultisampleRenderTarget(I),Ge.updateRenderTargetMipmap(I)),F.isScene===!0&&F.onAfterRender(M,F,ee),ge.resetDefaultState(),D=-1,R=null,_.pop(),_.length>0?(x=_[_.length-1],re===!0&&vt.setGlobalState(M.clippingPlanes,x.state.camera)):x=null,g.pop(),g.length>0?A=g[g.length-1]:A=null};function Nu(F,ee,ae,le){if(F.visible===!1)return;if(F.layers.test(ee.layers)){if(F.isGroup)ae=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(ee);else if(F.isLight)x.pushLight(F),F.castShadow&&x.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||be.intersectsSprite(F)){le&&nt.setFromMatrixPosition(F.matrixWorld).applyMatrix4(we);const Je=_e.update(F),et=F.material;et.visible&&A.push(F,Je,et,ae,nt.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||be.intersectsObject(F))){const Je=_e.update(F),et=F.material;if(le&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),nt.copy(F.boundingSphere.center)):(Je.boundingSphere===null&&Je.computeBoundingSphere(),nt.copy(Je.boundingSphere.center)),nt.applyMatrix4(F.matrixWorld).applyMatrix4(we)),Array.isArray(et)){const qe=Je.groups;for(let ht=0,mt=qe.length;ht<mt;ht++){const ut=qe[ht],kt=et[ut.materialIndex];kt&&kt.visible&&A.push(F,Je,kt,ae,nt.z,ut)}}else et.visible&&A.push(F,Je,et,ae,nt.z,null)}}const De=F.children;for(let Je=0,et=De.length;Je<et;Je++)Nu(De[Je],ee,ae,le)}function Fu(F,ee,ae,le){const ie=F.opaque,De=F.transmissive,Je=F.transparent;x.setupLightsView(ae),re===!0&&vt.setGlobalState(M.clippingPlanes,ae),le&&he.viewport(T.copy(le)),ie.length>0&&kl(ie,ee,ae),De.length>0&&kl(De,ee,ae),Je.length>0&&kl(Je,ee,ae),he.buffers.depth.setTest(!0),he.buffers.depth.setMask(!0),he.buffers.color.setMask(!0),he.setPolygonOffset(!1)}function Ul(F,ee,ae,le){if((ae.isScene===!0?ae.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[le.id]===void 0&&(x.state.transmissionRenderTarget[le.id]=new ts(1,1,{generateMipmaps:!0,type:Me.has("EXT_color_buffer_half_float")||Me.has("EXT_color_buffer_float")?Tu:es,minFilter:Rr,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Vt.workingColorSpace}));const De=x.state.transmissionRenderTarget[le.id],Je=le.viewport||T;De.setSize(Je.z,Je.w);const et=M.getRenderTarget();M.setRenderTarget(De),M.getClearColor(W),K=M.getClearAlpha(),K<1&&M.setClearColor(16777215,.5),Ke?ze.render(ae):M.clear();const qe=M.toneMapping;M.toneMapping=Ss;const ht=le.viewport;if(le.viewport!==void 0&&(le.viewport=void 0),x.setupLightsView(le),re===!0&&vt.setGlobalState(M.clippingPlanes,le),kl(F,ae,le),Ge.updateMultisampleRenderTarget(De),Ge.updateRenderTargetMipmap(De),Me.has("WEBGL_multisampled_render_to_texture")===!1){let mt=!1;for(let ut=0,kt=ee.length;ut<kt;ut++){const Yt=ee[ut],jt=Yt.object,gn=Yt.geometry,ot=Yt.material,Fe=Yt.group;if(ot.side===Tr&&jt.layers.test(le.layers)){const Qt=ot.side;ot.side=Ri,ot.needsUpdate=!0,po(jt,ae,le,gn,ot,Fe),ot.side=Qt,ot.needsUpdate=!0,mt=!0}}mt===!0&&(Ge.updateMultisampleRenderTarget(De),Ge.updateRenderTargetMipmap(De))}M.setRenderTarget(et),M.setClearColor(W,K),ht!==void 0&&(le.viewport=ht),M.toneMapping=qe}function kl(F,ee,ae){const le=ee.isScene===!0?ee.overrideMaterial:null;for(let ie=0,De=F.length;ie<De;ie++){const Je=F[ie],et=Je.object,qe=Je.geometry,ht=le===null?Je.material:le,mt=Je.group;et.layers.test(ae.layers)&&po(et,ee,ae,qe,ht,mt)}}function po(F,ee,ae,le,ie,De){F.onBeforeRender(M,ee,ae,le,ie,De),F.modelViewMatrix.multiplyMatrices(ae.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),ie.transparent===!0&&ie.side===Tr&&ie.forceSinglePass===!1?(ie.side=Ri,ie.needsUpdate=!0,M.renderBufferDirect(ae,ee,le,ie,F,De),ie.side=Cs,ie.needsUpdate=!0,M.renderBufferDirect(ae,ee,le,ie,F,De),ie.side=Tr):M.renderBufferDirect(ae,ee,le,ie,F,De),F.onAfterRender(M,ee,ae,le,ie,De)}function Hl(F,ee,ae){ee.isScene!==!0&&(ee=dt);const le=Le.get(F),ie=x.state.lights,De=x.state.shadowsArray,Je=ie.state.version,et=Ae.getParameters(F,ie.state,De,ee,ae),qe=Ae.getProgramCacheKey(et);let ht=le.programs;le.environment=F.isMeshStandardMaterial?ee.environment:null,le.fog=ee.fog,le.envMap=(F.isMeshStandardMaterial?L:H).get(F.envMap||le.environment),le.envMapRotation=le.environment!==null&&F.envMap===null?ee.environmentRotation:F.envMapRotation,ht===void 0&&(F.addEventListener("dispose",at),ht=new Map,le.programs=ht);let mt=ht.get(qe);if(mt!==void 0){if(le.currentProgram===mt&&le.lightsStateVersion===Je)return Cd(F,et),mt}else et.uniforms=Ae.getUniforms(F),F.onBeforeCompile(et,M),mt=Ae.acquireProgram(et,qe),ht.set(qe,mt),le.uniforms=et.uniforms;const ut=le.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(ut.clippingPlanes=vt.uniform),Cd(F,et),le.needsLights=Fv(F),le.lightsStateVersion=Je,le.needsLights&&(ut.ambientLightColor.value=ie.state.ambient,ut.lightProbe.value=ie.state.probe,ut.directionalLights.value=ie.state.directional,ut.directionalLightShadows.value=ie.state.directionalShadow,ut.spotLights.value=ie.state.spot,ut.spotLightShadows.value=ie.state.spotShadow,ut.rectAreaLights.value=ie.state.rectArea,ut.ltc_1.value=ie.state.rectAreaLTC1,ut.ltc_2.value=ie.state.rectAreaLTC2,ut.pointLights.value=ie.state.point,ut.pointLightShadows.value=ie.state.pointShadow,ut.hemisphereLights.value=ie.state.hemi,ut.directionalShadowMap.value=ie.state.directionalShadowMap,ut.directionalShadowMatrix.value=ie.state.directionalShadowMatrix,ut.spotShadowMap.value=ie.state.spotShadowMap,ut.spotLightMatrix.value=ie.state.spotLightMatrix,ut.spotLightMap.value=ie.state.spotLightMap,ut.pointShadowMap.value=ie.state.pointShadowMap,ut.pointShadowMatrix.value=ie.state.pointShadowMatrix),le.currentProgram=mt,le.uniformsList=null,mt}function Ed(F){if(F.uniformsList===null){const ee=F.currentProgram.getUniforms();F.uniformsList=$m.seqWithValue(ee.seq,F.uniforms)}return F.uniformsList}function Cd(F,ee){const ae=Le.get(F);ae.outputColorSpace=ee.outputColorSpace,ae.batching=ee.batching,ae.batchingColor=ee.batchingColor,ae.instancing=ee.instancing,ae.instancingColor=ee.instancingColor,ae.instancingMorph=ee.instancingMorph,ae.skinning=ee.skinning,ae.morphTargets=ee.morphTargets,ae.morphNormals=ee.morphNormals,ae.morphColors=ee.morphColors,ae.morphTargetsCount=ee.morphTargetsCount,ae.numClippingPlanes=ee.numClippingPlanes,ae.numIntersection=ee.numClipIntersection,ae.vertexAlphas=ee.vertexAlphas,ae.vertexTangents=ee.vertexTangents,ae.toneMapping=ee.toneMapping}function Lv(F,ee,ae,le,ie){ee.isScene!==!0&&(ee=dt),Ge.resetTextureUnits();const De=ee.fog,Je=le.isMeshStandardMaterial?ee.environment:null,et=I===null?M.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:ho,qe=(le.isMeshStandardMaterial?L:H).get(le.envMap||Je),ht=le.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,mt=!!ae.attributes.tangent&&(!!le.normalMap||le.anisotropy>0),ut=!!ae.morphAttributes.position,kt=!!ae.morphAttributes.normal,Yt=!!ae.morphAttributes.color;let jt=Ss;le.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(jt=M.toneMapping);const gn=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,ot=gn!==void 0?gn.length:0,Fe=Le.get(le),Qt=x.state.lights;if(re===!0&&(me===!0||F!==R)){const Kn=F===R&&le.id===D;vt.setState(le,F,Kn)}let xt=!1;le.version===Fe.__version?(Fe.needsLights&&Fe.lightsStateVersion!==Qt.state.version||Fe.outputColorSpace!==et||ie.isBatchedMesh&&Fe.batching===!1||!ie.isBatchedMesh&&Fe.batching===!0||ie.isBatchedMesh&&Fe.batchingColor===!0&&ie.colorTexture===null||ie.isBatchedMesh&&Fe.batchingColor===!1&&ie.colorTexture!==null||ie.isInstancedMesh&&Fe.instancing===!1||!ie.isInstancedMesh&&Fe.instancing===!0||ie.isSkinnedMesh&&Fe.skinning===!1||!ie.isSkinnedMesh&&Fe.skinning===!0||ie.isInstancedMesh&&Fe.instancingColor===!0&&ie.instanceColor===null||ie.isInstancedMesh&&Fe.instancingColor===!1&&ie.instanceColor!==null||ie.isInstancedMesh&&Fe.instancingMorph===!0&&ie.morphTexture===null||ie.isInstancedMesh&&Fe.instancingMorph===!1&&ie.morphTexture!==null||Fe.envMap!==qe||le.fog===!0&&Fe.fog!==De||Fe.numClippingPlanes!==void 0&&(Fe.numClippingPlanes!==vt.numPlanes||Fe.numIntersection!==vt.numIntersection)||Fe.vertexAlphas!==ht||Fe.vertexTangents!==mt||Fe.morphTargets!==ut||Fe.morphNormals!==kt||Fe.morphColors!==Yt||Fe.toneMapping!==jt||Fe.morphTargetsCount!==ot)&&(xt=!0):(xt=!0,Fe.__version=le.version);let Zt=Fe.currentProgram;xt===!0&&(Zt=Hl(le,ee,ie));let Di=!1,Tn=!1,Hn=!1;const tn=Zt.getUniforms(),Fr=Fe.uniforms;if(he.useProgram(Zt.program)&&(Di=!0,Tn=!0,Hn=!0),le.id!==D&&(D=le.id,Tn=!0),Di||R!==F){tn.setValue(O,"projectionMatrix",F.projectionMatrix),tn.setValue(O,"viewMatrix",F.matrixWorldInverse);const Kn=tn.map.cameraPosition;Kn!==void 0&&Kn.setValue(O,Ee.setFromMatrixPosition(F.matrixWorld)),Ie.logarithmicDepthBuffer&&tn.setValue(O,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(le.isMeshPhongMaterial||le.isMeshToonMaterial||le.isMeshLambertMaterial||le.isMeshBasicMaterial||le.isMeshStandardMaterial||le.isShaderMaterial)&&tn.setValue(O,"isOrthographic",F.isOrthographicCamera===!0),R!==F&&(R=F,Tn=!0,Hn=!0)}if(ie.isSkinnedMesh){tn.setOptional(O,ie,"bindMatrix"),tn.setOptional(O,ie,"bindMatrixInverse");const Kn=ie.skeleton;Kn&&(Kn.boneTexture===null&&Kn.computeBoneTexture(),tn.setValue(O,"boneTexture",Kn.boneTexture,Ge))}ie.isBatchedMesh&&(tn.setOptional(O,ie,"batchingTexture"),tn.setValue(O,"batchingTexture",ie._matricesTexture,Ge),tn.setOptional(O,ie,"batchingIdTexture"),tn.setValue(O,"batchingIdTexture",ie._indirectTexture,Ge),tn.setOptional(O,ie,"batchingColorTexture"),ie._colorsTexture!==null&&tn.setValue(O,"batchingColorTexture",ie._colorsTexture,Ge));const zl=ae.morphAttributes;if((zl.position!==void 0||zl.normal!==void 0||zl.color!==void 0)&&bt.update(ie,ae,Zt),(Tn||Fe.receiveShadow!==ie.receiveShadow)&&(Fe.receiveShadow=ie.receiveShadow,tn.setValue(O,"receiveShadow",ie.receiveShadow)),le.isMeshGouraudMaterial&&le.envMap!==null&&(Fr.envMap.value=qe,Fr.flipEnvMap.value=qe.isCubeTexture&&qe.isRenderTargetTexture===!1?-1:1),le.isMeshStandardMaterial&&le.envMap===null&&ee.environment!==null&&(Fr.envMapIntensity.value=ee.environmentIntensity),Tn&&(tn.setValue(O,"toneMappingExposure",M.toneMappingExposure),Fe.needsLights&&Nv(Fr,Hn),De&&le.fog===!0&&$e.refreshFogUniforms(Fr,De),$e.refreshMaterialUniforms(Fr,le,z,Z,x.state.transmissionRenderTarget[F.id]),$m.upload(O,Ed(Fe),Fr,Ge)),le.isShaderMaterial&&le.uniformsNeedUpdate===!0&&($m.upload(O,Ed(Fe),Fr,Ge),le.uniformsNeedUpdate=!1),le.isSpriteMaterial&&tn.setValue(O,"center",ie.center),tn.setValue(O,"modelViewMatrix",ie.modelViewMatrix),tn.setValue(O,"normalMatrix",ie.normalMatrix),tn.setValue(O,"modelMatrix",ie.matrixWorld),le.isShaderMaterial||le.isRawShaderMaterial){const Kn=le.uniformsGroups;for(let Gl=0,Wi=Kn.length;Gl<Wi;Gl++){const Td=Kn[Gl];Ue.update(Td,Zt),Ue.bind(Td,Zt)}}return Zt}function Nv(F,ee){F.ambientLightColor.needsUpdate=ee,F.lightProbe.needsUpdate=ee,F.directionalLights.needsUpdate=ee,F.directionalLightShadows.needsUpdate=ee,F.pointLights.needsUpdate=ee,F.pointLightShadows.needsUpdate=ee,F.spotLights.needsUpdate=ee,F.spotLightShadows.needsUpdate=ee,F.rectAreaLights.needsUpdate=ee,F.hemisphereLights.needsUpdate=ee}function Fv(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(F,ee,ae){Le.get(F.texture).__webglTexture=ee,Le.get(F.depthTexture).__webglTexture=ae;const le=Le.get(F);le.__hasExternalTextures=!0,le.__autoAllocateDepthBuffer=ae===void 0,le.__autoAllocateDepthBuffer||Me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),le.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(F,ee){const ae=Le.get(F);ae.__webglFramebuffer=ee,ae.__useDefaultFramebuffer=ee===void 0},this.setRenderTarget=function(F,ee=0,ae=0){I=F,P=ee,b=ae;let le=!0,ie=null,De=!1,Je=!1;if(F){const qe=Le.get(F);qe.__useDefaultFramebuffer!==void 0?(he.bindFramebuffer(O.FRAMEBUFFER,null),le=!1):qe.__webglFramebuffer===void 0?Ge.setupRenderTarget(F):qe.__hasExternalTextures&&Ge.rebindTextures(F,Le.get(F.texture).__webglTexture,Le.get(F.depthTexture).__webglTexture);const ht=F.texture;(ht.isData3DTexture||ht.isDataArrayTexture||ht.isCompressedArrayTexture)&&(Je=!0);const mt=Le.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(mt[ee])?ie=mt[ee][ae]:ie=mt[ee],De=!0):F.samples>0&&Ge.useMultisampledRTT(F)===!1?ie=Le.get(F).__webglMultisampledFramebuffer:Array.isArray(mt)?ie=mt[ae]:ie=mt,T.copy(F.viewport),N.copy(F.scissor),Q=F.scissorTest}else T.copy(V).multiplyScalar(z).floor(),N.copy(q).multiplyScalar(z).floor(),Q=ue;if(he.bindFramebuffer(O.FRAMEBUFFER,ie)&&le&&he.drawBuffers(F,ie),he.viewport(T),he.scissor(N),he.setScissorTest(Q),De){const qe=Le.get(F.texture);O.framebufferTexture2D(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,O.TEXTURE_CUBE_MAP_POSITIVE_X+ee,qe.__webglTexture,ae)}else if(Je){const qe=Le.get(F.texture),ht=ee||0;O.framebufferTextureLayer(O.FRAMEBUFFER,O.COLOR_ATTACHMENT0,qe.__webglTexture,ae||0,ht)}D=-1},this.readRenderTargetPixels=function(F,ee,ae,le,ie,De,Je){if(!(F&&F.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let et=Le.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&Je!==void 0&&(et=et[Je]),et){he.bindFramebuffer(O.FRAMEBUFFER,et);try{const qe=F.texture,ht=qe.format,mt=qe.type;if(!Ie.textureFormatReadable(ht)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ie.textureTypeReadable(mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=F.width-le&&ae>=0&&ae<=F.height-ie&&O.readPixels(ee,ae,le,ie,J.convert(ht),J.convert(mt),De)}finally{const qe=I!==null?Le.get(I).__webglFramebuffer:null;he.bindFramebuffer(O.FRAMEBUFFER,qe)}}},this.readRenderTargetPixelsAsync=async function(F,ee,ae,le,ie,De,Je){if(!(F&&F.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let et=Le.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&Je!==void 0&&(et=et[Je]),et){he.bindFramebuffer(O.FRAMEBUFFER,et);try{const qe=F.texture,ht=qe.format,mt=qe.type;if(!Ie.textureFormatReadable(ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ie.textureTypeReadable(mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ee>=0&&ee<=F.width-le&&ae>=0&&ae<=F.height-ie){const ut=O.createBuffer();O.bindBuffer(O.PIXEL_PACK_BUFFER,ut),O.bufferData(O.PIXEL_PACK_BUFFER,De.byteLength,O.STREAM_READ),O.readPixels(ee,ae,le,ie,J.convert(ht),J.convert(mt),0),O.flush();const kt=O.fenceSync(O.SYNC_GPU_COMMANDS_COMPLETE,0);await $k(O,kt,4);try{O.bindBuffer(O.PIXEL_PACK_BUFFER,ut),O.getBufferSubData(O.PIXEL_PACK_BUFFER,0,De)}finally{O.deleteBuffer(ut),O.deleteSync(kt)}return De}}finally{const qe=I!==null?Le.get(I).__webglFramebuffer:null;he.bindFramebuffer(O.FRAMEBUFFER,qe)}}},this.copyFramebufferToTexture=function(F,ee=null,ae=0){F.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ee=arguments[0]||null,F=arguments[1]);const le=Math.pow(2,-ae),ie=Math.floor(F.image.width*le),De=Math.floor(F.image.height*le),Je=ee!==null?ee.x:0,et=ee!==null?ee.y:0;Ge.setTexture2D(F,0),O.copyTexSubImage2D(O.TEXTURE_2D,ae,0,0,Je,et,ie,De),he.unbindTexture()},this.copyTextureToTexture=function(F,ee,ae=null,le=null,ie=0){F.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),le=arguments[0]||null,F=arguments[1],ee=arguments[2],ie=arguments[3]||0,ae=null);let De,Je,et,qe,ht,mt;ae!==null?(De=ae.max.x-ae.min.x,Je=ae.max.y-ae.min.y,et=ae.min.x,qe=ae.min.y):(De=F.image.width,Je=F.image.height,et=0,qe=0),le!==null?(ht=le.x,mt=le.y):(ht=0,mt=0);const ut=J.convert(ee.format),kt=J.convert(ee.type);Ge.setTexture2D(ee,0),O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,ee.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,ee.unpackAlignment);const Yt=O.getParameter(O.UNPACK_ROW_LENGTH),jt=O.getParameter(O.UNPACK_IMAGE_HEIGHT),gn=O.getParameter(O.UNPACK_SKIP_PIXELS),ot=O.getParameter(O.UNPACK_SKIP_ROWS),Fe=O.getParameter(O.UNPACK_SKIP_IMAGES),Qt=F.isCompressedTexture?F.mipmaps[ie]:F.image;O.pixelStorei(O.UNPACK_ROW_LENGTH,Qt.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,Qt.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,et),O.pixelStorei(O.UNPACK_SKIP_ROWS,qe),F.isDataTexture?O.texSubImage2D(O.TEXTURE_2D,ie,ht,mt,De,Je,ut,kt,Qt.data):F.isCompressedTexture?O.compressedTexSubImage2D(O.TEXTURE_2D,ie,ht,mt,Qt.width,Qt.height,ut,Qt.data):O.texSubImage2D(O.TEXTURE_2D,ie,ht,mt,De,Je,ut,kt,Qt),O.pixelStorei(O.UNPACK_ROW_LENGTH,Yt),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,jt),O.pixelStorei(O.UNPACK_SKIP_PIXELS,gn),O.pixelStorei(O.UNPACK_SKIP_ROWS,ot),O.pixelStorei(O.UNPACK_SKIP_IMAGES,Fe),ie===0&&ee.generateMipmaps&&O.generateMipmap(O.TEXTURE_2D),he.unbindTexture()},this.copyTextureToTexture3D=function(F,ee,ae=null,le=null,ie=0){F.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ae=arguments[0]||null,le=arguments[1]||null,F=arguments[2],ee=arguments[3],ie=arguments[4]||0);let De,Je,et,qe,ht,mt,ut,kt,Yt;const jt=F.isCompressedTexture?F.mipmaps[ie]:F.image;ae!==null?(De=ae.max.x-ae.min.x,Je=ae.max.y-ae.min.y,et=ae.max.z-ae.min.z,qe=ae.min.x,ht=ae.min.y,mt=ae.min.z):(De=jt.width,Je=jt.height,et=jt.depth,qe=0,ht=0,mt=0),le!==null?(ut=le.x,kt=le.y,Yt=le.z):(ut=0,kt=0,Yt=0);const gn=J.convert(ee.format),ot=J.convert(ee.type);let Fe;if(ee.isData3DTexture)Ge.setTexture3D(ee,0),Fe=O.TEXTURE_3D;else if(ee.isDataArrayTexture||ee.isCompressedArrayTexture)Ge.setTexture2DArray(ee,0),Fe=O.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,ee.flipY),O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),O.pixelStorei(O.UNPACK_ALIGNMENT,ee.unpackAlignment);const Qt=O.getParameter(O.UNPACK_ROW_LENGTH),xt=O.getParameter(O.UNPACK_IMAGE_HEIGHT),Zt=O.getParameter(O.UNPACK_SKIP_PIXELS),Di=O.getParameter(O.UNPACK_SKIP_ROWS),Tn=O.getParameter(O.UNPACK_SKIP_IMAGES);O.pixelStorei(O.UNPACK_ROW_LENGTH,jt.width),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,jt.height),O.pixelStorei(O.UNPACK_SKIP_PIXELS,qe),O.pixelStorei(O.UNPACK_SKIP_ROWS,ht),O.pixelStorei(O.UNPACK_SKIP_IMAGES,mt),F.isDataTexture||F.isData3DTexture?O.texSubImage3D(Fe,ie,ut,kt,Yt,De,Je,et,gn,ot,jt.data):ee.isCompressedArrayTexture?O.compressedTexSubImage3D(Fe,ie,ut,kt,Yt,De,Je,et,gn,jt.data):O.texSubImage3D(Fe,ie,ut,kt,Yt,De,Je,et,gn,ot,jt),O.pixelStorei(O.UNPACK_ROW_LENGTH,Qt),O.pixelStorei(O.UNPACK_IMAGE_HEIGHT,xt),O.pixelStorei(O.UNPACK_SKIP_PIXELS,Zt),O.pixelStorei(O.UNPACK_SKIP_ROWS,Di),O.pixelStorei(O.UNPACK_SKIP_IMAGES,Tn),ie===0&&ee.generateMipmaps&&O.generateMipmap(Fe),he.unbindTexture()},this.initRenderTarget=function(F){Le.get(F).__webglFramebuffer===void 0&&Ge.setupRenderTarget(F)},this.initTexture=function(F){F.isCubeTexture?Ge.setTextureCube(F,0):F.isData3DTexture?Ge.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?Ge.setTexture2DArray(F,0):Ge.setTexture2D(F,0),he.unbindTexture()},this.resetState=function(){P=0,b=0,I=null,he.reset(),ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return xs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Z0?"display-p3":"srgb",t.unpackColorSpace=Vt.workingColorSpace===id?"display-p3":"srgb"}}class ev{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Oe(e),this.density=t}clone(){return new ev(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class tv{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Oe(e),this.near=t,this.far=i}clone(){return new tv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class s0 extends Nt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new sr,this.environmentIntensity=1,this.environmentRotation=new sr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class ad{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Ih,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ir()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return TS("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ir()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ir()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const wi=new U;class oa{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)wi.fromBufferAttribute(this,t),wi.applyMatrix4(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)wi.fromBufferAttribute(this,t),wi.applyNormalMatrix(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)wi.fromBufferAttribute(this,t),wi.transformDirection(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ti(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ct(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ti(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ti(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ti(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ti(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),r=Ct(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),r=Ct(r,this.array),s=Ct(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ut(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new oa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class OS extends In{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let yc;const mf=new U,xc=new U,_c=new U,Ac=new pe,gf=new pe,QI=new ft,rm=new U,vf=new U,sm=new U,MT=new pe,kx=new pe,wT=new pe;class ZI extends Nt{constructor(e=new OS){if(super(),this.isSprite=!0,this.type="Sprite",yc===void 0){yc=new wt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new ad(t,5);yc.setIndex([0,1,2,0,2,3]),yc.setAttribute("position",new oa(i,3,0,!1)),yc.setAttribute("uv",new oa(i,2,3,!1))}this.geometry=yc,this.material=e,this.center=new pe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xc.setFromMatrixScale(this.matrixWorld),QI.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_c.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&xc.multiplyScalar(-_c.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;om(rm.set(-.5,-.5,0),_c,o,xc,r,s),om(vf.set(.5,-.5,0),_c,o,xc,r,s),om(sm.set(.5,.5,0),_c,o,xc,r,s),MT.set(0,0),kx.set(1,0),wT.set(1,1);let a=e.ray.intersectTriangle(rm,vf,sm,!1,mf);if(a===null&&(om(vf.set(-.5,.5,0),_c,o,xc,r,s),kx.set(0,1),a=e.ray.intersectTriangle(rm,sm,vf,!1,mf),a===null))return;const l=e.ray.origin.distanceTo(mf);l<e.near||l>e.far||t.push({distance:l,point:mf.clone(),uv:qi.getInterpolation(mf,rm,vf,sm,MT,kx,wT,new pe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function om(n,e,t,i,r,s){Ac.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(gf.x=s*Ac.x-r*Ac.y,gf.y=r*Ac.x+s*Ac.y):gf.copy(Ac),n.copy(e),n.x+=gf.x,n.y+=gf.y,n.applyMatrix4(QI)}const am=new U,ET=new U;class qI extends Nt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){am.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(am);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){am.setFromMatrixPosition(e.matrixWorld),ET.setFromMatrixPosition(this.matrixWorld);const i=am.distanceTo(ET)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const CT=new U,TT=new Wt,bT=new Wt,f5=new U,RT=new ft,lm=new U,Hx=new ei,PT=new ft,zx=new Dl;class US extends Cn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=T1,this.bindMatrix=new ft,this.bindMatrixInverse=new ft,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new vi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,lm),this.boundingBox.expandByPoint(lm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ei),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,lm),this.boundingSphere.expandByPoint(lm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Hx.copy(this.boundingSphere),Hx.applyMatrix4(r),e.ray.intersectsSphere(Hx)!==!1&&(PT.copy(r).invert(),zx.copy(e.ray).applyMatrix4(PT),!(this.boundingBox!==null&&zx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,zx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Wt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===T1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===xI?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;TT.fromBufferAttribute(r.attributes.skinIndex,e),bT.fromBufferAttribute(r.attributes.skinWeight,e),CT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=bT.getComponent(s);if(o!==0){const a=TT.getComponent(s);RT.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(f5.copy(CT).applyMatrix4(RT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class nv extends Nt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ms extends on{constructor(e=null,t=1,i=1,r,s,o,a,l,u=On,h=On,d,p){super(null,o,a,l,u,h,r,s,d,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const BT=new ft,h5=new ft;class ld{constructor(e=[],t=[]){this.uuid=ir(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ft;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:h5;BT.multiplyMatrices(a,t[s]),BT.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new ld(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Ms(t,e,e,pi,Hi);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new nv),this.bones.push(o),this.boneInverses.push(new ft().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class El extends Ut{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Sc=new ft,IT=new ft,cm=[],DT=new vi,d5=new ft,yf=new Cn,xf=new ei;class kS extends Cn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new El(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,d5)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new vi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Sc),DT.copy(e.boundingBox).applyMatrix4(Sc),this.boundingBox.union(DT)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ei),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Sc),xf.copy(e.boundingSphere).applyMatrix4(Sc),this.boundingSphere.union(xf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(yf.geometry=this.geometry,yf.material=this.material,yf.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),xf.copy(this.boundingSphere),xf.applyMatrix4(i),e.ray.intersectsSphere(xf)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Sc),IT.multiplyMatrices(i,Sc),yf.matrixWorld=IT,yf.raycast(e,cm);for(let o=0,a=cm.length;o<a;o++){const l=cm[o];l.instanceId=s,l.object=this,t.push(l)}cm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new El(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Ms(new Float32Array(r*this.count),r,this.count,J0,Hi));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<i.length;u++)o+=i[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function p5(n,e){return n.z-e.z}function m5(n,e){return e.z-n.z}class g5{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=i}reset(){this.list.length=0,this.index=0}}const Po=new ft,Gx=new ft,v5=new ft,y5=new Oe(1,1,1),LT=new ft,Vx=new od,um=new vi,Ia=new ei,_f=new U,NT=new U,x5=new U,Wx=new g5,ui=new Cn,fm=[];function _5(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class $I extends Cn{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,i=t*2,r){super(new wt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Ms(t,e,e,pi,Hi);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Ms(t,e,e,nd,lo);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxIndexCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Ms(t,e,e,pi,Hi);i.colorSpace=Vt.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,h=new a.constructor(i*l),d=new Ut(h,l,u);t.setAttribute(s,d)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Ut(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vi);const e=this._geometryCount,t=this.boundingBox,i=this._drawInfo;t.makeEmpty();for(let r=0;r<e;r++){if(i[r].active===!1)continue;const s=i[r].geometryIndex;this.getMatrixAt(r,Po),this.getBoundingBoxAt(s,um).applyMatrix4(Po),t.union(um)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ei);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Po),this.getBoundingSphereAt(s,Ia).applyMatrix4(Po),e.union(Ia)}}addInstance(e){if(this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");this._drawInfo.push({visible:!0,active:!0,geometryIndex:e});const t=this._drawInfo.length-1,i=this._matricesTexture,r=i.image.data;v5.toArray(r,t*16),i.needsUpdate=!0;const s=this._colorsTexture;return s&&(y5.toArray(s.image.data,t*4),s.needsUpdate=!0),t}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),h=u!==null;if(h&&(i===-1?r.indexCount=u.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const d=this._geometryCount;return this._geometryCount++,o.push(r),a.push({start:h?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new vi,sphereInitialized:!1,sphere:new ei}),this.setGeometryAt(d,e),d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.vertexCount;for(const m in i.attributes){const y=t.getAttribute(m),A=i.getAttribute(m);_5(y,A,l);const x=y.itemSize;for(let g=y.count,_=u;g<_;g++){const M=l+g;for(let w=0;w<x;w++)A.setComponent(M,w,0)}A.needsUpdate=!0,A.addUpdateRange(l*x,u*x)}if(r){const m=a.indexStart;for(let y=0;y<o.count;y++)s.setX(m+y,l+o.getX(y));for(let y=o.count,A=a.indexCount;y<A;y++)s.setX(m+y,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const h=this._bounds[e];t.boundingBox!==null?(h.box.copy(t.boundingBox),h.boxInitialized=!0):h.boxInitialized=!1,t.boundingSphere!==null?(h.sphere.copy(t.boundingSphere),h.sphereInitialized=!0):h.sphereInitialized=!1;const d=this._drawRanges[e],p=t.getAttribute("position");return d.count=r?o.count:p.count,this._visibilityChanged=!0,e}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.box,s=this.geometry;if(i.boxInitialized===!1){r.makeEmpty();const o=s.index,a=s.attributes.position,l=this._drawRanges[e];for(let u=l.start,h=l.start+l.count;u<h;u++){let d=u;o&&(d=o.getX(d)),r.expandByPoint(_f.fromBufferAttribute(a,d))}i.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){r.makeEmpty(),this.getBoundingBoxAt(e,um),um.getCenter(r.center);const o=s.index,a=s.attributes.position,l=this._drawRanges[e];let u=0;for(let h=l.start,d=l.start+l.count;h<d;h++){let p=h;o&&(p=o.getX(p)),_f.fromBufferAttribute(a,p),u=Math.max(u,r.center.distanceToSquared(_f))}r.radius=Math.sqrt(u),i.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const i=this._drawInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._drawInfo,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,r=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(r,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const i=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const i=this._drawInfo;return e>=i.length||i[e].active===!1||i[e].visible===t?this:(i[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}raycast(e,t){const i=this._drawInfo,r=this._drawRanges,s=this.matrixWorld,o=this.geometry;ui.material=this.material,ui.geometry.index=o.index,ui.geometry.attributes=o.attributes,ui.geometry.boundingBox===null&&(ui.geometry.boundingBox=new vi),ui.geometry.boundingSphere===null&&(ui.geometry.boundingSphere=new ei);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const u=i[a].geometryIndex,h=r[u];ui.geometry.setDrawRange(h.start,h.count),this.getMatrixAt(a,ui.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,ui.geometry.boundingBox),this.getBoundingSphereAt(u,ui.geometry.boundingSphere),ui.raycast(e,fm);for(let d=0,p=fm.length;d<p;d++){const m=fm[d];m.object=this,m.batchId=a,t.push(m)}fm.length=0}ui.material=null,ui.geometry.index=null,ui.geometry.attributes={},ui.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,u=this._multiDrawStarts,h=this._multiDrawCounts,d=this._drawRanges,p=this.perObjectFrustumCulled,m=this._indirectTexture,y=m.image.data;p&&(LT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Vx.setFromProjectionMatrix(LT,e.coordinateSystem));let A=0;if(this.sortObjects){Gx.copy(this.matrixWorld).invert(),_f.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Gx),NT.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Gx);for(let _=0,M=l.length;_<M;_++)if(l[_].visible&&l[_].active){const w=l[_].geometryIndex;this.getMatrixAt(_,Po),this.getBoundingSphereAt(w,Ia).applyMatrix4(Po);let P=!1;if(p&&(P=!Vx.intersectsSphere(Ia)),!P){const b=x5.subVectors(Ia.center,_f).dot(NT);Wx.push(d[w],b,_)}}const x=Wx.list,g=this.customSort;g===null?x.sort(s.transparent?m5:p5):g.call(this,x,i);for(let _=0,M=x.length;_<M;_++){const w=x[_];u[A]=w.start*a,h[A]=w.count,y[A]=w.index,A++}Wx.reset()}else for(let x=0,g=l.length;x<g;x++)if(l[x].visible&&l[x].active){const _=l[x].geometryIndex;let M=!1;if(p&&(this.getMatrixAt(x,Po),this.getBoundingSphereAt(_,Ia).applyMatrix4(Po),M=!Vx.intersectsSphere(Ia)),!M){const w=d[_];u[A]=w.start*a,h[A]=w.count,y[A]=x,A++}}m.needsUpdate=!0,this._multiDrawCount=A,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class _i extends In{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Oe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const o0=new U,a0=new U,FT=new ft,Af=new Dl,hm=new ei,jx=new U,OT=new U;class co extends Nt{constructor(e=new wt,t=new _i){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)o0.fromBufferAttribute(t,r-1),a0.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=o0.distanceTo(a0);e.setAttribute("lineDistance",new tt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),hm.copy(i.boundingSphere),hm.applyMatrix4(r),hm.radius+=s,e.ray.intersectsSphere(hm)===!1)return;FT.copy(r).invert(),Af.copy(e.ray).applyMatrix4(FT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,h=i.index,p=i.attributes.position;if(h!==null){const m=Math.max(0,o.start),y=Math.min(h.count,o.start+o.count);for(let A=m,x=y-1;A<x;A+=u){const g=h.getX(A),_=h.getX(A+1),M=dm(this,e,Af,l,g,_);M&&t.push(M)}if(this.isLineLoop){const A=h.getX(y-1),x=h.getX(m),g=dm(this,e,Af,l,A,x);g&&t.push(g)}}else{const m=Math.max(0,o.start),y=Math.min(p.count,o.start+o.count);for(let A=m,x=y-1;A<x;A+=u){const g=dm(this,e,Af,l,A,A+1);g&&t.push(g)}if(this.isLineLoop){const A=dm(this,e,Af,l,y-1,m);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function dm(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(o0.fromBufferAttribute(o,r),a0.fromBufferAttribute(o,s),t.distanceSqToSegment(o0,a0,jx,OT)>i)return;jx.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(jx);if(!(l<e.near||l>e.far))return{distance:l,point:OT.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}const UT=new U,kT=new U;class rs extends co{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)UT.fromBufferAttribute(t,r),kT.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+UT.distanceTo(kT);e.setAttribute("lineDistance",new tt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class HS extends co{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class iv extends In{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Oe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const HT=new ft,D1=new Dl,pm=new ei,mm=new U;class zS extends Nt{constructor(e=new wt,t=new iv){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),pm.copy(i.boundingSphere),pm.applyMatrix4(r),pm.radius+=s,e.ray.intersectsSphere(pm)===!1)return;HT.copy(r).invert(),D1.copy(e.ray).applyMatrix4(HT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,d=i.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let y=p,A=m;y<A;y++){const x=u.getX(y);mm.fromBufferAttribute(d,x),zT(mm,x,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let y=p,A=m;y<A;y++)mm.fromBufferAttribute(d,y),zT(mm,y,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function zT(n,e,t,i,r,s,o){const a=D1.distanceSqToPoint(n);if(a<t){const l=new U;D1.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class A5 extends on{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:An,this.magFilter=s!==void 0?s:An,this.generateMipmaps=!1;const h=this;function d(){h.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class S5 extends on{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=On,this.minFilter=On,this.generateMipmaps=!1,this.needsUpdate=!0}}class rv extends on{constructor(e,t,i,r,s,o,a,l,u,h,d,p){super(null,o,a,l,u,h,r,s,d,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class M5 extends rv{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=er,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class w5 extends rv{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,ao),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class E5 extends on{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ss{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const h=i[r],p=i[r+1]-h,m=(o-h)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new pe:new U);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new U,r=[],s=[],o=[],a=new U,l=new ft;for(let m=0;m<=e;m++){const y=m/e;r[m]=this.getTangentAt(y,new U)}s[0]=new U,o[0]=new U;let u=Number.MAX_VALUE;const h=Math.abs(r[0].x),d=Math.abs(r[0].y),p=Math.abs(r[0].z);h<=u&&(u=h,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(_n(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,y))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(_n(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(r[y],m*y)),o[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class sv extends ss{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new pe){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const h=Math.cos(this.aRotation),d=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*h-m*d+this.aX,u=p*d+m*h+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class eD extends sv{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function GS(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,h,d){let p=(o-s)/u-(a-s)/(u+h)+(a-o)/h,m=(a-o)/h-(l-o)/(h+d)+(l-a)/d;p*=h,m*=h,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const gm=new U,Xx=new GS,Jx=new GS,Kx=new GS;class tD extends ss{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new U){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,h;this.closed||a>0?u=r[(a-1)%s]:(gm.subVectors(r[0],r[1]).add(r[0]),u=gm);const d=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?h=r[(a+2)%s]:(gm.subVectors(r[s-1],r[s-2]).add(r[s-1]),h=gm),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(u.distanceToSquared(d),m),A=Math.pow(d.distanceToSquared(p),m),x=Math.pow(p.distanceToSquared(h),m);A<1e-4&&(A=1),y<1e-4&&(y=A),x<1e-4&&(x=A),Xx.initNonuniformCatmullRom(u.x,d.x,p.x,h.x,y,A,x),Jx.initNonuniformCatmullRom(u.y,d.y,p.y,h.y,y,A,x),Kx.initNonuniformCatmullRom(u.z,d.z,p.z,h.z,y,A,x)}else this.curveType==="catmullrom"&&(Xx.initCatmullRom(u.x,d.x,p.x,h.x,this.tension),Jx.initCatmullRom(u.y,d.y,p.y,h.y,this.tension),Kx.initCatmullRom(u.z,d.z,p.z,h.z,this.tension));return i.set(Xx.calc(l),Jx.calc(l),Kx.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new U().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function GT(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function C5(n,e){const t=1-n;return t*t*e}function T5(n,e){return 2*(1-n)*n*e}function b5(n,e){return n*n*e}function $f(n,e,t,i){return C5(n,e)+T5(n,t)+b5(n,i)}function R5(n,e){const t=1-n;return t*t*t*e}function P5(n,e){const t=1-n;return 3*t*t*n*e}function B5(n,e){return 3*(1-n)*n*n*e}function I5(n,e){return n*n*n*e}function eh(n,e,t,i,r){return R5(n,e)+P5(n,t)+B5(n,i)+I5(n,r)}class VS extends ss{constructor(e=new pe,t=new pe,i=new pe,r=new pe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new pe){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(eh(e,r.x,s.x,o.x,a.x),eh(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class nD extends ss{constructor(e=new U,t=new U,i=new U,r=new U){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new U){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(eh(e,r.x,s.x,o.x,a.x),eh(e,r.y,s.y,o.y,a.y),eh(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class WS extends ss{constructor(e=new pe,t=new pe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new pe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iD extends ss{constructor(e=new U,t=new U){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new U){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new U){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jS extends ss{constructor(e=new pe,t=new pe,i=new pe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new pe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set($f(e,r.x,s.x,o.x),$f(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XS extends ss{constructor(e=new U,t=new U,i=new U){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new U){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set($f(e,r.x,s.x,o.x),$f(e,r.y,s.y,o.y),$f(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class JS extends ss{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new pe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],h=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(GT(a,l.x,u.x,h.x,d.x),GT(a,l.y,u.y,h.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new pe().fromArray(r))}return this}}var l0=Object.freeze({__proto__:null,ArcCurve:eD,CatmullRomCurve3:tD,CubicBezierCurve:VS,CubicBezierCurve3:nD,EllipseCurve:sv,LineCurve:WS,LineCurve3:iD,QuadraticBezierCurve:jS,QuadraticBezierCurve3:XS,SplineCurve:JS});class rD extends ss{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new l0[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const h=l[u];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new l0[r.type]().fromJSON(r))}return this}}class Nh extends rD{constructor(e){super(),this.type="Path",this.currentPoint=new pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new WS(this.currentPoint.clone(),new pe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new jS(this.currentPoint.clone(),new pe(e,t),new pe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new VS(this.currentPoint.clone(),new pe(e,t),new pe(i,r),new pe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new JS(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const u=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+u,t+h,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const u=new sv(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const h=u.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class cd extends wt{constructor(e=[new pe(0,-.5),new pe(.5,0),new pe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=_n(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],h=1/t,d=new U,p=new pe,m=new U,y=new U,A=new U;let x=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,A.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(A.x,A.y,A.z);break;default:x=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,m.x=g*1,m.y=-x,m.z=g*0,y.copy(m),m.x+=A.x,m.y+=A.y,m.z+=A.z,m.normalize(),l.push(m.x,m.y,m.z),A.copy(y)}for(let _=0;_<=t;_++){const M=i+_*h*r,w=Math.sin(M),P=Math.cos(M);for(let b=0;b<=e.length-1;b++){d.x=e[b].x*w,d.y=e[b].y,d.z=e[b].x*P,o.push(d.x,d.y,d.z),p.x=_/t,p.y=b/(e.length-1),a.push(p.x,p.y);const I=l[3*b+0]*w,D=l[3*b+1],R=l[3*b+0]*P;u.push(I,D,R)}}for(let _=0;_<t;_++)for(let M=0;M<e.length-1;M++){const w=M+_*e.length,P=w,b=w+e.length,I=w+e.length+1,D=w+1;s.push(P,b,D),s.push(I,D,b)}this.setIndex(s),this.setAttribute("position",new tt(o,3)),this.setAttribute("uv",new tt(a,2)),this.setAttribute("normal",new tt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cd(e.points,e.segments,e.phiStart,e.phiLength)}}class ov extends cd{constructor(e=1,t=1,i=4,r=8){const s=new Nh;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new ov(e.radius,e.length,e.capSegments,e.radialSegments)}}class av extends wt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new U,h=new pe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,p=3;d<=t;d++,p+=3){const m=i+d/t*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),h.x=(o[p]/e+1)/2,h.y=(o[p+1]/e+1)/2,l.push(h.x,h.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new tt(o,3)),this.setAttribute("normal",new tt(a,3)),this.setAttribute("uv",new tt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new av(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Pu extends wt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const h=[],d=[],p=[],m=[];let y=0;const A=[],x=i/2;let g=0;_(),o===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(h),this.setAttribute("position",new tt(d,3)),this.setAttribute("normal",new tt(p,3)),this.setAttribute("uv",new tt(m,2));function _(){const w=new U,P=new U;let b=0;const I=(t-e)/i;for(let D=0;D<=s;D++){const R=[],T=D/s,N=T*(t-e)+e;for(let Q=0;Q<=r;Q++){const W=Q/r,K=W*l+a,Y=Math.sin(K),Z=Math.cos(K);P.x=N*Y,P.y=-T*i+x,P.z=N*Z,d.push(P.x,P.y,P.z),w.set(Y,I,Z).normalize(),p.push(w.x,w.y,w.z),m.push(W,1-T),R.push(y++)}A.push(R)}for(let D=0;D<r;D++)for(let R=0;R<s;R++){const T=A[R][D],N=A[R+1][D],Q=A[R+1][D+1],W=A[R][D+1];h.push(T,N,W),h.push(N,Q,W),b+=6}u.addGroup(g,b,0),g+=b}function M(w){const P=y,b=new pe,I=new U;let D=0;const R=w===!0?e:t,T=w===!0?1:-1;for(let Q=1;Q<=r;Q++)d.push(0,x*T,0),p.push(0,T,0),m.push(.5,.5),y++;const N=y;for(let Q=0;Q<=r;Q++){const K=Q/r*l+a,Y=Math.cos(K),Z=Math.sin(K);I.x=R*Z,I.y=x*T,I.z=R*Y,d.push(I.x,I.y,I.z),p.push(0,T,0),b.x=Y*.5+.5,b.y=Z*.5*T+.5,m.push(b.x,b.y),y++}for(let Q=0;Q<r;Q++){const W=P+Q,K=N+Q;w===!0?h.push(K,K+1,W):h.push(K+1,K,W),D+=3}u.addGroup(g,D,w===!0?1:2),g+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class lv extends Pu{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new lv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class da extends wt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),u(i),h(),this.setAttribute("position",new tt(s,3)),this.setAttribute("normal",new tt(s.slice(),3)),this.setAttribute("uv",new tt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const M=new U,w=new U,P=new U;for(let b=0;b<t.length;b+=3)m(t[b+0],M),m(t[b+1],w),m(t[b+2],P),l(M,w,P,_)}function l(_,M,w,P){const b=P+1,I=[];for(let D=0;D<=b;D++){I[D]=[];const R=_.clone().lerp(w,D/b),T=M.clone().lerp(w,D/b),N=b-D;for(let Q=0;Q<=N;Q++)Q===0&&D===b?I[D][Q]=R:I[D][Q]=R.clone().lerp(T,Q/N)}for(let D=0;D<b;D++)for(let R=0;R<2*(b-D)-1;R++){const T=Math.floor(R/2);R%2===0?(p(I[D][T+1]),p(I[D+1][T]),p(I[D][T])):(p(I[D][T+1]),p(I[D+1][T+1]),p(I[D+1][T]))}}function u(_){const M=new U;for(let w=0;w<s.length;w+=3)M.x=s[w+0],M.y=s[w+1],M.z=s[w+2],M.normalize().multiplyScalar(_),s[w+0]=M.x,s[w+1]=M.y,s[w+2]=M.z}function h(){const _=new U;for(let M=0;M<s.length;M+=3){_.x=s[M+0],_.y=s[M+1],_.z=s[M+2];const w=x(_)/2/Math.PI+.5,P=g(_)/Math.PI+.5;o.push(w,1-P)}y(),d()}function d(){for(let _=0;_<o.length;_+=6){const M=o[_+0],w=o[_+2],P=o[_+4],b=Math.max(M,w,P),I=Math.min(M,w,P);b>.9&&I<.1&&(M<.2&&(o[_+0]+=1),w<.2&&(o[_+2]+=1),P<.2&&(o[_+4]+=1))}}function p(_){s.push(_.x,_.y,_.z)}function m(_,M){const w=_*3;M.x=e[w+0],M.y=e[w+1],M.z=e[w+2]}function y(){const _=new U,M=new U,w=new U,P=new U,b=new pe,I=new pe,D=new pe;for(let R=0,T=0;R<s.length;R+=9,T+=6){_.set(s[R+0],s[R+1],s[R+2]),M.set(s[R+3],s[R+4],s[R+5]),w.set(s[R+6],s[R+7],s[R+8]),b.set(o[T+0],o[T+1]),I.set(o[T+2],o[T+3]),D.set(o[T+4],o[T+5]),P.copy(_).add(M).add(w).divideScalar(3);const N=x(P);A(b,T+0,_,N),A(I,T+2,M,N),A(D,T+4,w,N)}}function A(_,M,w,P){P<0&&_.x===1&&(o[M]=_.x-1),w.x===0&&w.z===0&&(o[M]=P/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new da(e.vertices,e.indices,e.radius,e.details)}}class cv extends da{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new cv(e.radius,e.detail)}}const vm=new U,ym=new U,Yx=new U,xm=new qi;class sD extends wt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(dl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],h=["a","b","c"],d=new Array(3),p={},m=[];for(let y=0;y<l;y+=3){o?(u[0]=o.getX(y),u[1]=o.getX(y+1),u[2]=o.getX(y+2)):(u[0]=y,u[1]=y+1,u[2]=y+2);const{a:A,b:x,c:g}=xm;if(A.fromBufferAttribute(a,u[0]),x.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),xm.getNormal(Yx),d[0]=`${Math.round(A.x*r)},${Math.round(A.y*r)},${Math.round(A.z*r)}`,d[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,d[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let _=0;_<3;_++){const M=(_+1)%3,w=d[_],P=d[M],b=xm[h[_]],I=xm[h[M]],D=`${w}_${P}`,R=`${P}_${w}`;R in p&&p[R]?(Yx.dot(p[R].normal)<=s&&(m.push(b.x,b.y,b.z),m.push(I.x,I.y,I.z)),p[R]=null):D in p||(p[D]={index0:u[_],index1:u[M],normal:Yx.clone()})}}for(const y in p)if(p[y]){const{index0:A,index1:x}=p[y];vm.fromBufferAttribute(a,A),ym.fromBufferAttribute(a,x),m.push(vm.x,vm.y,vm.z),m.push(ym.x,ym.y,ym.z)}this.setAttribute("position",new tt(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ml extends Nh{constructor(e){super(e),this.uuid=ir(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Nh().fromJSON(r))}return this}}const D5={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=oD(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,h,d,p,m;if(i&&(s=U5(n,e,s,t)),n.length>80*t){a=u=n[0],l=h=n[1];for(let y=t;y<r;y+=t)d=n[y],p=n[y+1],d<a&&(a=d),p<l&&(l=p),d>u&&(u=d),p>h&&(h=p);m=Math.max(u-a,h-l),m=m!==0?32767/m:0}return Fh(s,o,t,a,l,m,0),o}};function oD(n,e,t,i,r){let s,o;if(r===Y5(n,e,t,i)>0)for(s=e;s<t;s+=i)o=VT(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=VT(s,n[s],n[s+1],o);return o&&uv(o,o.next)&&(Uh(o),o=o.next),o}function Cl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(uv(t,t.next)||hn(t.prev,t,t.next)===0)){if(Uh(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Fh(n,e,t,i,r,s,o){if(!n)return;!o&&s&&V5(n,i,r,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?N5(n,i,r,s):L5(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),Uh(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=F5(Cl(n),e,t),Fh(n,e,t,i,r,s,2)):o===2&&O5(n,e,t,i,r,s):Fh(Cl(n),e,t,i,r,s,1);break}}}function L5(n){const e=n.prev,t=n,i=n.next;if(hn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,h=r<s?r<o?r:o:s<o?s:o,d=a<l?a<u?a:u:l<u?l:u,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let y=i.next;for(;y!==e;){if(y.x>=h&&y.x<=p&&y.y>=d&&y.y<=m&&zc(r,a,s,l,o,u,y.x,y.y)&&hn(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function N5(n,e,t,i){const r=n.prev,s=n,o=n.next;if(hn(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,h=r.y,d=s.y,p=o.y,m=a<l?a<u?a:u:l<u?l:u,y=h<d?h<p?h:p:d<p?d:p,A=a>l?a>u?a:u:l>u?l:u,x=h>d?h>p?h:p:d>p?d:p,g=L1(m,y,e,t,i),_=L1(A,x,e,t,i);let M=n.prevZ,w=n.nextZ;for(;M&&M.z>=g&&w&&w.z<=_;){if(M.x>=m&&M.x<=A&&M.y>=y&&M.y<=x&&M!==r&&M!==o&&zc(a,h,l,d,u,p,M.x,M.y)&&hn(M.prev,M,M.next)>=0||(M=M.prevZ,w.x>=m&&w.x<=A&&w.y>=y&&w.y<=x&&w!==r&&w!==o&&zc(a,h,l,d,u,p,w.x,w.y)&&hn(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;M&&M.z>=g;){if(M.x>=m&&M.x<=A&&M.y>=y&&M.y<=x&&M!==r&&M!==o&&zc(a,h,l,d,u,p,M.x,M.y)&&hn(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;w&&w.z<=_;){if(w.x>=m&&w.x<=A&&w.y>=y&&w.y<=x&&w!==r&&w!==o&&zc(a,h,l,d,u,p,w.x,w.y)&&hn(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function F5(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!uv(r,s)&&aD(r,i,i.next,s)&&Oh(r,s)&&Oh(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Uh(i),Uh(i.next),i=n=s),i=i.next}while(i!==n);return Cl(i)}function O5(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&X5(o,a)){let l=lD(o,a);o=Cl(o,o.next),l=Cl(l,l.next),Fh(o,e,t,i,r,s,0),Fh(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function U5(n,e,t,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=oD(n,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(j5(u));for(r.sort(k5),s=0;s<r.length;s++)t=H5(r[s],t);return t}function k5(n,e){return n.x-e.x}function H5(n,e){const t=z5(n,e);if(!t)return e;const i=lD(t,n);return Cl(i,i.next),Cl(t,t.next)}function z5(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let h=1/0,d;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&zc(o<u?s:i,o,l,u,o<u?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Oh(t,n)&&(d<h||d===h&&(t.x>r.x||t.x===r.x&&G5(r,t)))&&(r=t,h=d)),t=t.next;while(t!==a);return r}function G5(n,e){return hn(n.prev,n,e.prev)<0&&hn(e.next,n,n.next)<0}function V5(n,e,t,i){let r=n;do r.z===0&&(r.z=L1(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,W5(r)}function W5(n){let e,t,i,r,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(o>1);return n}function L1(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function j5(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function zc(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function X5(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!J5(n,e)&&(Oh(n,e)&&Oh(e,n)&&K5(n,e)&&(hn(n.prev,n,e.prev)||hn(n,e.prev,e))||uv(n,e)&&hn(n.prev,n,n.next)>0&&hn(e.prev,e,e.next)>0)}function hn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function uv(n,e){return n.x===e.x&&n.y===e.y}function aD(n,e,t,i){const r=Am(hn(n,e,t)),s=Am(hn(n,e,i)),o=Am(hn(t,i,n)),a=Am(hn(t,i,e));return!!(r!==s&&o!==a||r===0&&_m(n,t,e)||s===0&&_m(n,i,e)||o===0&&_m(t,n,i)||a===0&&_m(t,e,i))}function _m(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Am(n){return n>0?1:n<0?-1:0}function J5(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&aD(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Oh(n,e){return hn(n.prev,n,n.next)<0?hn(n,e,n.next)>=0&&hn(n,n.prev,e)>=0:hn(n,e,n.prev)<0||hn(n,n.next,e)<0}function K5(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function lD(n,e){const t=new N1(n.i,n.x,n.y),i=new N1(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function VT(n,e,t,i){const r=new N1(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Uh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function N1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Y5(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class ws{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ws.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];WT(e),jT(i,e);let o=e.length;t.forEach(WT);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,jT(i,t[l]);const a=D5.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function WT(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function jT(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class fv extends wt{constructor(e=new ml([new pe(.5,.5),new pe(-.5,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new tt(r,3)),this.setAttribute("uv",new tt(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,h=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:m-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:Q5;let M,w=!1,P,b,I,D;g&&(M=g.getSpacedPoints(h),w=!0,p=!1,P=g.computeFrenetFrames(h,!1),b=new U,I=new U,D=new U),p||(x=0,m=0,y=0,A=0);const R=a.extractPoints(u);let T=R.shape;const N=R.holes;if(!ws.isClockWise(T)){T=T.reverse();for(let O=0,ye=N.length;O<ye;O++){const Me=N[O];ws.isClockWise(Me)&&(N[O]=Me.reverse())}}const W=ws.triangulateShape(T,N),K=T;for(let O=0,ye=N.length;O<ye;O++){const Me=N[O];T=T.concat(Me)}function Y(O,ye,Me){return ye||console.error("THREE.ExtrudeGeometry: vec does not exist"),O.clone().addScaledVector(ye,Me)}const Z=T.length,z=W.length;function B(O,ye,Me){let Ie,he,Ye;const Le=O.x-ye.x,Ge=O.y-ye.y,H=Me.x-O.x,L=Me.y-O.y,se=Le*Le+Ge*Ge,xe=Le*L-Ge*H;if(Math.abs(xe)>Number.EPSILON){const _e=Math.sqrt(se),Ae=Math.sqrt(H*H+L*L),$e=ye.x-Ge/_e,Pe=ye.y+Le/_e,We=Me.x-L/Ae,vt=Me.y+H/Ae,Ce=((We-$e)*L-(vt-Pe)*H)/(Le*L-Ge*H);Ie=$e+Le*Ce-O.x,he=Pe+Ge*Ce-O.y;const ze=Ie*Ie+he*he;if(ze<=2)return new pe(Ie,he);Ye=Math.sqrt(ze/2)}else{let _e=!1;Le>Number.EPSILON?H>Number.EPSILON&&(_e=!0):Le<-Number.EPSILON?H<-Number.EPSILON&&(_e=!0):Math.sign(Ge)===Math.sign(L)&&(_e=!0),_e?(Ie=-Ge,he=Le,Ye=Math.sqrt(se)):(Ie=Le,he=Ge,Ye=Math.sqrt(se/2))}return new pe(Ie/Ye,he/Ye)}const G=[];for(let O=0,ye=K.length,Me=ye-1,Ie=O+1;O<ye;O++,Me++,Ie++)Me===ye&&(Me=0),Ie===ye&&(Ie=0),G[O]=B(K[O],K[Me],K[Ie]);const V=[];let q,ue=G.concat();for(let O=0,ye=N.length;O<ye;O++){const Me=N[O];q=[];for(let Ie=0,he=Me.length,Ye=he-1,Le=Ie+1;Ie<he;Ie++,Ye++,Le++)Ye===he&&(Ye=0),Le===he&&(Le=0),q[Ie]=B(Me[Ie],Me[Ye],Me[Le]);V.push(q),ue=ue.concat(q)}for(let O=0;O<x;O++){const ye=O/x,Me=m*Math.cos(ye*Math.PI/2),Ie=y*Math.sin(ye*Math.PI/2)+A;for(let he=0,Ye=K.length;he<Ye;he++){const Le=Y(K[he],G[he],Ie);Ee(Le.x,Le.y,-Me)}for(let he=0,Ye=N.length;he<Ye;he++){const Le=N[he];q=V[he];for(let Ge=0,H=Le.length;Ge<H;Ge++){const L=Y(Le[Ge],q[Ge],Ie);Ee(L.x,L.y,-Me)}}}const be=y+A;for(let O=0;O<Z;O++){const ye=p?Y(T[O],ue[O],be):T[O];w?(I.copy(P.normals[0]).multiplyScalar(ye.x),b.copy(P.binormals[0]).multiplyScalar(ye.y),D.copy(M[0]).add(I).add(b),Ee(D.x,D.y,D.z)):Ee(ye.x,ye.y,0)}for(let O=1;O<=h;O++)for(let ye=0;ye<Z;ye++){const Me=p?Y(T[ye],ue[ye],be):T[ye];w?(I.copy(P.normals[O]).multiplyScalar(Me.x),b.copy(P.binormals[O]).multiplyScalar(Me.y),D.copy(M[O]).add(I).add(b),Ee(D.x,D.y,D.z)):Ee(Me.x,Me.y,d/h*O)}for(let O=x-1;O>=0;O--){const ye=O/x,Me=m*Math.cos(ye*Math.PI/2),Ie=y*Math.sin(ye*Math.PI/2)+A;for(let he=0,Ye=K.length;he<Ye;he++){const Le=Y(K[he],G[he],Ie);Ee(Le.x,Le.y,d+Me)}for(let he=0,Ye=N.length;he<Ye;he++){const Le=N[he];q=V[he];for(let Ge=0,H=Le.length;Ge<H;Ge++){const L=Y(Le[Ge],q[Ge],Ie);w?Ee(L.x,L.y+M[h-1].y,M[h-1].x+Me):Ee(L.x,L.y,d+Me)}}}re(),me();function re(){const O=r.length/3;if(p){let ye=0,Me=Z*ye;for(let Ie=0;Ie<z;Ie++){const he=W[Ie];nt(he[2]+Me,he[1]+Me,he[0]+Me)}ye=h+x*2,Me=Z*ye;for(let Ie=0;Ie<z;Ie++){const he=W[Ie];nt(he[0]+Me,he[1]+Me,he[2]+Me)}}else{for(let ye=0;ye<z;ye++){const Me=W[ye];nt(Me[2],Me[1],Me[0])}for(let ye=0;ye<z;ye++){const Me=W[ye];nt(Me[0]+Z*h,Me[1]+Z*h,Me[2]+Z*h)}}i.addGroup(O,r.length/3-O,0)}function me(){const O=r.length/3;let ye=0;we(K,ye),ye+=K.length;for(let Me=0,Ie=N.length;Me<Ie;Me++){const he=N[Me];we(he,ye),ye+=he.length}i.addGroup(O,r.length/3-O,1)}function we(O,ye){let Me=O.length;for(;--Me>=0;){const Ie=Me;let he=Me-1;he<0&&(he=O.length-1);for(let Ye=0,Le=h+x*2;Ye<Le;Ye++){const Ge=Z*Ye,H=Z*(Ye+1),L=ye+Ie+Ge,se=ye+he+Ge,xe=ye+he+H,_e=ye+Ie+H;dt(L,se,xe,_e)}}}function Ee(O,ye,Me){l.push(O),l.push(ye),l.push(Me)}function nt(O,ye,Me){Ke(O),Ke(ye),Ke(Me);const Ie=r.length/3,he=_.generateTopUV(i,r,Ie-3,Ie-2,Ie-1);He(he[0]),He(he[1]),He(he[2])}function dt(O,ye,Me,Ie){Ke(O),Ke(ye),Ke(Ie),Ke(ye),Ke(Me),Ke(Ie);const he=r.length/3,Ye=_.generateSideWallUV(i,r,he-6,he-3,he-2,he-1);He(Ye[0]),He(Ye[1]),He(Ye[3]),He(Ye[1]),He(Ye[2]),He(Ye[3])}function Ke(O){r.push(l[O*3+0]),r.push(l[O*3+1]),r.push(l[O*3+2])}function He(O){s.push(O.x),s.push(O.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return Z5(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new l0[r.type]().fromJSON(r)),new fv(i,e.options)}}const Q5={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],h=e[r*3+1];return[new pe(s,o),new pe(a,l),new pe(u,h)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[i*3],h=e[i*3+1],d=e[i*3+2],p=e[r*3],m=e[r*3+1],y=e[r*3+2],A=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(a-h)<Math.abs(o-u)?[new pe(o,1-l),new pe(u,1-d),new pe(p,1-y),new pe(A,1-g)]:[new pe(a,1-l),new pe(h,1-d),new pe(m,1-y),new pe(x,1-g)]}};function Z5(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class hv extends da{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hv(e.radius,e.detail)}}class ud extends da{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ud(e.radius,e.detail)}}class dv extends wt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],h=[];let d=e;const p=(t-e)/r,m=new U,y=new pe;for(let A=0;A<=r;A++){for(let x=0;x<=i;x++){const g=s+x/i*o;m.x=d*Math.cos(g),m.y=d*Math.sin(g),l.push(m.x,m.y,m.z),u.push(0,0,1),y.x=(m.x/t+1)/2,y.y=(m.y/t+1)/2,h.push(y.x,y.y)}d+=p}for(let A=0;A<r;A++){const x=A*(i+1);for(let g=0;g<i;g++){const _=g+x,M=_,w=_+i+1,P=_+i+2,b=_+1;a.push(M,w,b),a.push(w,P,b)}}this.setIndex(a),this.setAttribute("position",new tt(l,3)),this.setAttribute("normal",new tt(u,3)),this.setAttribute("uv",new tt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class pv extends wt{constructor(e=new ml([new pe(0,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let h=0;h<e.length;h++)u(e[h]),this.addGroup(a,l,h),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new tt(r,3)),this.setAttribute("normal",new tt(s,3)),this.setAttribute("uv",new tt(o,2));function u(h){const d=r.length/3,p=h.extractPoints(t);let m=p.shape;const y=p.holes;ws.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,g=y.length;x<g;x++){const _=y[x];ws.isClockWise(_)===!0&&(y[x]=_.reverse())}const A=ws.triangulateShape(m,y);for(let x=0,g=y.length;x<g;x++){const _=y[x];m=m.concat(_)}for(let x=0,g=m.length;x<g;x++){const _=m[x];r.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let x=0,g=A.length;x<g;x++){const _=A[x],M=_[0]+d,w=_[1]+d,P=_[2]+d;i.push(M,w,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return q5(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new pv(i,e.curveSegments)}}function q5(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class fd extends wt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const h=[],d=new U,p=new U,m=[],y=[],A=[],x=[];for(let g=0;g<=i;g++){const _=[],M=g/i;let w=0;g===0&&o===0?w=.5/t:g===i&&l===Math.PI&&(w=-.5/t);for(let P=0;P<=t;P++){const b=P/t;d.x=-e*Math.cos(r+b*s)*Math.sin(o+M*a),d.y=e*Math.cos(o+M*a),d.z=e*Math.sin(r+b*s)*Math.sin(o+M*a),y.push(d.x,d.y,d.z),p.copy(d).normalize(),A.push(p.x,p.y,p.z),x.push(b+w,1-M),_.push(u++)}h.push(_)}for(let g=0;g<i;g++)for(let _=0;_<t;_++){const M=h[g][_+1],w=h[g][_],P=h[g+1][_],b=h[g+1][_+1];(g!==0||o>0)&&m.push(M,w,b),(g!==i-1||l<Math.PI)&&m.push(w,P,b)}this.setIndex(m),this.setAttribute("position",new tt(y,3)),this.setAttribute("normal",new tt(A,3)),this.setAttribute("uv",new tt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class mv extends da{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mv(e.radius,e.detail)}}class gv extends wt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],h=new U,d=new U,p=new U;for(let m=0;m<=i;m++)for(let y=0;y<=r;y++){const A=y/r*s,x=m/i*Math.PI*2;d.x=(e+t*Math.cos(x))*Math.cos(A),d.y=(e+t*Math.cos(x))*Math.sin(A),d.z=t*Math.sin(x),a.push(d.x,d.y,d.z),h.x=e*Math.cos(A),h.y=e*Math.sin(A),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),u.push(y/r),u.push(m/i)}for(let m=1;m<=i;m++)for(let y=1;y<=r;y++){const A=(r+1)*m+y-1,x=(r+1)*(m-1)+y-1,g=(r+1)*(m-1)+y,_=(r+1)*m+y;o.push(A,x,_),o.push(x,g,_)}this.setIndex(o),this.setAttribute("position",new tt(a,3)),this.setAttribute("normal",new tt(l,3)),this.setAttribute("uv",new tt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class vv extends wt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],h=[],d=new U,p=new U,m=new U,y=new U,A=new U,x=new U,g=new U;for(let M=0;M<=i;++M){const w=M/i*s*Math.PI*2;_(w,s,o,e,m),_(w+.01,s,o,e,y),x.subVectors(y,m),g.addVectors(y,m),A.crossVectors(x,g),g.crossVectors(A,x),A.normalize(),g.normalize();for(let P=0;P<=r;++P){const b=P/r*Math.PI*2,I=-t*Math.cos(b),D=t*Math.sin(b);d.x=m.x+(I*g.x+D*A.x),d.y=m.y+(I*g.y+D*A.y),d.z=m.z+(I*g.z+D*A.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),u.push(p.x,p.y,p.z),h.push(M/i),h.push(P/r)}}for(let M=1;M<=i;M++)for(let w=1;w<=r;w++){const P=(r+1)*(M-1)+(w-1),b=(r+1)*M+(w-1),I=(r+1)*M+w,D=(r+1)*(M-1)+w;a.push(P,b,D),a.push(b,I,D)}this.setIndex(a),this.setAttribute("position",new tt(l,3)),this.setAttribute("normal",new tt(u,3)),this.setAttribute("uv",new tt(h,2));function _(M,w,P,b,I){const D=Math.cos(M),R=Math.sin(M),T=P/w*M,N=Math.cos(T);I.x=b*(2+N)*.5*D,I.y=b*(2+N)*R*.5,I.z=b*Math.sin(T)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class yv extends wt{constructor(e=new XS(new U(-1,-1,0),new U(-1,1,0),new U(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new U,l=new U,u=new pe;let h=new U;const d=[],p=[],m=[],y=[];A(),this.setIndex(y),this.setAttribute("position",new tt(d,3)),this.setAttribute("normal",new tt(p,3)),this.setAttribute("uv",new tt(m,2));function A(){for(let M=0;M<t;M++)x(M);x(s===!1?t:0),_(),g()}function x(M){h=e.getPointAt(M/t,h);const w=o.normals[M],P=o.binormals[M];for(let b=0;b<=r;b++){const I=b/r*Math.PI*2,D=Math.sin(I),R=-Math.cos(I);l.x=R*w.x+D*P.x,l.y=R*w.y+D*P.y,l.z=R*w.z+D*P.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=h.x+i*l.x,a.y=h.y+i*l.y,a.z=h.z+i*l.z,d.push(a.x,a.y,a.z)}}function g(){for(let M=1;M<=t;M++)for(let w=1;w<=r;w++){const P=(r+1)*(M-1)+(w-1),b=(r+1)*M+(w-1),I=(r+1)*M+w,D=(r+1)*(M-1)+w;y.push(P,b,D),y.push(b,I,D)}}function _(){for(let M=0;M<=t;M++)for(let w=0;w<=r;w++)u.x=M/t,u.y=w/r,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new yv(new l0[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class cD extends wt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new U,s=new U;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,h=l.length;u<h;++u){const d=l[u],p=d.start,m=d.count;for(let y=p,A=p+m;y<A;y+=3)for(let x=0;x<3;x++){const g=a.getX(y+x),_=a.getX(y+(x+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,_),XT(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const h=3*a+u,d=3*a+(u+1)%3;r.fromBufferAttribute(o,h),s.fromBufferAttribute(o,d),XT(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new tt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function XT(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var JT=Object.freeze({__proto__:null,BoxGeometry:Ll,CapsuleGeometry:ov,CircleGeometry:av,ConeGeometry:lv,CylinderGeometry:Pu,DodecahedronGeometry:cv,EdgesGeometry:sD,ExtrudeGeometry:fv,IcosahedronGeometry:hv,LatheGeometry:cd,OctahedronGeometry:ud,PlaneGeometry:bu,PolyhedronGeometry:da,RingGeometry:dv,ShapeGeometry:pv,SphereGeometry:fd,TetrahedronGeometry:mv,TorusGeometry:gv,TorusKnotGeometry:vv,TubeGeometry:yv,WireframeGeometry:cD});class uD extends In{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Oe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class fD extends ns{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class hd extends In{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Oe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new sr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Lr extends hd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return _n(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Oe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Oe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Oe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class hD extends In{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Oe(16777215),this.specular=new Oe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new sr,this.combine=td,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dD extends In{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Oe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class pD extends In{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class mD extends In{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new sr,this.combine=td,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class gD extends In{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Oe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vD extends _i{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function sl(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function yD(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function xD(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function F1(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function KS(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function $5(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],h=u.getValueSize(),d=[],p=[];for(let m=0;m<u.times.length;++m){const y=u.times[m]*r;if(!(y<t||y>=i)){d.push(u.times[m]);for(let A=0;A<h;++A)p.push(u.values[m*h+A])}}d.length!==0&&(u.times=sl(d,u.times.constructor),u.values=sl(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function e9(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let h=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const y=a.times.length-1;let A;if(s<=a.times[0]){const g=h,_=d-h;A=a.values.slice(g,_)}else if(s>=a.times[y]){const g=y*d+h,_=g+d-h;A=a.values.slice(g,_)}else{const g=a.createInterpolant(),_=h,M=d-h;g.evaluate(s),A=g.resultBuffer.slice(_,M)}l==="quaternion"&&new Jn().fromArray(A).normalize().conjugate().toArray(A);const x=u.times.length;for(let g=0;g<x;++g){const _=g*m+p;if(l==="quaternion")Jn.multiplyQuaternionsFlat(u.values,_,A,0,u.values,_);else{const M=m-p*2;for(let w=0;w<M;++w)u.values[_+w]-=A[w]}}}return n.blendMode=MS,n}const t9={convertArray:sl,isTypedArray:yD,getKeyframeOrder:xD,sortedArray:F1,flattenJSON:KS,subclip:$5,makeClipAdditive:e9};class Bu{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class _D extends Bu{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:nl,endingEnd:nl}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case il:s=e,a=2*t-i;break;case bh:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case il:o=e,l=2*i-t;break;case bh:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const u=(i-t)*.5,h=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=this._offsetPrev,d=this._offsetNext,p=this._weightPrev,m=this._weightNext,y=(i-t)/(r-t),A=y*y,x=A*y,g=-p*x+2*p*A-p*y,_=(1+p)*x+(-1.5-2*p)*A+(-.5+p)*y+1,M=(-1-m)*x+(1.5+m)*A+.5*y,w=m*x-m*A;for(let P=0;P!==a;++P)s[P]=g*o[h+P]+_*o[u+P]+M*o[l+P]+w*o[d+P];return s}}class YS extends Bu{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,h=(i-t)/(r-t),d=1-h;for(let p=0;p!==a;++p)s[p]=o[u+p]*d+o[l+p]*h;return s}}class AD extends Bu{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class os{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=sl(t,this.TimeBufferType),this.values=sl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:sl(e.times,Array),values:sl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new AD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new YS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new _D(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case du:t=this.InterpolantFactoryMethodDiscrete;break;case pu:t=this.InterpolantFactoryMethodLinear;break;case qm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return du;case this.InterpolantFactoryMethodLinear:return pu;case this.InterpolantFactoryMethodSmooth:return qm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&yD(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===qm,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],h=e[a+1];if(u!==h&&(a!==1||u!==e[0]))if(r)l=!0;else{const d=a*i,p=d-i,m=d+i;for(let y=0;y!==i;++y){const A=t[d+y];if(A!==t[p+y]||A!==t[m+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}os.prototype.TimeBufferType=Float32Array;os.prototype.ValueBufferType=Float32Array;os.prototype.DefaultInterpolation=pu;class Nl extends os{constructor(e,t,i){super(e,t,i)}}Nl.prototype.ValueTypeName="bool";Nl.prototype.ValueBufferType=Array;Nl.prototype.DefaultInterpolation=du;Nl.prototype.InterpolantFactoryMethodLinear=void 0;Nl.prototype.InterpolantFactoryMethodSmooth=void 0;class QS extends os{}QS.prototype.ValueTypeName="color";class Tl extends os{}Tl.prototype.ValueTypeName="number";class SD extends Bu{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let u=e*a;for(let h=u+a;u!==h;u+=4)Jn.slerpFlat(s,0,o,u-a,o,u,l);return s}}class bl extends os{InterpolantFactoryMethodLinear(e){return new SD(this.times,this.values,this.getValueSize(),e)}}bl.prototype.ValueTypeName="quaternion";bl.prototype.InterpolantFactoryMethodSmooth=void 0;class Fl extends os{constructor(e,t,i){super(e,t,i)}}Fl.prototype.ValueTypeName="string";Fl.prototype.ValueBufferType=Array;Fl.prototype.DefaultInterpolation=du;Fl.prototype.InterpolantFactoryMethodLinear=void 0;Fl.prototype.InterpolantFactoryMethodSmooth=void 0;class Rl extends os{}Rl.prototype.ValueTypeName="vector";class vu{constructor(e="",t=-1,i=[],r=Q0){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ir(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(i9(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(os.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const h=xD(l);l=F1(l,1,h),u=F1(u,1,h),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Tl(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],h=u.name.match(s);if(h&&h.length>1){const d=h[1];let p=r[d];p||(r[d]=p=[]),p.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,p,m,y,A){if(m.length!==0){const x=[],g=[];KS(m,x,g,y),x.length!==0&&A.push(new d(p,x,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const p=u[d].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let A=0;A<p[y].morphTargets.length;A++)m[p[y].morphTargets[A]]=-1;for(const A in m){const x=[],g=[];for(let _=0;_!==p[y].morphTargets.length;++_){const M=p[y];x.push(M.time),g.push(M.morphTarget===A?1:0)}r.push(new Tl(".morphTargetInfluence["+A+"]",x,g))}l=m.length*o}else{const m=".bones["+t[d].name+"]";i(Rl,m+".position",p,"pos",r),i(bl,m+".quaternion",p,"rot",r),i(Rl,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function n9(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Tl;case"vector":case"vector2":case"vector3":case"vector4":return Rl;case"color":return QS;case"quaternion":return bl;case"bool":case"boolean":return Nl;case"string":return Fl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function i9(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=n9(n.type);if(n.times===void 0){const t=[],i=[];KS(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ys={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class ZS{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(h){a++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,a),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return l?l(h):h},this.setURLModifier=function(h){return l=h,this},this.addHandler=function(h,d){return u.push(h,d),this},this.removeHandler=function(h){const d=u.indexOf(h);return d!==-1&&u.splice(d,2),this},this.getHandler=function(h){for(let d=0,p=u.length;d<p;d+=2){const m=u[d],y=u[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return y}return null}}}const Gc=new ZS;class Ai{constructor(e){this.manager=e!==void 0?e:Gc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ai.DEFAULT_MATERIAL_NAME="__DEFAULT";const ks={};class r9 extends Error{constructor(e,t){super(e),this.response=t}}class or extends Ai{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ys.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ks[e]!==void 0){ks[e].push({onLoad:t,onProgress:i,onError:r});return}ks[e]=[],ks[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const h=ks[e],d=u.body.getReader(),p=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),m=p?parseInt(p):0,y=m!==0;let A=0;const x=new ReadableStream({start(g){_();function _(){d.read().then(({done:M,value:w})=>{if(M)g.close();else{A+=w.byteLength;const P=new ProgressEvent("progress",{lengthComputable:y,loaded:A,total:m});for(let b=0,I=h.length;b<I;b++){const D=h[b];D.onProgress&&D.onProgress(P)}g.enqueue(w),_()}},M=>{g.error(M)})}}});return new Response(x)}else throw new r9(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return u.json();default:if(a===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),p=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(y=>m.decode(y))}}}).then(u=>{Ys.add(e,u);const h=ks[e];delete ks[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onLoad&&m.onLoad(u)}}).catch(u=>{const h=ks[e];if(h===void 0)throw this.manager.itemError(e),u;delete ks[e];for(let d=0,p=h.length;d<p;d++){const m=h[d];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class s9 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new or(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=vu.parse(e[i]);t.push(r)}return t}}class o9 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new rv,l=new or(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function h(d){l.load(e[d],function(p){const m=s.parse(p,!0);o[d]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=An),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let d=0,p=e.length;d<p;++d)h(d);else l.load(e,function(d){const p=s.parse(d,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let y=0;y<m;y++){o[y]={mipmaps:[]};for(let A=0;A<p.mipmapCount;A++)o[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+A]),o[y].format=p.format,o[y].width=p.width,o[y].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=An),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class kh extends Ai{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ys.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Lh("img");function l(){h(),Ys.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(d){h(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function h(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class a9 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=new sd;s.colorSpace=Mr;const o=new kh(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(h){s.images[u]=h,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class l9 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ms,a=new or(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(h){if(r!==void 0)r(h);else{console.error(h);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:er,o.wrapT=u.wrapT!==void 0?u.wrapT:er,o.magFilter=u.magFilter!==void 0?u.magFilter:An,o.minFilter=u.minFilter!==void 0?u.minFilter:An,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Rr),u.mipmapCount===1&&(o.minFilter=An),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},i,r),o}}class MD extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=new on,o=new kh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class pa extends Nt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Oe(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class wD extends pa{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Nt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Oe(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Qx=new ft,KT=new U,YT=new U;class qS{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pe(512,512),this.map=null,this.mapPass=null,this.matrix=new ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new od,this._frameExtents=new pe(1,1),this._viewportCount=1,this._viewports=[new Wt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;KT.setFromMatrixPosition(e.matrixWorld),t.position.copy(KT),YT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(YT),t.updateMatrixWorld(),Qx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Qx),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Qx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class c9 extends qS{constructor(){super(new rn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=mu*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class $S extends pa{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Nt.DEFAULT_UP),this.updateMatrix(),this.target=new Nt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new c9}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const QT=new ft,Sf=new U,Zx=new U;class u9 extends qS{constructor(){super(new rn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pe(4,2),this._viewportCount=6,this._viewports=[new Wt(2,1,1,1),new Wt(0,1,1,1),new Wt(3,1,1,1),new Wt(1,1,1,1),new Wt(3,0,1,1),new Wt(1,0,1,1)],this._cubeDirections=[new U(1,0,0),new U(-1,0,0),new U(0,0,1),new U(0,0,-1),new U(0,1,0),new U(0,-1,0)],this._cubeUps=[new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,1,0),new U(0,0,1),new U(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Sf.setFromMatrixPosition(e.matrixWorld),i.position.copy(Sf),Zx.copy(i.position),Zx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Zx),i.updateMatrixWorld(),r.makeTranslation(-Sf.x,-Sf.y,-Sf.z),QT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(QT)}}class eM extends pa{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new u9}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class f9 extends qS{constructor(){super(new Pr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class tM extends pa{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Nt.DEFAULT_UP),this.updateMatrix(),this.target=new Nt,this.shadow=new f9}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ED extends pa{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class CD extends pa{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class TD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new U)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class bD extends pa{constructor(e=new TD,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class xv extends Ai{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new or(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=xv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Oe().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Oe().setHex(o.value);break;case"v2":r.uniforms[s].value=new pe().fromArray(o.value);break;case"v3":r.uniforms[s].value=new U().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Wt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Et().fromArray(o.value);break;case"m4":r.uniforms[s].value=new ft().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new pe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new pe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:uD,SpriteMaterial:OS,RawShaderMaterial:fD,ShaderMaterial:ns,PointsMaterial:iv,MeshPhysicalMaterial:Lr,MeshStandardMaterial:hd,MeshPhongMaterial:hD,MeshToonMaterial:dD,MeshNormalMaterial:pD,MeshLambertMaterial:mD,MeshDepthMaterial:NS,MeshDistanceMaterial:FS,MeshBasicMaterial:tr,MeshMatcapMaterial:gD,LineDashedMaterial:vD,LineBasicMaterial:_i,Material:In};return new t[e]}}class $o{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class RD extends wt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class PD extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new or(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,y){if(t[y]!==void 0)return t[y];const x=m.interleavedBuffers[y],g=s(m,x.buffer),_=kc(x.type,g),M=new ad(_,x.stride);return M.uuid=x.uuid,t[y]=M,M}function s(m,y){if(i[y]!==void 0)return i[y];const x=m.arrayBuffers[y],g=new Uint32Array(x).buffer;return i[y]=g,g}const o=e.isInstancedBufferGeometry?new RD:new wt,a=e.data.index;if(a!==void 0){const m=kc(a.type,a.array);o.setIndex(new Ut(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let A;if(y.isInterleavedBufferAttribute){const x=r(e.data,y.data);A=new oa(x,y.itemSize,y.offset,y.normalized)}else{const x=kc(y.type,y.array),g=y.isInstancedBufferAttribute?El:Ut;A=new g(x,y.itemSize,y.normalized)}y.name!==void 0&&(A.name=y.name),y.usage!==void 0&&A.setUsage(y.usage),o.setAttribute(m,A)}const u=e.data.morphAttributes;if(u)for(const m in u){const y=u[m],A=[];for(let x=0,g=y.length;x<g;x++){const _=y[x];let M;if(_.isInterleavedBufferAttribute){const w=r(e.data,_.data);M=new oa(w,_.itemSize,_.offset,_.normalized)}else{const w=kc(_.type,_.array);M=new Ut(w,_.itemSize,_.normalized)}_.name!==void 0&&(M.name=_.name),A.push(M)}o.morphAttributes[m]=A}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let m=0,y=d.length;m!==y;++m){const A=d[m];o.addGroup(A.start,A.count,A.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new U;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new ei(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class h9 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?$o.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new or(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const h=u.metadata;if(h===void 0||h.type===void 0||h.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?$o.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new or(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),h=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,h),this.bindLightTargets(u),t!==void 0){let d=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new ml().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new ld().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new PD;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in JT?a=JT[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new xv;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=vu.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(h)}else return l.data?{data:kc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new ZS(t);s=new kh(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,h=e.length;u<h;u++){const d=e[u],p=d.url;if(Array.isArray(p)){const m=[];for(let y=0,A=p.length;y<A;y++){const x=p[y],g=a(x);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Ms(g.data,g.width,g.height)))}r[d.uuid]=new rl(m)}else{const m=a(d.url);r[d.uuid]=new rl(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:kc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new kh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const h=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],y=await s(m);y!==null&&(y instanceof HTMLImageElement?h.push(y):h.push(new Ms(y.data,y.width,y.height)))}i[l.uuid]=new rl(h)}else{const h=await s(l.url);i[l.uuid]=new rl(h)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let h;Array.isArray(u)?(h=new sd,u.length===6&&(h.needsUpdate=!0)):(u&&u.data?h=new Ms:h=new on,u&&(h.needsUpdate=!0)),h.source=l,h.uuid=a.uuid,a.name!==void 0&&(h.name=a.name),a.mapping!==void 0&&(h.mapping=i(a.mapping,d9)),a.channel!==void 0&&(h.channel=a.channel),a.offset!==void 0&&h.offset.fromArray(a.offset),a.repeat!==void 0&&h.repeat.fromArray(a.repeat),a.center!==void 0&&h.center.fromArray(a.center),a.rotation!==void 0&&(h.rotation=a.rotation),a.wrap!==void 0&&(h.wrapS=i(a.wrap[0],ZT),h.wrapT=i(a.wrap[1],ZT)),a.format!==void 0&&(h.format=a.format),a.internalFormat!==void 0&&(h.internalFormat=a.internalFormat),a.type!==void 0&&(h.type=a.type),a.colorSpace!==void 0&&(h.colorSpace=a.colorSpace),a.minFilter!==void 0&&(h.minFilter=i(a.minFilter,qT)),a.magFilter!==void 0&&(h.magFilter=i(a.magFilter,qT)),a.anisotropy!==void 0&&(h.anisotropy=a.anisotropy),a.flipY!==void 0&&(h.flipY=a.flipY),a.generateMipmaps!==void 0&&(h.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(h.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(h.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(h.compareFunction=a.compareFunction),a.userData!==void 0&&(h.userData=a.userData),r[a.uuid]=h}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let y=0,A=p.length;y<A;y++){const x=p[y];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let h,d;switch(e.type){case"Scene":o=new s0,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Oe(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new tv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new ev(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new rn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Pr(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new ED(e.color,e.intensity);break;case"DirectionalLight":o=new tM(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new eM(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new CD(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new $S(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new wD(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new bD().fromJSON(e);break;case"SkinnedMesh":h=a(e.geometry),d=l(e.material),o=new US(h,d),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":h=a(e.geometry),d=l(e.material),o=new Cn(h,d);break;case"InstancedMesh":h=a(e.geometry),d=l(e.material);const p=e.count,m=e.instanceMatrix,y=e.instanceColor;o=new kS(h,d,p),o.instanceMatrix=new El(new Float32Array(m.array),16),y!==void 0&&(o.instanceColor=new El(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":h=a(e.geometry),d=l(e.material),o=new $I(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,d),o.geometry=h,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(A=>{const x=new vi;x.min.fromArray(A.boxMin),x.max.fromArray(A.boxMax);const g=new ei;return g.radius=A.sphereRadius,g.center.fromArray(A.sphereCenter),{boxInitialized:A.boxInitialized,box:x,sphereInitialized:A.sphereInitialized,sphere:g}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new qI;break;case"Line":o=new co(a(e.geometry),l(e.material));break;case"LineLoop":o=new HS(a(e.geometry),l(e.material));break;case"LineSegments":o=new rs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new zS(a(e.geometry),l(e.material));break;case"Sprite":o=new ZI(l(e.material));break;case"Group":o=new Ks;break;case"Bone":o=new nv;break;default:o=new Nt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const y=p[m];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const y=p[m],A=o.getObjectByProperty("uuid",y.object);A!==void 0&&o.addLevel(A,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Nt}})}}const d9={UVMapping:G0,CubeReflectionMapping:ao,CubeRefractionMapping:ra,EquirectangularReflectionMapping:Ch,EquirectangularRefractionMapping:Th,CubeUVReflectionMapping:Cu},ZT={RepeatWrapping:sa,ClampToEdgeWrapping:er,MirroredRepeatWrapping:fu},qT={NearestFilter:On,NearestMipmapNearestFilter:V0,NearestMipmapLinearFilter:tl,LinearFilter:An,LinearMipmapNearestFilter:tu,LinearMipmapLinearFilter:Rr};class BD extends Ai{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ys.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Ys.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Ys.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ys.add(e,l),s.manager.itemStart(e)}}let Sm;class nM{static getContext(){return Sm===void 0&&(Sm=new(window.AudioContext||window.webkitAudioContext)),Sm}static setContext(e){Sm=e}}class p9 extends Ai{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new or(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);nM.getContext().decodeAudioData(u,function(d){t(d)}).catch(a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const $T=new ft,eb=new ft,Da=new ft;class m9{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new rn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new rn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Da.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(dl*t.fov*.5)/t.zoom;let a,l;eb.elements[12]=-r,$T.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Da.elements[0]=2*t.near/(l-a),Da.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Da),a=-o*t.aspect-s,l=o*t.aspect-s,Da.elements[0]=2*t.near/(l-a),Da.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Da)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(eb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply($T)}}class iM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=tb(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=tb();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function tb(){return(typeof performance>"u"?Date:performance).now()}const La=new U,nb=new Jn,g9=new U,Na=new U;class v9 extends Nt{constructor(){super(),this.type="AudioListener",this.context=nM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new iM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(La,nb,g9),Na.set(0,0,-1).applyQuaternion(nb),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(La.x,r),t.positionY.linearRampToValueAtTime(La.y,r),t.positionZ.linearRampToValueAtTime(La.z,r),t.forwardX.linearRampToValueAtTime(Na.x,r),t.forwardY.linearRampToValueAtTime(Na.y,r),t.forwardZ.linearRampToValueAtTime(Na.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(La.x,La.y,La.z),t.setOrientation(Na.x,Na.y,Na.z,i.x,i.y,i.z)}}class ID extends Nt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Fa=new U,ib=new Jn,y9=new U,Oa=new U;class x9 extends ID{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Fa,ib,y9),Oa.set(0,0,1).applyQuaternion(ib);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Fa.x,i),t.positionY.linearRampToValueAtTime(Fa.y,i),t.positionZ.linearRampToValueAtTime(Fa.z,i),t.orientationX.linearRampToValueAtTime(Oa.x,i),t.orientationY.linearRampToValueAtTime(Oa.y,i),t.orientationZ.linearRampToValueAtTime(Oa.z,i)}else t.setPosition(Fa.x,Fa.y,Fa.z),t.setOrientation(Oa.x,Oa.y,Oa.z)}}class _9{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class DD{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Jn.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Jn.multiplyQuaternionsFlat(e,o,e,t,e,i),Jn.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const rM="\\[\\]\\.:\\/",A9=new RegExp("["+rM+"]","g"),sM="[^"+rM+"]",S9="[^"+rM.replace("\\.","")+"]",M9=/((?:WC+[\/:])*)/.source.replace("WC",sM),w9=/(WCOD+)?/.source.replace("WCOD",S9),E9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",sM),C9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",sM),T9=new RegExp("^"+M9+w9+E9+C9+"$"),b9=["material","materials","bones","map"];class R9{constructor(e,t,i){const r=i||Ft.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Ft{constructor(e,t,i){this.path=t,this.parsedPath=i||Ft.parseTrackName(t),this.node=Ft.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Ft.Composite(e,t,i):new Ft(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(A9,"")}static parseTrackName(e){const t=T9.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);b9.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Ft.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Ft.Composite=R9;Ft.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ft.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ft.prototype.GetterByBindingType=[Ft.prototype._getValue_direct,Ft.prototype._getValue_array,Ft.prototype._getValue_arrayElement,Ft.prototype._getValue_toArray];Ft.prototype.SetterByBindingTypeAndVersioning=[[Ft.prototype._setValue_direct,Ft.prototype._setValue_direct_setNeedsUpdate,Ft.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_array,Ft.prototype._setValue_array_setNeedsUpdate,Ft.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_arrayElement,Ft.prototype._setValue_arrayElement_setNeedsUpdate,Ft.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ft.prototype._setValue_fromArray,Ft.prototype._setValue_fromArray_setNeedsUpdate,Ft.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class P9{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ir(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let h=0,d=arguments.length;h!==d;++h){const p=arguments[h],m=p.uuid;let y=t[m];if(y===void 0){y=l++,t[m]=y,e.push(p);for(let A=0,x=o;A!==x;++A)s[A].push(new Ft(p,i[A],r[A]))}else if(y<u){a=e[y];const A=--u,x=e[A];t[x.uuid]=y,e[y]=x,t[m]=A,e[A]=p;for(let g=0,_=o;g!==_;++g){const M=s[g],w=M[A];let P=M[y];M[y]=w,P===void 0&&(P=new Ft(p,i[g],r[g])),M[A]=P}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,h=t[u];if(h!==void 0&&h>=s){const d=s++,p=e[d];t[p.uuid]=h,e[h]=p,t[u]=d,e[d]=l;for(let m=0,y=r;m!==y;++m){const A=i[m],x=A[d],g=A[h];A[h]=x,A[d]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],h=u.uuid,d=t[h];if(d!==void 0)if(delete t[h],d<s){const p=--s,m=e[p],y=--o,A=e[y];t[m.uuid]=d,e[d]=m,t[A.uuid]=p,e[p]=A,e.pop();for(let x=0,g=r;x!==g;++x){const _=i[x],M=_[p],w=_[y];_[d]=M,_[p]=w,_.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=d),e[d]=m,e.pop();for(let y=0,A=r;y!==A;++y){const x=i[y];x[d]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,h=this.nCachedObjects_,d=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(d);for(let p=h,m=l.length;p!==m;++p){const y=l[p];d[p]=new Ft(y,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class LD{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:nl,endingEnd:nl};for(let u=0;u!==o;++u){const h=s[u].createInterpolant(null);a[u]=h,h.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=AI,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case MS:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulateAdditive(a);break;case Q0:default:for(let h=0,d=l.length;h!==d;++h)l[h].evaluate(o),u[h].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===SI;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===_I){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=il,r.endingEnd=il):(e?r.endingStart=this.zeroSlopeAtStart?il:nl:r.endingStart=bh,t?r.endingEnd=this.zeroSlopeAtEnd?il:nl:r.endingEnd=bh)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const B9=new Float32Array(1);class I9 extends Ts{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let h=u[l];h===void 0&&(h={},u[l]=h);for(let d=0;d!==s;++d){const p=r[d],m=p.name;let y=h[m];if(y!==void 0)++y.referenceCount,o[d]=y;else{if(y=o[d],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const A=t&&t._propertyBindings[d].binding.parsedPath;y=new DD(Ft.create(i,m,A),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),o[d]=y}a[d].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],h=e._byClipCacheIndex;u._byClipCacheIndex=h,l[h]=u,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete d[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new YS(new Float32Array(2),new Float32Array(2),1,B9),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?vu.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Q0),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const h=new LD(this,o,t,i);return this._bindAction(h,u),this._addInactiveAction(h,a,s),h}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?vu.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const h=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=h,t[h]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class oM{constructor(e){this.value=e}clone(){return new oM(this.value.clone===void 0?this.value:this.value.clone())}}let D9=0;class L9 extends Ts{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:D9++}),this.name="",this.usage=Ih,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class N9 extends ad{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class F9{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const rb=new ft;class ND{constructor(e,t,i=0,r=1/0){this.ray=new Dl(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new pl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return rb.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(rb),this}intersectObject(e,t=!0,i=[]){return O1(e,this,i,t),i.sort(sb),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)O1(e[r],this,i,t);return i.sort(sb),i}}function sb(n,e){return n.distance-e.distance}function O1(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)O1(s[o],e,t,!0)}}class U1{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(_n(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class O9{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const ob=new pe;class U9{constructor(e=new pe(1/0,1/0),t=new pe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ob.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ob).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ab=new U,Mm=new U;class k9{constructor(e=new U,t=new U){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){ab.subVectors(e,this.start),Mm.subVectors(this.end,this.start);const i=Mm.dot(Mm);let s=Mm.dot(ab)/i;return t&&(s=_n(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const lb=new U;class H9 extends Nt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new wt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,h=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(h),Math.sin(h),1)}i.setAttribute("position",new tt(r,3));const s=new _i({fog:!1,toneMapped:!1});this.cone=new rs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),lb.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(lb),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Bo=new U,wm=new ft,qx=new ft;class z9 extends rs{constructor(e){const t=FD(e),i=new wt,r=[],s=[],o=new Oe(0,0,1),a=new Oe(0,1,0);for(let u=0;u<t.length;u++){const h=t[u];h.parent&&h.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new tt(r,3)),i.setAttribute("color",new tt(s,3));const l=new _i({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");qx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(wm.multiplyMatrices(qx,a.matrixWorld),Bo.setFromMatrixPosition(wm),r.setXYZ(o,Bo.x,Bo.y,Bo.z),wm.multiplyMatrices(qx,a.parent.matrixWorld),Bo.setFromMatrixPosition(wm),r.setXYZ(o+1,Bo.x,Bo.y,Bo.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function FD(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,FD(n.children[t]));return e}class G9 extends Cn{constructor(e,t,i){const r=new fd(t,4,2),s=new tr({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const V9=new U,cb=new Oe,ub=new Oe;class W9 extends Nt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new ud(t);r.rotateY(Math.PI*.5),this.material=new tr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Ut(o,3)),this.add(new Cn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");cb.copy(this.light.color),ub.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?cb:ub;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(V9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class j9 extends rs{constructor(e=10,t=10,i=4473924,r=8947848){i=new Oe(i),r=new Oe(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,m=0,y=-a;p<=t;p++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const A=p===s?i:r;A.toArray(u,m),m+=3,A.toArray(u,m),m+=3,A.toArray(u,m),m+=3,A.toArray(u,m),m+=3}const h=new wt;h.setAttribute("position",new tt(l,3)),h.setAttribute("color",new tt(u,3));const d=new _i({vertexColors:!0,toneMapped:!1});super(h,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class X9 extends rs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Oe(s),o=new Oe(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const p=d/t*(Math.PI*2),m=Math.sin(p)*e,y=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,y);const A=d&1?s:o;l.push(A.r,A.g,A.b),l.push(A.r,A.g,A.b)}for(let d=0;d<i;d++){const p=d&1?s:o,m=e-e/i*d;for(let y=0;y<r;y++){let A=y/r*(Math.PI*2),x=Math.sin(A)*m,g=Math.cos(A)*m;a.push(x,0,g),l.push(p.r,p.g,p.b),A=(y+1)/r*(Math.PI*2),x=Math.sin(A)*m,g=Math.cos(A)*m,a.push(x,0,g),l.push(p.r,p.g,p.b)}}const u=new wt;u.setAttribute("position",new tt(a,3)),u.setAttribute("color",new tt(l,3));const h=new _i({vertexColors:!0,toneMapped:!1});super(u,h),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const fb=new U,Em=new U,hb=new U;class J9 extends Nt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new wt;r.setAttribute("position",new tt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new _i({fog:!1,toneMapped:!1});this.lightPlane=new co(r,s),this.add(this.lightPlane),r=new wt,r.setAttribute("position",new tt([0,0,0,0,0,1],3)),this.targetLine=new co(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),fb.setFromMatrixPosition(this.light.matrixWorld),Em.setFromMatrixPosition(this.light.target.matrixWorld),hb.subVectors(Em,fb),this.lightPlane.lookAt(Em),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Em),this.targetLine.scale.z=hb.length()}}const Cm=new U,yn=new rd;class K9 extends rs{constructor(e){const t=new wt,i=new _i({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,A){l(y),l(A)}function l(y){r.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}t.setAttribute("position",new tt(r,3)),t.setAttribute("color",new tt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Oe(16755200),h=new Oe(16711680),d=new Oe(43775),p=new Oe(16777215),m=new Oe(3355443);this.setColors(u,h,d,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;yn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Mn("c",t,e,yn,0,0,-1),Mn("t",t,e,yn,0,0,1),Mn("n1",t,e,yn,-i,-r,-1),Mn("n2",t,e,yn,i,-r,-1),Mn("n3",t,e,yn,-i,r,-1),Mn("n4",t,e,yn,i,r,-1),Mn("f1",t,e,yn,-i,-r,1),Mn("f2",t,e,yn,i,-r,1),Mn("f3",t,e,yn,-i,r,1),Mn("f4",t,e,yn,i,r,1),Mn("u1",t,e,yn,i*.7,r*1.1,-1),Mn("u2",t,e,yn,-i*.7,r*1.1,-1),Mn("u3",t,e,yn,0,r*2,-1),Mn("cf1",t,e,yn,-i,0,1),Mn("cf2",t,e,yn,i,0,1),Mn("cf3",t,e,yn,0,-r,1),Mn("cf4",t,e,yn,0,r,1),Mn("cn1",t,e,yn,-i,0,-1),Mn("cn2",t,e,yn,i,0,-1),Mn("cn3",t,e,yn,0,-r,-1),Mn("cn4",t,e,yn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Mn(n,e,t,i,r,s,o){Cm.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,h=a.length;u<h;u++)l.setXYZ(a[u],Cm.x,Cm.y,Cm.z)}}const Tm=new vi;class Y9 extends rs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new wt;s.setIndex(new Ut(i,1)),s.setAttribute("position",new Ut(r,3)),super(s,new _i({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Tm.setFromObject(this.object),Tm.isEmpty())return;const t=Tm.min,i=Tm.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Q9 extends rs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new wt;s.setIndex(new Ut(i,1)),s.setAttribute("position",new tt(r,3)),super(s,new _i({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z9 extends co{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new wt;o.setAttribute("position",new tt(s,3)),o.computeBoundingSphere(),super(o,new _i({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new wt;l.setAttribute("position",new tt(a,3)),l.computeBoundingSphere(),this.add(new Cn(l,new tr({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const db=new U;let bm,$x;class q9 extends Nt{constructor(e=new U(0,0,1),t=new U(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",bm===void 0&&(bm=new wt,bm.setAttribute("position",new tt([0,0,0,0,1,0],3)),$x=new Pu(0,.5,1,5,1),$x.translate(0,-.5,0)),this.position.copy(t),this.line=new co(bm,new _i({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Cn($x,new tr({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{db.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(db,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class $9 extends rs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new wt;r.setAttribute("position",new tt(t,3)),r.setAttribute("color",new tt(i,3));const s=new _i({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Oe,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class e8{constructor(){this.type="ShapePath",this.color=new Oe,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Nh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const _=[];for(let M=0,w=g.length;M<w;M++){const P=g[M],b=new ml;b.curves=P.curves,_.push(b)}return _}function i(g,_){const M=_.length;let w=!1;for(let P=M-1,b=0;b<M;P=b++){let I=_[P],D=_[b],R=D.x-I.x,T=D.y-I.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(I=_[b],R=-R,D=_[P],T=-T),g.y<I.y||g.y>D.y)continue;if(g.y===I.y){if(g.x===I.x)return!0}else{const N=T*(g.x-I.x)-R*(g.y-I.y);if(N===0)return!0;if(N<0)continue;w=!w}}else{if(g.y!==I.y)continue;if(D.x<=g.x&&g.x<=I.x||I.x<=g.x&&g.x<=D.x)return!0}}return w}const r=ws.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new ml,l.curves=a.curves,u.push(l),u;let h=!r(s[0].getPoints());h=e?!h:h;const d=[],p=[];let m=[],y=0,A;p[y]=void 0,m[y]=[];for(let g=0,_=s.length;g<_;g++)a=s[g],A=a.getPoints(),o=r(A),o=e?!o:o,o?(!h&&p[y]&&y++,p[y]={s:new ml,p:A},p[y].s.curves=a.curves,h&&y++,m[y]=[]):m[y].push({h:a,p:A[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,_=0;for(let M=0,w=p.length;M<w;M++)d[M]=[];for(let M=0,w=p.length;M<w;M++){const P=m[M];for(let b=0;b<P.length;b++){const I=P[b];let D=!0;for(let R=0;R<p.length;R++)i(I.p,p[R].p)&&(M!==R&&_++,D?(D=!1,d[R].push(I)):g=!0);D&&d[M].push(I)}}_>0&&g===!1&&(m=d)}let x;for(let g=0,_=p.length;g<_;g++){l=p[g].s,u.push(l),x=m[g];for(let M=0,w=x.length;M<w;M++)l.holes.push(x[M].h)}return u}}class t8 extends ts{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ed}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ed);const n8=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:dS,AddEquation:zo,AddOperation:hI,AdditiveAnimationBlendMode:MS,AdditiveBlending:w1,AgXToneMapping:vI,AlphaFormat:vS,AlwaysCompare:DI,AlwaysDepth:sI,AlwaysStencilFunc:b1,AmbientLight:ED,AnimationAction:LD,AnimationClip:vu,AnimationLoader:s9,AnimationMixer:I9,AnimationObjectGroup:P9,AnimationUtils:t9,ArcCurve:eD,ArrayCamera:KI,ArrowHelper:q9,AttachedBindMode:T1,Audio:ID,AudioAnalyser:_9,AudioContext:nM,AudioListener:v9,AudioLoader:p9,AxesHelper:$9,BackSide:Ri,BasicDepthPacking:wI,BasicShadowMap:kB,BatchedMesh:$I,Bone:nv,BooleanKeyframeTrack:Nl,Box2:U9,Box3:vi,Box3Helper:Q9,BoxGeometry:Ll,BoxHelper:Y9,BufferAttribute:Ut,BufferGeometry:wt,BufferGeometryLoader:PD,ByteType:pS,Cache:Ys,Camera:rd,CameraHelper:K9,CanvasTexture:E5,CapsuleGeometry:ov,CatmullRomCurve3:tD,CineonToneMapping:mI,CircleGeometry:av,ClampToEdgeWrapping:er,Clock:iM,Color:Oe,ColorKeyframeTrack:QS,ColorManagement:Vt,CompressedArrayTexture:M5,CompressedCubeTexture:w5,CompressedTexture:rv,CompressedTextureLoader:o9,ConeGeometry:lv,ConstantAlphaFactor:nI,ConstantColorFactor:eI,CubeCamera:BS,CubeReflectionMapping:ao,CubeRefractionMapping:ra,CubeTexture:sd,CubeTextureLoader:a9,CubeUVReflectionMapping:Cu,CubicBezierCurve:VS,CubicBezierCurve3:nD,CubicInterpolant:_D,CullFaceBack:M1,CullFaceFront:UB,CullFaceFrontBack:ak,CullFaceNone:OB,Curve:ss,CurvePath:rD,CustomBlending:HB,CustomToneMapping:gI,CylinderGeometry:Pu,Cylindrical:O9,Data3DTexture:bS,DataArrayTexture:q0,DataTexture:Ms,DataTextureLoader:l9,DataUtils:p4,DecrementStencilOp:gk,DecrementWrapStencilOp:yk,DefaultLoadingManager:Gc,DepthFormat:hl,DepthStencilFormat:wl,DepthTexture:LS,DetachedBindMode:xI,DirectionalLight:tM,DirectionalLightHelper:J9,DiscreteInterpolant:AD,DisplayP3ColorSpace:Z0,DodecahedronGeometry:cv,DoubleSide:Tr,DstAlphaFactor:YB,DstColorFactor:ZB,DynamicCopyUsage:Dk,DynamicDrawUsage:Tk,DynamicReadUsage:Pk,EdgesGeometry:sD,EllipseCurve:sv,EqualCompare:RI,EqualDepth:aI,EqualStencilFunc:Sk,EquirectangularReflectionMapping:Ch,EquirectangularRefractionMapping:Th,Euler:sr,EventDispatcher:Ts,ExtrudeGeometry:fv,FileLoader:or,Float16BufferAttribute:_4,Float32BufferAttribute:tt,FloatType:Hi,Fog:tv,FogExp2:ev,FramebufferTexture:S5,FrontSide:Cs,Frustum:od,GLBufferAttribute:F9,GLSL1:Nk,GLSL3:R1,GreaterCompare:PI,GreaterDepth:cI,GreaterEqualCompare:II,GreaterEqualDepth:lI,GreaterEqualStencilFunc:Ck,GreaterStencilFunc:wk,GridHelper:j9,Group:Ks,HalfFloatType:Tu,HemisphereLight:wD,HemisphereLightHelper:W9,IcosahedronGeometry:hv,ImageBitmapLoader:BD,ImageLoader:kh,ImageUtils:OI,IncrementStencilOp:mk,IncrementWrapStencilOp:vk,InstancedBufferAttribute:El,InstancedBufferGeometry:RD,InstancedInterleavedBuffer:N9,InstancedMesh:kS,Int16BufferAttribute:y4,Int32BufferAttribute:x4,Int8BufferAttribute:m4,IntType:W0,InterleavedBuffer:ad,InterleavedBufferAttribute:oa,Interpolant:Bu,InterpolateDiscrete:du,InterpolateLinear:pu,InterpolateSmooth:qm,InvertStencilOp:xk,KeepStencilOp:ja,KeyframeTrack:os,LOD:qI,LatheGeometry:cd,Layers:pl,LessCompare:bI,LessDepth:oI,LessEqualCompare:ES,LessEqualDepth:Eh,LessEqualStencilFunc:Mk,LessStencilFunc:Ak,Light:pa,LightProbe:bD,Line:co,Line3:k9,LineBasicMaterial:_i,LineCurve:WS,LineCurve3:iD,LineDashedMaterial:vD,LineLoop:HS,LineSegments:rs,LinearDisplayP3ColorSpace:id,LinearFilter:An,LinearInterpolant:YS,LinearMipMapLinearFilter:fk,LinearMipMapNearestFilter:uk,LinearMipmapLinearFilter:Rr,LinearMipmapNearestFilter:tu,LinearSRGBColorSpace:ho,LinearToneMapping:dI,LinearTransfer:Rh,Loader:Ai,LoaderUtils:$o,LoadingManager:ZS,LoopOnce:_I,LoopPingPong:SI,LoopRepeat:AI,LuminanceAlphaFormat:_S,LuminanceFormat:xS,MOUSE:Va,Material:In,MaterialLoader:xv,MathUtils:LI,Matrix3:Et,Matrix4:ft,MaxEquation:WB,Mesh:Cn,MeshBasicMaterial:tr,MeshDepthMaterial:NS,MeshDistanceMaterial:FS,MeshLambertMaterial:mD,MeshMatcapMaterial:gD,MeshNormalMaterial:pD,MeshPhongMaterial:hD,MeshPhysicalMaterial:Lr,MeshStandardMaterial:hd,MeshToonMaterial:dD,MinEquation:VB,MirroredRepeatWrapping:fu,MixOperation:fI,MultiplyBlending:C1,MultiplyOperation:td,NearestFilter:On,NearestMipMapLinearFilter:ck,NearestMipMapNearestFilter:lk,NearestMipmapLinearFilter:tl,NearestMipmapNearestFilter:V0,NeutralToneMapping:yI,NeverCompare:TI,NeverDepth:rI,NeverStencilFunc:_k,NoBlending:qs,NoColorSpace:Ws,NoToneMapping:Ss,NormalAnimationBlendMode:Q0,NormalBlending:fl,NotEqualCompare:BI,NotEqualDepth:uI,NotEqualStencilFunc:Ek,NumberKeyframeTrack:Tl,Object3D:Nt,ObjectLoader:h9,ObjectSpaceNormalMap:CI,OctahedronGeometry:ud,OneFactor:XB,OneMinusConstantAlphaFactor:iI,OneMinusConstantColorFactor:tI,OneMinusDstAlphaFactor:QB,OneMinusDstColorFactor:qB,OneMinusSrcAlphaFactor:Bg,OneMinusSrcColorFactor:KB,OrthographicCamera:Pr,P3Primaries:Bh,PCFShadowMap:z0,PCFSoftShadowMap:Xf,PMREMGenerator:P1,Path:Nh,PerspectiveCamera:rn,Plane:Vs,PlaneGeometry:bu,PlaneHelper:Z9,PointLight:eM,PointLightHelper:G9,Points:zS,PointsMaterial:iv,PolarGridHelper:X9,PolyhedronGeometry:da,PositionalAudio:x9,PropertyBinding:Ft,PropertyMixer:DD,QuadraticBezierCurve:jS,QuadraticBezierCurve3:XS,Quaternion:Jn,QuaternionKeyframeTrack:bl,QuaternionLinearInterpolant:SD,RED_GREEN_RGTC2_Format:n0,RED_RGTC1_Format:SS,REVISION:ed,RGBADepthPacking:EI,RGBAFormat:pi,RGBAIntegerFormat:Y0,RGBA_ASTC_10x10_Format:Qg,RGBA_ASTC_10x5_Format:Jg,RGBA_ASTC_10x6_Format:Kg,RGBA_ASTC_10x8_Format:Yg,RGBA_ASTC_12x10_Format:Zg,RGBA_ASTC_12x12_Format:qg,RGBA_ASTC_4x4_Format:kg,RGBA_ASTC_5x4_Format:Hg,RGBA_ASTC_5x5_Format:zg,RGBA_ASTC_6x5_Format:Gg,RGBA_ASTC_6x6_Format:Vg,RGBA_ASTC_8x5_Format:Wg,RGBA_ASTC_8x6_Format:jg,RGBA_ASTC_8x8_Format:Xg,RGBA_BPTC_Format:Zf,RGBA_ETC2_EAC_Format:Ug,RGBA_PVRTC_2BPPV1_Format:Ng,RGBA_PVRTC_4BPPV1_Format:Lg,RGBA_S3TC_DXT1_Format:Kf,RGBA_S3TC_DXT3_Format:Yf,RGBA_S3TC_DXT5_Format:Qf,RGBFormat:yS,RGBIntegerFormat:hk,RGB_BPTC_SIGNED_Format:$g,RGB_BPTC_UNSIGNED_Format:e0,RGB_ETC1_Format:Fg,RGB_ETC2_Format:Og,RGB_PVRTC_2BPPV1_Format:Dg,RGB_PVRTC_4BPPV1_Format:Ig,RGB_S3TC_DXT1_Format:Jf,RGFormat:AS,RGIntegerFormat:K0,RawShaderMaterial:fD,Ray:Dl,Raycaster:ND,Rec709Primaries:Ph,RectAreaLight:CD,RedFormat:J0,RedIntegerFormat:nd,ReinhardToneMapping:pI,RenderTarget:UI,RepeatWrapping:sa,ReplaceStencilOp:pk,ReverseSubtractEquation:GB,RingGeometry:dv,SIGNED_RED_GREEN_RGTC2_Format:i0,SIGNED_RED_RGTC1_Format:t0,SRGBColorSpace:Mr,SRGBTransfer:qt,Scene:s0,ShaderChunk:Tt,ShaderLib:Kr,ShaderMaterial:ns,ShadowMaterial:uD,Shape:ml,ShapeGeometry:pv,ShapePath:e8,ShapeUtils:ws,ShortType:mS,Skeleton:ld,SkeletonHelper:z9,SkinnedMesh:US,Source:rl,Sphere:ei,SphereGeometry:fd,Spherical:U1,SphericalHarmonics3:TD,SplineCurve:JS,SpotLight:$S,SpotLightHelper:H9,Sprite:ZI,SpriteMaterial:OS,SrcAlphaFactor:Pg,SrcAlphaSaturateFactor:$B,SrcColorFactor:JB,StaticCopyUsage:Ik,StaticDrawUsage:Ih,StaticReadUsage:Rk,StereoCamera:m9,StreamCopyUsage:Lk,StreamDrawUsage:bk,StreamReadUsage:Bk,StringKeyframeTrack:Fl,SubtractEquation:zB,SubtractiveBlending:E1,TOUCH:Wa,TangentSpaceNormalMap:ha,TetrahedronGeometry:mv,Texture:on,TextureLoader:MD,TextureUtils:t5,TorusGeometry:gv,TorusKnotGeometry:vv,Triangle:qi,TriangleFanDrawMode:r0,TriangleStripDrawMode:wS,TrianglesDrawMode:MI,TubeGeometry:yv,UVMapping:G0,Uint16BufferAttribute:RS,Uint32BufferAttribute:PS,Uint8BufferAttribute:g4,Uint8ClampedBufferAttribute:v4,Uniform:oM,UniformsGroup:L9,UniformsLib:ke,UniformsUtils:zI,UnsignedByteType:es,UnsignedInt248Type:Ml,UnsignedInt5999Type:gS,UnsignedIntType:lo,UnsignedShort4444Type:j0,UnsignedShort5551Type:X0,UnsignedShortType:hu,VSMShadowMap:Wr,Vector2:pe,Vector3:U,Vector4:Wt,VectorKeyframeTrack:Rl,VideoTexture:A5,WebGL3DRenderTarget:r4,WebGLArrayRenderTarget:i4,WebGLCoordinateSystem:xs,WebGLCubeRenderTarget:IS,WebGLMultipleRenderTargets:t8,WebGLRenderTarget:ts,WebGLRenderer:YI,WebGLUtils:JI,WebGPUCoordinateSystem:Dh,WireframeGeometry:cD,WrapAroundEnding:bh,ZeroCurvatureEnding:nl,ZeroFactor:jB,ZeroSlopeEnding:il,ZeroStencilOp:dk,createCanvasElement:FI},Symbol.toStringTag,{value:"Module"}));var OD={exports:{}},Ol={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Ol.ConcurrentRoot=1;Ol.ContinuousEventPriority=4;Ol.DefaultEventPriority=16;Ol.DiscreteEventPriority=1;Ol.IdleEventPriority=536870912;Ol.LegacyRoot=0;OD.exports=Ol;var Vc=OD.exports;function i8(n){let e;const t=new Set,i=(u,h)=>{const d=typeof u=="function"?u(e):u;if(d!==e){const p=e;e=h?d:Object.assign({},e,d),t.forEach(m=>m(e,p))}},r=()=>e,s=(u,h=r,d=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=h(e);function m(){const y=h(e);if(!d(p,y)){const A=p;u(p=y,A)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(u,h,d)=>h||d?s(u,h,d):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const r8=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),pb=r8?X.useEffect:X.useLayoutEffect;function UD(n){const e=typeof n=="function"?i8(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=X.useReducer(x=>x+1,0),o=e.getState(),a=X.useRef(o),l=X.useRef(i),u=X.useRef(r),h=X.useRef(!1),d=X.useRef();d.current===void 0&&(d.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||u.current!==r||h.current)&&(p=i(o),m=!r(d.current,p)),pb(()=>{m&&(d.current=p),a.current=o,l.current=i,u.current=r,h.current=!1});const y=X.useRef(o);pb(()=>{const x=()=>{try{const _=e.getState(),M=l.current(_);u.current(d.current,M)||(a.current=_,d.current=M,s())}catch{h.current=!0,s()}},g=e.subscribe(x);return e.getState()!==y.current&&x(),g},[]);const A=m?p:d.current;return X.useDebugValue(A),A};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var kD={exports:{}},e_={exports:{}},t_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb;function s8(){return mb||(mb=1,function(n){function e(B,G){var V=B.length;B.push(G);e:for(;0<V;){var q=V-1>>>1,ue=B[q];if(0<r(ue,G))B[q]=G,B[V]=ue,V=q;else break e}}function t(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var G=B[0],V=B.pop();if(V!==G){B[0]=V;e:for(var q=0,ue=B.length,be=ue>>>1;q<be;){var re=2*(q+1)-1,me=B[re],we=re+1,Ee=B[we];if(0>r(me,V))we<ue&&0>r(Ee,me)?(B[q]=Ee,B[we]=V,q=we):(B[q]=me,B[re]=V,q=re);else if(we<ue&&0>r(Ee,V))B[q]=Ee,B[we]=V,q=we;else break e}}return G}function r(B,G){var V=B.sortIndex-G.sortIndex;return V!==0?V:B.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,y=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(B){for(var G=t(u);G!==null;){if(G.callback===null)i(u);else if(G.startTime<=B)i(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(u)}}function w(B){if(A=!1,M(B),!y)if(t(l)!==null)y=!0,Z(P);else{var G=t(u);G!==null&&z(w,G.startTime-B)}}function P(B,G){y=!1,A&&(A=!1,g(D),D=-1),m=!0;var V=p;try{for(M(G),d=t(l);d!==null&&(!(d.expirationTime>G)||B&&!N());){var q=d.callback;if(typeof q=="function"){d.callback=null,p=d.priorityLevel;var ue=q(d.expirationTime<=G);G=n.unstable_now(),typeof ue=="function"?d.callback=ue:d===t(l)&&i(l),M(G)}else i(l);d=t(l)}if(d!==null)var be=!0;else{var re=t(u);re!==null&&z(w,re.startTime-G),be=!1}return be}finally{d=null,p=V,m=!1}}var b=!1,I=null,D=-1,R=5,T=-1;function N(){return!(n.unstable_now()-T<R)}function Q(){if(I!==null){var B=n.unstable_now();T=B;var G=!0;try{G=I(!0,B)}finally{G?W():(b=!1,I=null)}}else b=!1}var W;if(typeof _=="function")W=function(){_(Q)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Y=K.port2;K.port1.onmessage=Q,W=function(){Y.postMessage(null)}}else W=function(){x(Q,0)};function Z(B){I=B,b||(b=!0,W())}function z(B,G){D=x(function(){B(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,Z(P))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(B){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var V=p;p=G;try{return B()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var V=p;p=B;try{return G()}finally{p=V}},n.unstable_scheduleCallback=function(B,G,V){var q=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?q+V:q):V=q,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=V+ue,B={id:h++,callback:G,priorityLevel:B,startTime:V,expirationTime:ue,sortIndex:-1},V>q?(B.sortIndex=V,e(u,B),t(l)===null&&B===t(u)&&(A?(g(D),D=-1):A=!0,z(w,V-q))):(B.sortIndex=ue,e(l,B),y||m||(y=!0,Z(P))),B},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(B){var G=p;return function(){var V=p;p=G;try{return B.apply(this,arguments)}finally{p=V}}}}(t_)),t_}var gb;function o8(){return gb||(gb=1,e_.exports=s8()),e_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a8=function(e){var t={},i=X,r=o8(),s=Object.assign;function o(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,v=1;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),P=Symbol.iterator;function b(c){return c===null||typeof c!="object"?null:(c=P&&c[P]||c["@@iterator"],typeof c=="function"?c:null)}function I(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case h:return"Fragment";case u:return"Portal";case p:return"Profiler";case d:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case y:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case A:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case _:return f=c.displayName||null,f!==null?f:I(c.type)||"Memo";case M:f=c._payload,c=c._init;try{return I(c(f))}catch{}}return null}function D(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(f);case 8:return f===d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function R(c){var f=c,v=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(v=f.return),c=f.return;while(c)}return f.tag===3?v:null}function T(c){if(R(c)!==c)throw Error(o(188))}function N(c){var f=c.alternate;if(!f){if(f=R(c),f===null)throw Error(o(188));return f!==c?null:c}for(var v=c,S=f;;){var E=v.return;if(E===null)break;var C=E.alternate;if(C===null){if(S=E.return,S!==null){v=S;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===v)return T(E),c;if(C===S)return T(E),f;C=C.sibling}throw Error(o(188))}if(v.return!==S.return)v=E,S=C;else{for(var k=!1,$=E.child;$;){if($===v){k=!0,v=E,S=C;break}if($===S){k=!0,S=E,v=C;break}$=$.sibling}if(!k){for($=C.child;$;){if($===v){k=!0,v=C,S=E;break}if($===S){k=!0,S=C,v=E;break}$=$.sibling}if(!k)throw Error(o(189))}}if(v.alternate!==S)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?c:f}function Q(c){return c=N(c),c!==null?W(c):null}function W(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=W(c);if(f!==null)return f;c=c.sibling}return null}function K(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=K(c);if(f!==null)return f}c=c.sibling}return null}var Y=Array.isArray,Z=e.getPublicInstance,z=e.getRootHostContext,B=e.getChildHostContext,G=e.prepareForCommit,V=e.resetAfterCommit,q=e.createInstance,ue=e.appendInitialChild,be=e.finalizeInitialChildren,re=e.prepareUpdate,me=e.shouldSetTextContent,we=e.createTextInstance,Ee=e.scheduleTimeout,nt=e.cancelTimeout,dt=e.noTimeout,Ke=e.isPrimaryRenderer,He=e.supportsMutation,O=e.supportsPersistence,ye=e.supportsHydration,Me=e.getInstanceFromNode,Ie=e.preparePortalMount,he=e.getCurrentEventPriority,Ye=e.detachDeletedInstance,Le=e.supportsMicrotasks,Ge=e.scheduleMicrotask,H=e.supportsTestSelectors,L=e.findFiberRoot,se=e.getBoundingRect,xe=e.getTextContent,_e=e.isHiddenSubtree,Ae=e.matchAccessibilityRole,$e=e.setFocusIfFocusable,Pe=e.setupIntersectionObserver,We=e.appendChild,vt=e.appendChildToContainer,Ce=e.commitTextUpdate,ze=e.commitMount,bt=e.commitUpdate,lt=e.insertBefore,je=e.insertInContainerBefore,J=e.removeChild,ge=e.removeChildFromContainer,Ue=e.resetTextContent,j=e.hideInstance,Se=e.hideTextInstance,de=e.unhideInstance,ve=e.unhideTextInstance,Ne=e.clearContainer,at=e.cloneInstance,yt=e.createContainerChildSet,Dt=e.appendChildToContainerChildSet,st=e.finalizeContainerChildren,Te=e.replaceContainerChildren,ct=e.cloneHiddenInstance,Lt=e.cloneHiddenTextInstance,Ii=e.canHydrateInstance,Nr=e.canHydrateTextInstance,Nu=e.canHydrateSuspenseInstance,Fu=e.isSuspenseInstancePending,Ul=e.isSuspenseInstanceFallback,kl=e.registerSuspenseInstanceRetry,po=e.getNextHydratableSibling,Hl=e.getFirstHydratableChild,Ed=e.getFirstHydratableChildWithinContainer,Cd=e.getFirstHydratableChildWithinSuspenseInstance,Lv=e.hydrateInstance,Nv=e.hydrateTextInstance,Fv=e.hydrateSuspenseInstance,F=e.getNextHydratableInstanceAfterSuspenseInstance,ee=e.commitHydratedContainer,ae=e.commitHydratedSuspenseInstance,le=e.clearSuspenseBoundary,ie=e.clearSuspenseBoundaryFromContainer,De=e.shouldDeleteUnhydratedTailInstances,Je=e.didNotMatchHydratedContainerTextInstance,et=e.didNotMatchHydratedTextInstance,qe;function ht(c){if(qe===void 0)try{throw Error()}catch(v){var f=v.stack.trim().match(/\n( *(at )?)/);qe=f&&f[1]||""}return`
`+qe+c}var mt=!1;function ut(c,f){if(!c||mt)return"";mt=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Be){var S=Be}Reflect.construct(c,[],f)}else{try{f.call()}catch(Be){S=Be}c.call(f.prototype)}else{try{throw Error()}catch(Be){S=Be}c()}}catch(Be){if(Be&&S&&typeof Be.stack=="string"){for(var E=Be.stack.split(`
`),C=S.stack.split(`
`),k=E.length-1,$=C.length-1;1<=k&&0<=$&&E[k]!==C[$];)$--;for(;1<=k&&0<=$;k--,$--)if(E[k]!==C[$]){if(k!==1||$!==1)do if(k--,$--,0>$||E[k]!==C[$]){var fe=`
`+E[k].replace(" at new "," at ");return c.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",c.displayName)),fe}while(1<=k&&0<=$);break}}}finally{mt=!1,Error.prepareStackTrace=v}return(c=c?c.displayName||c.name:"")?ht(c):""}var kt=Object.prototype.hasOwnProperty,Yt=[],jt=-1;function gn(c){return{current:c}}function ot(c){0>jt||(c.current=Yt[jt],Yt[jt]=null,jt--)}function Fe(c,f){jt++,Yt[jt]=c.current,c.current=f}var Qt={},xt=gn(Qt),Zt=gn(!1),Di=Qt;function Tn(c,f){var v=c.type.contextTypes;if(!v)return Qt;var S=c.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===f)return S.__reactInternalMemoizedMaskedChildContext;var E={},C;for(C in v)E[C]=f[C];return S&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=E),E}function Hn(c){return c=c.childContextTypes,c!=null}function tn(){ot(Zt),ot(xt)}function Fr(c,f,v){if(xt.current!==Qt)throw Error(o(168));Fe(xt,f),Fe(Zt,v)}function zl(c,f,v){var S=c.stateNode;if(f=f.childContextTypes,typeof S.getChildContext!="function")return v;S=S.getChildContext();for(var E in S)if(!(E in f))throw Error(o(108,D(c)||"Unknown",E));return s({},v,S)}function Kn(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Qt,Di=xt.current,Fe(xt,c),Fe(Zt,Zt.current),!0}function Gl(c,f,v){var S=c.stateNode;if(!S)throw Error(o(169));v?(c=zl(c,f,Di),S.__reactInternalMemoizedMergedChildContext=c,ot(Zt),ot(xt),Fe(xt,c)):ot(Zt),Fe(Zt,v)}var Wi=Math.clz32?Math.clz32:gN,Td=Math.log,mN=Math.LN2;function gN(c){return c>>>=0,c===0?32:31-(Td(c)/mN|0)|0}var bd=64,Rd=4194304;function Ou(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Pd(c,f){var v=c.pendingLanes;if(v===0)return 0;var S=0,E=c.suspendedLanes,C=c.pingedLanes,k=v&268435455;if(k!==0){var $=k&~E;$!==0?S=Ou($):(C&=k,C!==0&&(S=Ou(C)))}else k=v&~E,k!==0?S=Ou(k):C!==0&&(S=Ou(C));if(S===0)return 0;if(f!==0&&f!==S&&!(f&E)&&(E=S&-S,C=f&-f,E>=C||E===16&&(C&4194240)!==0))return f;if(S&4&&(S|=v&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=S;0<f;)v=31-Wi(f),E=1<<v,S|=c[v],f&=~E;return S}function vN(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yN(c,f){for(var v=c.suspendedLanes,S=c.pingedLanes,E=c.expirationTimes,C=c.pendingLanes;0<C;){var k=31-Wi(C),$=1<<k,fe=E[k];fe===-1?(!($&v)||$&S)&&(E[k]=vN($,f)):fe<=f&&(c.expiredLanes|=$),C&=~$}}function Ov(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Uv(c){for(var f=[],v=0;31>v;v++)f.push(c);return f}function Uu(c,f,v){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-Wi(f),c[f]=v}function xN(c,f){var v=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var S=c.eventTimes;for(c=c.expirationTimes;0<v;){var E=31-Wi(v),C=1<<E;f[E]=0,S[E]=-1,c[E]=-1,v&=~C}}function kv(c,f){var v=c.entangledLanes|=f;for(c=c.entanglements;v;){var S=31-Wi(v),E=1<<S;E&f|c[S]&f&&(c[S]|=f),v&=~E}}var Ht=0;function VM(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Hv=r.unstable_scheduleCallback,WM=r.unstable_cancelCallback,_N=r.unstable_shouldYield,AN=r.unstable_requestPaint,zn=r.unstable_now,zv=r.unstable_ImmediatePriority,SN=r.unstable_UserBlockingPriority,Gv=r.unstable_NormalPriority,MN=r.unstable_IdlePriority,Bd=null,cs=null;function wN(c){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(Bd,c,void 0,(c.current.flags&128)===128)}catch{}}function EN(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var us=typeof Object.is=="function"?Object.is:EN,bs=null,Id=!1,Vv=!1;function jM(c){bs===null?bs=[c]:bs.push(c)}function CN(c){Id=!0,jM(c)}function fs(){if(!Vv&&bs!==null){Vv=!0;var c=0,f=Ht;try{var v=bs;for(Ht=1;c<v.length;c++){var S=v[c];do S=S(!0);while(S!==null)}bs=null,Id=!1}catch(E){throw bs!==null&&(bs=bs.slice(c+1)),Hv(zv,fs),E}finally{Ht=f,Vv=!1}}return null}var TN=a.ReactCurrentBatchConfig;function Dd(c,f){if(us(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var v=Object.keys(c),S=Object.keys(f);if(v.length!==S.length)return!1;for(S=0;S<v.length;S++){var E=v[S];if(!kt.call(f,E)||!us(c[E],f[E]))return!1}return!0}function bN(c){switch(c.tag){case 5:return ht(c.type);case 16:return ht("Lazy");case 13:return ht("Suspense");case 19:return ht("SuspenseList");case 0:case 2:case 15:return c=ut(c.type,!1),c;case 11:return c=ut(c.type.render,!1),c;case 1:return c=ut(c.type,!0),c;default:return""}}function Or(c,f){if(c&&c.defaultProps){f=s({},f),c=c.defaultProps;for(var v in c)f[v]===void 0&&(f[v]=c[v]);return f}return f}var Ld=gn(null),Nd=null,Vl=null,Wv=null;function jv(){Wv=Vl=Nd=null}function XM(c,f,v){Ke?(Fe(Ld,f._currentValue),f._currentValue=v):(Fe(Ld,f._currentValue2),f._currentValue2=v)}function Xv(c){var f=Ld.current;ot(Ld),Ke?c._currentValue=f:c._currentValue2=f}function Jv(c,f,v){for(;c!==null;){var S=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),c===v)break;c=c.return}}function Wl(c,f){Nd=c,Wv=Vl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(Ji=!0),c.firstContext=null)}function ur(c){var f=Ke?c._currentValue:c._currentValue2;if(Wv!==c)if(c={context:c,memoizedValue:f,next:null},Vl===null){if(Nd===null)throw Error(o(308));Vl=c,Nd.dependencies={lanes:0,firstContext:c}}else Vl=Vl.next=c;return f}var hs=null,mo=!1;function Kv(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JM(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Rs(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function go(c,f){var v=c.updateQueue;v!==null&&(v=v.shared,bn!==null&&c.mode&1&&!(Pt&2)?(c=v.interleaved,c===null?(f.next=f,hs===null?hs=[v]:hs.push(v)):(f.next=c.next,c.next=f),v.interleaved=f):(c=v.pending,c===null?f.next=f:(f.next=c.next,c.next=f),v.pending=f))}function Fd(c,f,v){if(f=f.updateQueue,f!==null&&(f=f.shared,(v&4194240)!==0)){var S=f.lanes;S&=c.pendingLanes,v|=S,f.lanes=v,kv(c,v)}}function KM(c,f){var v=c.updateQueue,S=c.alternate;if(S!==null&&(S=S.updateQueue,v===S)){var E=null,C=null;if(v=v.firstBaseUpdate,v!==null){do{var k={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};C===null?E=C=k:C=C.next=k,v=v.next}while(v!==null);C===null?E=C=f:C=C.next=f}else E=C=f;v={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:S.shared,effects:S.effects},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=f:c.next=f,v.lastBaseUpdate=f}function Od(c,f,v,S){var E=c.updateQueue;mo=!1;var C=E.firstBaseUpdate,k=E.lastBaseUpdate,$=E.shared.pending;if($!==null){E.shared.pending=null;var fe=$,Be=fe.next;fe.next=null,k===null?C=Be:k.next=Be,k=fe;var Ze=c.alternate;Ze!==null&&(Ze=Ze.updateQueue,$=Ze.lastBaseUpdate,$!==k&&($===null?Ze.firstBaseUpdate=Be:$.next=Be,Ze.lastBaseUpdate=fe))}if(C!==null){var St=E.baseState;k=0,Ze=Be=fe=null,$=C;do{var pt=$.lane,Kt=$.eventTime;if((S&pt)===pt){Ze!==null&&(Ze=Ze.next={eventTime:Kt,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var rt=c,si=$;switch(pt=f,Kt=v,si.tag){case 1:if(rt=si.payload,typeof rt=="function"){St=rt.call(Kt,St,pt);break e}St=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=si.payload,pt=typeof rt=="function"?rt.call(Kt,St,pt):rt,pt==null)break e;St=s({},St,pt);break e;case 2:mo=!0}}$.callback!==null&&$.lane!==0&&(c.flags|=64,pt=E.effects,pt===null?E.effects=[$]:pt.push($))}else Kt={eventTime:Kt,lane:pt,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Ze===null?(Be=Ze=Kt,fe=St):Ze=Ze.next=Kt,k|=pt;if($=$.next,$===null){if($=E.shared.pending,$===null)break;pt=$,$=pt.next,pt.next=null,E.lastBaseUpdate=pt,E.shared.pending=null}}while(!0);if(Ze===null&&(fe=St),E.baseState=fe,E.firstBaseUpdate=Be,E.lastBaseUpdate=Ze,f=E.shared.interleaved,f!==null){E=f;do k|=E.lane,E=E.next;while(E!==f)}else C===null&&(E.shared.lanes=0);$l|=k,c.lanes=k,c.memoizedState=St}}function YM(c,f,v){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var S=c[f],E=S.callback;if(E!==null){if(S.callback=null,S=v,typeof E!="function")throw Error(o(191,E));E.call(S)}}}var QM=new i.Component().refs;function Yv(c,f,v,S){f=c.memoizedState,v=v(S,f),v=v==null?f:s({},f,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var Ud={isMounted:function(c){return(c=c._reactInternals)?R(c)===c:!1},enqueueSetState:function(c,f,v){c=c._reactInternals;var S=Mi(),E=xo(c),C=Rs(S,E);C.payload=f,v!=null&&(C.callback=v),go(c,C),f=mr(c,E,S),f!==null&&Fd(f,c,E)},enqueueReplaceState:function(c,f,v){c=c._reactInternals;var S=Mi(),E=xo(c),C=Rs(S,E);C.tag=1,C.payload=f,v!=null&&(C.callback=v),go(c,C),f=mr(c,E,S),f!==null&&Fd(f,c,E)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var v=Mi(),S=xo(c),E=Rs(v,S);E.tag=2,f!=null&&(E.callback=f),go(c,E),f=mr(c,S,v),f!==null&&Fd(f,c,S)}};function ZM(c,f,v,S,E,C,k){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(S,C,k):f.prototype&&f.prototype.isPureReactComponent?!Dd(v,S)||!Dd(E,C):!0}function qM(c,f,v){var S=!1,E=Qt,C=f.contextType;return typeof C=="object"&&C!==null?C=ur(C):(E=Hn(f)?Di:xt.current,S=f.contextTypes,C=(S=S!=null)?Tn(c,E):Qt),f=new f(v,C),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Ud,c.stateNode=f,f._reactInternals=c,S&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=E,c.__reactInternalMemoizedMaskedChildContext=C),f}function $M(c,f,v,S){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(v,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(v,S),f.state!==c&&Ud.enqueueReplaceState(f,f.state,null)}function Qv(c,f,v,S){var E=c.stateNode;E.props=v,E.state=c.memoizedState,E.refs=QM,Kv(c);var C=f.contextType;typeof C=="object"&&C!==null?E.context=ur(C):(C=Hn(f)?Di:xt.current,E.context=Tn(c,C)),E.state=c.memoizedState,C=f.getDerivedStateFromProps,typeof C=="function"&&(Yv(c,f,C,v),E.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(f=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),f!==E.state&&Ud.enqueueReplaceState(E,E.state,null),Od(c,v,E,S),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308)}var jl=[],Xl=0,kd=null,Hd=0,fr=[],hr=0,va=null,Ps=1,Bs="";function ya(c,f){jl[Xl++]=Hd,jl[Xl++]=kd,kd=c,Hd=f}function ew(c,f,v){fr[hr++]=Ps,fr[hr++]=Bs,fr[hr++]=va,va=c;var S=Ps;c=Bs;var E=32-Wi(S)-1;S&=~(1<<E),v+=1;var C=32-Wi(f)+E;if(30<C){var k=E-E%5;C=(S&(1<<k)-1).toString(32),S>>=k,E-=k,Ps=1<<32-Wi(f)+E|v<<E|S,Bs=C+c}else Ps=1<<C|v<<E|S,Bs=c}function Zv(c){c.return!==null&&(ya(c,1),ew(c,1,0))}function qv(c){for(;c===kd;)kd=jl[--Xl],jl[Xl]=null,Hd=jl[--Xl],jl[Xl]=null;for(;c===va;)va=fr[--hr],fr[hr]=null,Bs=fr[--hr],fr[hr]=null,Ps=fr[--hr],fr[hr]=null}var ji=null,Xi=null,an=!1,ku=!1,Ur=null;function tw(c,f){var v=gr(5,null,null,0);v.elementType="DELETED",v.stateNode=f,v.return=c,f=c.deletions,f===null?(c.deletions=[v],c.flags|=16):f.push(v)}function nw(c,f){switch(c.tag){case 5:return f=Ii(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,ji=c,Xi=Hl(f),!0):!1;case 6:return f=Nr(f,c.pendingProps),f!==null?(c.stateNode=f,ji=c,Xi=null,!0):!1;case 13:if(f=Nu(f),f!==null){var v=va!==null?{id:Ps,overflow:Bs}:null;return c.memoizedState={dehydrated:f,treeContext:v,retryLane:1073741824},v=gr(18,null,null,0),v.stateNode=f,v.return=c,c.child=v,ji=c,Xi=null,!0}return!1;default:return!1}}function $v(c){return(c.mode&1)!==0&&(c.flags&128)===0}function ey(c){if(an){var f=Xi;if(f){var v=f;if(!nw(c,f)){if($v(c))throw Error(o(418));f=po(v);var S=ji;f&&nw(c,f)?tw(S,v):(c.flags=c.flags&-4097|2,an=!1,ji=c)}}else{if($v(c))throw Error(o(418));c.flags=c.flags&-4097|2,an=!1,ji=c}}}function iw(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;ji=c}function Hu(c){if(!ye||c!==ji)return!1;if(!an)return iw(c),an=!0,!1;if(c.tag!==3&&(c.tag!==5||De(c.type)&&!me(c.type,c.memoizedProps))){var f=Xi;if(f){if($v(c)){for(c=Xi;c;)c=po(c);throw Error(o(418))}for(;f;)tw(c,f),f=po(f)}}if(iw(c),c.tag===13){if(!ye)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Xi=F(c)}else Xi=ji?po(c.stateNode):null;return!0}function Jl(){ye&&(Xi=ji=null,ku=an=!1)}function ty(c){Ur===null?Ur=[c]:Ur.push(c)}function zu(c,f,v){if(c=v.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var S=v.stateNode}if(!S)throw Error(o(147,c));var E=S,C=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===C?f.ref:(f=function(k){var $=E.refs;$===QM&&($=E.refs={}),k===null?delete $[C]:$[C]=k},f._stringRef=C,f)}if(typeof c!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,c))}return c}function zd(c,f){throw c=Object.prototype.toString.call(f),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function rw(c){var f=c._init;return f(c._payload)}function sw(c){function f(oe,te){if(c){var ce=oe.deletions;ce===null?(oe.deletions=[te],oe.flags|=16):ce.push(te)}}function v(oe,te){if(!c)return null;for(;te!==null;)f(oe,te),te=te.sibling;return null}function S(oe,te){for(oe=new Map;te!==null;)te.key!==null?oe.set(te.key,te):oe.set(te.index,te),te=te.sibling;return oe}function E(oe,te){return oe=Ao(oe,te),oe.index=0,oe.sibling=null,oe}function C(oe,te,ce){return oe.index=ce,c?(ce=oe.alternate,ce!==null?(ce=ce.index,ce<te?(oe.flags|=2,te):ce):(oe.flags|=2,te)):(oe.flags|=1048576,te)}function k(oe){return c&&oe.alternate===null&&(oe.flags|=2),oe}function $(oe,te,ce,Xe){return te===null||te.tag!==6?(te=Uy(ce,oe.mode,Xe),te.return=oe,te):(te=E(te,ce),te.return=oe,te)}function fe(oe,te,ce,Xe){var it=ce.type;return it===h?Ze(oe,te,ce.props.children,Xe,ce.key):te!==null&&(te.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===M&&rw(it)===te.type)?(Xe=E(te,ce.props),Xe.ref=zu(oe,te,ce),Xe.return=oe,Xe):(Xe=yp(ce.type,ce.key,ce.props,null,oe.mode,Xe),Xe.ref=zu(oe,te,ce),Xe.return=oe,Xe)}function Be(oe,te,ce,Xe){return te===null||te.tag!==4||te.stateNode.containerInfo!==ce.containerInfo||te.stateNode.implementation!==ce.implementation?(te=ky(ce,oe.mode,Xe),te.return=oe,te):(te=E(te,ce.children||[]),te.return=oe,te)}function Ze(oe,te,ce,Xe,it){return te===null||te.tag!==7?(te=Ea(ce,oe.mode,Xe,it),te.return=oe,te):(te=E(te,ce),te.return=oe,te)}function St(oe,te,ce){if(typeof te=="string"&&te!==""||typeof te=="number")return te=Uy(""+te,oe.mode,ce),te.return=oe,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case l:return ce=yp(te.type,te.key,te.props,null,oe.mode,ce),ce.ref=zu(oe,null,te),ce.return=oe,ce;case u:return te=ky(te,oe.mode,ce),te.return=oe,te;case M:var Xe=te._init;return St(oe,Xe(te._payload),ce)}if(Y(te)||b(te))return te=Ea(te,oe.mode,ce,null),te.return=oe,te;zd(oe,te)}return null}function pt(oe,te,ce,Xe){var it=te!==null?te.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return it!==null?null:$(oe,te,""+ce,Xe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:return ce.key===it?fe(oe,te,ce,Xe):null;case u:return ce.key===it?Be(oe,te,ce,Xe):null;case M:return it=ce._init,pt(oe,te,it(ce._payload),Xe)}if(Y(ce)||b(ce))return it!==null?null:Ze(oe,te,ce,Xe,null);zd(oe,ce)}return null}function Kt(oe,te,ce,Xe,it){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return oe=oe.get(ce)||null,$(te,oe,""+Xe,it);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case l:return oe=oe.get(Xe.key===null?ce:Xe.key)||null,fe(te,oe,Xe,it);case u:return oe=oe.get(Xe.key===null?ce:Xe.key)||null,Be(te,oe,Xe,it);case M:var Rt=Xe._init;return Kt(oe,te,ce,Rt(Xe._payload),it)}if(Y(Xe)||b(Xe))return oe=oe.get(ce)||null,Ze(te,oe,Xe,it,null);zd(te,Xe)}return null}function rt(oe,te,ce,Xe){for(var it=null,Rt=null,Mt=te,zt=te=0,Vn=null;Mt!==null&&zt<ce.length;zt++){Mt.index>zt?(Vn=Mt,Mt=null):Vn=Mt.sibling;var Gt=pt(oe,Mt,ce[zt],Xe);if(Gt===null){Mt===null&&(Mt=Vn);break}c&&Mt&&Gt.alternate===null&&f(oe,Mt),te=C(Gt,te,zt),Rt===null?it=Gt:Rt.sibling=Gt,Rt=Gt,Mt=Vn}if(zt===ce.length)return v(oe,Mt),an&&ya(oe,zt),it;if(Mt===null){for(;zt<ce.length;zt++)Mt=St(oe,ce[zt],Xe),Mt!==null&&(te=C(Mt,te,zt),Rt===null?it=Mt:Rt.sibling=Mt,Rt=Mt);return an&&ya(oe,zt),it}for(Mt=S(oe,Mt);zt<ce.length;zt++)Vn=Kt(Mt,oe,zt,ce[zt],Xe),Vn!==null&&(c&&Vn.alternate!==null&&Mt.delete(Vn.key===null?zt:Vn.key),te=C(Vn,te,zt),Rt===null?it=Vn:Rt.sibling=Vn,Rt=Vn);return c&&Mt.forEach(function(So){return f(oe,So)}),an&&ya(oe,zt),it}function si(oe,te,ce,Xe){var it=b(ce);if(typeof it!="function")throw Error(o(150));if(ce=it.call(ce),ce==null)throw Error(o(151));for(var Rt=it=null,Mt=te,zt=te=0,Vn=null,Gt=ce.next();Mt!==null&&!Gt.done;zt++,Gt=ce.next()){Mt.index>zt?(Vn=Mt,Mt=null):Vn=Mt.sibling;var So=pt(oe,Mt,Gt.value,Xe);if(So===null){Mt===null&&(Mt=Vn);break}c&&Mt&&So.alternate===null&&f(oe,Mt),te=C(So,te,zt),Rt===null?it=So:Rt.sibling=So,Rt=So,Mt=Vn}if(Gt.done)return v(oe,Mt),an&&ya(oe,zt),it;if(Mt===null){for(;!Gt.done;zt++,Gt=ce.next())Gt=St(oe,Gt.value,Xe),Gt!==null&&(te=C(Gt,te,zt),Rt===null?it=Gt:Rt.sibling=Gt,Rt=Gt);return an&&ya(oe,zt),it}for(Mt=S(oe,Mt);!Gt.done;zt++,Gt=ce.next())Gt=Kt(Mt,oe,zt,Gt.value,Xe),Gt!==null&&(c&&Gt.alternate!==null&&Mt.delete(Gt.key===null?zt:Gt.key),te=C(Gt,te,zt),Rt===null?it=Gt:Rt.sibling=Gt,Rt=Gt);return c&&Mt.forEach(function(rF){return f(oe,rF)}),an&&ya(oe,zt),it}function vr(oe,te,ce,Xe){if(typeof ce=="object"&&ce!==null&&ce.type===h&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:e:{for(var it=ce.key,Rt=te;Rt!==null;){if(Rt.key===it){if(it=ce.type,it===h){if(Rt.tag===7){v(oe,Rt.sibling),te=E(Rt,ce.props.children),te.return=oe,oe=te;break e}}else if(Rt.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===M&&rw(it)===Rt.type){v(oe,Rt.sibling),te=E(Rt,ce.props),te.ref=zu(oe,Rt,ce),te.return=oe,oe=te;break e}v(oe,Rt);break}else f(oe,Rt);Rt=Rt.sibling}ce.type===h?(te=Ea(ce.props.children,oe.mode,Xe,ce.key),te.return=oe,oe=te):(Xe=yp(ce.type,ce.key,ce.props,null,oe.mode,Xe),Xe.ref=zu(oe,te,ce),Xe.return=oe,oe=Xe)}return k(oe);case u:e:{for(Rt=ce.key;te!==null;){if(te.key===Rt)if(te.tag===4&&te.stateNode.containerInfo===ce.containerInfo&&te.stateNode.implementation===ce.implementation){v(oe,te.sibling),te=E(te,ce.children||[]),te.return=oe,oe=te;break e}else{v(oe,te);break}else f(oe,te);te=te.sibling}te=ky(ce,oe.mode,Xe),te.return=oe,oe=te}return k(oe);case M:return Rt=ce._init,vr(oe,te,Rt(ce._payload),Xe)}if(Y(ce))return rt(oe,te,ce,Xe);if(b(ce))return si(oe,te,ce,Xe);zd(oe,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,te!==null&&te.tag===6?(v(oe,te.sibling),te=E(te,ce),te.return=oe,oe=te):(v(oe,te),te=Uy(ce,oe.mode,Xe),te.return=oe,oe=te),k(oe)):v(oe,te)}return vr}var Kl=sw(!0),ow=sw(!1),Gu={},dr=gn(Gu),Vu=gn(Gu),Yl=gn(Gu);function ds(c){if(c===Gu)throw Error(o(174));return c}function ny(c,f){Fe(Yl,f),Fe(Vu,c),Fe(dr,Gu),c=z(f),ot(dr),Fe(dr,c)}function Ql(){ot(dr),ot(Vu),ot(Yl)}function aw(c){var f=ds(Yl.current),v=ds(dr.current);f=B(v,c.type,f),v!==f&&(Fe(Vu,c),Fe(dr,f))}function iy(c){Vu.current===c&&(ot(dr),ot(Vu))}var un=gn(0);function Gd(c){for(var f=c;f!==null;){if(f.tag===13){var v=f.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Fu(v)||Ul(v)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var ry=[];function sy(){for(var c=0;c<ry.length;c++){var f=ry[c];Ke?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}ry.length=0}var Vd=a.ReactCurrentDispatcher,pr=a.ReactCurrentBatchConfig,Zl=0,vn=null,ni=null,Gn=null,Wd=!1,Wu=!1,ju=0,RN=0;function ii(){throw Error(o(321))}function oy(c,f){if(f===null)return!1;for(var v=0;v<f.length&&v<c.length;v++)if(!us(c[v],f[v]))return!1;return!0}function ay(c,f,v,S,E,C){if(Zl=C,vn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Vd.current=c===null||c.memoizedState===null?DN:LN,c=v(S,E),Wu){C=0;do{if(Wu=!1,ju=0,25<=C)throw Error(o(301));C+=1,Gn=ni=null,f.updateQueue=null,Vd.current=NN,c=v(S,E)}while(Wu)}if(Vd.current=Yd,f=ni!==null&&ni.next!==null,Zl=0,Gn=ni=vn=null,Wd=!1,f)throw Error(o(300));return c}function ly(){var c=ju!==0;return ju=0,c}function Is(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?vn.memoizedState=Gn=c:Gn=Gn.next=c,Gn}function ps(){if(ni===null){var c=vn.alternate;c=c!==null?c.memoizedState:null}else c=ni.next;var f=Gn===null?vn.memoizedState:Gn.next;if(f!==null)Gn=f,ni=c;else{if(c===null)throw Error(o(310));ni=c,c={memoizedState:ni.memoizedState,baseState:ni.baseState,baseQueue:ni.baseQueue,queue:ni.queue,next:null},Gn===null?vn.memoizedState=Gn=c:Gn=Gn.next=c}return Gn}function xa(c,f){return typeof f=="function"?f(c):f}function jd(c){var f=ps(),v=f.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=c;var S=ni,E=S.baseQueue,C=v.pending;if(C!==null){if(E!==null){var k=E.next;E.next=C.next,C.next=k}S.baseQueue=E=C,v.pending=null}if(E!==null){C=E.next,S=S.baseState;var $=k=null,fe=null,Be=C;do{var Ze=Be.lane;if((Zl&Ze)===Ze)fe!==null&&(fe=fe.next={lane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),S=Be.hasEagerState?Be.eagerState:c(S,Be.action);else{var St={lane:Ze,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};fe===null?($=fe=St,k=S):fe=fe.next=St,vn.lanes|=Ze,$l|=Ze}Be=Be.next}while(Be!==null&&Be!==C);fe===null?k=S:fe.next=$,us(S,f.memoizedState)||(Ji=!0),f.memoizedState=S,f.baseState=k,f.baseQueue=fe,v.lastRenderedState=S}if(c=v.interleaved,c!==null){E=c;do C=E.lane,vn.lanes|=C,$l|=C,E=E.next;while(E!==c)}else E===null&&(v.lanes=0);return[f.memoizedState,v.dispatch]}function Xd(c){var f=ps(),v=f.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=c;var S=v.dispatch,E=v.pending,C=f.memoizedState;if(E!==null){v.pending=null;var k=E=E.next;do C=c(C,k.action),k=k.next;while(k!==E);us(C,f.memoizedState)||(Ji=!0),f.memoizedState=C,f.baseQueue===null&&(f.baseState=C),v.lastRenderedState=C}return[C,S]}function lw(){}function cw(c,f){var v=vn,S=ps(),E=f(),C=!us(S.memoizedState,E);if(C&&(S.memoizedState=E,Ji=!0),S=S.queue,Ju(hw.bind(null,v,S,c),[c]),S.getSnapshot!==f||C||Gn!==null&&Gn.memoizedState.tag&1){if(v.flags|=2048,Xu(9,fw.bind(null,v,S,E,f),void 0,null),bn===null)throw Error(o(349));Zl&30||uw(v,f,E)}return E}function uw(c,f,v){c.flags|=16384,c={getSnapshot:f,value:v},f=vn.updateQueue,f===null?(f={lastEffect:null,stores:null},vn.updateQueue=f,f.stores=[c]):(v=f.stores,v===null?f.stores=[c]:v.push(c))}function fw(c,f,v,S){f.value=v,f.getSnapshot=S,dw(f)&&mr(c,1,-1)}function hw(c,f,v){return v(function(){dw(f)&&mr(c,1,-1)})}function dw(c){var f=c.getSnapshot;c=c.value;try{var v=f();return!us(c,v)}catch{return!0}}function cy(c){var f=Is();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:c},f.queue=c,c=c.dispatch=IN.bind(null,vn,c),[f.memoizedState,c]}function Xu(c,f,v,S){return c={tag:c,create:f,destroy:v,deps:S,next:null},f=vn.updateQueue,f===null?(f={lastEffect:null,stores:null},vn.updateQueue=f,f.lastEffect=c.next=c):(v=f.lastEffect,v===null?f.lastEffect=c.next=c:(S=v.next,v.next=c,c.next=S,f.lastEffect=c)),c}function pw(){return ps().memoizedState}function Jd(c,f,v,S){var E=Is();vn.flags|=c,E.memoizedState=Xu(1|f,v,void 0,S===void 0?null:S)}function Kd(c,f,v,S){var E=ps();S=S===void 0?null:S;var C=void 0;if(ni!==null){var k=ni.memoizedState;if(C=k.destroy,S!==null&&oy(S,k.deps)){E.memoizedState=Xu(f,v,C,S);return}}vn.flags|=c,E.memoizedState=Xu(1|f,v,C,S)}function uy(c,f){return Jd(8390656,8,c,f)}function Ju(c,f){return Kd(2048,8,c,f)}function mw(c,f){return Kd(4,2,c,f)}function gw(c,f){return Kd(4,4,c,f)}function vw(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function yw(c,f,v){return v=v!=null?v.concat([c]):null,Kd(4,4,vw.bind(null,f,c),v)}function fy(){}function xw(c,f){var v=ps();f=f===void 0?null:f;var S=v.memoizedState;return S!==null&&f!==null&&oy(f,S[1])?S[0]:(v.memoizedState=[c,f],c)}function _w(c,f){var v=ps();f=f===void 0?null:f;var S=v.memoizedState;return S!==null&&f!==null&&oy(f,S[1])?S[0]:(c=c(),v.memoizedState=[c,f],c)}function PN(c,f){var v=Ht;Ht=v!==0&&4>v?v:4,c(!0);var S=pr.transition;pr.transition={};try{c(!1),f()}finally{Ht=v,pr.transition=S}}function Aw(){return ps().memoizedState}function BN(c,f,v){var S=xo(c);v={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null},Sw(c)?Mw(f,v):(ww(c,f,v),v=Mi(),c=mr(c,S,v),c!==null&&Ew(c,f,S))}function IN(c,f,v){var S=xo(c),E={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null};if(Sw(c))Mw(f,E);else{ww(c,f,E);var C=c.alternate;if(c.lanes===0&&(C===null||C.lanes===0)&&(C=f.lastRenderedReducer,C!==null))try{var k=f.lastRenderedState,$=C(k,v);if(E.hasEagerState=!0,E.eagerState=$,us($,k))return}catch{}finally{}v=Mi(),c=mr(c,S,v),c!==null&&Ew(c,f,S)}}function Sw(c){var f=c.alternate;return c===vn||f!==null&&f===vn}function Mw(c,f){Wu=Wd=!0;var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}function ww(c,f,v){bn!==null&&c.mode&1&&!(Pt&2)?(c=f.interleaved,c===null?(v.next=v,hs===null?hs=[f]:hs.push(f)):(v.next=c.next,c.next=v),f.interleaved=v):(c=f.pending,c===null?v.next=v:(v.next=c.next,c.next=v),f.pending=v)}function Ew(c,f,v){if(v&4194240){var S=f.lanes;S&=c.pendingLanes,v|=S,f.lanes=v,kv(c,v)}}var Yd={readContext:ur,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},DN={readContext:ur,useCallback:function(c,f){return Is().memoizedState=[c,f===void 0?null:f],c},useContext:ur,useEffect:uy,useImperativeHandle:function(c,f,v){return v=v!=null?v.concat([c]):null,Jd(4194308,4,vw.bind(null,f,c),v)},useLayoutEffect:function(c,f){return Jd(4194308,4,c,f)},useInsertionEffect:function(c,f){return Jd(4,2,c,f)},useMemo:function(c,f){var v=Is();return f=f===void 0?null:f,c=c(),v.memoizedState=[c,f],c},useReducer:function(c,f,v){var S=Is();return f=v!==void 0?v(f):f,S.memoizedState=S.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},S.queue=c,c=c.dispatch=BN.bind(null,vn,c),[S.memoizedState,c]},useRef:function(c){var f=Is();return c={current:c},f.memoizedState=c},useState:cy,useDebugValue:fy,useDeferredValue:function(c){var f=cy(c),v=f[0],S=f[1];return uy(function(){var E=pr.transition;pr.transition={};try{S(c)}finally{pr.transition=E}},[c]),v},useTransition:function(){var c=cy(!1),f=c[0];return c=PN.bind(null,c[1]),Is().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,v){var S=vn,E=Is();if(an){if(v===void 0)throw Error(o(407));v=v()}else{if(v=f(),bn===null)throw Error(o(349));Zl&30||uw(S,f,v)}E.memoizedState=v;var C={value:v,getSnapshot:f};return E.queue=C,uy(hw.bind(null,S,C,c),[c]),S.flags|=2048,Xu(9,fw.bind(null,S,C,v,f),void 0,null),v},useId:function(){var c=Is(),f=bn.identifierPrefix;if(an){var v=Bs,S=Ps;v=(S&~(1<<32-Wi(S)-1)).toString(32)+v,f=":"+f+"R"+v,v=ju++,0<v&&(f+="H"+v.toString(32)),f+=":"}else v=RN++,f=":"+f+"r"+v.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},LN={readContext:ur,useCallback:xw,useContext:ur,useEffect:Ju,useImperativeHandle:yw,useInsertionEffect:mw,useLayoutEffect:gw,useMemo:_w,useReducer:jd,useRef:pw,useState:function(){return jd(xa)},useDebugValue:fy,useDeferredValue:function(c){var f=jd(xa),v=f[0],S=f[1];return Ju(function(){var E=pr.transition;pr.transition={};try{S(c)}finally{pr.transition=E}},[c]),v},useTransition:function(){var c=jd(xa)[0],f=ps().memoizedState;return[c,f]},useMutableSource:lw,useSyncExternalStore:cw,useId:Aw,unstable_isNewReconciler:!1},NN={readContext:ur,useCallback:xw,useContext:ur,useEffect:Ju,useImperativeHandle:yw,useInsertionEffect:mw,useLayoutEffect:gw,useMemo:_w,useReducer:Xd,useRef:pw,useState:function(){return Xd(xa)},useDebugValue:fy,useDeferredValue:function(c){var f=Xd(xa),v=f[0],S=f[1];return Ju(function(){var E=pr.transition;pr.transition={};try{S(c)}finally{pr.transition=E}},[c]),v},useTransition:function(){var c=Xd(xa)[0],f=ps().memoizedState;return[c,f]},useMutableSource:lw,useSyncExternalStore:cw,useId:Aw,unstable_isNewReconciler:!1};function hy(c,f){try{var v="",S=f;do v+=bN(S),S=S.return;while(S);var E=v}catch(C){E=`
Error generating stack: `+C.message+`
`+C.stack}return{value:c,source:f,stack:E}}function dy(c,f){try{console.error(f.value)}catch(v){setTimeout(function(){throw v})}}var FN=typeof WeakMap=="function"?WeakMap:Map;function Cw(c,f,v){v=Rs(-1,v),v.tag=3,v.payload={element:null};var S=f.value;return v.callback=function(){fp||(fp=!0,By=S),dy(c,f)},v}function Tw(c,f,v){v=Rs(-1,v),v.tag=3;var S=c.type.getDerivedStateFromError;if(typeof S=="function"){var E=f.value;v.payload=function(){return S(E)},v.callback=function(){dy(c,f)}}var C=c.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(v.callback=function(){dy(c,f),typeof S!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var k=f.stack;this.componentDidCatch(f.value,{componentStack:k!==null?k:""})}),v}function bw(c,f,v){var S=c.pingCache;if(S===null){S=c.pingCache=new FN;var E=new Set;S.set(f,E)}else E=S.get(f),E===void 0&&(E=new Set,S.set(f,E));E.has(v)||(E.add(v),c=QN.bind(null,c,f,v),f.then(c,c))}function Rw(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function Pw(c,f,v,S,E){return c.mode&1?(c.flags|=65536,c.lanes=E,c):(c===f?c.flags|=65536:(c.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(f=Rs(-1,1),f.tag=2,go(v,f))),v.lanes|=1),c)}function ms(c){c.flags|=4}function Bw(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var Ku,Yu,Qd,Zd;if(He)Ku=function(c,f){for(var v=f.child;v!==null;){if(v.tag===5||v.tag===6)ue(c,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===f)break;for(;v.sibling===null;){if(v.return===null||v.return===f)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Yu=function(){},Qd=function(c,f,v,S,E){if(c=c.memoizedProps,c!==S){var C=f.stateNode,k=ds(dr.current);v=re(C,v,c,S,E,k),(f.updateQueue=v)&&ms(f)}},Zd=function(c,f,v,S){v!==S&&ms(f)};else if(O){Ku=function(c,f,v,S){for(var E=f.child;E!==null;){if(E.tag===5){var C=E.stateNode;v&&S&&(C=ct(C,E.type,E.memoizedProps,E)),ue(c,C)}else if(E.tag===6)C=E.stateNode,v&&S&&(C=Lt(C,E.memoizedProps,E)),ue(c,C);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)C=E.child,C!==null&&(C.return=E),Ku(c,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var Iw=function(c,f,v,S){for(var E=f.child;E!==null;){if(E.tag===5){var C=E.stateNode;v&&S&&(C=ct(C,E.type,E.memoizedProps,E)),Dt(c,C)}else if(E.tag===6)C=E.stateNode,v&&S&&(C=Lt(C,E.memoizedProps,E)),Dt(c,C);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)C=E.child,C!==null&&(C.return=E),Iw(c,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===f)break;for(;E.sibling===null;){if(E.return===null||E.return===f)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Yu=function(c,f){var v=f.stateNode;if(!Bw(c,f)){c=v.containerInfo;var S=yt(c);Iw(S,f,!1,!1),v.pendingChildren=S,ms(f),st(c,S)}},Qd=function(c,f,v,S,E){var C=c.stateNode,k=c.memoizedProps;if((c=Bw(c,f))&&k===S)f.stateNode=C;else{var $=f.stateNode,fe=ds(dr.current),Be=null;k!==S&&(Be=re($,v,k,S,E,fe)),c&&Be===null?f.stateNode=C:(C=at(C,Be,v,k,S,f,c,$),be(C,v,S,E,fe)&&ms(f),f.stateNode=C,c?ms(f):Ku(C,f,!1,!1))}},Zd=function(c,f,v,S){v!==S?(c=ds(Yl.current),v=ds(dr.current),f.stateNode=we(S,c,v,f),ms(f)):f.stateNode=c.stateNode}}else Yu=function(){},Qd=function(){},Zd=function(){};function Qu(c,f){if(!an)switch(c.tailMode){case"hidden":f=c.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:S.sibling=null}}function ri(c){var f=c.alternate!==null&&c.alternate.child===c.child,v=0,S=0;if(f)for(var E=c.child;E!==null;)v|=E.lanes|E.childLanes,S|=E.subtreeFlags&14680064,S|=E.flags&14680064,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)v|=E.lanes|E.childLanes,S|=E.subtreeFlags,S|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=S,c.childLanes=v,f}function ON(c,f,v){var S=f.pendingProps;switch(qv(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(f),null;case 1:return Hn(f.type)&&tn(),ri(f),null;case 3:return S=f.stateNode,Ql(),ot(Zt),ot(xt),sy(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(c===null||c.child===null)&&(Hu(f)?ms(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Ur!==null&&(Ly(Ur),Ur=null))),Yu(c,f),ri(f),null;case 5:iy(f),v=ds(Yl.current);var E=f.type;if(c!==null&&f.stateNode!=null)Qd(c,f,E,S,v),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!S){if(f.stateNode===null)throw Error(o(166));return ri(f),null}if(c=ds(dr.current),Hu(f)){if(!ye)throw Error(o(175));c=Lv(f.stateNode,f.type,f.memoizedProps,v,c,f,!ku),f.updateQueue=c,c!==null&&ms(f)}else{var C=q(E,S,v,c,f);Ku(C,f,!1,!1),f.stateNode=C,be(C,E,S,v,c)&&ms(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return ri(f),null;case 6:if(c&&f.stateNode!=null)Zd(c,f,c.memoizedProps,S);else{if(typeof S!="string"&&f.stateNode===null)throw Error(o(166));if(c=ds(Yl.current),v=ds(dr.current),Hu(f)){if(!ye)throw Error(o(176));if(c=f.stateNode,S=f.memoizedProps,(v=Nv(c,S,f,!ku))&&(E=ji,E!==null))switch(C=(E.mode&1)!==0,E.tag){case 3:Je(E.stateNode.containerInfo,c,S,C);break;case 5:et(E.type,E.memoizedProps,E.stateNode,c,S,C)}v&&ms(f)}else f.stateNode=we(S,c,v,f)}return ri(f),null;case 13:if(ot(un),S=f.memoizedState,an&&Xi!==null&&f.mode&1&&!(f.flags&128)){for(c=Xi;c;)c=po(c);return Jl(),f.flags|=98560,f}if(S!==null&&S.dehydrated!==null){if(S=Hu(f),c===null){if(!S)throw Error(o(318));if(!ye)throw Error(o(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Fv(c,f)}else Jl(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return ri(f),null}return Ur!==null&&(Ly(Ur),Ur=null),f.flags&128?(f.lanes=v,f):(S=S!==null,v=!1,c===null?Hu(f):v=c.memoizedState!==null,S&&!v&&(f.child.flags|=8192,f.mode&1&&(c===null||un.current&1?Dn===0&&(Dn=3):Fy())),f.updateQueue!==null&&(f.flags|=4),ri(f),null);case 4:return Ql(),Yu(c,f),c===null&&Ie(f.stateNode.containerInfo),ri(f),null;case 10:return Xv(f.type._context),ri(f),null;case 17:return Hn(f.type)&&tn(),ri(f),null;case 19:if(ot(un),E=f.memoizedState,E===null)return ri(f),null;if(S=(f.flags&128)!==0,C=E.rendering,C===null)if(S)Qu(E,!1);else{if(Dn!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(C=Gd(c),C!==null){for(f.flags|=128,Qu(E,!1),c=C.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=v,S=f.child;S!==null;)v=S,E=c,v.flags&=14680066,C=v.alternate,C===null?(v.childLanes=0,v.lanes=E,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=C.childLanes,v.lanes=C.lanes,v.child=C.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=C.memoizedProps,v.memoizedState=C.memoizedState,v.updateQueue=C.updateQueue,v.type=C.type,E=C.dependencies,v.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),S=S.sibling;return Fe(un,un.current&1|2),f.child}c=c.sibling}E.tail!==null&&zn()>Py&&(f.flags|=128,S=!0,Qu(E,!1),f.lanes=4194304)}else{if(!S)if(c=Gd(C),c!==null){if(f.flags|=128,S=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),Qu(E,!0),E.tail===null&&E.tailMode==="hidden"&&!C.alternate&&!an)return ri(f),null}else 2*zn()-E.renderingStartTime>Py&&v!==1073741824&&(f.flags|=128,S=!0,Qu(E,!1),f.lanes=4194304);E.isBackwards?(C.sibling=f.child,f.child=C):(c=E.last,c!==null?c.sibling=C:f.child=C,E.last=C)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=zn(),f.sibling=null,c=un.current,Fe(un,S?c&1|2:c&1),f):(ri(f),null);case 22:case 23:return Ny(),S=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==S&&(f.flags|=8192),S&&f.mode&1?Ki&1073741824&&(ri(f),He&&f.subtreeFlags&6&&(f.flags|=8192)):ri(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var UN=a.ReactCurrentOwner,Ji=!1;function Si(c,f,v,S){f.child=c===null?ow(f,null,v,S):Kl(f,c.child,v,S)}function Dw(c,f,v,S,E){v=v.render;var C=f.ref;return Wl(f,E),S=ay(c,f,v,S,C,E),v=ly(),c!==null&&!Ji?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~E,Ds(c,f,E)):(an&&v&&Zv(f),f.flags|=1,Si(c,f,S,E),f.child)}function Lw(c,f,v,S,E){if(c===null){var C=v.type;return typeof C=="function"&&!Oy(C)&&C.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(f.tag=15,f.type=C,Nw(c,f,C,S,E)):(c=yp(v.type,null,S,f,f.mode,E),c.ref=f.ref,c.return=f,f.child=c)}if(C=c.child,!(c.lanes&E)){var k=C.memoizedProps;if(v=v.compare,v=v!==null?v:Dd,v(k,S)&&c.ref===f.ref)return Ds(c,f,E)}return f.flags|=1,c=Ao(C,S),c.ref=f.ref,c.return=f,f.child=c}function Nw(c,f,v,S,E){if(c!==null&&Dd(c.memoizedProps,S)&&c.ref===f.ref)if(Ji=!1,(c.lanes&E)!==0)c.flags&131072&&(Ji=!0);else return f.lanes=c.lanes,Ds(c,f,E);return py(c,f,v,S,E)}function Fw(c,f,v){var S=f.pendingProps,E=S.children,C=c!==null?c.memoizedState:null;if(S.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},Fe(ql,Ki),Ki|=v;else if(v&1073741824)f.memoizedState={baseLanes:0,cachePool:null},S=C!==null?C.baseLanes:v,Fe(ql,Ki),Ki|=S;else return c=C!==null?C.baseLanes|v:v,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,Fe(ql,Ki),Ki|=c,null;else C!==null?(S=C.baseLanes|v,f.memoizedState=null):S=v,Fe(ql,Ki),Ki|=S;return Si(c,f,E,v),f.child}function Ow(c,f){var v=f.ref;(c===null&&v!==null||c!==null&&c.ref!==v)&&(f.flags|=512,f.flags|=2097152)}function py(c,f,v,S,E){var C=Hn(v)?Di:xt.current;return C=Tn(f,C),Wl(f,E),v=ay(c,f,v,S,C,E),S=ly(),c!==null&&!Ji?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~E,Ds(c,f,E)):(an&&S&&Zv(f),f.flags|=1,Si(c,f,v,E),f.child)}function Uw(c,f,v,S,E){if(Hn(v)){var C=!0;Kn(f)}else C=!1;if(Wl(f,E),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),qM(f,v,S),Qv(f,v,S,E),S=!0;else if(c===null){var k=f.stateNode,$=f.memoizedProps;k.props=$;var fe=k.context,Be=v.contextType;typeof Be=="object"&&Be!==null?Be=ur(Be):(Be=Hn(v)?Di:xt.current,Be=Tn(f,Be));var Ze=v.getDerivedStateFromProps,St=typeof Ze=="function"||typeof k.getSnapshotBeforeUpdate=="function";St||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||($!==S||fe!==Be)&&$M(f,k,S,Be),mo=!1;var pt=f.memoizedState;k.state=pt,Od(f,S,k,E),fe=f.memoizedState,$!==S||pt!==fe||Zt.current||mo?(typeof Ze=="function"&&(Yv(f,v,Ze,S),fe=f.memoizedState),($=mo||ZM(f,v,$,S,pt,fe,Be))?(St||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(f.flags|=4194308)):(typeof k.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=fe),k.props=S,k.state=fe,k.context=Be,S=$):(typeof k.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{k=f.stateNode,JM(c,f),$=f.memoizedProps,Be=f.type===f.elementType?$:Or(f.type,$),k.props=Be,St=f.pendingProps,pt=k.context,fe=v.contextType,typeof fe=="object"&&fe!==null?fe=ur(fe):(fe=Hn(v)?Di:xt.current,fe=Tn(f,fe));var Kt=v.getDerivedStateFromProps;(Ze=typeof Kt=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||($!==St||pt!==fe)&&$M(f,k,S,fe),mo=!1,pt=f.memoizedState,k.state=pt,Od(f,S,k,E);var rt=f.memoizedState;$!==St||pt!==rt||Zt.current||mo?(typeof Kt=="function"&&(Yv(f,v,Kt,S),rt=f.memoizedState),(Be=mo||ZM(f,v,Be,S,pt,rt,fe)||!1)?(Ze||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(S,rt,fe),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(S,rt,fe)),typeof k.componentDidUpdate=="function"&&(f.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof k.componentDidUpdate!="function"||$===c.memoizedProps&&pt===c.memoizedState||(f.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||$===c.memoizedProps&&pt===c.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=rt),k.props=S,k.state=rt,k.context=fe,S=Be):(typeof k.componentDidUpdate!="function"||$===c.memoizedProps&&pt===c.memoizedState||(f.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||$===c.memoizedProps&&pt===c.memoizedState||(f.flags|=1024),S=!1)}return my(c,f,v,S,C,E)}function my(c,f,v,S,E,C){Ow(c,f);var k=(f.flags&128)!==0;if(!S&&!k)return E&&Gl(f,v,!1),Ds(c,f,C);S=f.stateNode,UN.current=f;var $=k&&typeof v.getDerivedStateFromError!="function"?null:S.render();return f.flags|=1,c!==null&&k?(f.child=Kl(f,c.child,null,C),f.child=Kl(f,null,$,C)):Si(c,f,$,C),f.memoizedState=S.state,E&&Gl(f,v,!0),f.child}function kw(c){var f=c.stateNode;f.pendingContext?Fr(c,f.pendingContext,f.pendingContext!==f.context):f.context&&Fr(c,f.context,!1),ny(c,f.containerInfo)}function Hw(c,f,v,S,E){return Jl(),ty(E),f.flags|=256,Si(c,f,v,S),f.child}var qd={dehydrated:null,treeContext:null,retryLane:0};function $d(c){return{baseLanes:c,cachePool:null}}function zw(c,f,v){var S=f.pendingProps,E=un.current,C=!1,k=(f.flags&128)!==0,$;if(($=k)||($=c!==null&&c.memoizedState===null?!1:(E&2)!==0),$?(C=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(E|=1),Fe(un,E&1),c===null)return ey(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?Ul(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(E=S.children,c=S.fallback,C?(S=f.mode,C=f.child,E={mode:"hidden",children:E},!(S&1)&&C!==null?(C.childLanes=0,C.pendingProps=E):C=xp(E,S,0,null),c=Ea(c,S,v,null),C.return=f,c.return=f,C.sibling=c,f.child=C,f.child.memoizedState=$d(v),f.memoizedState=qd,c):gy(f,E));if(E=c.memoizedState,E!==null){if($=E.dehydrated,$!==null){if(k)return f.flags&256?(f.flags&=-257,ep(c,f,v,Error(o(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(C=S.fallback,E=f.mode,S=xp({mode:"visible",children:S.children},E,0,null),C=Ea(C,E,v,null),C.flags|=2,S.return=f,C.return=f,S.sibling=C,f.child=S,f.mode&1&&Kl(f,c.child,null,v),f.child.memoizedState=$d(v),f.memoizedState=qd,C);if(!(f.mode&1))f=ep(c,f,v,null);else if(Ul($))f=ep(c,f,v,Error(o(419)));else if(S=(v&c.childLanes)!==0,Ji||S){if(S=bn,S!==null){switch(v&-v){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}S=C&(S.suspendedLanes|v)?0:C,S!==0&&S!==E.retryLane&&(E.retryLane=S,mr(c,S,-1))}Fy(),f=ep(c,f,v,Error(o(421)))}else Fu($)?(f.flags|=128,f.child=c.child,f=ZN.bind(null,c),kl($,f),f=null):(v=E.treeContext,ye&&(Xi=Cd($),ji=f,an=!0,Ur=null,ku=!1,v!==null&&(fr[hr++]=Ps,fr[hr++]=Bs,fr[hr++]=va,Ps=v.id,Bs=v.overflow,va=f)),f=gy(f,f.pendingProps.children),f.flags|=4096);return f}return C?(S=Vw(c,f,S.children,S.fallback,v),C=f.child,E=c.child.memoizedState,C.memoizedState=E===null?$d(v):{baseLanes:E.baseLanes|v,cachePool:null},C.childLanes=c.childLanes&~v,f.memoizedState=qd,S):(v=Gw(c,f,S.children,v),f.memoizedState=null,v)}return C?(S=Vw(c,f,S.children,S.fallback,v),C=f.child,E=c.child.memoizedState,C.memoizedState=E===null?$d(v):{baseLanes:E.baseLanes|v,cachePool:null},C.childLanes=c.childLanes&~v,f.memoizedState=qd,S):(v=Gw(c,f,S.children,v),f.memoizedState=null,v)}function gy(c,f){return f=xp({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function Gw(c,f,v,S){var E=c.child;return c=E.sibling,v=Ao(E,{mode:"visible",children:v}),!(f.mode&1)&&(v.lanes=S),v.return=f,v.sibling=null,c!==null&&(S=f.deletions,S===null?(f.deletions=[c],f.flags|=16):S.push(c)),f.child=v}function Vw(c,f,v,S,E){var C=f.mode;c=c.child;var k=c.sibling,$={mode:"hidden",children:v};return!(C&1)&&f.child!==c?(v=f.child,v.childLanes=0,v.pendingProps=$,f.deletions=null):(v=Ao(c,$),v.subtreeFlags=c.subtreeFlags&14680064),k!==null?S=Ao(k,S):(S=Ea(S,C,E,null),S.flags|=2),S.return=f,v.return=f,v.sibling=S,f.child=v,S}function ep(c,f,v,S){return S!==null&&ty(S),Kl(f,c.child,null,v),c=gy(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function Ww(c,f,v){c.lanes|=f;var S=c.alternate;S!==null&&(S.lanes|=f),Jv(c.return,f,v)}function vy(c,f,v,S,E){var C=c.memoizedState;C===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:v,tailMode:E}:(C.isBackwards=f,C.rendering=null,C.renderingStartTime=0,C.last=S,C.tail=v,C.tailMode=E)}function jw(c,f,v){var S=f.pendingProps,E=S.revealOrder,C=S.tail;if(Si(c,f,S.children,v),S=un.current,S&2)S=S&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Ww(c,v,f);else if(c.tag===19)Ww(c,v,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}S&=1}if(Fe(un,S),!(f.mode&1))f.memoizedState=null;else switch(E){case"forwards":for(v=f.child,E=null;v!==null;)c=v.alternate,c!==null&&Gd(c)===null&&(E=v),v=v.sibling;v=E,v===null?(E=f.child,f.child=null):(E=v.sibling,v.sibling=null),vy(f,!1,E,v,C);break;case"backwards":for(v=null,E=f.child,f.child=null;E!==null;){if(c=E.alternate,c!==null&&Gd(c)===null){f.child=E;break}c=E.sibling,E.sibling=v,v=E,E=c}vy(f,!0,v,null,C);break;case"together":vy(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Ds(c,f,v){if(c!==null&&(f.dependencies=c.dependencies),$l|=f.lanes,!(v&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(o(153));if(f.child!==null){for(c=f.child,v=Ao(c,c.pendingProps),f.child=v,v.return=f;c.sibling!==null;)c=c.sibling,v=v.sibling=Ao(c,c.pendingProps),v.return=f;v.sibling=null}return f.child}function kN(c,f,v){switch(f.tag){case 3:kw(f),Jl();break;case 5:aw(f);break;case 1:Hn(f.type)&&Kn(f);break;case 4:ny(f,f.stateNode.containerInfo);break;case 10:XM(f,f.type._context,f.memoizedProps.value);break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(Fe(un,un.current&1),f.flags|=128,null):v&f.child.childLanes?zw(c,f,v):(Fe(un,un.current&1),c=Ds(c,f,v),c!==null?c.sibling:null);Fe(un,un.current&1);break;case 19:if(S=(v&f.childLanes)!==0,c.flags&128){if(S)return jw(c,f,v);f.flags|=128}var E=f.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Fe(un,un.current),S)break;return null;case 22:case 23:return f.lanes=0,Fw(c,f,v)}return Ds(c,f,v)}function HN(c,f){switch(qv(f),f.tag){case 1:return Hn(f.type)&&tn(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Ql(),ot(Zt),ot(xt),sy(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return iy(f),null;case 13:if(ot(un),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(o(340));Jl()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return ot(un),null;case 4:return Ql(),null;case 10:return Xv(f.type._context),null;case 22:case 23:return Ny(),null;case 24:return null;default:return null}}var tp=!1,_a=!1,zN=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function np(c,f){var v=c.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(S){Fi(c,f,S)}else v.current=null}function yy(c,f,v){try{v()}catch(S){Fi(c,f,S)}}var Xw=!1;function GN(c,f){for(G(c.containerInfo),Ve=f;Ve!==null;)if(c=Ve,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,Ve=f;else for(;Ve!==null;){c=Ve;try{var v=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,E=v.memoizedState,C=c.stateNode,k=C.getSnapshotBeforeUpdate(c.elementType===c.type?S:Or(c.type,S),E);C.__reactInternalSnapshotBeforeUpdate=k}break;case 3:He&&Ne(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch($){Fi(c,c.return,$)}if(f=c.sibling,f!==null){f.return=c.return,Ve=f;break}Ve=c.return}return v=Xw,Xw=!1,v}function Aa(c,f,v){var S=f.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var E=S=S.next;do{if((E.tag&c)===c){var C=E.destroy;E.destroy=void 0,C!==void 0&&yy(f,v,C)}E=E.next}while(E!==S)}}function Zu(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var v=f=f.next;do{if((v.tag&c)===c){var S=v.create;v.destroy=S()}v=v.next}while(v!==f)}}function xy(c){var f=c.ref;if(f!==null){var v=c.stateNode;switch(c.tag){case 5:c=Z(v);break;default:c=v}typeof f=="function"?f(c):f.current=c}}function Jw(c,f,v){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(Bd,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var S=c=c.next;do{var E=S,C=E.destroy;E=E.tag,C!==void 0&&(E&2||E&4)&&yy(f,v,C),S=S.next}while(S!==c)}break;case 1:if(np(f,v),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(k){Fi(f,v,k)}break;case 5:np(f,v);break;case 4:He?$w(c,f,v):O&&O&&(f=f.stateNode.containerInfo,v=yt(f),Te(f,v))}}function Kw(c,f,v){for(var S=f;;)if(Jw(c,S,v),S.child===null||He&&S.tag===4){if(S===f)break;for(;S.sibling===null;){if(S.return===null||S.return===f)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else S.child.return=S,S=S.child}function Yw(c){var f=c.alternate;f!==null&&(c.alternate=null,Yw(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Ye(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function Qw(c){return c.tag===5||c.tag===3||c.tag===4}function Zw(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Qw(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function qw(c){if(He){e:{for(var f=c.return;f!==null;){if(Qw(f))break e;f=f.return}throw Error(o(160))}var v=f;switch(v.tag){case 5:f=v.stateNode,v.flags&32&&(Ue(f),v.flags&=-33),v=Zw(c),Ay(c,v,f);break;case 3:case 4:f=v.stateNode.containerInfo,v=Zw(c),_y(c,v,f);break;default:throw Error(o(161))}}}function _y(c,f,v){var S=c.tag;if(S===5||S===6)c=c.stateNode,f?je(v,c,f):vt(v,c);else if(S!==4&&(c=c.child,c!==null))for(_y(c,f,v),c=c.sibling;c!==null;)_y(c,f,v),c=c.sibling}function Ay(c,f,v){var S=c.tag;if(S===5||S===6)c=c.stateNode,f?lt(v,c,f):We(v,c);else if(S!==4&&(c=c.child,c!==null))for(Ay(c,f,v),c=c.sibling;c!==null;)Ay(c,f,v),c=c.sibling}function $w(c,f,v){for(var S=f,E=!1,C,k;;){if(!E){E=S.return;e:for(;;){if(E===null)throw Error(o(160));switch(C=E.stateNode,E.tag){case 5:k=!1;break e;case 3:C=C.containerInfo,k=!0;break e;case 4:C=C.containerInfo,k=!0;break e}E=E.return}E=!0}if(S.tag===5||S.tag===6)Kw(c,S,v),k?ge(C,S.stateNode):J(C,S.stateNode);else if(S.tag===18)k?ie(C,S.stateNode):le(C,S.stateNode);else if(S.tag===4){if(S.child!==null){C=S.stateNode.containerInfo,k=!0,S.child.return=S,S=S.child;continue}}else if(Jw(c,S,v),S.child!==null){S.child.return=S,S=S.child;continue}if(S===f)break;for(;S.sibling===null;){if(S.return===null||S.return===f)return;S=S.return,S.tag===4&&(E=!1)}S.sibling.return=S.return,S=S.sibling}}function Sy(c,f){if(He){switch(f.tag){case 0:case 11:case 14:case 15:Aa(3,f,f.return),Zu(3,f),Aa(5,f,f.return);return;case 1:return;case 5:var v=f.stateNode;if(v!=null){var S=f.memoizedProps;c=c!==null?c.memoizedProps:S;var E=f.type,C=f.updateQueue;f.updateQueue=null,C!==null&&bt(v,C,E,c,S,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));v=f.memoizedProps,Ce(f.stateNode,c!==null?c.memoizedProps:v,v);return;case 3:ye&&c!==null&&c.memoizedState.isDehydrated&&ee(f.stateNode.containerInfo);return;case 12:return;case 13:ip(f);return;case 19:ip(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:Aa(3,f,f.return),Zu(3,f),Aa(5,f,f.return);return;case 12:return;case 13:ip(f);return;case 19:ip(f);return;case 3:ye&&c!==null&&c.memoizedState.isDehydrated&&ee(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(O){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Te(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function ip(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var v=c.stateNode;v===null&&(v=c.stateNode=new zN),f.forEach(function(S){var E=qN.bind(null,c,S);v.has(S)||(v.add(S),S.then(E,E))})}}function VN(c,f){for(Ve=f;Ve!==null;){f=Ve;var v=f.deletions;if(v!==null)for(var S=0;S<v.length;S++){var E=v[S];try{var C=c;He?$w(C,E,f):Kw(C,E,f);var k=E.alternate;k!==null&&(k.return=null),E.return=null}catch(it){Fi(E,f,it)}}if(v=f.child,f.subtreeFlags&12854&&v!==null)v.return=f,Ve=v;else for(;Ve!==null;){f=Ve;try{var $=f.flags;if($&32&&He&&Ue(f.stateNode),$&512){var fe=f.alternate;if(fe!==null){var Be=fe.ref;Be!==null&&(typeof Be=="function"?Be(null):Be.current=null)}}if($&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var Ze=f.alternate;(Ze===null||Ze.memoizedState===null)&&(Ry=zn())}break;case 22:var St=f.memoizedState!==null,pt=f.alternate,Kt=pt!==null&&pt.memoizedState!==null;if(v=f,He){e:if(S=v,E=St,C=null,He)for(var rt=S;;){if(rt.tag===5){if(C===null){C=rt;var si=rt.stateNode;E?j(si):de(rt.stateNode,rt.memoizedProps)}}else if(rt.tag===6){if(C===null){var vr=rt.stateNode;E?Se(vr):ve(vr,rt.memoizedProps)}}else if((rt.tag!==22&&rt.tag!==23||rt.memoizedState===null||rt===S)&&rt.child!==null){rt.child.return=rt,rt=rt.child;continue}if(rt===S)break;for(;rt.sibling===null;){if(rt.return===null||rt.return===S)break e;C===rt&&(C=null),rt=rt.return}C===rt&&(C=null),rt.sibling.return=rt.return,rt=rt.sibling}}if(St&&!Kt&&v.mode&1){Ve=v;for(var oe=v.child;oe!==null;){for(v=Ve=oe;Ve!==null;){S=Ve;var te=S.child;switch(S.tag){case 0:case 11:case 14:case 15:Aa(4,S,S.return);break;case 1:np(S,S.return);var ce=S.stateNode;if(typeof ce.componentWillUnmount=="function"){var Xe=S.return;try{ce.props=S.memoizedProps,ce.state=S.memoizedState,ce.componentWillUnmount()}catch(it){Fi(S,Xe,it)}}break;case 5:np(S,S.return);break;case 22:if(S.memoizedState!==null){nE(v);continue}}te!==null?(te.return=S,Ve=te):nE(v)}oe=oe.sibling}}}switch($&4102){case 2:qw(f),f.flags&=-3;break;case 6:qw(f),f.flags&=-3,Sy(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Sy(f.alternate,f);break;case 4:Sy(f.alternate,f)}}catch(it){Fi(f,f.return,it)}if(v=f.sibling,v!==null){v.return=f.return,Ve=v;break}Ve=f.return}}}function WN(c,f,v){Ve=c,eE(c)}function eE(c,f,v){for(var S=(c.mode&1)!==0;Ve!==null;){var E=Ve,C=E.child;if(E.tag===22&&S){var k=E.memoizedState!==null||tp;if(!k){var $=E.alternate,fe=$!==null&&$.memoizedState!==null||_a;$=tp;var Be=_a;if(tp=k,(_a=fe)&&!Be)for(Ve=E;Ve!==null;)k=Ve,fe=k.child,k.tag===22&&k.memoizedState!==null?iE(E):fe!==null?(fe.return=k,Ve=fe):iE(E);for(;C!==null;)Ve=C,eE(C),C=C.sibling;Ve=E,tp=$,_a=Be}tE(c)}else E.subtreeFlags&8772&&C!==null?(C.return=E,Ve=C):tE(c)}}function tE(c){for(;Ve!==null;){var f=Ve;if(f.flags&8772){var v=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:_a||Zu(5,f);break;case 1:var S=f.stateNode;if(f.flags&4&&!_a)if(v===null)S.componentDidMount();else{var E=f.elementType===f.type?v.memoizedProps:Or(f.type,v.memoizedProps);S.componentDidUpdate(E,v.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var C=f.updateQueue;C!==null&&YM(f,C,S);break;case 3:var k=f.updateQueue;if(k!==null){if(v=null,f.child!==null)switch(f.child.tag){case 5:v=Z(f.child.stateNode);break;case 1:v=f.child.stateNode}YM(f,k,v)}break;case 5:var $=f.stateNode;v===null&&f.flags&4&&ze($,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(ye&&f.memoizedState===null){var fe=f.alternate;if(fe!==null){var Be=fe.memoizedState;if(Be!==null){var Ze=Be.dehydrated;Ze!==null&&ae(Ze)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}_a||f.flags&512&&xy(f)}catch(St){Fi(f,f.return,St)}}if(f===c){Ve=null;break}if(v=f.sibling,v!==null){v.return=f.return,Ve=v;break}Ve=f.return}}function nE(c){for(;Ve!==null;){var f=Ve;if(f===c){Ve=null;break}var v=f.sibling;if(v!==null){v.return=f.return,Ve=v;break}Ve=f.return}}function iE(c){for(;Ve!==null;){var f=Ve;try{switch(f.tag){case 0:case 11:case 15:var v=f.return;try{Zu(4,f)}catch(fe){Fi(f,v,fe)}break;case 1:var S=f.stateNode;if(typeof S.componentDidMount=="function"){var E=f.return;try{S.componentDidMount()}catch(fe){Fi(f,E,fe)}}var C=f.return;try{xy(f)}catch(fe){Fi(f,C,fe)}break;case 5:var k=f.return;try{xy(f)}catch(fe){Fi(f,k,fe)}}}catch(fe){Fi(f,f.return,fe)}if(f===c){Ve=null;break}var $=f.sibling;if($!==null){$.return=f.return,Ve=$;break}Ve=f.return}}var rp=0,sp=1,op=2,ap=3,lp=4;if(typeof Symbol=="function"&&Symbol.for){var qu=Symbol.for;rp=qu("selector.component"),sp=qu("selector.has_pseudo_class"),op=qu("selector.role"),ap=qu("selector.test_id"),lp=qu("selector.text")}function My(c){var f=Me(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(c=L(c),c===null)throw Error(o(362));return c.stateNode.current}function wy(c,f){switch(f.$$typeof){case rp:if(c.type===f.value)return!0;break;case sp:e:{f=f.value,c=[c,0];for(var v=0;v<c.length;){var S=c[v++],E=c[v++],C=f[E];if(S.tag!==5||!_e(S)){for(;C!=null&&wy(S,C);)E++,C=f[E];if(E===f.length){f=!0;break e}else for(S=S.child;S!==null;)c.push(S,E),S=S.sibling}}f=!1}return f;case op:if(c.tag===5&&Ae(c.stateNode,f.value))return!0;break;case lp:if((c.tag===5||c.tag===6)&&(c=xe(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case ap:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ey(c){switch(c.$$typeof){case rp:return"<"+(I(c.value)||"Unknown")+">";case sp:return":has("+(Ey(c)||"")+")";case op:return'[role="'+c.value+'"]';case lp:return'"'+c.value+'"';case ap:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function rE(c,f){var v=[];c=[c,0];for(var S=0;S<c.length;){var E=c[S++],C=c[S++],k=f[C];if(E.tag!==5||!_e(E)){for(;k!=null&&wy(E,k);)C++,k=f[C];if(C===f.length)v.push(E);else for(E=E.child;E!==null;)c.push(E,C),E=E.sibling}}return v}function Cy(c,f){if(!H)throw Error(o(363));c=My(c),c=rE(c,f),f=[],c=Array.from(c);for(var v=0;v<c.length;){var S=c[v++];if(S.tag===5)_e(S)||f.push(S.stateNode);else for(S=S.child;S!==null;)c.push(S),S=S.sibling}return f}var jN=Math.ceil,cp=a.ReactCurrentDispatcher,Ty=a.ReactCurrentOwner,Sn=a.ReactCurrentBatchConfig,Pt=0,bn=null,Rn=null,Yn=0,Ki=0,ql=gn(0),Dn=0,$u=null,$l=0,up=0,by=0,ef=null,Li=null,Ry=0,Py=1/0;function ec(){Py=zn()+500}var fp=!1,By=null,vo=null,hp=!1,yo=null,dp=0,tf=0,Iy=null,pp=-1,mp=0;function Mi(){return Pt&6?zn():pp!==-1?pp:pp=zn()}function xo(c){return c.mode&1?Pt&2&&Yn!==0?Yn&-Yn:TN.transition!==null?(mp===0&&(c=bd,bd<<=1,!(bd&4194240)&&(bd=64),mp=c),mp):(c=Ht,c!==0?c:he()):1}function mr(c,f,v){if(50<tf)throw tf=0,Iy=null,Error(o(185));var S=gp(c,f);return S===null?null:(Uu(S,f,v),(!(Pt&2)||S!==bn)&&(S===bn&&(!(Pt&2)&&(up|=f),Dn===4&&_o(S,Yn)),Ni(S,v),f===1&&Pt===0&&!(c.mode&1)&&(ec(),Id&&fs())),S)}function gp(c,f){c.lanes|=f;var v=c.alternate;for(v!==null&&(v.lanes|=f),v=c,c=c.return;c!==null;)c.childLanes|=f,v=c.alternate,v!==null&&(v.childLanes|=f),v=c,c=c.return;return v.tag===3?v.stateNode:null}function Ni(c,f){var v=c.callbackNode;yN(c,f);var S=Pd(c,c===bn?Yn:0);if(S===0)v!==null&&WM(v),c.callbackNode=null,c.callbackPriority=0;else if(f=S&-S,c.callbackPriority!==f){if(v!=null&&WM(v),f===1)c.tag===0?CN(oE.bind(null,c)):jM(oE.bind(null,c)),Le?Ge(function(){Pt===0&&fs()}):Hv(zv,fs),v=null;else{switch(VM(S)){case 1:v=zv;break;case 4:v=SN;break;case 16:v=Gv;break;case 536870912:v=MN;break;default:v=Gv}v=mE(v,sE.bind(null,c))}c.callbackPriority=f,c.callbackNode=v}}function sE(c,f){if(pp=-1,mp=0,Pt&6)throw Error(o(327));var v=c.callbackNode;if(wa()&&c.callbackNode!==v)return null;var S=Pd(c,c===bn?Yn:0);if(S===0)return null;if(S&30||S&c.expiredLanes||f)f=vp(c,S);else{f=S;var E=Pt;Pt|=2;var C=cE();(bn!==c||Yn!==f)&&(ec(),Sa(c,f));do try{KN();break}catch($){lE(c,$)}while(!0);jv(),cp.current=C,Pt=E,Rn!==null?f=0:(bn=null,Yn=0,f=Dn)}if(f!==0){if(f===2&&(E=Ov(c),E!==0&&(S=E,f=Dy(c,E))),f===1)throw v=$u,Sa(c,0),_o(c,S),Ni(c,zn()),v;if(f===6)_o(c,S);else{if(E=c.current.alternate,!(S&30)&&!XN(E)&&(f=vp(c,S),f===2&&(C=Ov(c),C!==0&&(S=C,f=Dy(c,C))),f===1))throw v=$u,Sa(c,0),_o(c,S),Ni(c,zn()),v;switch(c.finishedWork=E,c.finishedLanes=S,f){case 0:case 1:throw Error(o(345));case 2:Ma(c,Li);break;case 3:if(_o(c,S),(S&130023424)===S&&(f=Ry+500-zn(),10<f)){if(Pd(c,0)!==0)break;if(E=c.suspendedLanes,(E&S)!==S){Mi(),c.pingedLanes|=c.suspendedLanes&E;break}c.timeoutHandle=Ee(Ma.bind(null,c,Li),f);break}Ma(c,Li);break;case 4:if(_o(c,S),(S&4194240)===S)break;for(f=c.eventTimes,E=-1;0<S;){var k=31-Wi(S);C=1<<k,k=f[k],k>E&&(E=k),S&=~C}if(S=E,S=zn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*jN(S/1960))-S,10<S){c.timeoutHandle=Ee(Ma.bind(null,c,Li),S);break}Ma(c,Li);break;case 5:Ma(c,Li);break;default:throw Error(o(329))}}}return Ni(c,zn()),c.callbackNode===v?sE.bind(null,c):null}function Dy(c,f){var v=ef;return c.current.memoizedState.isDehydrated&&(Sa(c,f).flags|=256),c=vp(c,f),c!==2&&(f=Li,Li=v,f!==null&&Ly(f)),c}function Ly(c){Li===null?Li=c:Li.push.apply(Li,c)}function XN(c){for(var f=c;;){if(f.flags&16384){var v=f.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var S=0;S<v.length;S++){var E=v[S],C=E.getSnapshot;E=E.value;try{if(!us(C(),E))return!1}catch{return!1}}}if(v=f.child,f.subtreeFlags&16384&&v!==null)v.return=f,f=v;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function _o(c,f){for(f&=~by,f&=~up,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var v=31-Wi(f),S=1<<v;c[v]=-1,f&=~S}}function oE(c){if(Pt&6)throw Error(o(327));wa();var f=Pd(c,0);if(!(f&1))return Ni(c,zn()),null;var v=vp(c,f);if(c.tag!==0&&v===2){var S=Ov(c);S!==0&&(f=S,v=Dy(c,S))}if(v===1)throw v=$u,Sa(c,0),_o(c,f),Ni(c,zn()),v;if(v===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,Ma(c,Li),Ni(c,zn()),null}function aE(c){yo!==null&&yo.tag===0&&!(Pt&6)&&wa();var f=Pt;Pt|=1;var v=Sn.transition,S=Ht;try{if(Sn.transition=null,Ht=1,c)return c()}finally{Ht=S,Sn.transition=v,Pt=f,!(Pt&6)&&fs()}}function Ny(){Ki=ql.current,ot(ql)}function Sa(c,f){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==dt&&(c.timeoutHandle=dt,nt(v)),Rn!==null)for(v=Rn.return;v!==null;){var S=v;switch(qv(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&tn();break;case 3:Ql(),ot(Zt),ot(xt),sy();break;case 5:iy(S);break;case 4:Ql();break;case 13:ot(un);break;case 19:ot(un);break;case 10:Xv(S.type._context);break;case 22:case 23:Ny()}v=v.return}if(bn=c,Rn=c=Ao(c.current,null),Yn=Ki=f,Dn=0,$u=null,by=up=$l=0,Li=ef=null,hs!==null){for(f=0;f<hs.length;f++)if(v=hs[f],S=v.interleaved,S!==null){v.interleaved=null;var E=S.next,C=v.pending;if(C!==null){var k=C.next;C.next=E,S.next=k}v.pending=S}hs=null}return c}function lE(c,f){do{var v=Rn;try{if(jv(),Vd.current=Yd,Wd){for(var S=vn.memoizedState;S!==null;){var E=S.queue;E!==null&&(E.pending=null),S=S.next}Wd=!1}if(Zl=0,Gn=ni=vn=null,Wu=!1,ju=0,Ty.current=null,v===null||v.return===null){Dn=1,$u=f,Rn=null;break}e:{var C=c,k=v.return,$=v,fe=f;if(f=Yn,$.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Be=fe,Ze=$,St=Ze.tag;if(!(Ze.mode&1)&&(St===0||St===11||St===15)){var pt=Ze.alternate;pt?(Ze.updateQueue=pt.updateQueue,Ze.memoizedState=pt.memoizedState,Ze.lanes=pt.lanes):(Ze.updateQueue=null,Ze.memoizedState=null)}var Kt=Rw(k);if(Kt!==null){Kt.flags&=-257,Pw(Kt,k,$,C,f),Kt.mode&1&&bw(C,Be,f),f=Kt,fe=Be;var rt=f.updateQueue;if(rt===null){var si=new Set;si.add(fe),f.updateQueue=si}else rt.add(fe);break e}else{if(!(f&1)){bw(C,Be,f),Fy();break e}fe=Error(o(426))}}else if(an&&$.mode&1){var vr=Rw(k);if(vr!==null){!(vr.flags&65536)&&(vr.flags|=256),Pw(vr,k,$,C,f),ty(fe);break e}}C=fe,Dn!==4&&(Dn=2),ef===null?ef=[C]:ef.push(C),fe=hy(fe,$),$=k;do{switch($.tag){case 3:$.flags|=65536,f&=-f,$.lanes|=f;var oe=Cw($,fe,f);KM($,oe);break e;case 1:C=fe;var te=$.type,ce=$.stateNode;if(!($.flags&128)&&(typeof te.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(vo===null||!vo.has(ce)))){$.flags|=65536,f&=-f,$.lanes|=f;var Xe=Tw($,C,f);KM($,Xe);break e}}$=$.return}while($!==null)}fE(v)}catch(it){f=it,Rn===v&&v!==null&&(Rn=v=v.return);continue}break}while(!0)}function cE(){var c=cp.current;return cp.current=Yd,c===null?Yd:c}function Fy(){(Dn===0||Dn===3||Dn===2)&&(Dn=4),bn===null||!($l&268435455)&&!(up&268435455)||_o(bn,Yn)}function vp(c,f){var v=Pt;Pt|=2;var S=cE();bn===c&&Yn===f||Sa(c,f);do try{JN();break}catch(E){lE(c,E)}while(!0);if(jv(),Pt=v,cp.current=S,Rn!==null)throw Error(o(261));return bn=null,Yn=0,Dn}function JN(){for(;Rn!==null;)uE(Rn)}function KN(){for(;Rn!==null&&!_N();)uE(Rn)}function uE(c){var f=pE(c.alternate,c,Ki);c.memoizedProps=c.pendingProps,f===null?fE(c):Rn=f,Ty.current=null}function fE(c){var f=c;do{var v=f.alternate;if(c=f.return,f.flags&32768){if(v=HN(v,f),v!==null){v.flags&=32767,Rn=v;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Dn=6,Rn=null;return}}else if(v=ON(v,f,Ki),v!==null){Rn=v;return}if(f=f.sibling,f!==null){Rn=f;return}Rn=f=c}while(f!==null);Dn===0&&(Dn=5)}function Ma(c,f){var v=Ht,S=Sn.transition;try{Sn.transition=null,Ht=1,YN(c,f,v)}finally{Sn.transition=S,Ht=v}return null}function YN(c,f,v){do wa();while(yo!==null);if(Pt&6)throw Error(o(327));var S=c.finishedWork,E=c.finishedLanes;if(S===null)return null;if(c.finishedWork=null,c.finishedLanes=0,S===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var C=S.lanes|S.childLanes;if(xN(c,C),c===bn&&(Rn=bn=null,Yn=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||hp||(hp=!0,mE(Gv,function(){return wa(),null})),C=(S.flags&15990)!==0,S.subtreeFlags&15990||C){C=Sn.transition,Sn.transition=null;var k=Ht;Ht=1;var $=Pt;Pt|=4,Ty.current=null,GN(c,S),VN(c,S),V(c.containerInfo),c.current=S,WN(S),AN(),Pt=$,Ht=k,Sn.transition=C}else c.current=S;if(hp&&(hp=!1,yo=c,dp=E),C=c.pendingLanes,C===0&&(vo=null),wN(S.stateNode),Ni(c,zn()),f!==null)for(v=c.onRecoverableError,S=0;S<f.length;S++)v(f[S]);if(fp)throw fp=!1,c=By,By=null,c;return dp&1&&c.tag!==0&&wa(),C=c.pendingLanes,C&1?c===Iy?tf++:(tf=0,Iy=c):tf=0,fs(),null}function wa(){if(yo!==null){var c=VM(dp),f=Sn.transition,v=Ht;try{if(Sn.transition=null,Ht=16>c?16:c,yo===null)var S=!1;else{if(c=yo,yo=null,dp=0,Pt&6)throw Error(o(331));var E=Pt;for(Pt|=4,Ve=c.current;Ve!==null;){var C=Ve,k=C.child;if(Ve.flags&16){var $=C.deletions;if($!==null){for(var fe=0;fe<$.length;fe++){var Be=$[fe];for(Ve=Be;Ve!==null;){var Ze=Ve;switch(Ze.tag){case 0:case 11:case 15:Aa(8,Ze,C)}var St=Ze.child;if(St!==null)St.return=Ze,Ve=St;else for(;Ve!==null;){Ze=Ve;var pt=Ze.sibling,Kt=Ze.return;if(Yw(Ze),Ze===Be){Ve=null;break}if(pt!==null){pt.return=Kt,Ve=pt;break}Ve=Kt}}}var rt=C.alternate;if(rt!==null){var si=rt.child;if(si!==null){rt.child=null;do{var vr=si.sibling;si.sibling=null,si=vr}while(si!==null)}}Ve=C}}if(C.subtreeFlags&2064&&k!==null)k.return=C,Ve=k;else e:for(;Ve!==null;){if(C=Ve,C.flags&2048)switch(C.tag){case 0:case 11:case 15:Aa(9,C,C.return)}var oe=C.sibling;if(oe!==null){oe.return=C.return,Ve=oe;break e}Ve=C.return}}var te=c.current;for(Ve=te;Ve!==null;){k=Ve;var ce=k.child;if(k.subtreeFlags&2064&&ce!==null)ce.return=k,Ve=ce;else e:for(k=te;Ve!==null;){if($=Ve,$.flags&2048)try{switch($.tag){case 0:case 11:case 15:Zu(9,$)}}catch(it){Fi($,$.return,it)}if($===k){Ve=null;break e}var Xe=$.sibling;if(Xe!==null){Xe.return=$.return,Ve=Xe;break e}Ve=$.return}}if(Pt=E,fs(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(Bd,c)}catch{}S=!0}return S}finally{Ht=v,Sn.transition=f}}return!1}function hE(c,f,v){f=hy(v,f),f=Cw(c,f,1),go(c,f),f=Mi(),c=gp(c,1),c!==null&&(Uu(c,1,f),Ni(c,f))}function Fi(c,f,v){if(c.tag===3)hE(c,c,v);else for(;f!==null;){if(f.tag===3){hE(f,c,v);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(vo===null||!vo.has(S))){c=hy(v,c),c=Tw(f,c,1),go(f,c),c=Mi(),f=gp(f,1),f!==null&&(Uu(f,1,c),Ni(f,c));break}}f=f.return}}function QN(c,f,v){var S=c.pingCache;S!==null&&S.delete(f),f=Mi(),c.pingedLanes|=c.suspendedLanes&v,bn===c&&(Yn&v)===v&&(Dn===4||Dn===3&&(Yn&130023424)===Yn&&500>zn()-Ry?Sa(c,0):by|=v),Ni(c,f)}function dE(c,f){f===0&&(c.mode&1?(f=Rd,Rd<<=1,!(Rd&130023424)&&(Rd=4194304)):f=1);var v=Mi();c=gp(c,f),c!==null&&(Uu(c,f,v),Ni(c,v))}function ZN(c){var f=c.memoizedState,v=0;f!==null&&(v=f.retryLane),dE(c,v)}function qN(c,f){var v=0;switch(c.tag){case 13:var S=c.stateNode,E=c.memoizedState;E!==null&&(v=E.retryLane);break;case 19:S=c.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(f),dE(c,v)}var pE;pE=function(c,f,v){if(c!==null)if(c.memoizedProps!==f.pendingProps||Zt.current)Ji=!0;else{if(!(c.lanes&v)&&!(f.flags&128))return Ji=!1,kN(c,f,v);Ji=!!(c.flags&131072)}else Ji=!1,an&&f.flags&1048576&&ew(f,Hd,f.index);switch(f.lanes=0,f.tag){case 2:var S=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var E=Tn(f,xt.current);Wl(f,v),E=ay(null,f,S,c,E,v);var C=ly();return f.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Hn(S)?(C=!0,Kn(f)):C=!1,f.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Kv(f),E.updater=Ud,f.stateNode=E,E._reactInternals=f,Qv(f,S,c,v),f=my(null,f,S,!0,C,v)):(f.tag=0,an&&C&&Zv(f),Si(null,f,E,v),f=f.child),f;case 16:S=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,E=S._init,S=E(S._payload),f.type=S,E=f.tag=eF(S),c=Or(S,c),E){case 0:f=py(null,f,S,c,v);break e;case 1:f=Uw(null,f,S,c,v);break e;case 11:f=Dw(null,f,S,c,v);break e;case 14:f=Lw(null,f,S,Or(S.type,c),v);break e}throw Error(o(306,S,""))}return f;case 0:return S=f.type,E=f.pendingProps,E=f.elementType===S?E:Or(S,E),py(c,f,S,E,v);case 1:return S=f.type,E=f.pendingProps,E=f.elementType===S?E:Or(S,E),Uw(c,f,S,E,v);case 3:e:{if(kw(f),c===null)throw Error(o(387));S=f.pendingProps,C=f.memoizedState,E=C.element,JM(c,f),Od(f,S,null,v);var k=f.memoizedState;if(S=k.element,ye&&C.isDehydrated)if(C={element:S,isDehydrated:!1,cache:k.cache,transitions:k.transitions},f.updateQueue.baseState=C,f.memoizedState=C,f.flags&256){E=Error(o(423)),f=Hw(c,f,S,v,E);break e}else if(S!==E){E=Error(o(424)),f=Hw(c,f,S,v,E);break e}else for(ye&&(Xi=Ed(f.stateNode.containerInfo),ji=f,an=!0,Ur=null,ku=!1),v=ow(f,null,S,v),f.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Jl(),S===E){f=Ds(c,f,v);break e}Si(c,f,S,v)}f=f.child}return f;case 5:return aw(f),c===null&&ey(f),S=f.type,E=f.pendingProps,C=c!==null?c.memoizedProps:null,k=E.children,me(S,E)?k=null:C!==null&&me(S,C)&&(f.flags|=32),Ow(c,f),Si(c,f,k,v),f.child;case 6:return c===null&&ey(f),null;case 13:return zw(c,f,v);case 4:return ny(f,f.stateNode.containerInfo),S=f.pendingProps,c===null?f.child=Kl(f,null,S,v):Si(c,f,S,v),f.child;case 11:return S=f.type,E=f.pendingProps,E=f.elementType===S?E:Or(S,E),Dw(c,f,S,E,v);case 7:return Si(c,f,f.pendingProps,v),f.child;case 8:return Si(c,f,f.pendingProps.children,v),f.child;case 12:return Si(c,f,f.pendingProps.children,v),f.child;case 10:e:{if(S=f.type._context,E=f.pendingProps,C=f.memoizedProps,k=E.value,XM(f,S,k),C!==null)if(us(C.value,k)){if(C.children===E.children&&!Zt.current){f=Ds(c,f,v);break e}}else for(C=f.child,C!==null&&(C.return=f);C!==null;){var $=C.dependencies;if($!==null){k=C.child;for(var fe=$.firstContext;fe!==null;){if(fe.context===S){if(C.tag===1){fe=Rs(-1,v&-v),fe.tag=2;var Be=C.updateQueue;if(Be!==null){Be=Be.shared;var Ze=Be.pending;Ze===null?fe.next=fe:(fe.next=Ze.next,Ze.next=fe),Be.pending=fe}}C.lanes|=v,fe=C.alternate,fe!==null&&(fe.lanes|=v),Jv(C.return,v,f),$.lanes|=v;break}fe=fe.next}}else if(C.tag===10)k=C.type===f.type?null:C.child;else if(C.tag===18){if(k=C.return,k===null)throw Error(o(341));k.lanes|=v,$=k.alternate,$!==null&&($.lanes|=v),Jv(k,v,f),k=C.sibling}else k=C.child;if(k!==null)k.return=C;else for(k=C;k!==null;){if(k===f){k=null;break}if(C=k.sibling,C!==null){C.return=k.return,k=C;break}k=k.return}C=k}Si(c,f,E.children,v),f=f.child}return f;case 9:return E=f.type,S=f.pendingProps.children,Wl(f,v),E=ur(E),S=S(E),f.flags|=1,Si(c,f,S,v),f.child;case 14:return S=f.type,E=Or(S,f.pendingProps),E=Or(S.type,E),Lw(c,f,S,E,v);case 15:return Nw(c,f,f.type,f.pendingProps,v);case 17:return S=f.type,E=f.pendingProps,E=f.elementType===S?E:Or(S,E),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Hn(S)?(c=!0,Kn(f)):c=!1,Wl(f,v),qM(f,S,E),Qv(f,S,E,v),my(null,f,S,!0,c,v);case 19:return jw(c,f,v);case 22:return Fw(c,f,v)}throw Error(o(156,f.tag))};function mE(c,f){return Hv(c,f)}function $N(c,f,v,S){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(c,f,v,S){return new $N(c,f,v,S)}function Oy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function eF(c){if(typeof c=="function")return Oy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===A)return 11;if(c===_)return 14}return 2}function Ao(c,f){var v=c.alternate;return v===null?(v=gr(c.tag,f,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=f,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&14680064,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,f=c.dependencies,v.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v}function yp(c,f,v,S,E,C){var k=2;if(S=c,typeof c=="function")Oy(c)&&(k=1);else if(typeof c=="string")k=5;else e:switch(c){case h:return Ea(v.children,E,C,f);case d:k=8,E|=8;break;case p:return c=gr(12,v,f,E|2),c.elementType=p,c.lanes=C,c;case x:return c=gr(13,v,f,E),c.elementType=x,c.lanes=C,c;case g:return c=gr(19,v,f,E),c.elementType=g,c.lanes=C,c;case w:return xp(v,E,C,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:k=10;break e;case y:k=9;break e;case A:k=11;break e;case _:k=14;break e;case M:k=16,S=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return f=gr(k,v,f,E),f.elementType=c,f.type=S,f.lanes=C,f}function Ea(c,f,v,S){return c=gr(7,c,S,f),c.lanes=v,c}function xp(c,f,v,S){return c=gr(22,c,S,f),c.elementType=w,c.lanes=v,c.stateNode={},c}function Uy(c,f,v){return c=gr(6,c,null,f),c.lanes=v,c}function ky(c,f,v){return f=gr(4,c.children!==null?c.children:[],c.key,f),f.lanes=v,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function tF(c,f,v,S,E){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=dt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uv(0),this.expirationTimes=Uv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uv(0),this.identifierPrefix=S,this.onRecoverableError=E,ye&&(this.mutableSourceEagerHydrationData=null)}function gE(c,f,v,S,E,C,k,$,fe){return c=new tF(c,f,v,$,fe),f===1?(f=1,C===!0&&(f|=8)):f=0,C=gr(3,null,null,f),c.current=C,C.stateNode=c,C.memoizedState={element:S,isDehydrated:v,cache:null,transitions:null},Kv(C),c}function vE(c){if(!c)return Qt;c=c._reactInternals;e:{if(R(c)!==c||c.tag!==1)throw Error(o(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Hn(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(c.tag===1){var v=c.type;if(Hn(v))return zl(c,v,f)}return f}function yE(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=Q(f),c===null?null:c.stateNode}function xE(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<f?v:f}}function Hy(c,f){xE(c,f),(c=c.alternate)&&xE(c,f)}function nF(c){return c=Q(c),c===null?null:c.stateNode}function iF(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var f=Mi();mr(c,134217728,f),Hy(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=Mi(),v=xo(c);mr(c,v,f),Hy(c,v)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var v=Ou(f.pendingLanes);v!==0&&(kv(f,v|1),Ni(f,zn()),!(Pt&6)&&(ec(),fs()))}break;case 13:var S=Mi();aE(function(){return mr(c,1,S)}),Hy(c,1)}},t.batchedUpdates=function(c,f){var v=Pt;Pt|=1;try{return c(f)}finally{Pt=v,Pt===0&&(ec(),Id&&fs())}},t.createComponentSelector=function(c){return{$$typeof:rp,value:c}},t.createContainer=function(c,f,v,S,E,C,k){return gE(c,f,!1,null,v,S,E,C,k)},t.createHasPseudoClassSelector=function(c){return{$$typeof:sp,value:c}},t.createHydrationContainer=function(c,f,v,S,E,C,k,$,fe){return c=gE(v,S,!0,c,E,C,k,$,fe),c.context=vE(null),v=c.current,S=Mi(),E=xo(v),C=Rs(S,E),C.callback=f??null,go(v,C),c.current.lanes=E,Uu(c,E,S),Ni(c,S),c},t.createPortal=function(c,f,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:S==null?null:""+S,children:c,containerInfo:f,implementation:v}},t.createRoleSelector=function(c){return{$$typeof:op,value:c}},t.createTestNameSelector=function(c){return{$$typeof:ap,value:c}},t.createTextSelector=function(c){return{$$typeof:lp,value:c}},t.deferredUpdates=function(c){var f=Ht,v=Sn.transition;try{return Sn.transition=null,Ht=16,c()}finally{Ht=f,Sn.transition=v}},t.discreteUpdates=function(c,f,v,S,E){var C=Ht,k=Sn.transition;try{return Sn.transition=null,Ht=1,c(f,v,S,E)}finally{Ht=C,Sn.transition=k,Pt===0&&ec()}},t.findAllNodes=Cy,t.findBoundingRects=function(c,f){if(!H)throw Error(o(363));f=Cy(c,f),c=[];for(var v=0;v<f.length;v++)c.push(se(f[v]));for(f=c.length-1;0<f;f--){v=c[f];for(var S=v.x,E=S+v.width,C=v.y,k=C+v.height,$=f-1;0<=$;$--)if(f!==$){var fe=c[$],Be=fe.x,Ze=Be+fe.width,St=fe.y,pt=St+fe.height;if(S>=Be&&C>=St&&E<=Ze&&k<=pt){c.splice(f,1);break}else if(S!==Be||v.width!==fe.width||pt<C||St>k){if(!(C!==St||v.height!==fe.height||Ze<S||Be>E)){Be>S&&(fe.width+=Be-S,fe.x=S),Ze<E&&(fe.width=E-Be),c.splice(f,1);break}}else{St>C&&(fe.height+=St-C,fe.y=C),pt<k&&(fe.height=k-St),c.splice(f,1);break}}}return c},t.findHostInstance=yE,t.findHostInstanceWithNoPortals=function(c){return c=N(c),c=c!==null?K(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return yE(c)},t.flushControlled=function(c){var f=Pt;Pt|=1;var v=Sn.transition,S=Ht;try{Sn.transition=null,Ht=1,c()}finally{Ht=S,Sn.transition=v,Pt=f,Pt===0&&(ec(),fs())}},t.flushPassiveEffects=wa,t.flushSync=aE,t.focusWithin=function(c,f){if(!H)throw Error(o(363));for(c=My(c),f=rE(c,f),f=Array.from(f),c=0;c<f.length;){var v=f[c++];if(!_e(v)){if(v.tag===5&&$e(v.stateNode))return!0;for(v=v.child;v!==null;)f.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ht},t.getFindAllNodesFailureDescription=function(c,f){if(!H)throw Error(o(363));var v=0,S=[];c=[My(c),0];for(var E=0;E<c.length;){var C=c[E++],k=c[E++],$=f[k];if((C.tag!==5||!_e(C))&&(wy(C,$)&&(S.push(Ey($)),k++,k>v&&(v=k)),k<f.length))for(C=C.child;C!==null;)c.push(C,k),C=C.sibling}if(v<f.length){for(c=[];v<f.length;v++)c.push(Ey(f[v]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return Z(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:nF,findFiberByHostInstance:c.findFiberByHostInstance||iF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{Bd=f.inject(c),cs=f}catch{}c=!!f.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,f,v,S){if(!H)throw Error(o(363));c=Cy(c,f);var E=Pe(c,v,S).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(c,f){var v=f._getVersion;v=v(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,v]:c.mutableSourceEagerHydrationData.push(f,v)},t.runWithPriority=function(c,f){var v=Ht;try{return Ht=c,f()}finally{Ht=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,f,v,S){var E=f.current,C=Mi(),k=xo(E);return v=vE(v),f.context===null?f.context=v:f.pendingContext=v,f=Rs(C,k),f.payload={element:c},S=S===void 0?null:S,S!==null&&(f.callback=S),go(E,f),c=mr(E,k,C),c!==null&&Fd(c,E,k),k},t};kD.exports=a8;var l8=kD.exports;const c8=Kh(l8);var HD={exports:{}},zD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,G){var V=B.length;B.push(G);e:for(;0<V;){var q=V-1>>>1,ue=B[q];if(0<r(ue,G))B[q]=G,B[V]=ue,V=q;else break e}}function t(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var G=B[0],V=B.pop();if(V!==G){B[0]=V;e:for(var q=0,ue=B.length,be=ue>>>1;q<be;){var re=2*(q+1)-1,me=B[re],we=re+1,Ee=B[we];if(0>r(me,V))we<ue&&0>r(Ee,me)?(B[q]=Ee,B[we]=V,q=we):(B[q]=me,B[re]=V,q=re);else if(we<ue&&0>r(Ee,V))B[q]=Ee,B[we]=V,q=we;else break e}}return G}function r(B,G){var V=B.sortIndex-G.sortIndex;return V!==0?V:B.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,p=3,m=!1,y=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(B){for(var G=t(u);G!==null;){if(G.callback===null)i(u);else if(G.startTime<=B)i(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(u)}}function w(B){if(A=!1,M(B),!y)if(t(l)!==null)y=!0,Z(P);else{var G=t(u);G!==null&&z(w,G.startTime-B)}}function P(B,G){y=!1,A&&(A=!1,g(D),D=-1),m=!0;var V=p;try{for(M(G),d=t(l);d!==null&&(!(d.expirationTime>G)||B&&!N());){var q=d.callback;if(typeof q=="function"){d.callback=null,p=d.priorityLevel;var ue=q(d.expirationTime<=G);G=n.unstable_now(),typeof ue=="function"?d.callback=ue:d===t(l)&&i(l),M(G)}else i(l);d=t(l)}if(d!==null)var be=!0;else{var re=t(u);re!==null&&z(w,re.startTime-G),be=!1}return be}finally{d=null,p=V,m=!1}}var b=!1,I=null,D=-1,R=5,T=-1;function N(){return!(n.unstable_now()-T<R)}function Q(){if(I!==null){var B=n.unstable_now();T=B;var G=!0;try{G=I(!0,B)}finally{G?W():(b=!1,I=null)}}else b=!1}var W;if(typeof _=="function")W=function(){_(Q)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Y=K.port2;K.port1.onmessage=Q,W=function(){Y.postMessage(null)}}else W=function(){x(Q,0)};function Z(B){I=B,b||(b=!0,W())}function z(B,G){D=x(function(){B(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,Z(P))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(B){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var V=p;p=G;try{return B()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,G){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var V=p;p=B;try{return G()}finally{p=V}},n.unstable_scheduleCallback=function(B,G,V){var q=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?q+V:q):V=q,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=V+ue,B={id:h++,callback:G,priorityLevel:B,startTime:V,expirationTime:ue,sortIndex:-1},V>q?(B.sortIndex=V,e(u,B),t(l)===null&&B===t(u)&&(A?(g(D),D=-1):A=!0,z(w,V-q))):(B.sortIndex=ue,e(l,B),y||m||(y=!0,Z(P))),B},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(B){var G=p;return function(){var V=p;p=G;try{return B.apply(this,arguments)}finally{p=V}}}})(zD);HD.exports=zD;var vb=HD.exports;const u8=n=>typeof n=="object"&&typeof n.then=="function",ol=[];function GD(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function VD(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of ol)if(GD(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=ol.indexOf(r);s!==-1&&ol.splice(s,1)},promise:(u8(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(ol.push(r),!t)throw r.promise}const f8=(n,e,t)=>VD(n,e,!1,t),h8=(n,e,t)=>void VD(n,e,!0,t),d8=n=>{if(n===void 0||n.length===0)ol.splice(0,ol.length);else{const e=ol.find(t=>GD(n,t.keys,t.equal));e&&e.remove()}},aM={},p8=n=>void Object.assign(aM,n);function m8(n,e){function t(h,{args:d=[],attach:p,...m},y){let A=`${h[0].toUpperCase()}${h.slice(1)}`,x;if(h==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;x=Ec(g,{type:h,root:y,attach:p,primitive:!0})}else{const g=aM[A];if(!g)throw new Error(`R3F: ${A} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(d))throw new Error("R3F: The args prop must be an array!");x=Ec(new g(...d),{type:h,root:y,attach:p,memoizedProps:{args:d}})}return x.__r3f.attach===void 0&&(x instanceof wt?x.__r3f.attach="geometry":x instanceof In&&(x.__r3f.attach="material")),A!=="inject"&&r_(x,m),x}function i(h,d){let p=!1;if(d){var m,y;(m=d.__r3f)!=null&&m.attach?i_(h,d,d.__r3f.attach):d.isObject3D&&h.isObject3D&&(h.add(d),p=!0),p||(y=h.__r3f)==null||y.objects.push(d),d.__r3f||Ec(d,{}),d.__r3f.parent=h,H1(d),Cc(d)}}function r(h,d,p){let m=!1;if(d){var y,A;if((y=d.__r3f)!=null&&y.attach)i_(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){d.parent=h,d.dispatchEvent({type:"added"}),h.dispatchEvent({type:"childadded",child:d});const x=h.children.filter(_=>_!==d),g=x.indexOf(p);h.children=[...x.slice(0,g),d,...x.slice(g)],m=!0}m||(A=h.__r3f)==null||A.objects.push(d),d.__r3f||Ec(d,{}),d.__r3f.parent=h,H1(d),Cc(d)}}function s(h,d,p=!1){h&&[...h].forEach(m=>o(d,m,p))}function o(h,d,p){if(d){var m,y,A;if(d.__r3f&&(d.__r3f.parent=null),(m=h.__r3f)!=null&&m.objects&&(h.__r3f.objects=h.__r3f.objects.filter(w=>w!==d)),(y=d.__r3f)!=null&&y.attach)Sb(h,d,d.__r3f.attach);else if(d.isObject3D&&h.isObject3D){var x;h.remove(d),(x=d.__r3f)!=null&&x.root&&w8(eg(d),d)}const _=(A=d.__r3f)==null?void 0:A.primitive,M=!_&&(p===void 0?d.dispose!==null:p);if(!_){var g;s((g=d.__r3f)==null?void 0:g.objects,d,M),s(d.children,d,M)}if(delete d.__r3f,M&&d.dispose&&d.type!=="Scene"){const w=()=>{try{d.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?vb.unstable_scheduleCallback(vb.unstable_IdlePriority,w):w()}Cc(h)}}function a(h,d,p,m){var y;const A=(y=h.__r3f)==null?void 0:y.parent;if(!A)return;const x=t(d,p,h.__r3f.root);if(h.children){for(const g of h.children)g.__r3f&&i(x,g);h.children=h.children.filter(g=>!g.__r3f)}h.__r3f.objects.forEach(g=>i(x,g)),h.__r3f.objects=[],h.__r3f.autoRemovedBeforeAppend||o(A,h),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(A,x),x.raycast&&x.__r3f.eventCount&&eg(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:c8({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(h,d)=>{if(!d)return;const p=h.getState().scene;p.__r3f&&(p.__r3f.root=h,i(p,d))},removeChildFromContainer:(h,d)=>{d&&o(h.getState().scene,d)},insertInContainerBefore:(h,d,p)=>{if(!d||!p)return;const m=h.getState().scene;m.__r3f&&r(m,d,p)},getRootHostContext:()=>null,getChildHostContext:h=>h,finalizeInitialChildren(h){var d;return!!((d=h==null?void 0:h.__r3f)!=null?d:{}).handlers},prepareUpdate(h,d,p,m){var y;if(((y=h==null?void 0:h.__r3f)!=null?y:{}).primitive&&m.object&&m.object!==h)return[!0];{const{args:x=[],children:g,..._}=m,{args:M=[],children:w,...P}=p;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((I,D)=>I!==M[D]))return[!0];const b=QD(h,_,P,!0);return b.changes.length?[!1,b]:null}},commitUpdate(h,[d,p],m,y,A,x){d?a(h,m,A,x):r_(h,p)},commitMount(h,d,p,m){var y;const A=(y=h.__r3f)!=null?y:{};h.raycast&&A.handlers&&A.eventCount&&eg(h).getState().internal.interaction.push(h)},getPublicInstance:h=>h,prepareForCommit:()=>null,preparePortalMount:h=>Ec(h.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(h){var d;const{attach:p,parent:m}=(d=h.__r3f)!=null?d:{};p&&m&&Sb(m,h,p),h.isObject3D&&(h.visible=!1),Cc(h)},unhideInstance(h,d){var p;const{attach:m,parent:y}=(p=h.__r3f)!=null?p:{};m&&y&&i_(y,h,m),(h.isObject3D&&d.visible==null||d.visible)&&(h.visible=!0),Cc(h)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Vc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&$t.fun(performance.now)?performance.now:$t.fun(Date.now)?Date.now:()=>0,scheduleTimeout:$t.fun(setTimeout)?setTimeout:void 0,cancelTimeout:$t.fun(clearTimeout)?clearTimeout:void 0}),applyProps:r_}}var yb,xb;const n_=n=>"colorSpace"in n||"outputColorSpace"in n,WD=()=>{var n;return(n=aM.ColorManagement)!=null?n:null},jD=n=>n&&n.isOrthographicCamera,g8=n=>n&&n.hasOwnProperty("current"),dd=typeof window<"u"&&((yb=window.document)!=null&&yb.createElement||((xb=window.navigator)==null?void 0:xb.product)==="ReactNative")?X.useLayoutEffect:X.useEffect;function XD(n){const e=X.useRef(n);return dd(()=>void(e.current=n),[n]),e}function v8({set:n}){return dd(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class JD extends X.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}JD.getDerivedStateFromError=()=>({error:!0});const KD="__default",_b=new Map,y8=n=>n&&!!n.memoized&&!!n.changes;function YD(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Mf=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function eg(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const $t={obj:n=>n===Object(n)&&!$t.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if($t.str(n)||$t.num(n)||$t.boo(n))return n===e;const s=$t.obj(n);if(s&&i==="reference")return n===e;const o=$t.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!$t.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if($t.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function x8(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function _8(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Ec(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function k1(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const Ab=/-\d+$/;function i_(n,e,t){if($t.str(t)){if(Ab.test(t)){const s=t.replace(Ab,""),{target:o,key:a}=k1(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=k1(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function Sb(n,e,t){var i,r;if($t.str(t)){const{target:s,key:o}=k1(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function QD(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){const h=n.__r3f,d=Object.entries(r),p=[];if(u){const y=Object.keys(l);for(let A=0;A<y.length;A++)r.hasOwnProperty(y[A])||d.unshift([y[A],KD+"remove"])}d.forEach(([y,A])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&y==="object"||$t.equ(A,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return p.push([y,A,!0,[]]);let g=[];y.includes("-")&&(g=y.split("-")),p.push([y,A,!1,g]);for(const _ in r){const M=r[_];_.startsWith(`${y}-`)&&p.push([_,M,!1,_.split("-")])}});const m={...r};return h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.args&&(m.args=h.memoizedProps.args),h!=null&&h.memoizedProps&&h!=null&&h.memoizedProps.attach&&(m.attach=h.memoizedProps.attach),{memoized:m,changes:p}}const A8=typeof process<"u"&&!1;function r_(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=y8(e)?e:QD(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let h=0;h<a.length;h++){let[d,p,m,y]=a[h];if(n_(n)){const _="srgb",M="srgb-linear";d==="encoding"?(d="colorSpace",p=p===3001?_:M):d==="outputEncoding"&&(d="outputColorSpace",p=p===3001?_:M)}let A=n,x=A[d];if(y.length&&(x=y.reduce((g,_)=>g[_],n),!(x&&x.set))){const[g,..._]=y.reverse();A=_.reverse().reduce((M,w)=>M[w],n),d=g}if(p===KD+"remove")if(A.constructor){let g=_b.get(A.constructor);g||(g=new A.constructor,_b.set(A.constructor,g)),p=g[d]}else p=0;if(m&&i)p?i.handlers[d]=p:delete i.handlers[d],i.eventCount=Object.keys(i.handlers).length;else if(x&&x.set&&(x.copy||x instanceof pl)){if(Array.isArray(p))x.fromArray?x.fromArray(p):x.set(...p);else if(x.copy&&p&&p.constructor&&(A8?x.constructor.name===p.constructor.name:x.constructor===p.constructor))x.copy(p);else if(p!==void 0){const g=x instanceof Oe;!g&&x.setScalar?x.setScalar(p):x instanceof pl&&p instanceof pl?x.mask=p.mask:x.set(p),!WD()&&s&&!s.linear&&g&&x.convertSRGBToLinear()}}else if(A[d]=p,A[d]instanceof on&&A[d].format===pi&&A[d].type===es&&s){const g=A[d];n_(g)&&n_(s.gl)?g.colorSpace=s.gl.outputColorSpace:g.encoding=s.gl.outputEncoding}Cc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const h=eg(n).getState().internal,d=h.interaction.indexOf(n);d>-1&&h.interaction.splice(d,1),i.eventCount&&h.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&H1(n),n}function Cc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function H1(n){n.onUpdate==null||n.onUpdate(n)}function S8(n,e){n.manual||(jD(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Rm(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function M8(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Vc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Vc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Vc.ContinuousEventPriority;default:return Vc.DefaultEventPriority}}function ZD(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function w8(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{ZD(t.capturedMap,e,i,r)})}function E8(n){function e(l){const{internal:u}=n.getState(),h=l.offsetX-u.initialClick[0],d=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(h*h+d*d))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(h=>{var d;return(d=u.__r3f)==null?void 0:d.handlers["onPointer"+h]}))}function i(l,u){const h=n.getState(),d=new Set,p=[],m=u?u(h.internal.interaction):h.internal.interaction;for(let g=0;g<m.length;g++){const _=Mf(m[g]);_&&(_.raycaster.camera=void 0)}h.previousRoot||h.events.compute==null||h.events.compute(l,h);function y(g){const _=Mf(g);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var M;_.events.compute==null||_.events.compute(l,_,(M=_.previousRoot)==null?void 0:M.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(g,!0):[]}let A=m.flatMap(y).sort((g,_)=>{const M=Mf(g.object),w=Mf(_.object);return!M||!w?g.distance-_.distance:w.events.priority-M.events.priority||g.distance-_.distance}).filter(g=>{const _=Rm(g);return d.has(_)?!1:(d.add(_),!0)});h.events.filter&&(A=h.events.filter(A,h));for(const g of A){let _=g.object;for(;_;){var x;(x=_.__r3f)!=null&&x.eventCount&&p.push({...g,eventObject:_}),_=_.parent}}if("pointerId"in l&&h.internal.capturedMap.has(l.pointerId))for(let g of h.internal.capturedMap.get(l.pointerId).values())d.has(Rm(g.intersection))||p.push(g.intersection);return p}function r(l,u,h,d){const p=n.getState();if(l.length){const m={stopped:!1};for(const y of l){const A=Mf(y.object)||p,{raycaster:x,pointer:g,camera:_,internal:M}=A,w=new U(g.x,g.y,0).unproject(_),P=T=>{var N,Q;return(N=(Q=M.capturedMap.get(T))==null?void 0:Q.has(y.eventObject))!=null?N:!1},b=T=>{const N={intersection:y,target:u.target};M.capturedMap.has(T)?M.capturedMap.get(T).set(y.eventObject,N):M.capturedMap.set(T,new Map([[y.eventObject,N]])),u.target.setPointerCapture(T)},I=T=>{const N=M.capturedMap.get(T);N&&ZD(M.capturedMap,y.eventObject,N,T)};let D={};for(let T in u){let N=u[T];typeof N!="function"&&(D[T]=N)}let R={...y,...D,pointer:g,intersections:l,stopped:m.stopped,delta:h,unprojectedPoint:w,ray:x.ray,camera:_,stopPropagation(){const T="pointerId"in u&&M.capturedMap.get(u.pointerId);if((!T||T.has(y.eventObject))&&(R.stopped=m.stopped=!0,M.hovered.size&&Array.from(M.hovered.values()).find(N=>N.eventObject===y.eventObject))){const N=l.slice(0,l.indexOf(y));s([...N,y])}},target:{hasPointerCapture:P,setPointerCapture:b,releasePointerCapture:I},currentTarget:{hasPointerCapture:P,setPointerCapture:b,releasePointerCapture:I},nativeEvent:u};if(d(R),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const h of u.hovered.values())if(!l.length||!l.find(d=>d.object===h.object&&d.index===h.index&&d.instanceId===h.instanceId)){const p=h.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(Rm(h)),p!=null&&p.eventCount){const y={...h,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function o(l,u){for(let h=0;h<u.length;h++){const d=u[h].__r3f;d==null||d.handlers.onPointerMissed==null||d.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:h}=n.getState();"pointerId"in u&&h.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{h.capturedMap.has(u.pointerId)&&(h.capturedMap.delete(u.pointerId),s([]))})}}return function(h){const{onPointerMissed:d,internal:p}=n.getState();p.lastEvent.current=h;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(h,m?t:void 0),g=y?e(h):0;l==="onPointerDown"&&(p.initialClick=[h.offsetX,h.offsetY],p.initialHits=x.map(M=>M.eventObject)),y&&!x.length&&g<=2&&(o(h,p.interaction),d&&d(h)),m&&s(x);function _(M){const w=M.eventObject,P=w.__r3f,b=P==null?void 0:P.handlers;if(P!=null&&P.eventCount)if(m){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const I=Rm(M),D=p.hovered.get(I);D?D.stopped&&M.stopPropagation():(p.hovered.set(I,M),b.onPointerOver==null||b.onPointerOver(M),b.onPointerEnter==null||b.onPointerEnter(M))}b.onPointerMove==null||b.onPointerMove(M)}else{const I=b[l];I?(!y||p.initialHits.includes(w))&&(o(h,p.interaction.filter(D=>!p.initialHits.includes(D))),I(M)):y&&p.initialHits.includes(w)&&o(h,p.interaction.filter(D=>!p.initialHits.includes(D)))}}r(x,h,g,_)}}return{handlePointer:a}}const qD=n=>!!(n!=null&&n.render),$D=X.createContext(null),C8=(n,e)=>{const t=UD((a,l)=>{const u=new U,h=new U,d=new U;function p(g=l().camera,_=h,M=l().size){const{width:w,height:P,top:b,left:I}=M,D=w/P;_ instanceof U?d.copy(_):d.set(..._);const R=g.getWorldPosition(u).distanceTo(d);if(jD(g))return{width:w/g.zoom,height:P/g.zoom,top:b,left:I,factor:1,distance:R,aspect:D};{const T=g.fov*Math.PI/180,N=2*Math.tan(T/2)*R,Q=N*(w/P);return{width:Q,height:N,top:b,left:I,factor:w/Q,distance:R,aspect:D}}}let m;const y=g=>a(_=>({performance:{..._.performance,current:g}})),A=new pe;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,_)=>e(g,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new iM,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&y(g.performance.min),m=setTimeout(()=>y(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(_=>({..._,events:{..._.events,...g}})),setSize:(g,_,M,w,P)=>{const b=l().camera,I={width:g,height:_,top:w||0,left:P||0,updateStyle:M};a(D=>({size:I,viewport:{...D.viewport,...p(b,h,I)}}))},setDpr:g=>a(_=>{const M=YD(g);return{viewport:{..._.viewport,dpr:M,initialDpr:_.viewport.initialDpr||M}}}),setFrameloop:(g="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,g!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:X.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,_,M)=>{const w=l().internal;return w.priority=w.priority+(_>0?1:0),w.subscribers.push({ref:g,priority:_,store:M}),w.subscribers=w.subscribers.sort((P,b)=>P.priority-b.priority),()=>{const P=l().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(_>0?1:0),P.subscribers=P.subscribers.filter(b=>b.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:h,set:d}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var p;r=l,s=u.dpr,S8(a,l),h.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&h.domElement instanceof HTMLCanvasElement;h.setSize(l.width,l.height,m)}a!==o&&(o=a,d(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Pm,T8=new Set,b8=new Set,R8=new Set;function s_(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function wf(n,e){switch(n){case"before":return s_(T8,e);case"after":return s_(b8,e);case"tail":return s_(R8,e)}}let o_,a_;function l_(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),o_=e.internal.subscribers,Pm=0;Pm<o_.length;Pm++)a_=o_[Pm],a_.ref.current(a_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function P8(n){let e=!1,t=!1,i,r,s;function o(u){r=requestAnimationFrame(o),e=!0,i=0,wf("before",u),t=!0;for(const d of n.values()){var h;s=d.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((h=s.gl.xr)!=null&&h.isPresenting)&&(i+=l_(u,s))}if(t=!1,wf("after",u),i===0)return wf("tail",u),e=!1,cancelAnimationFrame(r)}function a(u,h=1){var d;if(!u)return n.forEach(p=>a(p.store.getState(),h));(d=u.gl.xr)!=null&&d.isPresenting||!u.internal.active||u.frameloop==="never"||(h>1?u.internal.frames=Math.min(60,u.internal.frames+h):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,h=!0,d,p){if(h&&wf("before",u),d)l_(u,d,p);else for(const m of n.values())l_(u,m.store.getState());h&&wf("after",u)}return{loop:o,invalidate:a,advance:l}}function eL(){const n=X.useContext($D);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Sr(n=t=>t,e){return eL()(n,e)}function _v(n,e=0){const t=eL(),i=t.getState().internal.subscribe,r=XD(n);return dd(()=>i(r,e,t),[e,i,t]),null}const Mb=new WeakMap;function tL(n,e){return function(t,...i){let r=Mb.get(t);return r||(r=new t,Mb.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,x8(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function pd(n,e,t,i){const r=Array.isArray(e)?e:[e],s=f8(tL(t,i),[n,...r],{equal:$t.equ});return Array.isArray(e)?s:s[0]}pd.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return h8(tL(t),[n,...i])};pd.clear=function(n,e){const t=Array.isArray(e)?e:[e];return d8([n,...t])};const yu=new Map,{invalidate:wb,advance:Eb}=P8(yu),{reconciler:c0,applyProps:Mc}=m8(yu,M8),wc={objects:"shallow",strict:!1},B8=(n,e)=>{const t=typeof n=="function"?n(e):n;return qD(t)?t:new YI({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function I8(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function D8(n){const e=yu.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||C8(wb,Eb),o=t||c0.createContainer(s,Vc.ConcurrentRoot,null,!1,null,"",r,null);e||yu.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(h={}){let{gl:d,size:p,scene:m,events:y,onCreated:A,shadows:x=!1,linear:g=!1,flat:_=!1,legacy:M=!1,orthographic:w=!1,frameloop:P="always",dpr:b=[1,2],performance:I,raycaster:D,camera:R,onPointerMissed:T}=h,N=s.getState(),Q=N.gl;N.gl||N.set({gl:Q=B8(d,n)});let W=N.raycaster;W||N.set({raycaster:W=new ND});const{params:K,...Y}=D||{};if($t.equ(Y,W,wc)||Mc(W,{...Y}),$t.equ(K,W.params,wc)||Mc(W,{params:{...W.params,...K}}),!N.camera||N.camera===u&&!$t.equ(u,R,wc)){u=R;const V=R instanceof rd,q=V?R:w?new Pr(0,0,0,0,.1,1e3):new rn(75,0,.1,1e3);V||(q.position.z=5,R&&(Mc(q,R),("aspect"in R||"left"in R||"right"in R||"bottom"in R||"top"in R)&&(q.manual=!0,q.updateProjectionMatrix())),!N.camera&&!(R!=null&&R.rotation)&&q.lookAt(0,0,0)),N.set({camera:q}),W.camera=q}if(!N.scene){let V;m instanceof s0?V=m:(V=new s0,m&&Mc(V,m)),N.set({scene:Ec(V)})}if(!N.xr){var Z;const V=(be,re)=>{const me=s.getState();me.frameloop!=="never"&&Eb(be,!0,me,re)},q=()=>{const be=s.getState();be.gl.xr.enabled=be.gl.xr.isPresenting,be.gl.xr.setAnimationLoop(be.gl.xr.isPresenting?V:null),be.gl.xr.isPresenting||wb(be)},ue={connect(){const be=s.getState().gl;be.xr.addEventListener("sessionstart",q),be.xr.addEventListener("sessionend",q)},disconnect(){const be=s.getState().gl;be.xr.removeEventListener("sessionstart",q),be.xr.removeEventListener("sessionend",q)}};typeof((Z=Q.xr)==null?void 0:Z.addEventListener)=="function"&&ue.connect(),N.set({xr:ue})}if(Q.shadowMap){const V=Q.shadowMap.enabled,q=Q.shadowMap.type;if(Q.shadowMap.enabled=!!x,$t.boo(x))Q.shadowMap.type=Xf;else if($t.str(x)){var z;const ue={basic:kB,percentage:z0,soft:Xf,variance:Wr};Q.shadowMap.type=(z=ue[x])!=null?z:Xf}else $t.obj(x)&&Object.assign(Q.shadowMap,x);(V!==Q.shadowMap.enabled||q!==Q.shadowMap.type)&&(Q.shadowMap.needsUpdate=!0)}const B=WD();B&&("enabled"in B?B.enabled=!M:"legacyMode"in B&&(B.legacyMode=M)),l||Mc(Q,{outputEncoding:g?3e3:3001,toneMapping:_?Ss:dS}),N.legacy!==M&&N.set(()=>({legacy:M})),N.linear!==g&&N.set(()=>({linear:g})),N.flat!==_&&N.set(()=>({flat:_})),d&&!$t.fun(d)&&!qD(d)&&!$t.equ(d,Q,wc)&&Mc(Q,d),y&&!N.events.handlers&&N.set({events:y(s)});const G=I8(n,p);return $t.equ(G,N.size,wc)||N.setSize(G.width,G.height,G.updateStyle,G.top,G.left),b&&N.viewport.dpr!==YD(b)&&N.setDpr(b),N.frameloop!==P&&N.setFrameloop(P),N.onPointerMissed||N.set({onPointerMissed:T}),I&&!$t.equ(I,N.performance,wc)&&N.set(V=>({performance:{...V.performance,...I}})),a=A,l=!0,this},render(h){return l||this.configure(),c0.updateContainer(ne.jsx(L8,{store:s,children:h,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){nL(n)}}}function L8({store:n,children:e,onCreated:t,rootElement:i}){return dd(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),ne.jsx($D.Provider,{value:n,children:e})}function nL(n,e){const t=yu.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),c0.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),_8(r),yu.delete(n)}catch{}},500)})}}c0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:X.version});function z1(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var h=Date.now()-o;h<e&&h>=0?i=setTimeout(l,e-h):(i=null,t||(a=n.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,o=Date.now();var h=t&&!i;return i||(i=setTimeout(l,e)),h&&(a=n.apply(s,r),s=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}z1.debounce=z1;var N8=z1;const Cb=Kh(N8);function F8(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=X.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=X.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,h=e?typeof e=="number"?e:e.resize:null,d=X.useRef(!1);X.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[p,m,y]=X.useMemo(()=>{const _=()=>{if(!l.current.element)return;const{left:M,top:w,width:P,height:b,bottom:I,right:D,x:R,y:T}=l.current.element.getBoundingClientRect(),N={left:M,top:w,width:P,height:b,bottom:I,right:D,x:R,y:T};l.current.element instanceof HTMLElement&&r&&(N.height=l.current.element.offsetHeight,N.width=l.current.element.offsetWidth),Object.freeze(N),d.current&&!H8(l.current.lastBounds,N)&&a(l.current.lastBounds=N)};return[_,h?Cb(_,h):_,u?Cb(_,u):_]},[a,r,u,h]);function A(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function x(){l.current.element&&(l.current.resizeObserver=new s(y),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(_=>_.addEventListener("scroll",y,{capture:!0,passive:!0})))}const g=_=>{!_||_===l.current.element||(A(),l.current.element=_,l.current.scrollContainers=iL(_),x())};return U8(y,!!t),O8(m),X.useEffect(()=>{A(),x()},[t,y,m]),X.useEffect(()=>A,[]),[g,o,p]}function O8(n){X.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function U8(n,e){X.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function iL(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...iL(n.parentElement)]}const k8=["x","y","top","bottom","left","right","width","height"],H8=(n,e)=>k8.every(t=>n[t]===e[t]);var z8=Object.defineProperty,G8=Object.defineProperties,V8=Object.getOwnPropertyDescriptors,Tb=Object.getOwnPropertySymbols,W8=Object.prototype.hasOwnProperty,j8=Object.prototype.propertyIsEnumerable,bb=(n,e,t)=>e in n?z8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rb=(n,e)=>{for(var t in e||(e={}))W8.call(e,t)&&bb(n,t,e[t]);if(Tb)for(var t of Tb(e))j8.call(e,t)&&bb(n,t,e[t]);return n},X8=(n,e)=>G8(n,V8(e)),Pb,Bb;typeof window<"u"&&((Pb=window.document)!=null&&Pb.createElement||((Bb=window.navigator)==null?void 0:Bb.product)==="ReactNative")?X.useLayoutEffect:X.useEffect;function rL(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=rL(i,e,t);if(r)return r;i=i.sibling}}function sL(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Ib=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=Ib;return}return Ib.apply(this,arguments)};const lM=sL(X.createContext(null));class oL extends X.Component{render(){return X.createElement(lM.Provider,{value:this._reactInternals},this.props.children)}}function J8(){const n=X.useContext(lM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=X.useId();return X.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=rL(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function K8(){const n=J8(),[e]=X.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==lM&&!e.has(r)&&e.set(r,X.useContext(sL(r)))}t=t.return}return e}function Y8(){const n=K8();return X.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>X.createElement(e,null,X.createElement(t.Provider,X8(Rb({},i),{value:n.get(t)}))),e=>X.createElement(oL,Rb({},e))),[n])}const c_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Q8(n){const{handlePointer:e}=E8(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(c_).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=c_[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=c_[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const Z8=X.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=Q8,eventSource:a,eventPrefix:l,shadows:u,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:A,performance:x,raycaster:g,camera:_,scene:M,onPointerMissed:w,onCreated:P,...b},I){X.useMemo(()=>p8(n8),[]);const D=Y8(),[R,T]=F8({scroll:!0,debounce:{scroll:50,resize:0},...i}),N=X.useRef(null),Q=X.useRef(null);X.useImperativeHandle(I,()=>N.current);const W=XD(w),[K,Y]=X.useState(!1),[Z,z]=X.useState(!1);if(K)throw K;if(Z)throw Z;const B=X.useRef(null);dd(()=>{const V=N.current;T.width>0&&T.height>0&&V&&(B.current||(B.current=D8(V)),B.current.configure({gl:s,events:o,shadows:u,linear:h,flat:d,legacy:p,orthographic:m,frameloop:y,dpr:A,performance:x,raycaster:g,camera:_,scene:M,size:T,onPointerMissed:(...q)=>W.current==null?void 0:W.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(a?g8(a)?a.current:a:Q.current),l&&q.setEvents({compute:(ue,be)=>{const re=ue[l+"X"],me=ue[l+"Y"];be.pointer.set(re/be.size.width*2-1,-(me/be.size.height)*2+1),be.raycaster.setFromCamera(be.pointer,be.camera)}}),P==null||P(q)}}),B.current.render(ne.jsx(D,{children:ne.jsx(JD,{set:z,children:ne.jsx(X.Suspense,{fallback:ne.jsx(v8,{set:Y}),children:e})})})))}),X.useEffect(()=>{const V=N.current;if(V)return()=>nL(V)},[]);const G=a?"none":"auto";return ne.jsx("div",{ref:Q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:G,...r},...b,children:ne.jsx("div",{ref:R,style:{width:"100%",height:"100%"},children:ne.jsx("canvas",{ref:N,style:{display:"block"},children:t})})})}),aL=X.forwardRef(function(e,t){return ne.jsx(oL,{children:ne.jsx(Z8,{...e,ref:t})})});function Hh(){return Hh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Hh.apply(null,arguments)}const md=new U,cM=new U,q8=new U,Db=new pe;function $8(n,e,t){const i=md.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function e6(n,e){const t=md.setFromMatrixPosition(n.matrixWorld),i=cM.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(q8);return r.angleTo(s)>Math.PI/2}function t6(n,e,t,i){const r=md.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),Db.set(s.x,s.y),t.setFromCamera(Db,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function n6(n,e){if(e instanceof Pr)return e.zoom;if(e instanceof rn){const t=md.setFromMatrixPosition(n.matrixWorld),i=cM.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function i6(n,e,t){if(e instanceof rn||e instanceof Pr){const i=md.setFromMatrixPosition(n.matrixWorld),r=cM.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const G1=n=>Math.abs(n)<1e-10?0:n;function lL(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=G1(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const r6=(n=>e=>lL(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),s6=(n=>(e,t)=>lL(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function o6(n){return n&&typeof n=="object"&&"current"in n}const a6=X.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:h=!1,occlude:d,onOcclude:p,castShadow:m,receiveShadow:y,material:A,geometry:x,zIndexRange:g=[16777271,0],calculatePosition:_=$8,as:M="div",wrapperClass:w,pointerEvents:P="auto",...b},I)=>{const{gl:D,camera:R,scene:T,size:N,raycaster:Q,events:W,viewport:K}=Sr(),[Y]=X.useState(()=>document.createElement(M)),Z=X.useRef(),z=X.useRef(null),B=X.useRef(0),G=X.useRef([0,0]),V=X.useRef(null),q=X.useRef(null),ue=(a==null?void 0:a.current)||W.connected||D.domElement.parentNode,be=X.useRef(null),re=X.useRef(!1),me=X.useMemo(()=>d&&d!=="blending"||Array.isArray(d)&&d.length&&o6(d[0]),[d]);X.useLayoutEffect(()=>{const Ke=D.domElement;d&&d==="blending"?(Ke.style.zIndex=`${Math.floor(g[0]/2)}`,Ke.style.position="absolute",Ke.style.pointerEvents="none"):(Ke.style.zIndex=null,Ke.style.position=null,Ke.style.pointerEvents=null)},[d]),X.useLayoutEffect(()=>{if(z.current){const Ke=Z.current=CB(Y);if(T.updateMatrixWorld(),h)Y.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const He=_(z.current,R,N);Y.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${He[0]}px,${He[1]}px,0);transform-origin:0 0;`}return ue&&(r?ue.prepend(Y):ue.appendChild(Y)),()=>{ue&&ue.removeChild(Y),Ke.unmount()}}},[ue,h]),X.useLayoutEffect(()=>{w&&(Y.className=w)},[w]);const we=X.useMemo(()=>h?{position:"absolute",top:0,left:0,width:N.width,height:N.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-N.height/2,left:-N.width/2,width:N.width,height:N.height},...t},[t,s,o,N,h]),Ee=X.useMemo(()=>({position:"absolute",pointerEvents:P}),[P]);X.useLayoutEffect(()=>{if(re.current=!1,h){var Ke;(Ke=Z.current)==null||Ke.render(X.createElement("div",{ref:V,style:we},X.createElement("div",{ref:q,style:Ee},X.createElement("div",{ref:I,className:i,style:t,children:n}))))}else{var He;(He=Z.current)==null||He.render(X.createElement("div",{ref:I,style:we,className:i,children:n}))}});const nt=X.useRef(!0);_v(Ke=>{if(z.current){R.updateMatrixWorld(),z.current.updateWorldMatrix(!0,!1);const He=h?G.current:_(z.current,R,N);if(h||Math.abs(B.current-R.zoom)>e||Math.abs(G.current[0]-He[0])>e||Math.abs(G.current[1]-He[1])>e){const O=e6(z.current,R);let ye=!1;me&&(Array.isArray(d)?ye=d.map(Ye=>Ye.current):d!=="blending"&&(ye=[T]));const Me=nt.current;if(ye){const Ye=t6(z.current,R,Q,ye);nt.current=Ye&&!O}else nt.current=!O;Me!==nt.current&&(p?p(!nt.current):Y.style.display=nt.current?"block":"none");const Ie=Math.floor(g[0]/2),he=d?me?[g[0],Ie]:[Ie-1,0]:g;if(Y.style.zIndex=`${i6(z.current,R,he)}`,h){const[Ye,Le]=[N.width/2,N.height/2],Ge=R.projectionMatrix.elements[5]*Le,{isOrthographicCamera:H,top:L,left:se,bottom:xe,right:_e}=R,Ae=r6(R.matrixWorldInverse),$e=H?`scale(${Ge})translate(${G1(-(_e+se)/2)}px,${G1((L+xe)/2)}px)`:`translateZ(${Ge}px)`;let Pe=z.current.matrixWorld;u&&(Pe=R.matrixWorldInverse.clone().transpose().copyPosition(Pe).scale(z.current.scale),Pe.elements[3]=Pe.elements[7]=Pe.elements[11]=0,Pe.elements[15]=1),Y.style.width=N.width+"px",Y.style.height=N.height+"px",Y.style.perspective=H?"":`${Ge}px`,V.current&&q.current&&(V.current.style.transform=`${$e}${Ae}translate(${Ye}px,${Le}px)`,q.current.style.transform=s6(Pe,1/((l||10)/400)))}else{const Ye=l===void 0?1:n6(z.current,R)*l;Y.style.transform=`translate3d(${He[0]}px,${He[1]}px,0) scale(${Ye})`}G.current=He,B.current=R.zoom}}if(!me&&be.current&&!re.current)if(h){if(V.current){const He=V.current.children[0];if(He!=null&&He.clientWidth&&He!=null&&He.clientHeight){const{isOrthographicCamera:O}=R;if(O||x)b.scale&&(Array.isArray(b.scale)?b.scale instanceof U?be.current.scale.copy(b.scale.clone().divideScalar(1)):be.current.scale.set(1/b.scale[0],1/b.scale[1],1/b.scale[2]):be.current.scale.setScalar(1/b.scale));else{const ye=(l||10)/400,Me=He.clientWidth*ye,Ie=He.clientHeight*ye;be.current.scale.set(Me,Ie,1)}re.current=!0}}}else{const He=Y.children[0];if(He!=null&&He.clientWidth&&He!=null&&He.clientHeight){const O=1/K.factor,ye=He.clientWidth*O,Me=He.clientHeight*O;be.current.scale.set(ye,Me,1),re.current=!0}be.current.lookAt(Ke.camera.position)}});const dt=X.useMemo(()=>({vertexShader:h?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[h]);return X.createElement("group",Hh({},b,{ref:z}),d&&!me&&X.createElement("mesh",{castShadow:m,receiveShadow:y,ref:be},x||X.createElement("planeGeometry",null),A||X.createElement("shaderMaterial",{side:Tr,vertexShader:dt.vertexShader,fragmentShader:dt.fragmentShader})))});let Ef=0;const l6=UD(n=>(Gc.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-Ef)/(i-Ef)*100})},Gc.onLoad=()=>{n({active:!1})},Gc.onError=e=>n(t=>({errors:[...t.errors,e]})),Gc.onProgress=(e,t,i)=>{t===i&&(Ef=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-Ef)/(i-Ef)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Lb(n,e){if(e===MI)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===r0||e===wS){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===r0)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const c6=parseInt(ed.replace(/\D+/g,""));var u6=Object.defineProperty,f6=(n,e,t)=>e in n?u6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_t=(n,e,t)=>(f6(n,typeof e!="symbol"?e+"":e,t),t);const Bm=new Dl,Nb=new Vs,h6=Math.cos(70*(Math.PI/180)),Fb=(n,e)=>(n%e+e)%e;let d6=class extends Ts{constructor(e,t){super(),_t(this,"object"),_t(this,"domElement"),_t(this,"enabled",!0),_t(this,"target",new U),_t(this,"minDistance",0),_t(this,"maxDistance",1/0),_t(this,"minZoom",0),_t(this,"maxZoom",1/0),_t(this,"minPolarAngle",0),_t(this,"maxPolarAngle",Math.PI),_t(this,"minAzimuthAngle",-1/0),_t(this,"maxAzimuthAngle",1/0),_t(this,"enableDamping",!1),_t(this,"dampingFactor",.05),_t(this,"enableZoom",!0),_t(this,"zoomSpeed",1),_t(this,"enableRotate",!0),_t(this,"rotateSpeed",1),_t(this,"enablePan",!0),_t(this,"panSpeed",1),_t(this,"screenSpacePanning",!0),_t(this,"keyPanSpeed",7),_t(this,"zoomToCursor",!1),_t(this,"autoRotate",!1),_t(this,"autoRotateSpeed",2),_t(this,"reverseOrbit",!1),_t(this,"reverseHorizontalOrbit",!1),_t(this,"reverseVerticalOrbit",!1),_t(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),_t(this,"mouseButtons",{LEFT:Va.ROTATE,MIDDLE:Va.DOLLY,RIGHT:Va.PAN}),_t(this,"touches",{ONE:Wa.ROTATE,TWO:Wa.DOLLY_PAN}),_t(this,"target0"),_t(this,"position0"),_t(this,"zoom0"),_t(this,"_domElementKeyEvents",null),_t(this,"getPolarAngle"),_t(this,"getAzimuthalAngle"),_t(this,"setPolarAngle"),_t(this,"setAzimuthalAngle"),_t(this,"getDistance"),_t(this,"listenToKeyEvents"),_t(this,"stopListenToKeyEvents"),_t(this,"saveState"),_t(this,"reset"),_t(this,"update"),_t(this,"connect"),_t(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>h.phi,this.getAzimuthalAngle=()=>h.theta,this.setPolarAngle=J=>{let ge=Fb(J,2*Math.PI),Ue=h.phi;Ue<0&&(Ue+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let j=Math.abs(ge-Ue);2*Math.PI-j<j&&(ge<Ue?ge+=2*Math.PI:Ue+=2*Math.PI),d.phi=ge-Ue,i.update()},this.setAzimuthalAngle=J=>{let ge=Fb(J,2*Math.PI),Ue=h.theta;Ue<0&&(Ue+=2*Math.PI),ge<0&&(ge+=2*Math.PI);let j=Math.abs(ge-Ue);2*Math.PI-j<j&&(ge<Ue?ge+=2*Math.PI:Ue+=2*Math.PI),d.theta=ge-Ue,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=J=>{J.addEventListener("keydown",Pe),this._domElementKeyEvents=J},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Pe),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const J=new U,ge=new U(0,1,0),Ue=new Jn().setFromUnitVectors(e.up,ge),j=Ue.clone().invert(),Se=new U,de=new Jn,ve=2*Math.PI;return function(){const at=i.object.position;Ue.setFromUnitVectors(e.up,ge),j.copy(Ue).invert(),J.copy(at).sub(i.target),J.applyQuaternion(Ue),h.setFromVector3(J),i.autoRotate&&l===a.NONE&&K(Q()),i.enableDamping?(h.theta+=d.theta*i.dampingFactor,h.phi+=d.phi*i.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let yt=i.minAzimuthAngle,Dt=i.maxAzimuthAngle;isFinite(yt)&&isFinite(Dt)&&(yt<-Math.PI?yt+=ve:yt>Math.PI&&(yt-=ve),Dt<-Math.PI?Dt+=ve:Dt>Math.PI&&(Dt-=ve),yt<=Dt?h.theta=Math.max(yt,Math.min(Dt,h.theta)):h.theta=h.theta>(yt+Dt)/2?Math.max(yt,h.theta):Math.min(Dt,h.theta)),h.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,h.phi)),h.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&R||i.object.isOrthographicCamera?h.radius=ue(h.radius):h.radius=ue(h.radius*p),J.setFromSpherical(h),J.applyQuaternion(j),at.copy(i.target).add(J),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(d.theta*=1-i.dampingFactor,d.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(d.set(0,0,0),m.set(0,0,0));let st=!1;if(i.zoomToCursor&&R){let Te=null;if(i.object instanceof rn&&i.object.isPerspectiveCamera){const ct=J.length();Te=ue(ct*p);const Lt=ct-Te;i.object.position.addScaledVector(I,Lt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const ct=new U(D.x,D.y,0);ct.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),st=!0;const Lt=new U(D.x,D.y,0);Lt.unproject(i.object),i.object.position.sub(Lt).add(ct),i.object.updateMatrixWorld(),Te=J.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Te!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Te).add(i.object.position):(Bm.origin.copy(i.object.position),Bm.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Bm.direction))<h6?e.lookAt(i.target):(Nb.setFromNormalAndCoplanarPoint(i.object.up,i.target),Bm.intersectPlane(Nb,i.target))))}else i.object instanceof Pr&&i.object.isOrthographicCamera&&(st=p!==1,st&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,R=!1,st||Se.distanceToSquared(i.object.position)>u||8*(1-de.dot(i.object.quaternion))>u?(i.dispatchEvent(r),Se.copy(i.object.position),de.copy(i.object.quaternion),st=!1,!0):!1}})(),this.connect=J=>{J===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=J,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Ce),i.domElement.addEventListener("pointerdown",L),i.domElement.addEventListener("pointercancel",xe),i.domElement.addEventListener("wheel",$e)},this.dispose=()=>{var J,ge,Ue,j,Se,de;i.domElement&&(i.domElement.style.touchAction="auto"),(J=i.domElement)==null||J.removeEventListener("contextmenu",Ce),(ge=i.domElement)==null||ge.removeEventListener("pointerdown",L),(Ue=i.domElement)==null||Ue.removeEventListener("pointercancel",xe),(j=i.domElement)==null||j.removeEventListener("wheel",$e),(Se=i.domElement)==null||Se.ownerDocument.removeEventListener("pointermove",se),(de=i.domElement)==null||de.ownerDocument.removeEventListener("pointerup",xe),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",Pe)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,h=new U1,d=new U1;let p=1;const m=new U,y=new pe,A=new pe,x=new pe,g=new pe,_=new pe,M=new pe,w=new pe,P=new pe,b=new pe,I=new U,D=new pe;let R=!1;const T=[],N={};function Q(){return 2*Math.PI/60/60*i.autoRotateSpeed}function W(){return Math.pow(.95,i.zoomSpeed)}function K(J){i.reverseOrbit||i.reverseHorizontalOrbit?d.theta+=J:d.theta-=J}function Y(J){i.reverseOrbit||i.reverseVerticalOrbit?d.phi+=J:d.phi-=J}const Z=(()=>{const J=new U;return function(Ue,j){J.setFromMatrixColumn(j,0),J.multiplyScalar(-Ue),m.add(J)}})(),z=(()=>{const J=new U;return function(Ue,j){i.screenSpacePanning===!0?J.setFromMatrixColumn(j,1):(J.setFromMatrixColumn(j,0),J.crossVectors(i.object.up,J)),J.multiplyScalar(Ue),m.add(J)}})(),B=(()=>{const J=new U;return function(Ue,j){const Se=i.domElement;if(Se&&i.object instanceof rn&&i.object.isPerspectiveCamera){const de=i.object.position;J.copy(de).sub(i.target);let ve=J.length();ve*=Math.tan(i.object.fov/2*Math.PI/180),Z(2*Ue*ve/Se.clientHeight,i.object.matrix),z(2*j*ve/Se.clientHeight,i.object.matrix)}else Se&&i.object instanceof Pr&&i.object.isOrthographicCamera?(Z(Ue*(i.object.right-i.object.left)/i.object.zoom/Se.clientWidth,i.object.matrix),z(j*(i.object.top-i.object.bottom)/i.object.zoom/Se.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function G(J){i.object instanceof rn&&i.object.isPerspectiveCamera||i.object instanceof Pr&&i.object.isOrthographicCamera?p/=J:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function V(J){i.object instanceof rn&&i.object.isPerspectiveCamera||i.object instanceof Pr&&i.object.isOrthographicCamera?p*=J:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function q(J){if(!i.zoomToCursor||!i.domElement)return;R=!0;const ge=i.domElement.getBoundingClientRect(),Ue=J.clientX-ge.left,j=J.clientY-ge.top,Se=ge.width,de=ge.height;D.x=Ue/Se*2-1,D.y=-(j/de)*2+1,I.set(D.x,D.y,1).unproject(i.object).sub(i.object.position).normalize()}function ue(J){return Math.max(i.minDistance,Math.min(i.maxDistance,J))}function be(J){y.set(J.clientX,J.clientY)}function re(J){q(J),w.set(J.clientX,J.clientY)}function me(J){g.set(J.clientX,J.clientY)}function we(J){A.set(J.clientX,J.clientY),x.subVectors(A,y).multiplyScalar(i.rotateSpeed);const ge=i.domElement;ge&&(K(2*Math.PI*x.x/ge.clientHeight),Y(2*Math.PI*x.y/ge.clientHeight)),y.copy(A),i.update()}function Ee(J){P.set(J.clientX,J.clientY),b.subVectors(P,w),b.y>0?G(W()):b.y<0&&V(W()),w.copy(P),i.update()}function nt(J){_.set(J.clientX,J.clientY),M.subVectors(_,g).multiplyScalar(i.panSpeed),B(M.x,M.y),g.copy(_),i.update()}function dt(J){q(J),J.deltaY<0?V(W()):J.deltaY>0&&G(W()),i.update()}function Ke(J){let ge=!1;switch(J.code){case i.keys.UP:B(0,i.keyPanSpeed),ge=!0;break;case i.keys.BOTTOM:B(0,-i.keyPanSpeed),ge=!0;break;case i.keys.LEFT:B(i.keyPanSpeed,0),ge=!0;break;case i.keys.RIGHT:B(-i.keyPanSpeed,0),ge=!0;break}ge&&(J.preventDefault(),i.update())}function He(){if(T.length==1)y.set(T[0].pageX,T[0].pageY);else{const J=.5*(T[0].pageX+T[1].pageX),ge=.5*(T[0].pageY+T[1].pageY);y.set(J,ge)}}function O(){if(T.length==1)g.set(T[0].pageX,T[0].pageY);else{const J=.5*(T[0].pageX+T[1].pageX),ge=.5*(T[0].pageY+T[1].pageY);g.set(J,ge)}}function ye(){const J=T[0].pageX-T[1].pageX,ge=T[0].pageY-T[1].pageY,Ue=Math.sqrt(J*J+ge*ge);w.set(0,Ue)}function Me(){i.enableZoom&&ye(),i.enablePan&&O()}function Ie(){i.enableZoom&&ye(),i.enableRotate&&He()}function he(J){if(T.length==1)A.set(J.pageX,J.pageY);else{const Ue=je(J),j=.5*(J.pageX+Ue.x),Se=.5*(J.pageY+Ue.y);A.set(j,Se)}x.subVectors(A,y).multiplyScalar(i.rotateSpeed);const ge=i.domElement;ge&&(K(2*Math.PI*x.x/ge.clientHeight),Y(2*Math.PI*x.y/ge.clientHeight)),y.copy(A)}function Ye(J){if(T.length==1)_.set(J.pageX,J.pageY);else{const ge=je(J),Ue=.5*(J.pageX+ge.x),j=.5*(J.pageY+ge.y);_.set(Ue,j)}M.subVectors(_,g).multiplyScalar(i.panSpeed),B(M.x,M.y),g.copy(_)}function Le(J){const ge=je(J),Ue=J.pageX-ge.x,j=J.pageY-ge.y,Se=Math.sqrt(Ue*Ue+j*j);P.set(0,Se),b.set(0,Math.pow(P.y/w.y,i.zoomSpeed)),G(b.y),w.copy(P)}function Ge(J){i.enableZoom&&Le(J),i.enablePan&&Ye(J)}function H(J){i.enableZoom&&Le(J),i.enableRotate&&he(J)}function L(J){var ge,Ue;i.enabled!==!1&&(T.length===0&&((ge=i.domElement)==null||ge.ownerDocument.addEventListener("pointermove",se),(Ue=i.domElement)==null||Ue.ownerDocument.addEventListener("pointerup",xe)),ze(J),J.pointerType==="touch"?We(J):_e(J))}function se(J){i.enabled!==!1&&(J.pointerType==="touch"?vt(J):Ae(J))}function xe(J){var ge,Ue,j;bt(J),T.length===0&&((ge=i.domElement)==null||ge.releasePointerCapture(J.pointerId),(Ue=i.domElement)==null||Ue.ownerDocument.removeEventListener("pointermove",se),(j=i.domElement)==null||j.ownerDocument.removeEventListener("pointerup",xe)),i.dispatchEvent(o),l=a.NONE}function _e(J){let ge;switch(J.button){case 0:ge=i.mouseButtons.LEFT;break;case 1:ge=i.mouseButtons.MIDDLE;break;case 2:ge=i.mouseButtons.RIGHT;break;default:ge=-1}switch(ge){case Va.DOLLY:if(i.enableZoom===!1)return;re(J),l=a.DOLLY;break;case Va.ROTATE:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enablePan===!1)return;me(J),l=a.PAN}else{if(i.enableRotate===!1)return;be(J),l=a.ROTATE}break;case Va.PAN:if(J.ctrlKey||J.metaKey||J.shiftKey){if(i.enableRotate===!1)return;be(J),l=a.ROTATE}else{if(i.enablePan===!1)return;me(J),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ae(J){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;we(J);break;case a.DOLLY:if(i.enableZoom===!1)return;Ee(J);break;case a.PAN:if(i.enablePan===!1)return;nt(J);break}}function $e(J){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(J.preventDefault(),i.dispatchEvent(s),dt(J),i.dispatchEvent(o))}function Pe(J){i.enabled===!1||i.enablePan===!1||Ke(J)}function We(J){switch(lt(J),T.length){case 1:switch(i.touches.ONE){case Wa.ROTATE:if(i.enableRotate===!1)return;He(),l=a.TOUCH_ROTATE;break;case Wa.PAN:if(i.enablePan===!1)return;O(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case Wa.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Me(),l=a.TOUCH_DOLLY_PAN;break;case Wa.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Ie(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function vt(J){switch(lt(J),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;he(J),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Ye(J),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ge(J),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;H(J),i.update();break;default:l=a.NONE}}function Ce(J){i.enabled!==!1&&J.preventDefault()}function ze(J){T.push(J)}function bt(J){delete N[J.pointerId];for(let ge=0;ge<T.length;ge++)if(T[ge].pointerId==J.pointerId){T.splice(ge,1);return}}function lt(J){let ge=N[J.pointerId];ge===void 0&&(ge=new pe,N[J.pointerId]=ge),ge.set(J.pageX,J.pageY)}function je(J){const ge=J.pointerId===T[0].pointerId?T[1]:T[0];return N[ge.pointerId]}t!==void 0&&this.connect(t),this.update()}};function u0(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const al="srgb",$s="srgb-linear",Ob=3001,p6=3e3;class uM extends Ai{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new x6(t)}),this.register(function(t){return new _6(t)}),this.register(function(t){return new R6(t)}),this.register(function(t){return new P6(t)}),this.register(function(t){return new B6(t)}),this.register(function(t){return new S6(t)}),this.register(function(t){return new M6(t)}),this.register(function(t){return new w6(t)}),this.register(function(t){return new E6(t)}),this.register(function(t){return new y6(t)}),this.register(function(t){return new C6(t)}),this.register(function(t){return new A6(t)}),this.register(function(t){return new b6(t)}),this.register(function(t){return new T6(t)}),this.register(function(t){return new g6(t)}),this.register(function(t){return new I6(t)}),this.register(function(t){return new D6(t)})}load(e,t,i,r){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=$o.extractUrlBase(e);o=$o.resolveURL(u,this.path)}else o=$o.extractUrlBase(e);this.manager.itemStart(e);const a=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new or(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,o,function(h){t(h),s.manager.itemEnd(e)},a)}catch(h){a(h)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(u0(new Uint8Array(e.slice(0,4)))===cL){try{o[Bt.KHR_BINARY_GLTF]=new L6(e)}catch(h){r&&r(h);return}s=JSON.parse(o[Bt.KHR_BINARY_GLTF].content)}else s=JSON.parse(u0(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new J6(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](l);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],d=s.extensionsRequired||[];switch(h){case Bt.KHR_MATERIALS_UNLIT:o[h]=new v6;break;case Bt.KHR_DRACO_MESH_COMPRESSION:o[h]=new N6(s,this.dracoLoader);break;case Bt.KHR_TEXTURE_TRANSFORM:o[h]=new F6;break;case Bt.KHR_MESH_QUANTIZATION:o[h]=new O6;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function m6(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Bt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class g6{constructor(e){this.parser=e,this.name=Bt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const h=new Oe(16777215);l.color!==void 0&&h.setRGB(l.color[0],l.color[1],l.color[2],$s);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new tM(h),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new eM(h),u.distance=d;break;case"spot":u=new $S(h),u.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,zs(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class v6{constructor(){this.name=Bt.KHR_MATERIALS_UNLIT}getMaterialType(){return tr}extendParams(e,t,i){const r=[];e.color=new Oe(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],$s),e.opacity=o[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,al))}return Promise.all(r)}}class y6{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class x6{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new pe(a,a)}return Promise.all(s)}}class _6{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lr}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class A6{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class S6{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Oe(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],$s)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,al)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class M6{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class w6{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Oe().setRGB(a[0],a[1],a[2],$s),Promise.all(s)}}class E6{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lr}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class C6{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Oe().setRGB(a[0],a[1],a[2],$s),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,al)),Promise.all(s)}}class T6{constructor(e){this.parser=e,this.name=Bt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class b6{constructor(e){this.parser=e,this.name=Bt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Lr}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class R6{constructor(e){this.parser=e,this.name=Bt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class P6{constructor(e){this.parser=e,this.name=Bt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class B6{constructor(e){this.parser=e,this.name=Bt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const u=i.options.manager.getHandler(a.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class I6{constructor(e){this.name=Bt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=r.byteOffset||0,u=r.byteLength||0,h=r.count,d=r.byteStride,p=new Uint8Array(a,l,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(h,d,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(h*d);return o.decodeGltfBuffer(new Uint8Array(m),h,d,p,r.mode,r.filter),m})})}else return null}}class D6{constructor(e){this.name=Bt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const u of r.primitives)if(u.mode!==Ar.TRIANGLES&&u.mode!==Ar.TRIANGLE_STRIP&&u.mode!==Ar.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const u in o)a.push(this.parser.getDependency("accessor",o[u]).then(h=>(l[u]=h,l[u])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(u=>{const h=u.pop(),d=h.isGroup?h.children:[h],p=u[0].count,m=[];for(const y of d){const A=new ft,x=new U,g=new Jn,_=new U(1,1,1),M=new kS(y.geometry,y.material,p);for(let w=0;w<p;w++)l.TRANSLATION&&x.fromBufferAttribute(l.TRANSLATION,w),l.ROTATION&&g.fromBufferAttribute(l.ROTATION,w),l.SCALE&&_.fromBufferAttribute(l.SCALE,w),M.setMatrixAt(w,A.compose(x,g,_));for(const w in l)if(w==="_COLOR_0"){const P=l[w];M.instanceColor=new El(P.array,P.itemSize,P.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&y.geometry.setAttribute(w,l[w]);Nt.prototype.copy.call(M,y),this.parser.assignFinalMaterial(M),m.push(M)}return h.isGroup?(h.clear(),h.add(...m),h):m[0]}))}}const cL="glTF",Cf=12,Ub={JSON:1313821514,BIN:5130562};class L6{constructor(e){this.name=Bt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Cf);if(this.header={magic:u0(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==cL)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Cf,r=new DataView(e,Cf);let s=0;for(;s<i;){const o=r.getUint32(s,!0);s+=4;const a=r.getUint32(s,!0);if(s+=4,a===Ub.JSON){const l=new Uint8Array(e,Cf+s,o);this.content=u0(l)}else if(a===Ub.BIN){const l=Cf+s;this.body=e.slice(l,l+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class N6{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Bt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},u={};for(const h in o){const d=V1[h]||h.toLowerCase();a[d]=o[h]}for(const h in e.attributes){const d=V1[h]||h.toLowerCase();if(o[h]!==void 0){const p=i.accessors[e.attributes[h]],m=iu[p.componentType];u[d]=m.name,l[d]=p.normalized===!0}}return t.getDependency("bufferView",s).then(function(h){return new Promise(function(d,p){r.decodeDracoFile(h,function(m){for(const y in m.attributes){const A=m.attributes[y],x=l[y];x!==void 0&&(A.normalized=x)}d(m)},a,u,$s,p)})})}}class F6{constructor(){this.name=Bt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class O6{constructor(){this.name=Bt.KHR_MESH_QUANTIZATION}}class uL extends Bu{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,u=a*3,h=r-t,d=(i-t)/h,p=d*d,m=p*d,y=e*u,A=y-u,x=-2*m+3*p,g=m-p,_=1-x,M=g-p+d;for(let w=0;w!==a;w++){const P=o[A+w+a],b=o[A+w+l]*h,I=o[y+w+a],D=o[y+w]*h;s[w]=_*P+M*b+x*I+g*D}return s}}const U6=new Jn;class k6 extends uL{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return U6.fromArray(s).normalize().toArray(s),s}}const Ar={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},iu={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},kb={9728:On,9729:An,9984:V0,9985:tu,9986:tl,9987:Rr},Hb={33071:er,33648:fu,10497:sa},u_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},V1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...c6>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Io={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},H6={CUBICSPLINE:void 0,LINEAR:pu,STEP:du},f_={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function z6(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new hd({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Cs})),n.DefaultMaterial}function Ua(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function zs(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function G6(n,e,t){let i=!1,r=!1,s=!1;for(let u=0,h=e.length;u<h;u++){const d=e[u];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let u=0,h=e.length;u<h;u++){const d=e[u];if(i){const p=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(p)}if(r){const p=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(u){const h=u[0],d=u[1],p=u[2];return i&&(n.morphAttributes.position=h),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}function V6(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function W6(n){let e;const t=n.extensions&&n.extensions[Bt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+h_(t.attributes):e=n.indices+":"+h_(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+h_(n.targets[i]);return e}function h_(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function W1(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function j6(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const X6=new ft;class J6{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new m6,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new MD(this.options.manager):this.textureLoader=new BD(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new or(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Ua(s,a,r),zs(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[u,h]of o.children.entries())s(h,a.children[u])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Bt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load($o.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=u_[r.type],a=iu[r.componentType],l=r.normalized===!0,u=new a(r.count*o);return Promise.resolve(new Ut(u,o,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=u_[r.type],u=iu[r.componentType],h=u.BYTES_PER_ELEMENT,d=h*l,p=r.byteOffset||0,m=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,y=r.normalized===!0;let A,x;if(m&&m!==d){const g=Math.floor(p/m),_="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let M=t.cache.get(_);M||(A=new u(a,g*m,r.count*m/h),M=new ad(A,m/h),t.cache.add(_,M)),x=new oa(M,l,p%m/h,y)}else a===null?A=new u(r.count*l):A=new u(a,p,r.count*l),x=new Ut(A,l,y);if(r.sparse!==void 0){const g=u_.SCALAR,_=iu[r.sparse.indices.componentType],M=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,P=new _(o[1],M,r.sparse.count*g),b=new u(o[2],w,r.sparse.count*l);a!==null&&(x=new Ut(x.array.slice(),x.itemSize,x.normalized));for(let I=0,D=P.length;I<D;I++){const R=P[I];if(x.setX(R,b[I*l]),l>=2&&x.setY(R,b[I*l+1]),l>=3&&x.setZ(R,b[I*l+2]),l>=4&&x.setW(R,b[I*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return x})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,i).then(function(h){h.flipY=!1,h.name=o.name||a.name||"",h.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(h.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return h.magFilter=kb[p.magFilter]||An,h.minFilter=kb[p.minFilter]||Rr,h.wrapS=Hb[p.wrapS]||sa,h.wrapT=Hb[p.wrapT]||sa,r.associations.set(h,{textures:e}),h}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",u=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(d){u=!0;const p=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(l).then(function(d){return new Promise(function(p,m){let y=p;t.isImageBitmapLoader===!0&&(y=function(A){const x=new on(A);x.needsUpdate=!0,p(x)}),t.load($o.resolveURL(d,s.path),y,void 0,m)})}).then(function(d){return u===!0&&a.revokeObjectURL(l),zs(d,o),d.userData.mimeType=o.mimeType||j6(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=h,h}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Bt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Bt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Bt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return r!==void 0&&(typeof r=="number"&&(r=r===Ob?al:$s),"colorSpace"in o?o.colorSpace=r:o.encoding=r===al?Ob:p6),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new iv,In.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new _i,In.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return hd}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},u=[];if(l[Bt.KHR_MATERIALS_UNLIT]){const d=r[Bt.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),u.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Oe(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const p=d.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],$s),a.opacity=p[3]}d.baseColorTexture!==void 0&&u.push(t.assignTexture(a,"map",d.baseColorTexture,al)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Tr);const h=s.alphaMode||f_.OPAQUE;if(h===f_.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,h===f_.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==tr&&(u.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new pe(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==tr&&(u.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==tr){const d=s.emissiveFactor;a.emissive=new Oe().setRGB(d[0],d[1],d[2],$s)}return s.emissiveTexture!==void 0&&o!==tr&&u.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,al)),Promise.all(u).then(function(){const d=new o(a);return s.name&&(d.name=s.name),zs(d,s),t.associations.set(d,{materials:e}),s.extensions&&Ua(r,d,s),d})}createUniqueName(e){const t=Ft.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Bt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return zb(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],h=W6(u),d=r[h];if(d)o.push(d.promise);else{let p;u.extensions&&u.extensions[Bt.KHR_DRACO_MESH_COMPRESSION]?p=s(u):p=zb(new wt,u,t),r[h]={primitive:u,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,u=o.length;l<u;l++){const h=o[l].material===void 0?z6(this.cache):this.getDependency("material",o[l].material);a.push(h)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const u=l.slice(0,l.length-1),h=l[l.length-1],d=[];for(let m=0,y=h.length;m<y;m++){const A=h[m],x=o[m];let g;const _=u[m];if(x.mode===Ar.TRIANGLES||x.mode===Ar.TRIANGLE_STRIP||x.mode===Ar.TRIANGLE_FAN||x.mode===void 0)g=s.isSkinnedMesh===!0?new US(A,_):new Cn(A,_),g.isSkinnedMesh===!0&&g.normalizeSkinWeights(),x.mode===Ar.TRIANGLE_STRIP?g.geometry=Lb(g.geometry,wS):x.mode===Ar.TRIANGLE_FAN&&(g.geometry=Lb(g.geometry,r0));else if(x.mode===Ar.LINES)g=new rs(A,_);else if(x.mode===Ar.LINE_STRIP)g=new co(A,_);else if(x.mode===Ar.LINE_LOOP)g=new HS(A,_);else if(x.mode===Ar.POINTS)g=new zS(A,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+x.mode);Object.keys(g.geometry.morphAttributes).length>0&&V6(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),zs(g,s),x.extensions&&Ua(r,g,x),t.assignFinalMaterial(g),d.push(g)}for(let m=0,y=d.length;m<y;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(d.length===1)return s.extensions&&Ua(r,d[0],s),d[0];const p=new Ks;s.extensions&&Ua(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,y=d.length;m<y;m++)p.add(d[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new rn(LI.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Pr(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),zs(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let u=0,h=o.length;u<h;u++){const d=o[u];if(d){a.push(d);const p=new ft;s!==null&&p.fromArray(s.array,u*16),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new ld(a,l)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],u=[],h=[];for(let d=0,p=r.channels.length;d<p;d++){const m=r.channels[d],y=r.samplers[m.sampler],A=m.target,x=A.node,g=r.parameters!==void 0?r.parameters[y.input]:y.input,_=r.parameters!==void 0?r.parameters[y.output]:y.output;A.node!==void 0&&(o.push(this.getDependency("node",x)),a.push(this.getDependency("accessor",g)),l.push(this.getDependency("accessor",_)),u.push(y),h.push(A))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(h)]).then(function(d){const p=d[0],m=d[1],y=d[2],A=d[3],x=d[4],g=[];for(let _=0,M=p.length;_<M;_++){const w=p[_],P=m[_],b=y[_],I=A[_],D=x[_];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const R=i._createAnimationTracks(w,P,b,I,D);if(R)for(let T=0;T<R.length;T++)g.push(R[T])}return new vu(s,void 0,g)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,u=r.weights.length;l<u;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let u=0,h=a.length;u<h;u++)o.push(i.getDependency("node",a[u]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(u){const h=u[0],d=u[1],p=u[2];p!==null&&h.traverse(function(m){m.isSkinnedMesh&&m.bind(p,X6)});for(let m=0,y=d.length;m<y;m++)h.add(d[m]);return h})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){a.push(u)}),this.nodeCache[e]=Promise.all(a).then(function(u){let h;if(s.isBone===!0?h=new nv:u.length>1?h=new Ks:u.length===1?h=u[0]:h=new Nt,h!==u[0])for(let d=0,p=u.length;d<p;d++)h.add(u[d]);if(s.name&&(h.userData.name=s.name,h.name=o),zs(h,s),s.extensions&&Ua(i,h,s),s.matrix!==void 0){const d=new ft;d.fromArray(s.matrix),h.applyMatrix4(d)}else s.translation!==void 0&&h.position.fromArray(s.translation),s.rotation!==void 0&&h.quaternion.fromArray(s.rotation),s.scale!==void 0&&h.scale.fromArray(s.scale);return r.associations.has(h)||r.associations.set(h,{}),r.associations.get(h).nodes=e,h}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Ks;i.name&&(s.name=r.createUniqueName(i.name)),zs(s,i),i.extensions&&Ua(t,s,i);const o=i.nodes||[],a=[];for(let l=0,u=o.length;l<u;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let h=0,d=l.length;h<d;h++)s.add(l[h]);const u=h=>{const d=new Map;for(const[p,m]of r.associations)(p instanceof In||p instanceof on)&&d.set(p,m);return h.traverse(p=>{const m=r.associations.get(p);m!=null&&d.set(p,m)}),d};return r.associations=u(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];Io[s.path]===Io.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a);let u;switch(Io[s.path]){case Io.weights:u=Tl;break;case Io.rotation:u=bl;break;case Io.position:case Io.scale:u=Rl;break;default:switch(i.itemSize){case 1:u=Tl;break;case 2:case 3:default:u=Rl;break}break}const h=r.interpolation!==void 0?H6[r.interpolation]:pu,d=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const y=new u(l[p]+"."+Io[s.path],t.array,d,h);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(y),o.push(y)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=W1(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof bl?k6:uL;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function K6(n,e,t){const i=e.attributes,r=new vi;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,u=a.max;if(l!==void 0&&u!==void 0){if(r.set(new U(l[0],l[1],l[2]),new U(u[0],u[1],u[2])),a.normalized){const h=W1(iu[a.componentType]);r.min.multiplyScalar(h),r.max.multiplyScalar(h)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new U,l=new U;for(let u=0,h=s.length;u<h;u++){const d=s[u];if(d.POSITION!==void 0){const p=t.json.accessors[d.POSITION],m=p.min,y=p.max;if(m!==void 0&&y!==void 0){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(y[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(y[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(y[2]))),p.normalized){const A=W1(iu[p.componentType]);l.multiplyScalar(A)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new ei;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}function zb(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=V1[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return zs(n,e),K6(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?G6(n,e.targets,t):n})}const d_=new WeakMap;class Y6 extends Ai{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new or(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,a).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const i=JSON.stringify(t);if(d_.has(e)){const l=d_.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(r=l,new Promise((u,h)=>{r._callbacks[s]={resolve:u,reject:h},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),d_.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new wt;e.index&&t.setIndex(new Ut(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,o=r.array,a=r.itemSize;t.setAttribute(s,new Ut(o,a))}return t}_loadLibrary(e,t){const i=new or(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=Q6.toString(),o=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const o=s.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function Q6(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(h){n.onModuleLoaded=function(d){h({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,u=a.taskConfig;e.then(h=>{const d=h.draco,p=new d.Decoder,m=new d.DecoderBuffer;m.Init(new Int8Array(l),l.byteLength);try{const y=t(d,p,m,u),A=y.attributes.map(x=>x.array.buffer);y.index&&A.push(y.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:y},A)}catch(y){console.error(y),self.postMessage({type:"error",id:a.id,error:y.message})}finally{d.destroy(m),d.destroy(p)}});break}};function t(o,a,l,u){const h=u.attributeIDs,d=u.attributeTypes;let p,m;const y=a.GetEncodedGeometryType(l);if(y===o.TRIANGULAR_MESH)p=new o.Mesh,m=a.DecodeBufferToMesh(l,p);else if(y===o.POINT_CLOUD)p=new o.PointCloud,m=a.DecodeBufferToPointCloud(l,p);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!m.ok()||p.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+m.error_msg());const A={index:null,attributes:[]};for(const x in h){const g=self[d[x]];let _,M;if(u.useUniqueIDs)M=h[x],_=a.GetAttributeByUniqueId(p,M);else{if(M=a.GetAttributeId(p,o[h[x]]),M===-1)continue;_=a.GetAttribute(p,M)}A.attributes.push(r(o,a,p,x,g,_))}return y===o.TRIANGULAR_MESH&&(A.index=i(o,a,p)),o.destroy(p),A}function i(o,a,l){const h=l.num_faces()*3,d=h*4,p=o._malloc(d);a.GetTrianglesUInt32Array(l,d,p);const m=new Uint32Array(o.HEAPF32.buffer,p,h).slice();return o._free(p),{array:m,itemSize:1}}function r(o,a,l,u,h,d){const p=d.num_components(),y=l.num_points()*p,A=y*h.BYTES_PER_ELEMENT,x=s(o,h),g=o._malloc(A);a.GetAttributeDataArrayForAllPoints(l,d,x,A,g);const _=new h(o.HEAPF32.buffer,g,y).slice();return o._free(g),{name:u,array:_,itemSize:p}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Im;const p_=()=>{if(Im)return Im;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const o=WebAssembly.instantiate(a(r),{}).then(d=>{s=d.instance,s.exports.__wasm_call_ctors()});function a(d){const p=new Uint8Array(d.length);for(let y=0;y<d.length;++y){const A=d.charCodeAt(y);p[y]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let m=0;for(let y=0;y<d.length;++y)p[m++]=p[y]<60?i[p[y]]:(p[y]-60)*64+p[++y];return p.buffer.slice(0,m)}function l(d,p,m,y,A,x){const g=s.exports.sbrk,_=m+3&-4,M=g(_*y),w=g(A.length),P=new Uint8Array(s.exports.memory.buffer);P.set(A,w);const b=d(M,m,y,w,A.length);if(b===0&&x&&x(M,_,y),p.set(P.subarray(M,M+m*y)),g(M-g(0)),b!==0)throw new Error(`Malformed buffer data: ${b}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},h={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Im={ready:o,supported:!0,decodeVertexBuffer(d,p,m,y,A){l(s.exports.meshopt_decodeVertexBuffer,d,p,m,y,s.exports[u[A]])},decodeIndexBuffer(d,p,m,y){l(s.exports.meshopt_decodeIndexBuffer,d,p,m,y)},decodeIndexSequence(d,p,m,y){l(s.exports.meshopt_decodeIndexSequence,d,p,m,y)},decodeGltfBuffer(d,p,m,y,A,x){l(s.exports[h[A]],d,p,m,y,s.exports[u[x]])}},Im};let Dm=null,fL="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function hL(n,e,t){return i=>{t&&t(i),n&&(Dm||(Dm=new Y6),Dm.setDecoderPath(typeof n=="string"?n:fL),i.setDRACOLoader(Dm)),e&&i.setMeshoptDecoder(typeof p_=="function"?p_():p_)}}function Av(n,e=!0,t=!0,i){return pd(uM,n,hL(e,t,i))}Av.preload=(n,e=!0,t=!0,i)=>pd.preload(uM,n,hL(e,t,i));Av.clear=n=>pd.clear(uM,n);Av.setDecoderPath=n=>{fL=n};const Z6=X.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},h)=>{const d=Sr(b=>b.invalidate),p=Sr(b=>b.camera),m=Sr(b=>b.gl),y=Sr(b=>b.events),A=Sr(b=>b.setEvents),x=Sr(b=>b.set),g=Sr(b=>b.get),_=Sr(b=>b.performance),M=e||p,w=i||y.connected||m.domElement,P=X.useMemo(()=>new d6(M),[M]);return _v(()=>{P.enabled&&P.update()},-1),X.useEffect(()=>(s&&P.connect(s===!0?w:s),P.connect(w),()=>void P.dispose()),[s,w,t,P,d]),X.useEffect(()=>{const b=R=>{d(),t&&_.regress(),o&&o(R)},I=R=>{a&&a(R)},D=R=>{l&&l(R)};return P.addEventListener("change",b),P.addEventListener("start",I),P.addEventListener("end",D),()=>{P.removeEventListener("start",I),P.removeEventListener("end",D),P.removeEventListener("change",b)}},[o,a,l,P,d,A]),X.useEffect(()=>{if(n){const b=g().controls;return x({controls:P}),()=>x({controls:b})}},[n,P]),X.createElement("primitive",Hh({ref:h,object:P,enableDamping:r},u))});var dL={exports:{}},q6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$6=q6,eW=$6;function pL(){}function mL(){}mL.resetWarningCache=pL;var tW=function(){function n(i,r,s,o,a,l){if(l!==eW){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:mL,resetWarningCache:pL};return t.PropTypes=t,t};dL.exports=tW();var gd=dL.exports;const nW=Kh(gd);function iW(n,e){const t=n+"Geometry";return X.forwardRef(({args:i,children:r,...s},o)=>{const a=X.useRef(null);return X.useImperativeHandle(o,()=>a.current),X.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),X.createElement("mesh",Hh({ref:a},s),X.createElement(t,{attach:"geometry",args:i}),r)})}const rW=iW("box");function gL({all:n,scene:e,camera:t}){const i=Sr(({gl:o})=>o),r=Sr(({camera:o})=>o),s=Sr(({scene:o})=>o);return X.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(u=>{u.visible===!1&&(o.push(u),u.visible=!0)}),i.compile(e||s,t||r);const a=new IS(128);new BS(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(u=>u.visible=!1)},[]),null}const sW=()=>{const{progress:n}=l6();return ne.jsxs(a6,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[ne.jsx("span",{className:"canvas-loader"}),ne.jsxs("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})},oW=()=>{const n=Av("./city-scape/scene.gltf"),e=X.useRef();return _v(()=>{e.current&&(e.current.rotation.y+=.002)}),ne.jsxs("mesh",{ref:e,children:[ne.jsx("hemisphereLight",{intensity:3.15,groundColor:"black"}),ne.jsx("pointLight",{intensity:10,position:[-0,-1,2.5]}),ne.jsx("spotLight",{position:[-30,50,10],angle:.15,penumbra:1,intensity:1e7,castShadow:!0,"shadow-mapSize":1024}),ne.jsx("spotLight",{position:[30,-50,-10],angle:-.15,penumbra:1,intensity:1e7,castShadow:!0,"shadow-mapSize":1024}),ne.jsx("primitive",{object:n.scene,scale:1,rotation:[0,15,0],position:[1,-8,0]})]})},aW=()=>ne.jsxs(aL,{frameloop:"always",shadows:!0,camera:{position:[0,-0,10],fov:35},gl:{preserveDrawingBuffer:!0},children:[ne.jsxs(X.Suspense,{fallback:ne.jsx(sW,{}),children:[ne.jsx(Z6,{enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),ne.jsx(oW,{})]}),ne.jsx(gL,{all:!0})]}),lW=n=>{const e=X.useRef(),t=10,i=10,r=1.5,s=[];for(let o=0;o<t;o++)for(let a=0;a<i;a++)s.push([o*r,0,a*r]);return _v((o,a)=>{const l=o.clock.getElapsedTime();e.current.children.forEach((u,h)=>{const d=h%t,p=Math.floor(h/t),m=Math.sin((d+l)*.5)+Math.cos((p+l)*.5);u.position.y=m})}),ne.jsx("group",{ref:e,...n,children:s.map((o,a)=>ne.jsx(rW,{position:o,args:[1,1,1],children:ne.jsx("meshStandardMaterial",{color:"#FBB04B"})},a))})},cW=()=>ne.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:ne.jsxs(aL,{camera:{position:[10,10,10],fov:50},children:[ne.jsx("ambientLight",{intensity:1.5}),ne.jsx("pointLight",{position:[10,10,10]}),ne.jsx(X.Suspense,{fallback:null,children:ne.jsx(lW,{})}),ne.jsx(gL,{all:!0})]})}),vL=X.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Sv=X.createContext({}),fM=X.createContext(null),hM=typeof document<"u",uW=hM?X.useLayoutEffect:X.useEffect,yL=X.createContext({strict:!1}),Mv=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),fW="framerAppearId",xL="data-"+Mv(fW),hW={skipAnimations:!1,useManualTiming:!1};class Gb{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function dW(n){let e=new Gb,t=new Gb,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,h=!1)=>{const d=h&&r,p=d?e:t;return u&&o.add(l),p.add(l)&&d&&r&&(i=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.clear(),i=e.order.length,i)for(let u=0;u<i;u++){const h=e.order[u];o.has(h)&&(a.schedule(h),n()),h(l)}r=!1,s&&(s=!1,a.process(l))}};return a}const Lm=["read","resolveKeyframes","update","preRender","render","postRender"],pW=40;function _L(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Lm.reduce((g,_)=>(g[_]=dW(s),g),{}),{read:a,resolveKeyframes:l,update:u,preRender:h,render:d,postRender:p}=o,m=()=>{const g=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,pW),1),r.timestamp=g,r.isProcessing=!0,a.process(r),l.process(r),u.process(r),h.process(r),d.process(r),p.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(m))},y=()=>{t=!0,i=!0,r.isProcessing||n(m)};return{schedule:Lm.reduce((g,_)=>{const M=o[_];return g[_]=(w,P=!1,b=!1)=>(t||y(),M.schedule(w,P,b)),g},{}),cancel:g=>{for(let _=0;_<Lm.length;_++)o[Lm[_]].cancel(g)},state:r,steps:o}}const{schedule:dM,cancel:KY}=_L(queueMicrotask,!1);function Wc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}const AL=X.createContext({});let Vb=!1;function mW(n,e,t,i,r){const{visualElement:s}=X.useContext(Sv),o=X.useContext(yL),a=X.useContext(fM),l=X.useContext(vL).reducedMotion,u=X.useRef();i=i||o.renderer,!u.current&&i&&(u.current=i(n,{visualState:e,parent:s,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=u.current,d=X.useContext(AL);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&vW(u.current,t,r,d),X.useInsertionEffect(()=>{h&&h.update(t,a)});const p=X.useRef(!!(t[xL]&&!window.HandoffComplete));return uW(()=>{h&&(h.updateFeatures(),dM.render(h.render),p.current&&h.animationState&&h.animationState.animateChanges())}),X.useEffect(()=>{h&&(!p.current&&h.animationState&&h.animationState.animateChanges(),p.current&&(p.current=!1,Vb||(Vb=!0,queueMicrotask(gW))))}),h}function gW(){window.HandoffComplete=!0}function vW(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:SL(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Wc(a),visualElement:n,scheduleRender:()=>n.scheduleRender(),animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:u})}function SL(n){if(n)return n.options.allowProjection!==!1?n.projection:SL(n.parent)}function yW(n,e,t){return X.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Wc(t)&&(t.current=i))},[e])}function zh(n){return typeof n=="string"||Array.isArray(n)}function Gh(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const pM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mM=["initial",...pM];function wv(n){return Gh(n.animate)||mM.some(e=>zh(n[e]))}function ML(n){return!!(wv(n)||n.variants)}function xW(n,e){if(wv(n)){const{initial:t,animate:i}=n;return{initial:t===!1||zh(t)?t:void 0,animate:zh(i)?i:void 0}}return n.inherit!==!1?e:{}}function _W(n){const{initial:e,animate:t}=xW(n,X.useContext(Sv));return X.useMemo(()=>({initial:e,animate:t}),[Wb(e),Wb(t)])}function Wb(n){return Array.isArray(n)?n.join(" "):n}const jb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xu={};for(const n in jb)xu[n]={isEnabled:e=>jb[n].some(t=>!!e[t])};function AW(n){for(const e in n)xu[e]={...xu[e],...n[e]}}const wL=X.createContext({}),SW=Symbol.for("motionComponentSymbol"),yi=n=>n;let j1=yi;function MW({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&AW(n);function s(a,l){let u;const h={...X.useContext(vL),...a,layoutId:wW(a)},{isStatic:d}=h,p=_W(a),m=i(a,d);if(!d&&hM){EW();const y=CW(h);u=y.MeasureLayout,p.visualElement=mW(r,m,h,e,y.ProjectionNode)}return ne.jsxs(Sv.Provider,{value:p,children:[u&&p.visualElement?ne.jsx(u,{visualElement:p.visualElement,...h}):null,t(r,a,yW(m,p.visualElement,l),m,d,p.visualElement)]})}const o=X.forwardRef(s);return o[SW]=r,o}function wW({layoutId:n}){const e=X.useContext(wL).id;return e&&n!==void 0?e+"-"+n:n}function EW(n,e){X.useContext(yL).strict}function CW(n){const{drag:e,layout:t}=xu;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function TW(n){function e(i,r={}){return MW(n(i,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const bW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gM(n){return typeof n!="string"||n.includes("-")?!1:!!(bW.indexOf(n)>-1||/[A-Z]/u.test(n))}const f0={};function RW(n){Object.assign(f0,n)}const vd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ma=new Set(vd);function EL(n,{layout:e,layoutId:t}){return ma.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!f0[n]||n==="opacity")}const mi=n=>!!(n&&n.getVelocity),PW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},BW=vd.length;function IW(n,e,t){let i="";for(let r=0;r<BW;r++){const s=vd[r];if(n[s]!==void 0){const o=PW[s]||s;i+=`${o}(${n[s]}) `}}return i=i.trim(),t?i=t(n,e?"":i):e&&(i="none"),i}const CL=n=>e=>typeof e=="string"&&e.startsWith(n),TL=CL("--"),DW=CL("var(--"),vM=n=>DW(n)?LW.test(n.split("/*")[0].trim()):!1,LW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,NW=(n,e)=>e&&typeof n=="number"?e.transform(n):n,aa=(n,e,t)=>t>e?e:t<n?n:t,Iu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},th={...Iu,transform:n=>aa(0,1,n)},Nm={...Iu,default:1},nh=n=>Math.round(n*1e5)/1e5,yM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,FW=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,OW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function yd(n){return typeof n=="string"}function UW(n){return n==null}const xd=n=>({test:e=>yd(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),No=xd("deg"),Es=xd("%"),gt=xd("px"),kW=xd("vh"),HW=xd("vw"),Xb={...Es,parse:n=>Es.parse(n)/100,transform:n=>Es.transform(n*100)},Jb={...Iu,transform:Math.round},bL={borderWidth:gt,borderTopWidth:gt,borderRightWidth:gt,borderBottomWidth:gt,borderLeftWidth:gt,borderRadius:gt,radius:gt,borderTopLeftRadius:gt,borderTopRightRadius:gt,borderBottomRightRadius:gt,borderBottomLeftRadius:gt,width:gt,maxWidth:gt,height:gt,maxHeight:gt,size:gt,top:gt,right:gt,bottom:gt,left:gt,padding:gt,paddingTop:gt,paddingRight:gt,paddingBottom:gt,paddingLeft:gt,margin:gt,marginTop:gt,marginRight:gt,marginBottom:gt,marginLeft:gt,rotate:No,rotateX:No,rotateY:No,rotateZ:No,scale:Nm,scaleX:Nm,scaleY:Nm,scaleZ:Nm,skew:No,skewX:No,skewY:No,distance:gt,translateX:gt,translateY:gt,translateZ:gt,x:gt,y:gt,z:gt,perspective:gt,transformPerspective:gt,opacity:th,originX:Xb,originY:Xb,originZ:gt,zIndex:Jb,backgroundPositionX:gt,backgroundPositionY:gt,fillOpacity:th,strokeOpacity:th,numOctaves:Jb};function xM(n,e,t){const{style:i,vars:r,transform:s,transformOrigin:o}=n;let a=!1,l=!1,u=!0;for(const h in e){const d=e[h];if(TL(h)){r[h]=d;continue}const p=bL[h],m=NW(d,p);if(ma.has(h)){if(a=!0,s[h]=m,!u)continue;d!==(p.default||0)&&(u=!1)}else h.startsWith("origin")?(l=!0,o[h]=m):i[h]=m}if(e.transform||(a||t?i.transform=IW(n.transform,u,t):i.transform&&(i.transform="none")),l){const{originX:h="50%",originY:d="50%",originZ:p=0}=o;i.transformOrigin=`${h} ${d} ${p}`}}const _M=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function RL(n,e,t){for(const i in e)!mi(e[i])&&!EL(i,t)&&(n[i]=e[i])}function zW({transformTemplate:n},e){return X.useMemo(()=>{const t=_M();return xM(t,e,n),Object.assign({},t.vars,t.style)},[e])}function GW(n,e){const t=n.style||{},i={};return RL(i,t,n),Object.assign(i,zW(n,e)),i}function VW(n,e){const t={},i=GW(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const WW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function h0(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||WW.has(n)}let PL=n=>!h0(n);function jW(n){n&&(PL=e=>e.startsWith("on")?!h0(e):n(e))}try{jW(require("@emotion/is-prop-valid").default)}catch{}function XW(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(PL(r)||t===!0&&h0(r)||!e&&!h0(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function Kb(n,e,t){return typeof n=="string"?n:gt.transform(e+t*n)}function JW(n,e,t){const i=Kb(e,n.x,n.width),r=Kb(t,n.y,n.height);return`${i} ${r}`}const KW={offset:"stroke-dashoffset",array:"stroke-dasharray"},YW={offset:"strokeDashoffset",array:"strokeDasharray"};function QW(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?KW:YW;n[s.offset]=gt.transform(-i);const o=gt.transform(e),a=gt.transform(t);n[s.array]=`${o} ${a}`}function AM(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,d){if(xM(n,u,d),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m,dimensions:y}=n;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(r!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=JW(y,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),i!==void 0&&(p.scale=i),o!==void 0&&QW(p,o,a,l,!1)}const BL=()=>({..._M(),attrs:{}}),SM=n=>typeof n=="string"&&n.toLowerCase()==="svg";function ZW(n,e,t,i){const r=X.useMemo(()=>{const s=BL();return AM(s,e,SM(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};RL(s,n.style,n),r.style={...s,...r.style}}return r}function qW(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(gM(t)?ZW:VW)(i,s,o,t),u=XW(i,typeof t=="string",n),h=t!==X.Fragment?{...u,...l,ref:r}:{},{children:d}=i,p=X.useMemo(()=>mi(d)?d.get():d,[d]);return X.createElement(t,{...h,children:p})}}function IL(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const DL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function LL(n,e,t,i){IL(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(DL.has(r)?r:Mv(r),e.attrs[r])}function MM(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(mi(r[o])||e.style&&mi(e.style[o])||EL(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return t&&r&&typeof r.willChange=="string"&&(t.applyWillChange=!1),s}function NL(n,e,t){const i=MM(n,e,t);for(const r in n)if(mi(n[r])||mi(e[r])){const s=vd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function Yb(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function wM(n,e,t,i){if(typeof e=="function"){const[r,s]=Yb(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=Yb(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function $W(n){const e=X.useRef(null);return e.current===null&&(e.current=n()),e.current}const X1=n=>Array.isArray(n),ej=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),tj=n=>X1(n)?n[n.length-1]||0:n;function tg(n){const e=mi(n)?n.get():n;return ej(e)?e.toValue():e}const FL=new Set(["opacity","clipPath","filter","transform"]);function OL(n){if(ma.has(n))return"transform";if(FL.has(n)||n==="backgroundColor")return Mv(n)}function Ev(n,e){n.indexOf(e)===-1&&n.push(e)}function Cv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function nj({applyWillChange:n=!1,scrapeMotionValuesFromProps:e,createRenderState:t,onMount:i},r,s,o,a){const l={latestValues:rj(r,s,o,a?!1:n,e),renderState:t()};return i&&(l.mount=u=>i(r,u,l)),l}const UL=n=>(e,t)=>{const i=X.useContext(Sv),r=X.useContext(fM),s=()=>nj(n,e,i,r,t);return t?s():$W(s)};function ij(n,e){const t=OL(e);t&&Ev(n,t)}function Qb(n,e,t){const i=Array.isArray(e)?e:[e];for(let r=0;r<i.length;r++){const s=wM(n,i[r]);if(s){const{transitionEnd:o,transition:a,...l}=s;t(l,o)}}}function rj(n,e,t,i,r){var s;const o={},a=[],l=i&&((s=n.style)===null||s===void 0?void 0:s.willChange)===void 0,u=r(n,{});for(const x in u)o[x]=tg(u[x]);let{initial:h,animate:d}=n;const p=wv(n),m=ML(n);e&&m&&!p&&n.inherit!==!1&&(h===void 0&&(h=e.initial),d===void 0&&(d=e.animate));let y=t?t.initial===!1:!1;y=y||h===!1;const A=y?d:h;return A&&typeof A!="boolean"&&!Gh(A)&&Qb(n,A,(x,g)=>{for(const _ in x){let M=x[_];if(Array.isArray(M)){const w=y?M.length-1:0;M=M[w]}M!==null&&(o[_]=M)}for(const _ in g)o[_]=g[_]}),l&&(d&&h!==!1&&!Gh(d)&&Qb(n,d,x=>{for(const g in x)ij(a,g)}),a.length&&(o.willChange=a.join(","))),o}const{schedule:Xt,cancel:uo,state:Zn,steps:m_}=_L(typeof requestAnimationFrame<"u"?requestAnimationFrame:yi,!0),sj={useVisualState:UL({scrapeMotionValuesFromProps:NL,createRenderState:BL,onMount:(n,e,{renderState:t,latestValues:i})=>{Xt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Xt.render(()=>{AM(t,i,SM(e.tagName),n.transformTemplate),LL(e,t)})}})},oj={useVisualState:UL({applyWillChange:!0,scrapeMotionValuesFromProps:MM,createRenderState:_M})};function aj(n,{forwardMotionProps:e=!1},t,i){return{...gM(n)?sj:oj,preloadedFeatures:t,useRender:qW(e),createVisualElement:i,Component:n}}function Qs(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const kL=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Tv(n,e="page"){return{point:{x:n[`${e}X`],y:n[`${e}Y`]}}}const lj=n=>e=>kL(e)&&n(e,Tv(e));function eo(n,e,t,i){return Qs(n,e,lj(t),i)}const cj=(n,e)=>t=>e(n(t)),to=(...n)=>n.reduce(cj);function HL(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const Zb=HL("dragHorizontal"),qb=HL("dragVertical");function zL(n){let e=!1;if(n==="y")e=qb();else if(n==="x")e=Zb();else{const t=Zb(),i=qb();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function GL(){const n=zL(!0);return n?(n(),!1):!0}class ga{constructor(e){this.isMounted=!1,this.node=e}update(){}}function $b(n,e){const t=e?"pointerenter":"pointerleave",i=e?"onHoverStart":"onHoverEnd",r=(s,o)=>{if(s.pointerType==="touch"||GL())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e);const l=a[i];l&&Xt.postRender(()=>l(s,o))};return eo(n.current,t,r,{passive:!n.getProps()[i]})}class uj extends ga{mount(){this.unmount=to($b(this.node,!0),$b(this.node,!1))}unmount(){}}class fj extends ga{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=to(Qs(this.node.current,"focus",()=>this.onFocus()),Qs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const VL=(n,e)=>e?n===e?!0:VL(n,e.parentElement):!1;function g_(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Tv(t))}class hj extends ga{constructor(){super(...arguments),this.removeStartListeners=yi,this.removeEndListeners=yi,this.removeAccessibleListeners=yi,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=eo(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps(),p=!d&&!VL(this.node.current,a.target)?h:u;p&&Xt.update(()=>p(a,l))},{passive:!(i.onTap||i.onPointerUp)}),o=eo(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=to(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||g_("up",(l,u)=>{const{onTap:h}=this.node.getProps();h&&Xt.postRender(()=>h(l,u))})};this.removeEndListeners(),this.removeEndListeners=Qs(this.node.current,"keyup",o),g_("down",(a,l)=>{this.startPress(a,l)})},t=Qs(this.node.current,"keydown",e),i=()=>{this.isPressing&&g_("cancel",(s,o)=>this.cancelPress(s,o))},r=Qs(this.node.current,"blur",i);this.removeAccessibleListeners=to(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Xt.postRender(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!GL()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Xt.postRender(()=>i(e,t))}mount(){const e=this.node.getProps(),t=eo(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Qs(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=to(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const J1=new WeakMap,v_=new WeakMap,dj=n=>{const e=J1.get(n.target);e&&e(n)},pj=n=>{n.forEach(dj)};function mj({root:n,...e}){const t=n||document;v_.has(t)||v_.set(t,{});const i=v_.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(pj,{root:n,...e})),i[r]}function gj(n,e,t){const i=mj(e);return J1.set(n,t),i.observe(n),()=>{J1.delete(n),i.unobserve(n)}}const vj={some:0,all:1};class yj extends ga{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:vj[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=u?h:d;p&&p(l)};return gj(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(xj(e,t))&&this.startObserver()}unmount(){}}function xj({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const _j={inView:{Feature:yj},tap:{Feature:hj},focus:{Feature:fj},hover:{Feature:uj}};function WL(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function bv(n,e,t){const i=n.getProps();return wM(i,e,t!==void 0?t:i.custom,n)}const ea=n=>n*1e3,no=n=>n/1e3,Aj={type:"spring",stiffness:500,damping:25,restSpeed:10},Sj=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Mj={type:"keyframes",duration:.8},wj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ej=(n,{keyframes:e})=>e.length>2?Mj:ma.has(n)?n.startsWith("scale")?Sj(e[1]):Aj:wj;function Cj({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}function EM(n,e){return n[e]||n.default||n}const Tj=n=>n!==null;function Rv(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(Tj),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}let ng;function bj(){ng=void 0}const ta={now:()=>(ng===void 0&&ta.set(Zn.isProcessing||hW.useManualTiming?Zn.timestamp:performance.now()),ng),set:n=>{ng=n,queueMicrotask(bj)}},jL=n=>/^0[^.\s]+$/u.test(n);function Rj(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||jL(n):!0}const XL=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),Pj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Bj(n){const e=Pj.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function JL(n,e,t=1){const[i,r]=Bj(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return XL(o)?parseFloat(o):o}return vM(r)?JL(r,e,t+1):r}const Ij=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),eR=n=>n===Iu||n===gt,tR=(n,e)=>parseFloat(n.split(", ")[e]),nR=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return tR(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?tR(s[1],n):0}},Dj=new Set(["x","y","z"]),Lj=vd.filter(n=>!Dj.has(n));function Nj(n){const e=[];return Lj.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const _u={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:nR(4,13),y:nR(5,14)};_u.translateX=_u.x;_u.translateY=_u.y;const KL=n=>e=>e.test(n),Fj={test:n=>n==="auto",parse:n=>n},YL=[Iu,gt,Es,No,HW,kW,Fj],iR=n=>YL.find(KL(n)),gl=new Set;let K1=!1,Y1=!1;function QL(){if(Y1){const n=Array.from(gl).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=Nj(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Y1=!1,K1=!1,gl.forEach(n=>n.complete()),gl.clear()}function ZL(){gl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Y1=!0)})}function Oj(){ZL(),QL()}class CM{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(gl.add(this),K1||(K1=!0,Xt.read(ZL),Xt.resolveKeyframes(QL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),gl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,gl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const TM=(n,e)=>t=>!!(yd(t)&&OW.test(t)&&t.startsWith(n)||e&&!UW(t)&&Object.prototype.hasOwnProperty.call(t,e)),qL=(n,e,t)=>i=>{if(!yd(i))return i;const[r,s,o,a]=i.match(yM);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Uj=n=>aa(0,255,n),y_={...Iu,transform:n=>Math.round(Uj(n))},ll={test:TM("rgb","red"),parse:qL("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+y_.transform(n)+", "+y_.transform(e)+", "+y_.transform(t)+", "+nh(th.transform(i))+")"};function kj(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Q1={test:TM("#"),parse:kj,transform:ll.transform},jc={test:TM("hsl","hue"),parse:qL("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Es.transform(nh(e))+", "+Es.transform(nh(t))+", "+nh(th.transform(i))+")"},hi={test:n=>ll.test(n)||Q1.test(n)||jc.test(n),parse:n=>ll.test(n)?ll.parse(n):jc.test(n)?jc.parse(n):Q1.parse(n),transform:n=>yd(n)?n:n.hasOwnProperty("red")?ll.transform(n):jc.transform(n)};function Hj(n){var e,t;return isNaN(n)&&yd(n)&&(((e=n.match(yM))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(FW))===null||t===void 0?void 0:t.length)||0)>0}const $L="number",e3="color",zj="var",Gj="var(",rR="${}",Vj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(Vj,l=>(hi.test(l)?(i.color.push(s),r.push(e3),t.push(hi.parse(l))):l.startsWith(Gj)?(i.var.push(s),r.push(zj),t.push(l)):(i.number.push(s),r.push($L),t.push(parseFloat(l))),++s,rR)).split(rR);return{values:t,split:a,indexes:i,types:r}}function t3(n){return Vh(n).values}function n3(n){const{split:e,types:t}=Vh(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===$L?s+=nh(r[o]):a===e3?s+=hi.transform(r[o]):s+=r[o]}return s}}const Wj=n=>typeof n=="number"?0:n;function jj(n){const e=t3(n);return n3(n)(e.map(Wj))}const la={test:Hj,parse:t3,createTransformer:n3,getAnimatableNone:jj},Xj=new Set(["brightness","contrast","saturate","opacity"]);function Jj(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(yM)||[];if(!i)return n;const r=t.replace(i,"");let s=Xj.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const Kj=/\b([a-z-]*)\(.*?\)/gu,Z1={...la,getAnimatableNone:n=>{const e=n.match(Kj);return e?e.map(Jj).join(" "):n}},Yj={...bL,color:hi,backgroundColor:hi,outlineColor:hi,fill:hi,stroke:hi,borderColor:hi,borderTopColor:hi,borderRightColor:hi,borderBottomColor:hi,borderLeftColor:hi,filter:Z1,WebkitFilter:Z1},bM=n=>Yj[n];function i3(n,e){let t=bM(n);return t!==Z1&&(t=la),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Qj=new Set(["auto","none","0"]);function Zj(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!Qj.has(s)&&Vh(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=i3(t,r)}class r3 extends CM{constructor(e,t,i,r){super(e,t,i,r,r==null?void 0:r.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),vM(u))){const h=JL(u,t.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Ij.has(i)||e.length!==2)return;const[r,s]=e,o=iR(r),a=iR(s);if(o!==a)if(eR(o)&&eR(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)Rj(e[r])&&i.push(r);i.length&&Zj(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_u[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=_u[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function s3(n){let e;return()=>(e===void 0&&(e=n()),e)}const sR=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(la.test(n)||n==="0")&&!n.startsWith("url("));function qj(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function $j(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=sR(r,e),a=sR(s,e);return!o||!a?!1:qj(n)||t==="spring"&&i}class o3{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Oj(),this._resolved}onKeyframesResolved(e,t){this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!$j(e,i,r,s))if(o)this.options.duration=0;else{l==null||l(Rv(e,this.options,t)),a==null||a(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,t);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...h},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function a3(n,e){return e?n*(1e3/e):0}const e7=5;function l3(n,e,t){const i=Math.max(e-e7,0);return a3(t-n(i),e-i)}const x_=.001,t7=.01,n7=10,i7=.05,r7=1;function s7({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s,o=1-e;o=aa(i7,r7,o),n=aa(t7,n7,no(n)),o<1?(r=u=>{const h=u*o,d=h*n,p=h-t,m=q1(u,o),y=Math.exp(-d);return x_-p/m*y},s=u=>{const d=u*o*n,p=d*t+t,m=Math.pow(o,2)*Math.pow(u,2)*n,y=Math.exp(-d),A=q1(Math.pow(u,2),o);return(-r(u)+x_>0?-1:1)*((p-m)*y)/A}):(r=u=>{const h=Math.exp(-u*n),d=(u-t)*n+1;return-x_+h*d},s=u=>{const h=Math.exp(-u*n),d=(t-u)*(n*n);return h*d});const a=5/n,l=a7(r,s,a);if(n=ea(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const o7=12;function a7(n,e,t){let i=t;for(let r=1;r<o7;r++)i=i-n(i)/e(i);return i}function q1(n,e){return n*Math.sqrt(1-e*e)}const l7=["duration","bounce"],c7=["stiffness","damping","mass"];function oR(n,e){return e.some(t=>n[t]!==void 0)}function u7(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!oR(n,c7)&&oR(n,l7)){const t=s7(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function c3({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:u,duration:h,velocity:d,isResolvedFromDuration:p}=u7({...i,velocity:-no(i.velocity||0)}),m=d||0,y=l/(2*Math.sqrt(a*u)),A=s-r,x=no(Math.sqrt(a/u)),g=Math.abs(A)<5;t||(t=g?.01:2),e||(e=g?.005:.5);let _;if(y<1){const M=q1(x,y);_=w=>{const P=Math.exp(-y*x*w);return s-P*((m+y*x*A)/M*Math.sin(M*w)+A*Math.cos(M*w))}}else if(y===1)_=M=>s-Math.exp(-x*M)*(A+(m+x*A)*M);else{const M=x*Math.sqrt(y*y-1);_=w=>{const P=Math.exp(-y*x*w),b=Math.min(M*w,300);return s-P*((m+y*x*A)*Math.sinh(b)+M*A*Math.cosh(b))/M}}return{calculatedDuration:p&&h||null,next:M=>{const w=_(M);if(p)o.done=M>=h;else{let P=m;M!==0&&(y<1?P=l3(_,M,w):P=0);const b=Math.abs(P)<=t,I=Math.abs(s-w)<=e;o.done=b&&I}return o.value=o.done?s:w,o}}}function aR({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const d=n[0],p={done:!1,value:d},m=D=>a!==void 0&&D<a||l!==void 0&&D>l,y=D=>a===void 0?l:l===void 0||Math.abs(a-D)<Math.abs(l-D)?a:l;let A=t*e;const x=d+A,g=o===void 0?x:o(x);g!==x&&(A=g-d);const _=D=>-A*Math.exp(-D/i),M=D=>g+_(D),w=D=>{const R=_(D),T=M(D);p.done=Math.abs(R)<=u,p.value=p.done?g:T};let P,b;const I=D=>{m(p.value)&&(P=D,b=c3({keyframes:[p.value,y(p.value)],velocity:l3(M,D,p.value),damping:r,stiffness:s,restDelta:u,restSpeed:h}))};return I(0),{calculatedDuration:null,next:D=>{let R=!1;return!b&&P===void 0&&(R=!0,w(D),I(D)),P!==void 0&&D>=P?b.next(D-P):(!R&&w(D),p)}}}const u3=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,f7=1e-7,h7=12;function d7(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=u3(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>f7&&++a<h7);return o}function _d(n,e,t,i){if(n===e&&t===i)return yi;const r=s=>d7(s,0,1,n,t);return s=>s===0||s===1?s:u3(r(s),e,i)}const p7=_d(.42,0,1,1),m7=_d(0,0,.58,1),f3=_d(.42,0,.58,1),g7=n=>Array.isArray(n)&&typeof n[0]!="number",h3=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,d3=n=>e=>1-n(1-e),RM=n=>1-Math.sin(Math.acos(n)),p3=d3(RM),v7=h3(RM),m3=_d(.33,1.53,.69,.99),PM=d3(m3),y7=h3(PM),x7=n=>(n*=2)<1?.5*PM(n):.5*(2-Math.pow(2,-10*(n-1))),lR={linear:yi,easeIn:p7,easeInOut:f3,easeOut:m7,circIn:RM,circInOut:v7,circOut:p3,backIn:PM,backInOut:y7,backOut:m3,anticipate:x7},cR=n=>{if(Array.isArray(n)){j1(n.length===4);const[e,t,i,r]=n;return _d(e,t,i,r)}else if(typeof n=="string")return j1(lR[n]!==void 0),lR[n];return n},Wh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},dn=(n,e,t)=>n+(e-n)*t;function __(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function _7({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=__(l,a,n+1/3),s=__(l,a,n),o=__(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function d0(n,e){return t=>t>0?e:n}const A_=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},A7=[Q1,ll,jc],S7=n=>A7.find(e=>e.test(n));function uR(n){const e=S7(n);if(!e)return!1;let t=e.parse(n);return e===jc&&(t=_7(t)),t}const fR=(n,e)=>{const t=uR(n),i=uR(e);if(!t||!i)return d0(n,e);const r={...t};return s=>(r.red=A_(t.red,i.red,s),r.green=A_(t.green,i.green,s),r.blue=A_(t.blue,i.blue,s),r.alpha=dn(t.alpha,i.alpha,s),ll.transform(r))},$1=new Set(["none","hidden"]);function M7(n,e){return $1.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function w7(n,e){return t=>dn(n,e,t)}function BM(n){return typeof n=="number"?w7:typeof n=="string"?vM(n)?d0:hi.test(n)?fR:T7:Array.isArray(n)?g3:typeof n=="object"?hi.test(n)?fR:E7:d0}function g3(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>BM(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function E7(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=BM(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function C7(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const T7=(n,e)=>{const t=la.createTransformer(e),i=Vh(n),r=Vh(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?$1.has(n)&&!r.values.length||$1.has(e)&&!i.values.length?M7(n,e):to(g3(C7(i,r),r.values),t):d0(n,e)};function v3(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?dn(n,e,t):BM(n)(n,e)}function b7(n,e,t){const i=[],r=t||v3,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||yi:e;a=to(l,a)}i.push(a)}return i}function R7(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(j1(s===e.length),s===1)return()=>e[0];if(s===2&&n[0]===n[1])return()=>e[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=b7(e,i,r),a=o.length,l=u=>{let h=0;if(a>1)for(;h<n.length-2&&!(u<n[h+1]);h++);const d=Wh(n[h],n[h+1],u);return o[h](d)};return t?u=>l(aa(n[0],n[s-1],u)):l}function P7(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Wh(0,e,i);n.push(dn(t,1,r))}}function B7(n){const e=[0];return P7(e,n.length-1),e}function I7(n,e){return n.map(t=>t*e)}function D7(n,e){return n.map(()=>e||f3).splice(0,n.length-1)}function p0({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=g7(i)?i.map(cR):cR(i),s={done:!1,value:e[0]},o=I7(t&&t.length===e.length?t:B7(e),n),a=R7(o,e,{ease:Array.isArray(r)?r:D7(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const hR=2e4;function L7(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<hR;)e+=t,i=n.next(e);return e>=hR?1/0:e}const N7=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Xt.update(e,!0),stop:()=>uo(e),now:()=>Zn.isProcessing?Zn.timestamp:ta.now()}},F7={decay:aR,inertia:aR,tween:p0,keyframes:p0,spring:c3},O7=n=>n/100;class IM extends o3{constructor({KeyframeResolver:e=CM,...t}){super(t),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:i,motionValue:r,keyframes:s}=this.options,o=(a,l)=>this.onKeyframesResolved(a,l);i&&r&&r.owner?this.resolver=r.owner.resolveKeyframes(s,o,i,r):this.resolver=new e(s,o,i,r),this.resolver.scheduleResolve()}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=F7[t]||p0;let l,u;a!==p0&&typeof e[0]!="number"&&(l=to(O7,v3(e[0],e[1])),e=[0,100]);const h=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=L7(h));const{calculatedDuration:d}=h,p=d+r,m=p*(i+1)-r;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:D}=this.options;return{done:!0,value:D[D.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:h,resolvedDuration:d}=i;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:y,repeatDelay:A,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-p*(this.speed>=0?1:-1),_=this.speed>=0?g<0:g>h;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let M=this.currentTime,w=s;if(m){const D=Math.min(this.currentTime,h)/d;let R=Math.floor(D),T=D%1;!T&&D>=1&&(T=1),T===1&&R--,R=Math.min(R,m+1),!!(R%2)&&(y==="reverse"?(T=1-T,A&&(T-=A/d)):y==="mirror"&&(w=o)),M=aa(0,1,T)*d}const P=_?{done:!1,value:l[0]}:w.next(M);a&&(P.value=a(P.value));let{done:b}=P;!_&&u!==null&&(b=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return I&&r!==void 0&&(P.value=Rv(l,this.options,r)),x&&x(P.value),I&&this.finish(),P}get duration(){const{resolved:e}=this;return e?no(e.calculatedDuration):0}get time(){return no(this.currentTime)}set time(e){e=ea(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=no(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=N7,onPlay:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:(!this.startTime||this.state==="finished")&&(this.startTime=i),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const y3=n=>Array.isArray(n)&&typeof n[0]=="number";function x3(n){return!!(!n||typeof n=="string"&&n in DM||y3(n)||Array.isArray(n)&&n.every(x3))}const Ff=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,DM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ff([0,.65,.55,1]),circOut:Ff([.55,0,1,.45]),backIn:Ff([.31,.01,.66,-.59]),backOut:Ff([.33,1.53,.69,.99])};function U7(n){return _3(n)||DM.easeOut}function _3(n){if(n)return y3(n)?Ff(n):Array.isArray(n)?n.map(U7):DM[n]}function k7(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:t};l&&(u.offset=l);const h=_3(a);return Array.isArray(h)&&(u.easing=h),n.animate(u,{delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const H7=s3(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),m0=10,z7=2e4;function G7(n){return n.type==="spring"||n.name==="backgroundColor"||!x3(n.ease)}function V7(n,e){const t=new IM({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<z7;)i=t.sample(s),r.push(i.value),s+=m0;return{times:void 0,keyframes:r,duration:s-m0,ease:"linear"}}class dR extends o3{constructor(e){super(e);const{name:t,motionValue:i,keyframes:r}=this.options;this.resolver=new r3(r,(s,o)=>this.onKeyframesResolved(s,o),t,i),this.resolver.scheduleResolve()}initPlayback(e,t){var i;let{duration:r=300,times:s,ease:o,type:a,motionValue:l,name:u}=this.options;if(!(!((i=l.owner)===null||i===void 0)&&i.current))return!1;if(G7(this.options)){const{onComplete:d,onUpdate:p,motionValue:m,...y}=this.options,A=V7(e,y);e=A.keyframes,e.length===1&&(e[1]=e[0]),r=A.duration,s=A.times,o=A.ease,a="keyframes"}const h=k7(l.owner.current,u,e,{...this.options,duration:r,times:s,ease:o});return h.startTime=ta.now(),this.pendingTimeline?(h.timeline=this.pendingTimeline,this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:d}=this.options;l.set(Rv(e,this.options,t)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return no(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return no(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=ea(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return yi;const{animation:i}=t;i.timeline=e,i.onfinish=null}return yi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:d,...p}=this.options,m=new IM({...p,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),y=ea(this.time);u.setWithVelocity(m.sample(y-m0).value,m.sample(y).value,m0)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;return H7()&&i&&FL.has(i)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}function W7(n,e){let t;const i=()=>{const{currentTime:r}=e,o=(r===null?0:r.value)/100;t!==o&&n(o),t=o};return Xt.update(i,!0),()=>uo(i)}const j7=s3(()=>window.ScrollTimeline!==void 0);class X7{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e){const t=this.animations.map(i=>{if(j7()&&i.attachTimeline)i.attachTimeline(e);else return i.pause(),W7(r=>{i.time=i.duration*r},e)});return()=>{t.forEach((i,r)=>{i&&i(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const LM=(n,e,t,i={},r,s,o)=>a=>{const l=EM(i,n)||{},u=l.delay||i.delay||0;let{elapsed:h=0}=i;h=h-ea(u);let d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete(),o&&o()},onStop:o,name:n,motionValue:e,element:s?void 0:r};Cj(l)||(d={...d,...Ej(n,d)}),d.duration&&(d.duration=ea(d.duration)),d.repeatDelay&&(d.repeatDelay=ea(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let p=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(p=!0)),p&&!s&&e.get()!==void 0){const m=Rv(d.keyframes,l);if(m!==void 0)return Xt.update(()=>{d.onUpdate(m),d.onComplete()}),new X7([])}return!s&&dR.supports(d)?new dR(d):new IM(d)};class NM{constructor(){this.subscriptions=[]}add(e){return Ev(this.subscriptions,e),()=>Cv(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pR=30,J7=n=>!isNaN(parseFloat(n));class A3{constructor(e,t={}){this.version="11.3.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=ta.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ta.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=J7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new NM);const i=this.events[e].add(t);return e==="change"?()=>{i(),Xt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ta.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>pR)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,pR);return a3(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jh(n,e){return new A3(n,e)}function K7(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,jh(t))}function Y7(n,e){const t=bv(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=tj(s[o]);K7(n,o,a)}}function S3(n){return n.getProps()[xL]}class Q7 extends A3{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(e){const t=OL(e);if(!t)return;const i=this.counts.get(t)||0;this.counts.set(t,i+1),i===0&&(this.output.push(t),this.update());let r=!1;return()=>{if(r)return;r=!0;const s=this.counts.get(t)-1;this.counts.set(t,s),s===0&&(Cv(this.output,t),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function Z7(n){return!!(mi(n)&&n.add)}function eA(n,e){var t;if(!n.applyWillChange)return;let i=n.getValue("willChange");if(!i&&!(!((t=n.props.style)===null||t===void 0)&&t.willChange)&&(i=new Q7("auto"),n.addValue("willChange",i)),Z7(i))return i.add(e)}function q7({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function M3(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const u=[],h=r&&n.animationState&&n.animationState.getState()[r];for(const d in l){const p=n.getValue(d,(s=n.latestValues[d])!==null&&s!==void 0?s:null),m=l[d];if(m===void 0||h&&q7(h,d))continue;const y={delay:t,elapsed:0,...EM(o||{},d)};let A=!1;if(window.HandoffAppearAnimations){const g=S3(n);if(g){const _=window.HandoffAppearAnimations(g,d,p,Xt);_!==null&&(y.elapsed=_,A=!0)}}p.start(LM(d,p,m,n.shouldReduceMotion&&ma.has(d)?{type:!1}:y,n,A,eA(n,d)));const x=p.animation;x&&u.push(x)}return a&&Promise.all(u).then(()=>{Xt.update(()=>{a&&Y7(n,a)})}),u}function tA(n,e,t={}){var i;const r=bv(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(M3(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:p}=s;return $7(n,e,h+u,d,p,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,h]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>h())}else return Promise.all([o(),a(t.delay)])}function $7(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(u=0)=>u*i:(u=0)=>a-u*i;return Array.from(n.variantChildren).sort(eX).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(tA(u,e,{...s,delay:t+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function eX(n,e){return n.sortNodePosition(e)}function tX(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>tA(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=tA(n,e,t);else{const r=typeof e=="function"?bv(n,e,t.custom):e;i=Promise.all(M3(n,r,t))}return i.then(()=>{Xt.postRender(()=>{n.notify("AnimationComplete",e)})})}const nX=[...pM].reverse(),iX=pM.length;function rX(n){return e=>Promise.all(e.map(({animation:t,options:i})=>tX(n,t,i)))}function sX(n){let e=rX(n),t=mR(),i=!0;const r=l=>(u,h)=>{var d;const p=bv(n,h,l==="exit"?(d=n.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(p){const{transition:m,transitionEnd:y,...A}=p;u={...u,...A,...y}}return u};function s(l){e=l(n)}function o(l){const u=n.getProps(),h=n.getVariantContext(!0)||{},d=[],p=new Set;let m={},y=1/0;for(let x=0;x<iX;x++){const g=nX[x],_=t[g],M=u[g]!==void 0?u[g]:h[g],w=zh(M),P=g===l?_.isActive:null;P===!1&&(y=x);let b=M===h[g]&&M!==u[g]&&w;if(b&&i&&n.manuallyAnimateOnMount&&(b=!1),_.protectedKeys={...m},!_.isActive&&P===null||!M&&!_.prevProp||Gh(M)||typeof M=="boolean")continue;let D=oX(_.prevProp,M)||g===l&&_.isActive&&!b&&w||x>y&&w,R=!1;const T=Array.isArray(M)?M:[M];let N=T.reduce(r(g),{});P===!1&&(N={});const{prevResolvedValues:Q={}}=_,W={...Q,...N},K=Y=>{D=!0,p.has(Y)&&(R=!0,p.delete(Y)),_.needsAnimating[Y]=!0;const Z=n.getValue(Y);Z&&(Z.liveStyle=!1)};for(const Y in W){const Z=N[Y],z=Q[Y];if(m.hasOwnProperty(Y))continue;let B=!1;X1(Z)&&X1(z)?B=!WL(Z,z):B=Z!==z,B?Z!=null?K(Y):p.add(Y):Z!==void 0&&p.has(Y)?K(Y):_.protectedKeys[Y]=!0}_.prevProp=M,_.prevResolvedValues=N,_.isActive&&(m={...m,...N}),i&&n.blockInitialAnimation&&(D=!1),D&&(!b||R)&&d.push(...T.map(Y=>({animation:Y,options:{type:g}})))}if(p.size){const x={};p.forEach(g=>{const _=n.getBaseTarget(g),M=n.getValue(g);M&&(M.liveStyle=!0),x[g]=_??null}),d.push({animation:x})}let A=!!d.length;return i&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?e(d):Promise.resolve()}function a(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),t[l].isActive=u;const d=o(l);for(const p in t)t[p].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=mR(),i=!0}}}function oX(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!WL(e,n):!1}function ka(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mR(){return{animate:ka(!0),whileInView:ka(),whileHover:ka(),whileTap:ka(),whileDrag:ka(),whileFocus:ka(),exit:ka()}}class aX extends ga{constructor(e){super(e),e.animationState||(e.animationState=sX(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let lX=0;class cX extends ga{constructor(){super(...arguments),this.id=lX++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const uX={animation:{Feature:aX},exit:{Feature:cX}},gR=(n,e)=>Math.abs(n-e);function fX(n,e){const t=gR(n.x,e.x),i=gR(n.y,e.y);return Math.sqrt(t**2+i**2)}class w3{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=M_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=fX(d.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=d,{timestamp:A}=Zn;this.history.push({...y,timestamp:A});const{onStart:x,onMove:g}=this.handlers;p||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=S_(p,this.transformPagePoint),Xt.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=M_(d.type==="pointercancel"?this.lastMoveEventInfo:S_(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,x),y&&y(d,x)},!kL(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=Tv(e),a=S_(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Zn;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=t;h&&h(e,M_(a,this.history)),this.removeListeners=to(eo(this.contextWindow,"pointermove",this.handlePointerMove),eo(this.contextWindow,"pointerup",this.handlePointerUp),eo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),uo(this.updatePoint)}}function S_(n,e){return e?{point:e(n.point)}:n}function vR(n,e){return{x:n.x-e.x,y:n.y-e.y}}function M_({point:n},e){return{point:n,delta:vR(n,E3(e)),offset:vR(n,hX(e)),velocity:dX(e,.1)}}function hX(n){return n[0]}function E3(n){return n[n.length-1]}function dX(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=E3(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>ea(e)));)t--;if(!i)return{x:0,y:0};const s=no(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ar(n){return n.max-n.min}function nA(n,e=0,t=.01){return Math.abs(n-e)<=t}function yR(n,e,t,i=.5){n.origin=i,n.originPoint=dn(e.min,e.max,n.origin),n.scale=ar(t)/ar(e),(nA(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=dn(t.min,t.max,n.origin)-n.originPoint,(nA(n.translate)||isNaN(n.translate))&&(n.translate=0)}function ih(n,e,t,i){yR(n.x,e.x,t.x,i?i.originX:void 0),yR(n.y,e.y,t.y,i?i.originY:void 0)}function xR(n,e,t){n.min=t.min+e.min,n.max=n.min+ar(e)}function pX(n,e,t){xR(n.x,e.x,t.x),xR(n.y,e.y,t.y)}function _R(n,e,t){n.min=e.min-t.min,n.max=n.min+ar(e)}function rh(n,e,t){_R(n.x,e.x,t.x),_R(n.y,e.y,t.y)}function mX(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?dn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?dn(t,n,i.max):Math.min(n,t)),n}function AR(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function gX(n,{top:e,left:t,bottom:i,right:r}){return{x:AR(n.x,t,r),y:AR(n.y,e,i)}}function SR(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function vX(n,e){return{x:SR(n.x,e.x),y:SR(n.y,e.y)}}function yX(n,e){let t=.5;const i=ar(n),r=ar(e);return r>i?t=Wh(e.min,e.max-i,n.min):i>r&&(t=Wh(n.min,n.max-r,e.min)),aa(0,1,t)}function xX(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const iA=.35;function _X(n=iA){return n===!1?n=0:n===!0&&(n=iA),{x:MR(n,"left","right"),y:MR(n,"top","bottom")}}function MR(n,e,t){return{min:wR(n,e),max:wR(n,t)}}function wR(n,e){return typeof n=="number"?n:n[e]||0}const ER=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xc=()=>({x:ER(),y:ER()}),CR=()=>({min:0,max:0}),wn=()=>({x:CR(),y:CR()});function _r(n){return[n("x"),n("y")]}function C3({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function AX({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function SX(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function w_(n){return n===void 0||n===1}function rA({scale:n,scaleX:e,scaleY:t}){return!w_(n)||!w_(e)||!w_(t)}function Ja(n){return rA(n)||T3(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function T3(n){return TR(n.x)||TR(n.y)}function TR(n){return n&&n!=="0%"}function g0(n,e,t){const i=n-t,r=e*i;return t+r}function bR(n,e,t,i,r){return r!==void 0&&(n=g0(n,r,i)),g0(n,t,i)+e}function sA(n,e=0,t=1,i,r){n.min=bR(n.min,e,t,i,r),n.max=bR(n.max,e,t,i,r)}function b3(n,{x:e,y:t}){sA(n.x,e.translate,e.scale,e.originPoint),sA(n.y,t.translate,t.scale,t.originPoint)}function MX(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Jc(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,b3(n,o)),i&&Ja(s.latestValues)&&Jc(n,s.latestValues))}e.x=RR(e.x),e.y=RR(e.y)}function RR(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Uo(n,e){n.min=n.min+e,n.max=n.max+e}function PR(n,e,[t,i,r]){const s=e[r]!==void 0?e[r]:.5,o=dn(n.min,n.max,s);sA(n,e[t],e[i],o,e.scale)}const wX=["x","scaleX","originX"],EX=["y","scaleY","originY"];function Jc(n,e){PR(n.x,e,wX),PR(n.y,e,EX)}function R3(n,e){return C3(SX(n.getBoundingClientRect(),e))}function CX(n,e,t){const i=R3(n,t),{scroll:r}=e;return r&&(Uo(i.x,r.offset.x),Uo(i.y,r.offset.y)),i}const P3=({current:n})=>n?n.ownerDocument.defaultView:null,TX=new WeakMap;class bX{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Tv(h,"page").point)},s=(h,d)=>{var p;const{drag:m,dragPropagation:y,onDragStart:A}=this.getProps();if(m&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=zL(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_r(g=>{let _=this.getAxisMotionValue(g).get()||0;if(Es.test(_)){const{projection:M}=this.visualElement;if(M&&M.layout){const w=M.layout.layoutBox[g];w&&(_=ar(w)*(parseFloat(_)/100))}}this.originPoint[g]=_}),A&&Xt.postRender(()=>A(h,d)),(p=this.removeWillChange)===null||p===void 0||p.call(this),this.removeWillChange=eA(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:A}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:x}=d;if(m&&this.currentDirection===null){this.currentDirection=RX(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),A&&A(h,d)},a=(h,d)=>this.stop(h,d),l=()=>_r(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new w3(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:P3(this.visualElement)})}stop(e,t){var i;(i=this.removeWillChange)===null||i===void 0||i.call(this);const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Xt.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Fm(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=mX(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Wc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=gX(r.layoutBox,t):this.constraints=!1,this.elastic=_X(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&_r(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=xX(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Wc(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=CX(i,r.root,this.visualElement.getTransformPagePoint());let o=vX(r.layout.layoutBox,s);if(t){const a=t(AX(o));this.hasMutatedConstraints=!!a,a&&(o=C3(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=_r(h=>{if(!Fm(h,t,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,y={type:"inertia",velocity:i?e[h]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(h,y)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(LM(e,i,0,t,this.visualElement,!1,eA(this.visualElement,e)))}stopAnimation(){_r(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){_r(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){_r(t=>{const{drag:i}=this.getProps();if(!Fm(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-dn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Wc(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};_r(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=yX({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),_r(o=>{if(!Fm(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(dn(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;TX.set(this.visualElement,this);const e=this.visualElement.current,t=eo(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Wc(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Xt.read(i);const o=Qs(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(_r(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=iA,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Fm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function RX(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class PX extends ga{constructor(e){super(e),this.removeGroupControls=yi,this.removeListeners=yi,this.controls=new bX(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yi}unmount(){this.removeGroupControls(),this.removeListeners()}}const BR=n=>(e,t)=>{n&&Xt.postRender(()=>n(e,t))};class BX extends ga{constructor(){super(...arguments),this.removePointerDownListener=yi}onPointerDown(e){this.session=new w3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:P3(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:BR(e),onStart:BR(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Xt.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=eo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function IX(){const n=X.useContext(fM);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=X.useId();return X.useEffect(()=>i(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const ig={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IR(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Tf={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(gt.test(n))n=parseFloat(n);else return n;const t=IR(n,e.target.x),i=IR(n,e.target.y);return`${t}% ${i}%`}},DX={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=la.parse(n);if(r.length>5)return i;const s=la.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=dn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),s(r)}};class LX extends X.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;RW(NX),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ig.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Xt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),dM.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function B3(n){const[e,t]=IX(),i=X.useContext(wL);return ne.jsx(LX,{...n,layoutGroup:i,switchLayoutGroup:X.useContext(AL),isPresent:e,safeToRemove:t})}const NX={borderRadius:{...Tf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tf,borderTopRightRadius:Tf,borderBottomLeftRadius:Tf,borderBottomRightRadius:Tf,boxShadow:DX},I3=["TopLeft","TopRight","BottomLeft","BottomRight"],FX=I3.length,DR=n=>typeof n=="string"?parseFloat(n):n,LR=n=>typeof n=="number"||gt.test(n);function OX(n,e,t,i,r,s){r?(n.opacity=dn(0,t.opacity!==void 0?t.opacity:1,UX(i)),n.opacityExit=dn(e.opacity!==void 0?e.opacity:1,0,kX(i))):s&&(n.opacity=dn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<FX;o++){const a=`border${I3[o]}Radius`;let l=NR(e,a),u=NR(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||LR(l)===LR(u)?(n[a]=Math.max(dn(DR(l),DR(u),i),0),(Es.test(u)||Es.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=dn(e.rotate||0,t.rotate||0,i))}function NR(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const UX=D3(0,.5,p3),kX=D3(.5,.95,yi);function D3(n,e,t){return i=>i<n?0:i>e?1:t(Wh(n,e,i))}function FR(n,e){n.min=e.min,n.max=e.max}function xr(n,e){FR(n.x,e.x),FR(n.y,e.y)}function OR(n,e,t,i,r){return n-=e,n=g0(n,1/t,i),r!==void 0&&(n=g0(n,1/r,i)),n}function HX(n,e=0,t=1,i=.5,r,s=n,o=n){if(Es.test(e)&&(e=parseFloat(e),e=dn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=dn(s.min,s.max,i);n===s&&(a-=e),n.min=OR(n.min,e,t,a,r),n.max=OR(n.max,e,t,a,r)}function UR(n,e,[t,i,r],s,o){HX(n,e[t],e[i],e[r],e.scale,s,o)}const zX=["x","scaleX","originX"],GX=["y","scaleY","originY"];function kR(n,e,t,i){UR(n.x,e,zX,t?t.x:void 0,i?i.x:void 0),UR(n.y,e,GX,t?t.y:void 0,i?i.y:void 0)}function HR(n){return n.translate===0&&n.scale===1}function L3(n){return HR(n.x)&&HR(n.y)}function VX(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function N3(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function zR(n){return ar(n.x)/ar(n.y)}class WX{constructor(){this.members=[]}add(e){Ev(this.members,e),e.scheduleRender()}remove(e){if(Cv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GR(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:h,rotateX:d,rotateY:p,skewX:m,skewY:y}=t;u&&(i=`perspective(${u}px) ${i}`),h&&(i+=`rotate(${h}deg) `),d&&(i+=`rotateX(${d}deg) `),p&&(i+=`rotateY(${p}deg) `),m&&(i+=`skewX(${m}deg) `),y&&(i+=`skewY(${y}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const jX=(n,e)=>n.depth-e.depth;class XX{constructor(){this.children=[],this.isDirty=!1}add(e){Ev(this.children,e),this.isDirty=!0}remove(e){Cv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jX),this.isDirty=!1,this.children.forEach(e)}}function JX(n,e){const t=ta.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(uo(i),n(s-e))};return Xt.read(i,!0),()=>uo(i)}function KX(n){window.MotionDebug&&window.MotionDebug.record(n)}function YX(n){return n instanceof SVGElement&&n.tagName!=="svg"}function QX(n,e,t){const i=mi(n)?n:jh(n);return i.start(LM("",i,e,t)),i.animation}const E_=["","X","Y","Z"],ZX={visibility:"hidden"},VR=1e3;let qX=0;const Ka={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function C_(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function F3(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return!1;const{visualElement:e}=n.options;return e?S3(e)?!0:n.parent&&!n.parent.hasCheckedOptimisedAppear?F3(n.parent):!1:!1}function O3({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=qX++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ka.totalNodes=Ka.resolvedTargetDeltas=Ka.recalculatedProjection=0,this.nodes.forEach(tJ),this.nodes.forEach(oJ),this.nodes.forEach(aJ),this.nodes.forEach(nJ),KX(Ka)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new XX)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new NM),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=YX(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),n){let d;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=JX(p,250),ig.hasAnimatedSinceResize&&(ig.hasAnimatedSinceResize=!1,this.nodes.forEach(jR))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||h.getDefaultTransition()||hJ,{onLayoutAnimationStart:x,onLayoutAnimationComplete:g}=h.getProps(),_=!this.targetLayout||!N3(this.targetLayout,y)||m,M=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||p&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,M);const w={...EM(A,"layout"),onPlay:x,onComplete:g};(h.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else p||jR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,uo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lJ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.HandoffCancelAllAnimations&&F3(this)&&window.HandoffCancelAllAnimations(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(WR);return}this.isUpdating||this.nodes.forEach(rJ),this.isUpdating=!1,this.nodes.forEach(sJ),this.nodes.forEach($X),this.nodes.forEach(eJ),this.clearAllSnapshots();const a=ta.now();Zn.delta=aa(0,1e3/60,a-Zn.timestamp),Zn.timestamp=a,Zn.isProcessing=!0,m_.update.process(Zn),m_.preRender.process(Zn),m_.render.process(Zn),Zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(iJ),this.sharedNodes.forEach(cJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Xt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Xt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!L3(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Ja(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),dJ(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return wn();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Uo(a.x,l.offset.x),Uo(a.y,l.offset.y)),a}removeElementScroll(o){const a=wn();xr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){xr(a,o);const{scroll:p}=this.root;p&&(Uo(a.x,-p.offset.x),Uo(a.y,-p.offset.y))}Uo(a.x,h.offset.x),Uo(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=wn();xr(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Jc(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ja(h.latestValues)&&Jc(l,h.latestValues)}return Ja(this.latestValues)&&Jc(l,this.latestValues),l}removeTransform(o){const a=wn();xr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ja(u.latestValues))continue;rA(u.latestValues)&&u.updateSnapshot();const h=wn(),d=u.measurePageBox();xr(h,d),kR(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Ja(this.latestValues)&&kR(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=Zn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),rh(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=wn(),this.targetWithTransforms=wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pX(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xr(this.target,this.layout.layoutBox),b3(this.target,this.targetDelta)):xr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),rh(this.relativeTargetOrigin,this.target,m.target),xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ka.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rA(this.parent.latestValues)||T3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Zn.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;xr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;MX(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=wn());const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=Xc(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Xc(),this.projectionDeltaWithTransform=Xc());const A=this.projectionTransform;ih(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=GR(this.projectionDelta,this.treeScale),(this.projectionTransform!==A||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Ka.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},d=Xc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=wn(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,A=m!==y,x=this.getStack(),g=!x||x.members.length<=1,_=!!(A&&!g&&this.options.crossfade===!0&&!this.path.some(fJ));this.animationProgress=0;let M;this.mixTargetDelta=w=>{const P=w/1e3;XR(d.x,o.x,P),XR(d.y,o.y,P),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rh(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),uJ(this.relativeTarget,this.relativeTargetOrigin,p,P),M&&VX(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=wn()),xr(M,this.relativeTarget)),A&&(this.animationValues=h,OX(h,u,this.latestValues,P,_,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(uo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Xt.update(()=>{ig.hasAnimatedSinceResize=!0,this.currentAnimation=QX(0,VR,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(VR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&U3(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||wn();const d=ar(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=ar(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}xr(a,l),Jc(a,h),ih(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new WX),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&C_("z",o,u,this.animationValues);for(let h=0;h<E_.length;h++)C_(`rotate${E_[h]}`,o,u,this.animationValues),C_(`skew${E_[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ZX;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=tg(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=tg(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ja(this.latestValues)&&(A.transform=h?h({},""):"none",this.hasProjected=!1),A}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=GR(this.projectionDeltaWithTransform,this.treeScale,p),h&&(u.transform=h(p,u.transform));const{x:m,y}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const A in f0){if(p[A]===void 0)continue;const{correct:x,applyTo:g}=f0[A],_=u.transform==="none"?p[A]:x(p[A],d);if(g){const M=g.length;for(let w=0;w<M;w++)u[g[w]]=_}else u[A]=_}return this.options.layoutId&&(u.pointerEvents=d===this?tg(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(WR),this.root.sharedNodes.clear()}}}function $X(n){n.updateLayout()}function eJ(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?_r(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=ar(p);p.min=i[d].min,p.max=p.min+m}):U3(s,t.layoutBox,i)&&_r(d=>{const p=o?t.measuredBox[d]:t.layoutBox[d],m=ar(i[d]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+m)});const a=Xc();ih(a,i,t.layoutBox);const l=Xc();o?ih(l,n.applyTransform(r,!0),t.measuredBox):ih(l,i,t.layoutBox);const u=!L3(a);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const y=wn();rh(y,t.layoutBox,p.layoutBox);const A=wn();rh(A,i,m.layoutBox),N3(y,A)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=y,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function tJ(n){Ka.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function nJ(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function iJ(n){n.clearSnapshot()}function WR(n){n.clearMeasurements()}function rJ(n){n.isLayoutDirty=!1}function sJ(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function jR(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function oJ(n){n.resolveTargetDelta()}function aJ(n){n.calcProjection()}function lJ(n){n.resetSkewAndRotation()}function cJ(n){n.removeLeadSnapshot()}function XR(n,e,t){n.translate=dn(e.translate,0,t),n.scale=dn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function JR(n,e,t,i){n.min=dn(e.min,t.min,i),n.max=dn(e.max,t.max,i)}function uJ(n,e,t,i){JR(n.x,e.x,t.x,i),JR(n.y,e.y,t.y,i)}function fJ(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const hJ={duration:.45,ease:[.4,0,.1,1]},KR=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),YR=KR("applewebkit/")&&!KR("chrome/")?Math.round:yi;function QR(n){n.min=YR(n.min),n.max=YR(n.max)}function dJ(n){QR(n.x),QR(n.y)}function U3(n,e,t){return n==="position"||n==="preserve-aspect"&&!nA(zR(e),zR(t),.2)}const pJ=O3({attachResizeListener:(n,e)=>Qs(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),T_={current:void 0},k3=O3({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!T_.current){const n=new pJ({});n.mount(window),n.setOptions({layoutScroll:!0}),T_.current=n}return T_.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),mJ={pan:{Feature:BX},drag:{Feature:PX,ProjectionNode:k3,MeasureLayout:B3}},oA={current:null},H3={current:!1};function gJ(){if(H3.current=!0,!!hM)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>oA.current=n.matches;n.addListener(e),e()}else oA.current=!1}function vJ(n,e,t){for(const i in e){const r=e[i],s=t[i];if(mi(r))n.addValue(i,r);else if(mi(s))n.addValue(i,jh(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,jh(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const ZR=new WeakMap,yJ=[...YL,hi,la],xJ=n=>yJ.find(KL(n)),qR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],_J=mM.length;class AJ{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.applyWillChange=!1,this.resolveKeyframes=(p,m,y,A)=>new this.KeyframeResolver(p,m,y,A,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=CM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Xt.render(this.render,!1,!0);const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=wv(t),this.isVariantNode=ML(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in d){const m=d[p];l[p]!==void 0&&mi(m)&&m.set(l[p],!1)}}mount(e){this.current=e,ZR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),H3.current||gJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ZR.delete(this.current),this.projection&&this.projection.unmount(),uo(this.notifyUpdate),uo(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){const i=ma.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Xt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in xu){const t=xu[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<qR.length;i++){const r=qR[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=vJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<_J;i++){const r=mM[i],s=this.props[r];(zh(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=jh(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(XL(r)||jL(r))?r=parseFloat(r):!xJ(r)&&la.test(t)&&(r=i3(e,t)),this.setBaseTarget(e,mi(r)?r.get():r)),mi(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=wM(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!mi(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new NM),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class z3 extends AJ{constructor(){super(...arguments),this.KeyframeResolver=r3}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}}function SJ(n){return window.getComputedStyle(n)}class MJ extends z3{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0}readValueFromInstance(e,t){if(ma.has(t)){const i=bM(t);return i&&i.default||0}else{const i=SJ(e),r=(TL(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return R3(e,t)}build(e,t,i){xM(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return MM(e,t,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,r){IL(e,t,i,r)}}class wJ extends z3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ma.has(t)){const i=bM(t);return i&&i.default||0}return t=DL.has(t)?t:Mv(t),e.getAttribute(t)}measureInstanceViewportBox(){return wn()}scrapeMotionValuesFromProps(e,t,i){return NL(e,t,i)}build(e,t,i){AM(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){LL(e,t,i,r)}mount(e){this.isSVGTag=SM(e.tagName),super.mount(e)}}const EJ=(n,e)=>gM(n)?new wJ(e):new MJ(e,{allowProjection:n!==X.Fragment}),CJ={layout:{ProjectionNode:k3,MeasureLayout:B3}},TJ={...uX,..._j,...mJ,...CJ},is=TW((n,e)=>aj(n,e,TJ,EJ)),gi={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-grey lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubText:"font-orange text-orange font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-white font-white md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},bJ=()=>ne.jsxs("section",{className:"relative w-full h-screen mx-auto",children:[ne.jsx(aW,{}),ne.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-5 z-10",children:ne.jsxs("div",{className:"text-center",children:[ne.jsxs("h1",{className:`${gi.heroHeadText} text-black`,children:["Hi, I'm ",ne.jsx("span",{className:"text-[#FBB04B]",children:"Elliott Young "}),"MCIAT"]}),ne.jsx("p",{className:`${gi.heroSubText} text-black-100 mt-2`,children:"Chartered Architectural Technologist"})]})}),ne.jsx("div",{className:"absolute xs:bottom-10 bottom-32 w-full flex justify-center items-center z-20",children:ne.jsx("a",{href:"#about",children:ne.jsx("div",{className:"w-[35px] h-[64px] rounded-3xl border-4 border-[#FBB04B] border-secondary flex justify-center items-start p-2 ",children:ne.jsx(is.div,{animate:{y:[0,24,0]},transition:{duration:1.5,repeat:1/0,repeatType:"loop"},className:"w-3 h-3 rounded-full bg-[#FBB04B] mb-1"})})})})]}),RJ="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xmlns:svgjs='http://svgjs.dev/svgjs'%20width='2000'%20height='2000'%20viewBox='0%200%202000%202000'%3e%3cg%20transform='matrix(1,0,0,1,-0.28443113772425477,-0.28443113772459583)'%3e%3csvg%20viewBox='0%200%20334%20334'%20data-background-color='%23ffffff'%20preserveAspectRatio='xMidYMid%20meet'%20height='2000'%20width='2000'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cg%20id='tight-bounds'%20transform='matrix(1,0,0,1,0.04749999999998522,0.04750000000001364)'%3e%3csvg%20viewBox='0%200%20333.90454557049503%20333.90454557049503'%20height='333.90454557049503'%20width='333.90454557049503'%3e%3cg%3e%3csvg%3e%3c/svg%3e%3c/g%3e%3cg%3e%3csvg%20viewBox='0%200%20333.90454557049503%20333.90454557049503'%20height='333.90454557049503'%20width='333.90454557049503'%3e%3cg%3e%3cpath%20d='M0%20166.952c0-92.205%2074.747-166.952%20166.952-166.952%2092.205%200%20166.952%2074.747%20166.953%20166.952%200%2092.205-74.747%20166.952-166.953%20166.953-92.205%200-166.952-74.747-166.952-166.953zM166.952%20316.63c82.665%200%20149.677-67.013%20149.678-149.678%200-82.665-67.013-149.677-149.678-149.677-82.665%200-149.677%2067.013-149.677%20149.677%200%2082.665%2067.013%20149.677%20149.677%20149.678z'%20data-fill-palette-color='tertiary'%20fill='%23fbb04b'%20stroke='transparent'%3e%3c/path%3e%3cellipse%20rx='160.27418187383762'%20ry='160.27418187383762'%20cx='166.95227278524752'%20cy='166.95227278524752'%20fill='%23fbb04b'%20stroke='transparent'%20stroke-width='0'%20fill-opacity='1'%20data-fill-palette-color='tertiary'%3e%3c/ellipse%3e%3c/g%3e%3cg%20transform='matrix(1,0,0,1,101.62138465067694,71.17305217166896)'%3e%3csvg%20viewBox='0%200%20130.66177626914114%20191.55844122715712'%20height='191.55844122715712'%20width='130.66177626914114'%3e%3cg%3e%3csvg%20viewBox='0%200%20130.66177626914114%20191.55844122715712'%20height='191.55844122715712'%20width='130.66177626914114'%3e%3cg%3e%3csvg%20viewBox='0%200%20130.66177626914114%20191.55844122715712'%20height='191.55844122715712'%20width='130.66177626914114'%3e%3cg%3e%3csvg%20viewBox='0%200%20130.66177626914114%20191.55844122715712'%20height='191.55844122715712'%20width='130.66177626914114'%3e%3cg%20id='textblocktransform'%3e%3csvg%20viewBox='0%200%20130.66177626914114%20191.55844122715712'%20height='191.55844122715712'%20width='130.66177626914114'%20id='textblock'%3e%3cg%3e%3csvg%20viewBox='0%200%20130.66177626914114%20191.55844122715712'%20height='191.55844122715712'%20width='130.66177626914114'%3e%3cg%20transform='matrix(1,0,0,1,0,0)'%3e%3csvg%20width='130.66177626914114'%20viewBox='1.75%20-31.95%2022.1%2032.4'%20height='191.55844122715712'%20data-palette-color='%23ffffff'%3e%3cpath%20d='M18.3%200L1.75%200%201.75-0.9%204.1-0.9Q4.8-0.9%204.8-1.6L4.8-1.6%204.8-30Q4.8-30.6%204.1-30.6L4.1-30.6%201.75-30.6%201.75-31.5%2017.6-31.5Q21.55-31.5%2023.15-31.95L23.15-31.95Q22.7-29.9%2022.7-26.25L22.7-26.25%2022.7-23.9%2021.55-23.9%2020.8-29Q20.7-30.1%2019.4-30.1L19.4-30.1%208.9-30.1%208.9-16.45%2018.95-16.45Q19.55-16.45%2019.65-17.15L19.65-17.15%2019.9-20.25%2020.8-20.25%2020.8-11.25%2019.9-11.25%2019.65-14.35Q19.55-15.05%2018.95-15.05L18.95-15.05%208.9-15.05%208.9-1.4%2020.1-1.4Q21.4-1.4%2021.5-2.5L21.5-2.5%2022.25-8.35%2023.4-8.35%2023.4-6Q23.4-1.6%2023.85%200.45L23.85%200.45Q22.25%200%2018.3%200L18.3%200Z'%20opacity='1'%20transform='matrix(1,0,0,1,0,0)'%20fill='%23ffffff'%20class='wordmark-text-0'%20data-fill-palette-color='quaternary'%20id='text-0'%3e%3c/path%3e%3c/svg%3e%3c/g%3e%3c/svg%3e%3c/g%3e%3c/svg%3e%3c/g%3e%3c/svg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e%3c/g%3e%3c/svg%3e%3c/g%3e%3c/svg%3e%3c/g%3e%3c/svg%3e%3c/g%3e%3cdefs%3e%3c/defs%3e%3c/svg%3e%3crect%20width='333.90454557049503'%20height='333.90454557049503'%20fill='none'%20stroke='none'%20visibility='hidden'%3e%3c/rect%3e%3c/g%3e%3c/svg%3e%3c/g%3e%3c/svg%3e",PJ="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.4099%209L16.7099%202.71C16.8982%202.5217%2017.004%202.2663%2017.004%202C17.004%201.7337%2016.8982%201.47831%2016.7099%201.29C16.5216%201.1017%2016.2662%200.995911%2015.9999%200.995911C15.7336%200.995911%2015.4782%201.1017%2015.2899%201.29L8.99994%207.59L2.70994%201.29C2.52164%201.1017%202.26624%200.995911%201.99994%200.995911C1.73364%200.995911%201.47824%201.1017%201.28994%201.29C1.10164%201.47831%200.995847%201.7337%200.995847%202C0.995847%202.2663%201.10164%202.5217%201.28994%202.71L7.58994%209L1.28994%2015.29C1.19621%2015.383%201.12182%2015.4936%201.07105%2015.6154C1.02028%2015.7373%200.994141%2015.868%200.994141%2016C0.994141%2016.132%201.02028%2016.2627%201.07105%2016.3846C1.12182%2016.5064%201.19621%2016.617%201.28994%2016.71C1.3829%2016.8037%201.4935%2016.8781%201.61536%2016.9289C1.73722%2016.9797%201.86793%2017.0058%201.99994%2017.0058C2.13195%2017.0058%202.26266%2016.9797%202.38452%2016.9289C2.50638%2016.8781%202.61698%2016.8037%202.70994%2016.71L8.99994%2010.41L15.2899%2016.71C15.3829%2016.8037%2015.4935%2016.8781%2015.6154%2016.9289C15.7372%2016.9797%2015.8679%2017.0058%2015.9999%2017.0058C16.132%2017.0058%2016.2627%2016.9797%2016.3845%2016.9289C16.5064%2016.8781%2016.617%2016.8037%2016.7099%2016.71C16.8037%2016.617%2016.8781%2016.5064%2016.9288%2016.3846C16.9796%2016.2627%2017.0057%2016.132%2017.0057%2016C17.0057%2015.868%2016.9796%2015.7373%2016.9288%2015.6154C16.8781%2015.4936%2016.8037%2015.383%2016.7099%2015.29L10.4099%209Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",BJ="data:image/svg+xml,%3csvg%20width='20'%20height='12'%20viewBox='0%200%2020%2012'%20fill='%23FFF'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9%202L19%202C19.2652%202%2019.5196%201.89464%2019.7071%201.70711C19.8946%201.51957%2020%201.26522%2020%201C20%200.734784%2019.8946%200.480429%2019.7071%200.292892C19.5196%200.105356%2019.2652%200%2019%200L9%200C8.73478%200%208.48043%200.105356%208.29289%200.292892C8.10536%200.480429%208%200.734784%208%201C8%201.26522%208.10536%201.51957%208.29289%201.70711C8.48043%201.89464%208.73478%202%209%202ZM19%2010L1%2010C0.734784%2010%200.480429%2010.1054%200.292892%2010.2929C0.105356%2010.4804%200%2010.7348%200%2011C0%2011.2652%200.105356%2011.5196%200.292892%2011.7071C0.480429%2011.8946%200.734784%2012%201%2012L19%2012C19.2652%2012%2019.5196%2011.8946%2019.7071%2011.7071C19.8946%2011.5196%2020%2011.2652%2020%2011C20%2010.7348%2019.8946%2010.4804%2019.7071%2010.2929C19.5196%2010.1054%2019.2652%2010%2019%2010V10ZM1%207L19%207C19.2652%207%2019.5196%206.89464%2019.7071%206.70711C19.8946%206.51957%2020%206.26522%2020%206C20%205.73478%2019.8946%205.48043%2019.7071%205.29289C19.5196%205.10536%2019.2652%205%2019%205L1%205C0.734784%205%200.480429%205.10536%200.292892%205.29289C0.105356%205.48043%200%205.73478%200%206C0%206.26522%200.105356%206.51957%200.292892%206.70711C0.480429%206.89464%200.734784%207%201%207Z'%20fill='%23FFFFFF'/%3e%3c/svg%3e",IJ=""+new URL("photoshop-DCnsx6Sy.png",import.meta.url).href,DJ=""+new URL("revit-DvswVfNd.png",import.meta.url).href,LJ=""+new URL("illustrator-BdMtDmMF.png",import.meta.url).href,NJ=""+new URL("autocad-kXP-jcDq.png",import.meta.url).href,FJ=""+new URL("Elliott-CPsV-hst.jpg",import.meta.url).href,OJ=""+new URL("nbs-CI9w3tcN.png",import.meta.url).href,Ha=""+new URL("defaultjob-6oBCaS2d.png",import.meta.url).href,$R=[{id:"about",title:"About"},{id:"work",title:"Work"},{id:"projects",title:"Projects"},{id:"awards",title:"Awards"},{id:"contact",title:"Contact"}],UJ=[{title:"Photoshop",icon:IJ},{title:"Illustrator",icon:LJ},{title:"AutoCad",icon:NJ},{title:"Revit",icon:DJ},{title:"NBS Chorus",icon:OJ}],kJ=[{title:"Storefront Worker",company_name:"John Smail & Sons",icon:Ha,iconBg:"#383E56",date:"November 2013 - February 2015",points:["Whilst studying for my A levels, I worked for two years in a well known and respected hardware/ furniture store which taught me time management skills and how to serve and deal with the public. During this employment, one of my duties was to work in a small team to carry and deliver heavy furniture around Northumberland. I built up a trustworthy reputation and was all"]},{title:"Factory Operator",company_name:"Marlish Water",icon:Ha,iconBg:"#E6DEDD",date:"June 2016 - August 2019",points:["In the interim between school and university, I worked for a water bottling company, called Marlish Water Ltd, as a factory operator. I had to quickly learn and adapt to the working environment as it was such a fast paced factory. I had to work within and maintain a safe and hygienic environment. Although I did not work there long, I was involved in more advanced jobs, such as stripping down and cleaning the bottling machines and helping with delivery paperwork."]},{title:"Assistant Architect",company_name:"McNicholas Architects",icon:Ha,iconBg:"#383E56",date:"November 2016 - June 2018",points:["My first experience of working in the architectural industry, was a part-time post during my first two years at university, in a domestic orientated company called McNicholas Architects, based in Harrogate. During this employment, I learned how to take surveys of existing client’s buildings and by using digital software, turned them into planning and building regulations packages. I learned how to approach clients in their own homes and gained a more in-depth knowledge of domestic dwelling's building regulations and procedures for alterations and extensions."]},{title:"Placement Student",company_name:"Michael Dyson Associates",icon:Ha,iconBg:"#E6DEDD",date:"July 2018 - July 2019",points:["During my four year course at Leeds Beckett University, I took a placement year in industry. For this, I worked for Michael Dyson Associates, based in Huddersfield. The company focuses on the development of social housing across the UK. During my employment with them, I enhanced my organisational skills as I was tasked with organising and carrying out surveys in various buildings. To access survey sites I was allocated and made responsible for a company van, on occasions time managing colleges and myself to travel as far as London. I increased my construction knowledge with numerous building techniques and learned how to focus on my individual work and as part of a team, whilst in a very busy office environment. When deadlines had to be met by colleagues, I assisted them by working overtime."]},{title:"Architectural Technologist",company_name:"Hoot Architecture",icon:Ha,iconBg:"#E6DEDD",date:"August 2020 - December 2021",points:["My first post qualification job, was for a small domestic practice called Hoot Architects, based in Durham. Due to the scale of the practice, I took a very hands-on approach, and held the responsibility of completing all the company’s technical drawings during my employment. During my time at Hoot, I was a vital part of the company’s growth from a two-man team working on typical house extensions to the company it is today currently 4 men strong and working on domestic & charity work up to the value of 1 million."]},{title:"Architectural Technologist",company_name:"CSM+ Architects",icon:Ha,iconBg:"#E6DEDD",date:"January 2022 - January 2023",points:["During my time at CSM I have vastly developed my architectural software skills with REVIT, BIM & NBS Chorus. Whilst also learning how to work on larger projects within the healthcare sector."]},{title:"Architectural Technologist",company_name:"North Tyneside Council",icon:Ha,iconBg:"#E6DEDD",date:"January 2023 - Present",points:["The current position I hold is for the North Tyneside council as an Architectural Technologist"]}],HJ=[{testimonial:"CIAT- Outstanding Graduating Student Award",name:"2020",company:"Acme Co"},{testimonial:"The Stephen George & Partners Prize for Best Final Year Project",name:"2020",company:"DEF Corp",image:"https://randomuser.me/api/portraits/men/5.jpg"},{testimonial:"The Hays Construction & Property Prize for the Best Architectural Detailing Portfolio on BSc (Hons) Architectural Technology",name:"2020",company:"456 Enterprises",image:"https://randomuser.me/api/portraits/women/6.jpg"},{testimonial:"Building Performance and Retrofit - Highly Commended",name:"2020",designation:"following my virtual SEEDS 2020 presentation on 'developing lamella and airey properties ecologically' I was awarded the following award.",company:"456 Enterprises",image:"https://randomuser.me/api/portraits/women/6.jpg"},{testimonial:"CIAT -Achieved Chartership 2024",name:"2024"}],zJ=[{name:"Genisis Cancer Care Centre",description:"",tags:[{name:"CSM Architects",color:"text-blue-500"},{name:"2022",color:"text-green-500"}],images:["assets/works/CSM/Genesis/BD0037-CSM-XX-00-DR-A-4400-P02-InternalMasonryWallsGroundFloor.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-00-DR-A-4410-P03-PartitionsTypePlanGroundFloor.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-00-DR-A-4414-P03-PartitionsDetailsGroundFloorExternalWall.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-00-DR-A-4415-P03-PartitionsDetailsGroundFloorInternalWall.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-00-DR-A-4600-C04-GroundFloorSFS&ExternalMasonrySettingOut.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-01-DR-A-4401-P02-InternalMasonryWallsFirstFloorincBunkerInfill.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-01-DR-A-4411-P03-PartitionsTypePlanFirstFloor.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-01-DR-A-4416-P02-PartitionsDetailsFirstFloorExternalWall.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-01-DR-A-4417-P03-PartitionsDetailsFirstFloorInternalWall.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-01-DR-A-4601-C05-FirstFloorSFS&ExternalMetalShingleSettingOut.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-02-DR-A-4412-P03-PartitionsTypePlanRoofLevel.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-02-DR-A-4602-C04-RoofFloorSFS&ExternalCladdingSettingOut.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-02-DR-A-4700-C02-SopremaRoofPlan.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-02-DR-A-4701-C04-SopremaMainWaterproofingDetails.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-02-DR-A-4704-C01-RoofLevelFalls.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-02-DR-A-4710-P02-AOVDetails.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-02-DR-A-4720-P01-RoofFallProtectionPlan.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-02-DR-A-4721-P01-RoofFallProtectionDetails.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-1100-GroundFloorDetailDesignPlan-P01.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-1110-FirstFloorDetailDesignPlan-P01.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-1110-RoofLevelDetailDesignPlan-SK02.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-1201-C03-SteelWorkCoatings.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-4204-P01-HiltiBuildersWorkDetails.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-4402-P02-InternalMasonryWallsPlantDeckMainRoofInfillandDetails.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-4418-P01-PartitionsDetailsSections.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-4453-P01-DeflectionHeadDetails.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-4608-C01-MetallicShingleTypicalDetails.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-4609-C05-CurtainGlazingTypicalDetails.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-4610-C01-TimberSoffitDetails.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-4611-C02-BrickFacadeTypicalDetails.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-4640-P01-CavityBarriers.jpg","assets/works/CSM/Genesis/BD0037-CSM-XX-ZZ-DR-A-4702-C03-AdditionalSopremaRoofWaterproofingDetails.jpg"]},{name:"Derriford",description:"",tags:[{name:"CSM Architects",color:"text-blue-500"},{name:"2022",color:"text-green-500"}],images:["assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-001C-ExistingPlan.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-002-DepartmentPlan.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-010A-ExistingFireStrategy.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-050C-DemolitionPlan.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-100O-ProposedGAFloorPlan.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-101-BedAccessPaths.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-120I-ProposedFireStrategy.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-130L-ProposedReflectedCeilingPlan.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-150A-ProposedConstructionPlan.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-501N-Xray4.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-502I-TechnicalRoom.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-503I-ControlArea.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-700-FinishesPlan.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-710D-Fittings&IPSDrawing.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-710E-Fittings&IPSDrawing.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-730D-LeadScreenDetails.jpg","assets/works/CSM/Derriford/4856-CSM-XX-06.01-DR-A-810F-Door&IronmongerySchedule.jpg"]},{name:"45 The Grove",description:"",tags:[{name:"Hoot Architecture",color:"text-red-500"},{name:"2021",color:"text-green-500"}],images:["assets/works/Hoot/45_Grove/0333-HOOT-DR-A-100-C1  -  Existing Site Plan.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-110-C1  -  Existing Ground Floor Plan.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-300-C1  -  Proposed Site Plan.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-312-C1  - Proposed Ground Floor Plan 1of2.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-313-C1  - Proposed Ground Floor Plan 2of2.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-316-C1  - Proposed Attic Plan.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-331-C1  - Proposed Pavilion Ground Floor Plan.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-371-C1  - Proposed Section B-B.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-376-C1  - Proposed Section G-G.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-380-C1  - Proposed Section J-J.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-381-C1  - Proposed Section K-K.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-500-C1  - Proposed House Extension Details.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-501-C1  - Proposed Dormer Details.jpg","assets/works/Hoot/45_Grove/0333-HOOT-DR-A-503-C1  - Proposed Pavilion Details.jpg"]},{name:"Gateway North East",description:"",tags:[{name:"Hoot Architecture",color:"text-red-500"},{name:"2021",color:"text-green-500"}],images:["assets/works/Hoot/Gateway_North_East/Hoot Architecture - Gateway NE - External 1 (with logo).jpg","assets/works/Hoot/Gateway_North_East/Hoot Architecture - Gateway NE - External 2 (with logo).jpg","assets/works/Hoot/Gateway_North_East/Hoot Architecture - Gateway NE - External 4 (with logo).jpg","assets/works/Hoot/Gateway_North_East/0281-HOOT-DR-110-P1  -  Existing Ground Floor Plan.jpg","assets/works/Hoot/Gateway_North_East/0281-HOOT-DR-210-P1  -  Proposed Ground Floor Plan.jpg","assets/works/Hoot/Gateway_North_East/0281-HOOT-DR-211-P1  -  Proposed First Floor Plan.jpg"]},{name:"Nursey",description:"",tags:[{name:"Hoot Architecture",color:"text-red-500"},{name:"2021",color:"text-green-500"}],images:["assets/works/Hoot/Nursey/100.jpg","assets/works/Hoot/Nursey/110.jpg","assets/works/Hoot/Nursey/300.jpg","assets/works/Hoot/Nursey/310.jpg"]},{name:"Parkside House",description:"",tags:[{name:"North Tyneside Council",color:"text-yellow-500"},{name:"2024",color:"text-green-500"}],images:["assets/works/NTC/Parkside/23-092-NTC-DR-111-T1-Block 1-General Arrangement Plans.jpg","assets/works/NTC/Parkside/23-092-NTC-DR-112-T1-Block 1-External Brick Setting Out.jpg","assets/works/NTC/Parkside/23-092-NTC-DR-113-T1-Block 1-Construction Plans.jpg","assets/works/NTC/Parkside/23-092-NTC-DR-114-T1-Block 1-Partition & Floor Build Up.jpg","assets/works/NTC/Parkside/23-092-NTC-DR-115-T1-Block 1-Finishes & Fittings Plans.jpg","assets/works/NTC/Parkside/23-092-NTC-DR-116-T1-Block 1-Elevations.jpg","assets/works/NTC/Parkside/23-092-NTC-DR-117-T1-Block 1-Sections.jpg","assets/works/NTC/Parkside/23-092-NTC-DR-118-T1-Block 1-Stair Details.jpg","assets/works/NTC/Parkside/23-092-NTC-DR-171-T1-Typical-Construction Details.jpg"]},{name:"Swindale Drive",description:"",tags:[{name:"North Tyneside Council",color:"text-yellow-500"},{name:"2024",color:"text-green-500"}],images:["assets/works/NTC/Swindale/22-004-NTC-DR-015-Site-House Setting Out Plan.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-111-C3-Block 1-General Arrangement Plan.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-112-C3-Block 1-External Brick Setting Out.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-113-C2-Block 1-Construction Plans.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-114-C4-Block 1-Partition & Floor Build Up.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-115-C2-Block 1-Finishes & Fittings Plans.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-116-C3-Block 1-Elevations.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-117-Block 1-Sections.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-118-Block 1-Stair Detail.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-150-C2-Block 5-Substructure Vent Layout Plan.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-151-C2-Block 5-General Arrangement Plan.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-152-Block 5-Roof Plan.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-153-Block 5-External Brick Setting Out.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-154-C2-Block 5-Construction Plans.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-156-C4-Block 5-Partition & Floor Build Up.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-157-Block 5-Finishes & Fittings Plans.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-158-C3-Block 5-Elevations.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-159-C2-Block 5-Sections.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-160-Block 5-Stair Detail.jpg","assets/works/NTC/Swindale/22-004-NTC-DR-171-C3-Typical-Construction Details.jpg","assets/works/NTC/Swindale/22-004-NTC-SH-155-Block 5-Schedules.jpg"]}],GJ=()=>{const[n,e]=X.useState(""),[t,i]=X.useState(!1);return ne.jsx("nav",{className:`${gi.paddingX} w-full flex items-centre py-5 fixed top-0 z-20 bg-primary `,children:ne.jsxs("div",{className:"w-full flex justify-between items-center max-w-7xl mx-auto",children:[ne.jsxs(rk,{to:"/",className:"flex items-center gap-2",onClick:()=>{e(""),window.scrollTo(0,0)},children:[ne.jsx("img",{src:RJ,alt:"logo",className:"w-9 h-9 object-contain"}),ne.jsxs("p",{className:"text-white text-[18px] font-bold cursor-pointer flex",children:["Elliott Young  ",ne.jsx("span",{className:"sm:block hidden",children:" | Chartered Architectural Technologist"})]})]}),ne.jsx("ul",{className:"list-none hidden sm:flex flex-row gap-10",children:$R.map(r=>ne.jsx("li",{className:`${n===r.title?"text-white":"text-secondary"} hover:text-white text-[18px] font-medium cursor pointer`,onClick:()=>e(r.title),children:ne.jsx("a",{href:`#${r.id}`,children:r.title})},r.id))}),ne.jsxs("div",{className:"sm:hidden flex flex-1 justify-end items-center ",children:[ne.jsx("img",{src:t?PJ:BJ,alt:"menu",className:"w-[28px] h-[28px]","object-contain":!0,"cursor-pointer":!0,onClick:()=>i(!t)}),ne.jsx("div",{className:`${t?"flex":"hidden"} p-6 black-gradient absolute top-20 right-0 mx-4 my-2 min-w-[140px] z-10 rounded-xl`,children:ne.jsx("ul",{className:"list-none flex justify-end items-start flex-col gap-4",children:$R.map(r=>ne.jsx("li",{className:`${n===r.title?"text-white":"text-secondary"} font-poppins font-medium cursor-pointer text-[16px]`,onClick:()=>{i(!t),e(r.title)},children:ne.jsx("a",{href:`#${r.id}`,children:r.title})},r.id))})})]})]})})};var VJ=Object.defineProperty,WJ=Object.defineProperties,jJ=Object.getOwnPropertyDescriptors,e2=Object.getOwnPropertySymbols,XJ=Object.prototype.hasOwnProperty,JJ=Object.prototype.propertyIsEnumerable,t2=(n,e,t)=>e in n?VJ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bf=(n,e)=>{for(var t in e||(e={}))XJ.call(e,t)&&t2(n,t,e[t]);if(e2)for(var t of e2(e))JJ.call(e,t)&&t2(n,t,e[t]);return n},Rf=(n,e)=>WJ(n,jJ(e)),G3=class extends X.Component{constructor(n){super(n),this.ref=Nn.createRef(),this.state={style:{}};const e={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},e,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(n=()=>{},e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:Rf(bf({},this.state.style),{willChange:"transform"})})),this.setTransition(),n(e)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:Rf(bf({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(n=()=>{},e){return e.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),n(e)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:Rf(bf({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:Rf(bf({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(n=()=>{},e){return this.setTransition(),this.settings.reset&&this.reset(),n(e)}getValues(n){const e=(n.nativeEvent.clientX-this.left)/this.width,t=(n.nativeEvent.clientY-this.top)/this.height,i=Math.min(Math.max(e,0),1),r=Math.min(Math.max(t,0),1),s=(this.reverse*(this.settings.max/2-i*this.settings.max)).toFixed(2),o=(this.reverse*(r*this.settings.max-this.settings.max/2)).toFixed(2),a=i*100,l=r*100;return{tiltX:s,tiltY:o,percentageX:a,percentageY:l}}updateElementPosition(){const n=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=n.left,this.top=n.top}update(n){const e=this.getValues(n);this.setState(Object.assign({},this.state,{style:Rf(bf({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:e.tiltY}deg) rotateY(${this.settings.axis==="y"?0:e.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const n=Object.assign({},this.props.style,this.state.style);return ne.jsx("div",{style:n,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const FM=n=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:n}}}),Pv=(n,e,t,i)=>({hidden:{x:n==="left"?100:n==="right"?-100:0,y:n==="up"?100:n==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),n2=(n,e,t,i)=>({hidden:{x:n==="left"?"-100%":n==="right"?"100%":0,y:n==="up"||n==="down"?"100%":0},show:{x:0,y:0,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),KJ=(n,e)=>({hidden:{},show:{transition:{staggerChildren:n,delayChildren:e||0}}}),Ad=(n,e)=>function(){return ne.jsxs(is.section,{variants:KJ(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${gi.padding} max-w-7xl mx-auto relative z-0`,children:[ne.jsx("span",{className:"hash-span",id:e,children:" "}),ne.jsx(n,{})]})},YJ=({index:n,title:e,icon:t})=>ne.jsx(G3,{className:"xs:w-[250px] w-full",children:ne.jsx(is.div,{variants:Pv("right","spring",n*.5,.75),className:"w-full bg-[#FFFFFF] p-[3px] rounded-[20px] shadow-card",children:ne.jsxs("div",{options:{max:45,scale:1,speed:450},className:"bg-tertiary rounded-[20px] py-5 px-12 min-h-[280px] flex justify-evenly items-center flex-col",children:[ne.jsx("img",{src:t,alt:"web-development",className:"w-16 h-16 object-contain"}),ne.jsx("h3",{className:"text-white text-[20px] font-bold text-center",children:e})]})})}),QJ=()=>ne.jsxs(ne.Fragment,{children:[ne.jsxs(is.div,{variants:FM(),children:[ne.jsx("p",{className:gi.sectionSubText,children:"Introduction"}),ne.jsx("h2",{className:gi.sectionHeadText,children:"Overview."})]}),ne.jsx(is.p,{variants:Pv("","",.1,1),className:"mt-4 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"I am a friendly, reliable, and trustworthy individual who enjoys working in a team and on my own. I enjoy sport and presently rotate membership of four climbing gyms, depending on my location. In the past, I have played rugby and was on two teams repersenting my school and local rugby club where I played “lock” position. I have also enjoyed rowing, and during my first year at university represented Leeds Beckett in a team rowing competion. All of  these sports have helped me to develop team building skills; the ability to make quick-fire decisions; improved my communication skills; kept me fit and provided a social scene."}),ne.jsx("div",{className:"mt-20 flex flex-wrap gap-10",children:UJ.map((n,e)=>ne.jsx(YJ,{index:e,...n},n.title))})]}),ZJ=Ad(QJ,"about");var Bv={},V3={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(V3);var W3=V3.exports;Bv.__esModule=!0;Bv.default=void 0;var qJ=OM(X),Do=OM(gd),$J=OM(W3);function OM(n){return n&&n.__esModule?n:{default:n}}const j3=({animate:n=!0,className:e="",layout:t="2-columns",lineColor:i="#FFF",children:r})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",i),qJ.default.createElement("div",{className:(0,$J.default)(e,"vertical-timeline",{"vertical-timeline--animate":n,"vertical-timeline--two-columns":t==="2-columns","vertical-timeline--one-column-left":t==="1-column"||t==="1-column-left","vertical-timeline--one-column-right":t==="1-column-right"})},r));j3.propTypes={children:Do.default.oneOfType([Do.default.arrayOf(Do.default.node),Do.default.node]).isRequired,className:Do.default.string,animate:Do.default.bool,layout:Do.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:Do.default.string};var eK=j3;Bv.default=eK;var Iv={};function aA(){return aA=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},aA.apply(this,arguments)}function tK(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,lA(n,e)}function lA(n,e){return lA=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},lA(n,e)}function nK(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var cA=new Map,Om=new WeakMap,i2=0,X3=void 0;function iK(n){X3=n}function rK(n){return n?(Om.has(n)||(i2+=1,Om.set(n,i2.toString())),Om.get(n)):"0"}function sK(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?rK(n.root):n[e])}).toString()}function oK(n){var e=sK(n),t=cA.get(e);if(!t){var i=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,u=a.isIntersecting&&r.some(function(h){return a.intersectionRatio>=h});n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=u),(l=i.get(a.target))==null||l.forEach(function(h){h(u,a)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},cA.set(e,t)}return t}function UM(n,e,t,i){if(t===void 0&&(t={}),i===void 0&&(i=X3),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=oK(t),o=s.id,a=s.observer,l=s.elements,u=l.get(n)||[];return l.has(n)||l.set(n,u),u.push(e),a.observe(n),function(){u.splice(u.indexOf(e),1),u.length===0&&(l.delete(n),a.unobserve(n)),l.size===0&&(a.disconnect(),cA.delete(o))}}var aK=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function r2(n){return typeof n.children!="function"}var v0=function(n){tK(e,n);function e(i){var r;return r=n.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),r2(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!i.initialInView,entry:void 0},r}var t=e.prototype;return t.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,a=r.rootMargin,l=r.trackVisibility,u=r.delay,h=r.fallbackInView;this._unobserveCb=UM(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:u},h)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!r2(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,u=a.as,h=nK(a,aK);return X.createElement(u||"div",aA({ref:this.handleNode},h),l)},e}(X.Component);v0.displayName="InView";v0.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function lK(n){var e=n===void 0?{}:n,t=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,u=e.initialInView,h=e.fallbackInView,d=X.useRef(),p=X.useState({inView:!!u}),m=p[0],y=p[1],A=X.useCallback(function(g){d.current!==void 0&&(d.current(),d.current=void 0),!l&&g&&(d.current=UM(g,function(_,M){y({inView:_,entry:M}),M.isIntersecting&&a&&d.current&&(d.current(),d.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:r,delay:i},h))},[Array.isArray(t)?t.toString():t,o,s,a,l,r,h,i]);X.useEffect(function(){!d.current&&m.entry&&!a&&!l&&y({inView:!!u})});var x=[A,m.inView,m.entry];return x.ref=x[0],x.inView=x[1],x.entry=x[2],x}const cK=Object.freeze(Object.defineProperty({__proto__:null,InView:v0,default:v0,defaultFallbackInView:iK,observe:UM,useInView:lK},Symbol.toStringTag,{value:"Module"})),uK=d2(cK);Iv.__esModule=!0;Iv.default=void 0;var Lo=kM(X),ln=kM(gd),Um=kM(W3),fK=uK;function kM(n){return n&&n.__esModule?n:{default:n}}const J3=({children:n="",className:e="",contentArrowStyle:t=null,contentStyle:i=null,date:r="",dateClassName:s="",icon:o=null,iconClassName:a="",iconOnClick:l=null,onTimelineElementClick:u=null,iconStyle:h=null,id:d="",position:p="",style:m=null,textClassName:y="",intersectionObserverProps:A={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:x=!1})=>Lo.default.createElement(fK.InView,A,({inView:g,ref:_})=>Lo.default.createElement("div",{ref:_,id:d,className:(0,Um.default)(e,"vertical-timeline-element",{"vertical-timeline-element--left":p==="left","vertical-timeline-element--right":p==="right","vertical-timeline-element--no-children":n===""}),style:m},Lo.default.createElement(Lo.default.Fragment,null,Lo.default.createElement("span",{style:h,onClick:l,className:(0,Um.default)(a,"vertical-timeline-element-icon",{"bounce-in":g||x,"is-hidden":!(g||x)})},o),Lo.default.createElement("div",{style:i,onClick:u,className:(0,Um.default)(y,"vertical-timeline-element-content",{"bounce-in":g||x,"is-hidden":!(g||x)})},Lo.default.createElement("div",{style:t,className:"vertical-timeline-element-content-arrow"}),n,Lo.default.createElement("span",{className:(0,Um.default)(s,"vertical-timeline-element-date")},r)))));J3.propTypes={children:ln.default.oneOfType([ln.default.arrayOf(ln.default.node),ln.default.node]),className:ln.default.string,contentArrowStyle:ln.default.shape({}),contentStyle:ln.default.shape({}),date:ln.default.node,dateClassName:ln.default.string,icon:ln.default.element,iconClassName:ln.default.string,iconStyle:ln.default.shape({}),iconOnClick:ln.default.func,onTimelineElementClick:ln.default.func,id:ln.default.string,position:ln.default.string,style:ln.default.shape({}),textClassName:ln.default.string,visible:ln.default.bool,intersectionObserverProps:ln.default.shape({root:ln.default.object,rootMargin:ln.default.string,threshold:ln.default.number,triggerOnce:ln.default.bool})};var hK=J3;Iv.default=hK;var K3={VerticalTimeline:Bv.default,VerticalTimelineElement:Iv.default};const dK=({experience:n})=>ne.jsxs(K3.VerticalTimelineElement,{contentStyle:{background:"#1d1836",color:"#fff"},contentArrowStyle:{borderRight:"7px solid  #232631"},date:n.date,iconStyle:{background:n.iconBg},icon:ne.jsx("div",{className:"flex justify-center items-center w-full h-full",children:ne.jsx("img",{src:n.icon,alt:n.company_name,className:"w-[60%] h-[60%] object-contain"})}),children:[ne.jsxs("div",{children:[ne.jsx("h3",{className:"text-white text-[24px] font-bold",children:n.title}),ne.jsx("p",{className:"text-secondary text-[16px] font-semibold",style:{margin:0},children:n.company_name})]}),ne.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:n.points.map((e,t)=>ne.jsx("li",{className:"text-white-100 text-[14px] pl-1 tracking-wider",children:e},`experience-point-${t}`))})]}),pK=()=>ne.jsxs(ne.Fragment,{children:[ne.jsx("p",{className:`${gi.sectionSubText} text-center`,children:"What I have done so far"}),ne.jsx("h2",{className:`${gi.sectionHeadText} text-center`,children:"Work Experience."}),ne.jsx("div",{className:"mt-20 flex flex-col",children:ne.jsx(K3.VerticalTimeline,{children:kJ.map((n,e)=>ne.jsx(dK,{experience:n},`experience-${e}`))})})]}),mK=Ad(pK,"work");var uA={exports:{}},Pl={},fA={exports:{}},as={},hA={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var t="none",i="contents",r=/input|select|textarea|button|object|iframe/;function s(d,p){return p.getPropertyValue("overflow")!=="visible"||d.scrollWidth<=0&&d.scrollHeight<=0}function o(d){var p=d.offsetWidth<=0&&d.offsetHeight<=0;if(p&&!d.innerHTML)return!0;try{var m=window.getComputedStyle(d),y=m.getPropertyValue("display");return p?y!==i&&s(d,m):y===t}catch{return console.warn("Failed to inspect element style"),!1}}function a(d){for(var p=d,m=d.getRootNode&&d.getRootNode();p&&p!==document.body;){if(m&&p===m&&(p=m.host.parentNode),o(p))return!1;p=p.parentNode}return!0}function l(d,p){var m=d.nodeName.toLowerCase(),y=r.test(m)&&!d.disabled||m==="a"&&d.href||p;return y&&a(d)}function u(d){var p=d.getAttribute("tabindex");p===null&&(p=void 0);var m=isNaN(p);return(m||p>=0)&&l(d,!m)}function h(d){var p=[].slice.call(d.querySelectorAll("*"),0).reduce(function(m,y){return m.concat(y.shadowRoot?h(y.shadowRoot):[y])},[]);return p.filter(u)}n.exports=e.default})(hA,hA.exports);var Y3=hA.exports;Object.defineProperty(as,"__esModule",{value:!0});as.resetState=xK;as.log=_K;as.handleBlur=Xh;as.handleFocus=Jh;as.markForFocusLater=AK;as.returnFocus=SK;as.popWithoutFocus=MK;as.setupScopedFocus=wK;as.teardownScopedFocus=EK;var gK=Y3,vK=yK(gK);function yK(n){return n&&n.__esModule?n:{default:n}}var Au=[],Kc=null,dA=!1;function xK(){Au=[]}function _K(){}function Xh(){dA=!0}function Jh(){if(dA){if(dA=!1,!Kc)return;setTimeout(function(){if(!Kc.contains(document.activeElement)){var n=(0,vK.default)(Kc)[0]||Kc;n.focus()}},0)}}function AK(){Au.push(document.activeElement)}function SK(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{Au.length!==0&&(e=Au.pop(),e.focus({preventScroll:n}));return}catch{console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function MK(){Au.length>0&&Au.pop()}function wK(n){Kc=n,window.addEventListener?(window.addEventListener("blur",Xh,!1),document.addEventListener("focus",Jh,!0)):(window.attachEvent("onBlur",Xh),document.attachEvent("onFocus",Jh))}function EK(){Kc=null,window.addEventListener?(window.removeEventListener("blur",Xh),document.removeEventListener("focus",Jh)):(window.detachEvent("onBlur",Xh),document.detachEvent("onFocus",Jh))}var pA={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=Y3,i=r(t);function r(a){return a&&a.__esModule?a:{default:a}}function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return a.activeElement.shadowRoot?s(a.activeElement.shadowRoot):a.activeElement}function o(a,l){var u=(0,i.default)(a);if(!u.length){l.preventDefault();return}var h=void 0,d=l.shiftKey,p=u[0],m=u[u.length-1],y=s();if(a===y){if(!d)return;h=m}if(m===y&&!d&&(h=p),p===y&&d&&(h=m),h){l.preventDefault(),h.focus();return}var A=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),x=A!=null&&A[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(x){var g=u.indexOf(y);if(g>-1&&(g+=d?-1:1),h=u[g],typeof h>"u"){l.preventDefault(),h=d?m:p,h.focus();return}l.preventDefault(),h.focus()}}n.exports=e.default})(pA,pA.exports);var CK=pA.exports,ls={},TK=function(){},bK=TK,qr={},Q3={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(n){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),t={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};n.exports?n.exports=t:window.ExecutionEnvironment=t})()})(Q3);var RK=Q3.exports;Object.defineProperty(qr,"__esModule",{value:!0});qr.canUseDOM=qr.SafeNodeList=qr.SafeHTMLCollection=void 0;var PK=RK,BK=IK(PK);function IK(n){return n&&n.__esModule?n:{default:n}}var Dv=BK.default,DK=Dv.canUseDOM?window.HTMLElement:{};qr.SafeHTMLCollection=Dv.canUseDOM?window.HTMLCollection:{};qr.SafeNodeList=Dv.canUseDOM?window.NodeList:{};qr.canUseDOM=Dv.canUseDOM;qr.default=DK;Object.defineProperty(ls,"__esModule",{value:!0});ls.resetState=UK;ls.log=kK;ls.assertNodeList=Z3;ls.setElement=HK;ls.validateElement=HM;ls.hide=zK;ls.show=GK;ls.documentNotReadyOrSSRTesting=VK;var LK=bK,NK=OK(LK),FK=qr;function OK(n){return n&&n.__esModule?n:{default:n}}var wr=null;function UK(){wr&&(wr.removeAttribute?wr.removeAttribute("aria-hidden"):wr.length!=null?wr.forEach(function(n){return n.removeAttribute("aria-hidden")}):document.querySelectorAll(wr).forEach(function(n){return n.removeAttribute("aria-hidden")})),wr=null}function kK(){}function Z3(n,e){if(!n||!n.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function HK(n){var e=n;if(typeof e=="string"&&FK.canUseDOM){var t=document.querySelectorAll(e);Z3(t,e),e=t}return wr=e||wr,wr}function HM(n){var e=n||wr;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,NK.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function zK(n){var e=!0,t=!1,i=void 0;try{for(var r=HM(n)[Symbol.iterator](),s;!(e=(s=r.next()).done);e=!0){var o=s.value;o.setAttribute("aria-hidden","true")}}catch(a){t=!0,i=a}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}}function GK(n){var e=!0,t=!1,i=void 0;try{for(var r=HM(n)[Symbol.iterator](),s;!(e=(s=r.next()).done);e=!0){var o=s.value;o.removeAttribute("aria-hidden")}}catch(a){t=!0,i=a}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}}function VK(){wr=null}var Du={};Object.defineProperty(Du,"__esModule",{value:!0});Du.resetState=WK;Du.log=jK;var sh={},oh={};function s2(n,e){n.classList.remove(e)}function WK(){var n=document.getElementsByTagName("html")[0];for(var e in sh)s2(n,sh[e]);var t=document.body;for(var i in oh)s2(t,oh[i]);sh={},oh={}}function jK(){}var XK=function(e,t){return e[t]||(e[t]=0),e[t]+=1,t},JK=function(e,t){return e[t]&&(e[t]-=1),t},KK=function(e,t,i){i.forEach(function(r){XK(t,r),e.add(r)})},YK=function(e,t,i){i.forEach(function(r){JK(t,r),t[r]===0&&e.remove(r)})};Du.add=function(e,t){return KK(e.classList,e.nodeName.toLowerCase()=="html"?sh:oh,t.split(" "))};Du.remove=function(e,t){return YK(e.classList,e.nodeName.toLowerCase()=="html"?sh:oh,t.split(" "))};var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.log=ZK;Lu.resetState=qK;function QK(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var q3=function n(){var e=this;QK(this,n),this.register=function(t){e.openInstances.indexOf(t)===-1&&(e.openInstances.push(t),e.emit("register"))},this.deregister=function(t){var i=e.openInstances.indexOf(t);i!==-1&&(e.openInstances.splice(i,1),e.emit("deregister"))},this.subscribe=function(t){e.subscribers.push(t)},this.emit=function(t){e.subscribers.forEach(function(i){return i(t,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},y0=new q3;function ZK(){console.log("portalOpenInstances ----------"),console.log(y0.openInstances.length),y0.openInstances.forEach(function(n){return console.log(n)}),console.log("end portalOpenInstances ----------")}function qK(){y0=new q3}Lu.default=y0;var zM={};Object.defineProperty(zM,"__esModule",{value:!0});zM.resetState=nY;zM.log=iY;var $K=Lu,eY=tY($K);function tY(n){return n&&n.__esModule?n:{default:n}}var fi=void 0,jr=void 0,vl=[];function nY(){for(var n=[fi,jr],e=0;e<n.length;e++){var t=n[e];t&&t.parentNode&&t.parentNode.removeChild(t)}fi=jr=null,vl=[]}function iY(){console.log("bodyTrap ----------"),console.log(vl.length);for(var n=[fi,jr],e=0;e<n.length;e++){var t=n[e],i=t||{};console.log(i.nodeName,i.className,i.id)}console.log("edn bodyTrap ----------")}function o2(){vl.length!==0&&vl[vl.length-1].focusContent()}function rY(n,e){!fi&&!jr&&(fi=document.createElement("div"),fi.setAttribute("data-react-modal-body-trap",""),fi.style.position="absolute",fi.style.opacity="0",fi.setAttribute("tabindex","0"),fi.addEventListener("focus",o2),jr=fi.cloneNode(),jr.addEventListener("focus",o2)),vl=e,vl.length>0?(document.body.firstChild!==fi&&document.body.insertBefore(fi,document.body.firstChild),document.body.lastChild!==jr&&document.body.appendChild(jr)):(fi.parentElement&&fi.parentElement.removeChild(fi),jr.parentElement&&jr.parentElement.removeChild(jr))}eY.default.subscribe(rY);(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(K){for(var Y=1;Y<arguments.length;Y++){var Z=arguments[Y];for(var z in Z)Object.prototype.hasOwnProperty.call(Z,z)&&(K[z]=Z[z])}return K},i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},r=function(){function K(Y,Z){for(var z=0;z<Z.length;z++){var B=Z[z];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(Y,B.key,B)}}return function(Y,Z,z){return Z&&K(Y.prototype,Z),z&&K(Y,z),Y}}(),s=X,o=gd,a=P(o),l=as,u=w(l),h=CK,d=P(h),p=ls,m=w(p),y=Du,A=w(y),x=qr,g=P(x),_=Lu,M=P(_);function w(K){if(K&&K.__esModule)return K;var Y={};if(K!=null)for(var Z in K)Object.prototype.hasOwnProperty.call(K,Z)&&(Y[Z]=K[Z]);return Y.default=K,Y}function P(K){return K&&K.__esModule?K:{default:K}}function b(K,Y){if(!(K instanceof Y))throw new TypeError("Cannot call a class as a function")}function I(K,Y){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:K}function D(K,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);K.prototype=Object.create(Y&&Y.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(K,Y):K.__proto__=Y)}var R={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},T=function(Y){return Y.code==="Tab"||Y.keyCode===9},N=function(Y){return Y.code==="Escape"||Y.keyCode===27},Q=0,W=function(K){D(Y,K);function Y(Z){b(this,Y);var z=I(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,Z));return z.setOverlayRef=function(B){z.overlay=B,z.props.overlayRef&&z.props.overlayRef(B)},z.setContentRef=function(B){z.content=B,z.props.contentRef&&z.props.contentRef(B)},z.afterClose=function(){var B=z.props,G=B.appElement,V=B.ariaHideApp,q=B.htmlOpenClassName,ue=B.bodyOpenClassName,be=B.parentSelector,re=be&&be().ownerDocument||document;ue&&A.remove(re.body,ue),q&&A.remove(re.getElementsByTagName("html")[0],q),V&&Q>0&&(Q-=1,Q===0&&m.show(G)),z.props.shouldFocusAfterRender&&(z.props.shouldReturnFocusAfterClose?(u.returnFocus(z.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),z.props.onAfterClose&&z.props.onAfterClose(),M.default.deregister(z)},z.open=function(){z.beforeOpen(),z.state.afterOpen&&z.state.beforeClose?(clearTimeout(z.closeTimer),z.setState({beforeClose:!1})):(z.props.shouldFocusAfterRender&&(u.setupScopedFocus(z.node),u.markForFocusLater()),z.setState({isOpen:!0},function(){z.openAnimationFrame=requestAnimationFrame(function(){z.setState({afterOpen:!0}),z.props.isOpen&&z.props.onAfterOpen&&z.props.onAfterOpen({overlayEl:z.overlay,contentEl:z.content})})}))},z.close=function(){z.props.closeTimeoutMS>0?z.closeWithTimeout():z.closeWithoutTimeout()},z.focusContent=function(){return z.content&&!z.contentHasFocus()&&z.content.focus({preventScroll:!0})},z.closeWithTimeout=function(){var B=Date.now()+z.props.closeTimeoutMS;z.setState({beforeClose:!0,closesAt:B},function(){z.closeTimer=setTimeout(z.closeWithoutTimeout,z.state.closesAt-Date.now())})},z.closeWithoutTimeout=function(){z.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},z.afterClose)},z.handleKeyDown=function(B){T(B)&&(0,d.default)(z.content,B),z.props.shouldCloseOnEsc&&N(B)&&(B.stopPropagation(),z.requestClose(B))},z.handleOverlayOnClick=function(B){z.shouldClose===null&&(z.shouldClose=!0),z.shouldClose&&z.props.shouldCloseOnOverlayClick&&(z.ownerHandlesClose()?z.requestClose(B):z.focusContent()),z.shouldClose=null},z.handleContentOnMouseUp=function(){z.shouldClose=!1},z.handleOverlayOnMouseDown=function(B){!z.props.shouldCloseOnOverlayClick&&B.target==z.overlay&&B.preventDefault()},z.handleContentOnClick=function(){z.shouldClose=!1},z.handleContentOnMouseDown=function(){z.shouldClose=!1},z.requestClose=function(B){return z.ownerHandlesClose()&&z.props.onRequestClose(B)},z.ownerHandlesClose=function(){return z.props.onRequestClose},z.shouldBeClosed=function(){return!z.state.isOpen&&!z.state.beforeClose},z.contentHasFocus=function(){return document.activeElement===z.content||z.content.contains(document.activeElement)},z.buildClassName=function(B,G){var V=(typeof G>"u"?"undefined":i(G))==="object"?G:{base:R[B],afterOpen:R[B]+"--after-open",beforeClose:R[B]+"--before-close"},q=V.base;return z.state.afterOpen&&(q=q+" "+V.afterOpen),z.state.beforeClose&&(q=q+" "+V.beforeClose),typeof G=="string"&&G?q+" "+G:q},z.attributesFromObject=function(B,G){return Object.keys(G).reduce(function(V,q){return V[B+"-"+q]=G[q],V},{})},z.state={afterOpen:!1,beforeClose:!1},z.shouldClose=null,z.moveFromContentToOverlay=null,z}return r(Y,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(z,B){this.props.isOpen&&!z.isOpen?this.open():!this.props.isOpen&&z.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!B.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var z=this.props,B=z.appElement,G=z.ariaHideApp,V=z.htmlOpenClassName,q=z.bodyOpenClassName,ue=z.parentSelector,be=ue&&ue().ownerDocument||document;q&&A.add(be.body,q),V&&A.add(be.getElementsByTagName("html")[0],V),G&&(Q+=1,m.hide(B)),M.default.register(this)}},{key:"render",value:function(){var z=this.props,B=z.id,G=z.className,V=z.overlayClassName,q=z.defaultStyles,ue=z.children,be=G?{}:q.content,re=V?{}:q.overlay;if(this.shouldBeClosed())return null;var me={ref:this.setOverlayRef,className:this.buildClassName("overlay",V),style:t({},re,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},we=t({id:B,ref:this.setContentRef,style:t({},be,this.props.style.content),className:this.buildClassName("content",G),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",t({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Ee=this.props.contentElement(we,ue);return this.props.overlayElement(me,Ee)}}]),Y}(s.Component);W.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},W.propTypes={isOpen:a.default.bool.isRequired,defaultStyles:a.default.shape({content:a.default.object,overlay:a.default.object}),style:a.default.shape({content:a.default.object,overlay:a.default.object}),className:a.default.oneOfType([a.default.string,a.default.object]),overlayClassName:a.default.oneOfType([a.default.string,a.default.object]),parentSelector:a.default.func,bodyOpenClassName:a.default.string,htmlOpenClassName:a.default.string,ariaHideApp:a.default.bool,appElement:a.default.oneOfType([a.default.instanceOf(g.default),a.default.instanceOf(x.SafeHTMLCollection),a.default.instanceOf(x.SafeNodeList),a.default.arrayOf(a.default.instanceOf(g.default))]),onAfterOpen:a.default.func,onAfterClose:a.default.func,onRequestClose:a.default.func,closeTimeoutMS:a.default.number,shouldFocusAfterRender:a.default.bool,shouldCloseOnOverlayClick:a.default.bool,shouldReturnFocusAfterClose:a.default.bool,preventScroll:a.default.bool,role:a.default.string,contentLabel:a.default.string,aria:a.default.object,data:a.default.object,children:a.default.node,shouldCloseOnEsc:a.default.bool,overlayRef:a.default.func,contentRef:a.default.func,id:a.default.string,overlayElement:a.default.func,contentElement:a.default.func,testId:a.default.string},e.default=W,n.exports=e.default})(fA,fA.exports);var sY=fA.exports;function $3(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);n!=null&&this.setState(n)}function eN(n){function e(t){var i=this.constructor.getDerivedStateFromProps(n,t);return i??null}this.setState(e.bind(this))}function tN(n,e){try{var t=this.props,i=this.state;this.props=n,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,i)}finally{this.props=t,this.state=i}}$3.__suppressDeprecationWarning=!0;eN.__suppressDeprecationWarning=!0;tN.__suppressDeprecationWarning=!0;function oY(n){var e=n.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof n.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return n;var t=null,i=null,r=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?i="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(i="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?r="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(r="UNSAFE_componentWillUpdate"),t!==null||i!==null||r!==null){var s=n.displayName||n.name,o=typeof n.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(i!==null?`
  `+i:"")+(r!==null?`
  `+r:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof n.getDerivedStateFromProps=="function"&&(e.componentWillMount=$3,e.componentWillReceiveProps=eN),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=tN;var a=e.componentDidUpdate;e.componentDidUpdate=function(u,h,d){var p=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;a.call(this,u,h,p)}}return n}const aY=Object.freeze(Object.defineProperty({__proto__:null,polyfill:oY},Symbol.toStringTag,{value:"Module"})),lY=d2(aY);Object.defineProperty(Pl,"__esModule",{value:!0});Pl.bodyOpenClassName=Pl.portalClassName=void 0;var a2=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},cY=function(){function n(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),nN=X,x0=Sd(nN),uY=uS,_0=Sd(uY),fY=gd,At=Sd(fY),hY=sY,l2=Sd(hY),dY=ls,pY=gY(dY),Wo=qr,c2=Sd(Wo),mY=lY;function gY(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Sd(n){return n&&n.__esModule?n:{default:n}}function vY(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function u2(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function yY(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var xY=Pl.portalClassName="ReactModalPortal",_Y=Pl.bodyOpenClassName="ReactModal__Body--open",Ya=Wo.canUseDOM&&_0.default.createPortal!==void 0,f2=function(e){return document.createElement(e)},h2=function(){return Ya?_0.default.createPortal:_0.default.unstable_renderSubtreeIntoContainer};function km(n){return n()}var Md=function(n){yY(e,n);function e(){var t,i,r,s;vY(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(i=(r=u2(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r),r.removePortal=function(){!Ya&&_0.default.unmountComponentAtNode(r.node);var u=km(r.props.parentSelector);u&&u.contains(r.node)?u.removeChild(r.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},r.portalRef=function(u){r.portal=u},r.renderPortal=function(u){var h=h2(),d=h(r,x0.default.createElement(l2.default,a2({defaultStyles:e.defaultStyles},u)),r.node);r.portalRef(d)},i),u2(r,s)}return cY(e,[{key:"componentDidMount",value:function(){if(Wo.canUseDOM){Ya||(this.node=f2("div")),this.node.className=this.props.portalClassName;var i=km(this.props.parentSelector);i.appendChild(this.node),!Ya&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(i){var r=km(i.parentSelector),s=km(this.props.parentSelector);return{prevParent:r,nextParent:s}}},{key:"componentDidUpdate",value:function(i,r,s){if(Wo.canUseDOM){var o=this.props,a=o.isOpen,l=o.portalClassName;i.portalClassName!==l&&(this.node.className=l);var u=s.prevParent,h=s.nextParent;h!==u&&(u.removeChild(this.node),h.appendChild(this.node)),!(!i.isOpen&&!a)&&!Ya&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!Wo.canUseDOM||!this.node||!this.portal)){var i=this.portal.state,r=Date.now(),s=i.isOpen&&this.props.closeTimeoutMS&&(i.closesAt||r+this.props.closeTimeoutMS);s?(i.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,s-r)):this.removePortal()}}},{key:"render",value:function(){if(!Wo.canUseDOM||!Ya)return null;!this.node&&Ya&&(this.node=f2("div"));var i=h2();return i(x0.default.createElement(l2.default,a2({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(i){pY.setElement(i)}}]),e}(nN.Component);Md.propTypes={isOpen:At.default.bool.isRequired,style:At.default.shape({content:At.default.object,overlay:At.default.object}),portalClassName:At.default.string,bodyOpenClassName:At.default.string,htmlOpenClassName:At.default.string,className:At.default.oneOfType([At.default.string,At.default.shape({base:At.default.string.isRequired,afterOpen:At.default.string.isRequired,beforeClose:At.default.string.isRequired})]),overlayClassName:At.default.oneOfType([At.default.string,At.default.shape({base:At.default.string.isRequired,afterOpen:At.default.string.isRequired,beforeClose:At.default.string.isRequired})]),appElement:At.default.oneOfType([At.default.instanceOf(c2.default),At.default.instanceOf(Wo.SafeHTMLCollection),At.default.instanceOf(Wo.SafeNodeList),At.default.arrayOf(At.default.instanceOf(c2.default))]),onAfterOpen:At.default.func,onRequestClose:At.default.func,closeTimeoutMS:At.default.number,ariaHideApp:At.default.bool,shouldFocusAfterRender:At.default.bool,shouldCloseOnOverlayClick:At.default.bool,shouldReturnFocusAfterClose:At.default.bool,preventScroll:At.default.bool,parentSelector:At.default.func,aria:At.default.object,data:At.default.object,role:At.default.string,contentLabel:At.default.string,shouldCloseOnEsc:At.default.bool,overlayRef:At.default.func,contentRef:At.default.func,id:At.default.string,overlayElement:At.default.func,contentElement:At.default.func};Md.defaultProps={isOpen:!1,portalClassName:xY,bodyOpenClassName:_Y,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return x0.default.createElement("div",e,t)},contentElement:function(e,t){return x0.default.createElement("div",e,t)}};Md.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,mY.polyfill)(Md);Pl.default=Md;(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Pl,i=r(t);function r(s){return s&&s.__esModule?s:{default:s}}e.default=i.default,n.exports=e.default})(uA,uA.exports);var AY=uA.exports;const iN=Kh(AY);function A0(){return A0=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},A0.apply(this,arguments)}var rN=function(e){var t=e.src,i=e.sources,r=e.width,s=e.height,o=e.hasSpacer,a=e.imgAttributes,l=e.isZoomed,u=e.fadeDuration,h=r&&s&&o;return Nn.createElement("div",{style:{paddingTop:h?s/r*100+"%":null}},i&&i.length>0?Nn.createElement("picture",null,i.map(function(d,p){return Nn.createElement(X.Fragment,{key:p},d.srcSet&&Nn.createElement("source",d))}),Nn.createElement("img",A0({},a,{className:"iiz__img "+(a.className||"")+" "+(l?"iiz__img--hidden":"")+" "+(h?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(l?u:0)+"ms, visibility 0ms linear "+(l?u:0)+"ms"},src:t,width:r,height:s}))):Nn.createElement("img",A0({},a,{className:"iiz__img "+(a.className||"")+" "+(l?"iiz__img--hidden":"")+" "+(h?"iiz__img--abs":""),style:{transition:"opacity 0ms linear "+(l?u:0)+"ms, visibility 0ms linear "+(l?u:0)+"ms"},src:t,width:r,height:s})))};rN.propTypes={};var mA=function(e){var t=e.src,i=e.fadeDuration,r=e.top,s=e.left,o=e.isZoomed,a=e.onLoad,l=e.onDragStart,u=e.onDragEnd,h=e.onClose,d=e.onFadeOut;return Nn.createElement(X.Fragment,null,Nn.createElement("img",{className:"iiz__zoom-img "+(o?"iiz__zoom-img--visible":""),style:{top:r,left:s,transition:"opacity "+i+"ms linear, visibility "+i+"ms linear"},src:t,onLoad:a,onTouchStart:l,onTouchEnd:u,onMouseDown:l,onMouseUp:u,onTransitionEnd:d,draggable:"false",alt:""}),h&&Nn.createElement("button",{className:"iiz__btn iiz__close "+(o?"iiz__close--visible":""),style:{transition:"opacity "+i+"ms linear, visibility "+i+"ms linear"},onClick:h,"aria-label":"Zoom Out"}))};mA.propTypes={};var sN=function(e){var t=e.children,i=X.useState(function(){var s=document.createElement("div");return s.classList.add("iiz__zoom-portal"),s}),r=i[0];return X.useEffect(function(){return document.body.appendChild(r),function(){return document.body.removeChild(r)}},[r]),uS.createPortal(t,r)};sN.propTypes={children:nW.element};var SY=void 0,oN=function(e){var t=e.moveType,i=t===void 0?"pan":t,r=e.zoomType,s=r===void 0?"click":r,o=e.src,a=e.sources,l=e.width,u=e.height,h=e.hasSpacer,d=e.imgAttributes,p=d===void 0?{}:d,m=e.zoomSrc,y=e.zoomScale,A=y===void 0?1:y,x=e.zoomPreload,g=e.fadeDuration,_=g===void 0?150:g,M=e.fullscreenOnMobile,w=e.mobileBreakpoint,P=w===void 0?640:w,b=e.hideCloseButton,I=e.hideHint,D=e.className,R=e.afterZoomIn,T=e.afterZoomOut,N=X.useRef(null),Q=X.useRef(null),W=X.useRef({}),K=X.useState(x),Y=K[0],Z=K[1],z=X.useState(!1),B=z[0],G=z[1],V=X.useState(!1),q=V[0],ue=V[1],be=X.useState(!1),re=be[0],me=be[1],we=X.useState(!1),Ee=we[0],nt=we[1],dt=X.useState(!1),Ke=dt[0],He=dt[1],O=X.useState(!1),ye=O[0],Me=O[1],Ie=X.useState(i),he=Ie[0],Ye=Ie[1],Le=X.useState(0),Ge=Le[0],H=Le[1],L=X.useState(0),se=L[0],xe=L[1],_e=function(Te){Z(!0),Me(!1),s==="hover"&&!q&&$e(Te)},Ae=function(){G(!0),me(at(M,P)),Ye("drag")},$e=function(Te){if(q){B?b&&lt(Te):!Ke&&j();return}B&&Z(!0),Q.current?(Pe({target:Q.current}),Ue(Te.pageX,Te.pageY)):W.current.onLoadCallback=Ue.bind(SY,Te.pageX,Te.pageY)},Pe=function(Te){var ct=yt(Te.target,A);Q.current=Te.target,Q.current.setAttribute("width",ct.width),Q.current.setAttribute("height",ct.height),W.current.scaledDimensions=ct,W.current.bounds=de(N.current,!1),W.current.ratios=Ne(W.current.bounds,ct),W.current.onLoadCallback&&(W.current.onLoadCallback(),W.current.onLoadCallback=null)},We=function(Te){var ct=Te.pageX-W.current.offsets.x,Lt=Te.pageY-W.current.offsets.y;ct=Math.max(Math.min(ct,W.current.bounds.width),0),Lt=Math.max(Math.min(Lt,W.current.bounds.height),0),H(ct*-W.current.ratios.x),xe(Lt*-W.current.ratios.y)},vt=function(Te){var ct=typeof Te.pageX=="number"?Te.pageX:Te.changedTouches[0].pageX,Lt=typeof Te.pageY=="number"?Te.pageY:Te.changedTouches[0].pageY;W.current.offsets=ve(ct,Lt,Q.current.offsetLeft,Q.current.offsetTop),nt(!0),B||(W.current.eventPosition={x:Te.pageX,y:Te.pageY})},Ce=X.useCallback(function(st){st.stopPropagation();var Te=typeof st.pageX=="number"?st.pageX:st.changedTouches[0].pageX,ct=typeof st.pageY=="number"?st.pageY:st.changedTouches[0].pageY,Lt=Te-W.current.offsets.x,Ii=ct-W.current.offsets.y;Lt=Math.max(Math.min(Lt,0),(W.current.scaledDimensions.width-W.current.bounds.width)*-1),Ii=Math.max(Math.min(Ii,0),(W.current.scaledDimensions.height-W.current.bounds.height)*-1),H(Lt),xe(Ii)},[]),ze=function(Te){if(nt(!1),!B){var ct=Math.abs(Te.pageX-W.current.eventPosition.x),Lt=Math.abs(Te.pageY-W.current.eventPosition.y);He(ct>5||Lt>5)}},bt=function(Te){he==="drag"&&q?ze(Te):lt(Te)},lt=function(Te){!B&&Te.target.classList.contains("iiz__close")||(!q||re||!_?je({},!0):Me(!0)),j()},je=function(Te,ct){(ct||Te.propertyName==="opacity"&&N.current.contains(Te.target))&&((x&&B||!x)&&(Q.current=null,W.current=Se(),Z(!1)),G(!1),me(!1),Ye(i),Me(!1))},J=function(Te,ct){W.current.offsets=ve(window.pageXOffset,window.pageYOffset,-W.current.bounds.left,-W.current.bounds.top),We({pageX:Te,pageY:ct})},ge=function(Te,ct){var Lt=(Te-(window.pageXOffset+W.current.bounds.left))*-W.current.ratios.x,Ii=(ct-(window.pageYOffset+W.current.bounds.top))*-W.current.ratios.y;Lt=Lt+(re?(window.innerWidth-W.current.bounds.width)/2:0),Ii=Ii+(re?(window.innerHeight-W.current.bounds.height)/2:0),W.current.bounds=de(N.current,re),W.current.offsets=ve(0,0,0,0),Ce({changedTouches:[{pageX:Lt,pageY:Ii}],preventDefault:function(){},stopPropagation:function(){}})},Ue=function(Te,ct){ue(!0),he==="drag"?ge(Te,ct):J(Te,ct),R&&R()},j=function(){ue(!1),T&&T()},Se=function(){return{onLoadCallback:null,bounds:{},offsets:{},ratios:{},eventPosition:{},scaledDimensions:{}}},de=function(Te,ct){return ct?{width:window.innerWidth,height:window.innerHeight,left:0,top:0}:Te.getBoundingClientRect()},ve=function(Te,ct,Lt,Ii){return{x:Te-Lt,y:ct-Ii}},Ne=function(Te,ct){return{x:(ct.width-Te.width)/Te.width,y:(ct.height-Te.height)/Te.height}},at=function(Te,ct){return Te&&window.matchMedia&&window.matchMedia("(max-width: "+ct+"px)").matches},yt=function(Te,ct){return{width:Te.naturalWidth*ct,height:Te.naturalHeight*ct}},Dt={src:m||o,fadeDuration:re?0:_,top:se,left:Ge,isZoomed:q,onLoad:Pe,onDragStart:he==="drag"?vt:null,onDragEnd:he==="drag"?ze:null,onClose:!b&&he==="drag"?lt:null,onFadeOut:ye?je:null};return X.useEffect(function(){W.current=Se()},[]),X.useEffect(function(){at(M,P)&&Z(!1)},[M,P]),X.useEffect(function(){if(Q.current){var st=B?"touchmove":"mousemove";Ee?Q.current.addEventListener(st,Ce,{passive:!0}):Q.current.removeEventListener(st,Ce)}},[Ee,B,Ce]),Nn.createElement("figure",{className:"iiz "+(he==="drag"?"iiz--drag":"")+" "+(D||""),style:{width:l},ref:N,onTouchStart:q?null:Ae,onClick:$e,onMouseEnter:B?null:_e,onMouseMove:he==="drag"||!q?null:We,onMouseLeave:B?null:bt},Nn.createElement(rN,{src:o,sources:a,width:l,height:u,hasSpacer:h,imgAttributes:p,fadeDuration:_,isZoomed:q}),Y&&Nn.createElement(X.Fragment,null,re?Nn.createElement(sN,null,Nn.createElement(mA,Dt)):Nn.createElement(mA,Dt)),!I&&!q&&Nn.createElement("span",{className:"iiz__btn iiz__hint"}))};oN.propTypes={};iN.setAppElement("#root");const MY={content:{top:"0",left:"0",right:"0",bottom:"0",marginRight:"0",marginBottom:"0",padding:"20px",background:"#1a1a1a",border:"none",borderRadius:"0"}},wY=({index:n,name:e,description:t,tags:i,images:r,source_code_link:s,onClick:o})=>ne.jsx("div",{onClick:o,className:"cursor-pointer",children:ne.jsxs(G3,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl sm:w-[360px] w-full",children:[ne.jsx("div",{className:"relative w-full h-[230px]",children:ne.jsx("img",{src:r[0],alt:"project_image",className:"w-full h-full object-cover rounded-2xl"})}),ne.jsxs("div",{className:"mt-5",children:[ne.jsx("h3",{className:"text-white font-bold text-[24px]",children:e}),ne.jsx("p",{className:"mt-2 text-secondary text-[14px]",children:"click to find out more"})]}),ne.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:i.map(a=>ne.jsxs("p",{className:`text-[14px] ${a.color}`,children:["#",a.name]},`${e}-${a.name}`))})]})}),EY=()=>{const[n,e]=X.useState(!1),[t,i]=X.useState(null),[r,s]=X.useState(0),o=h=>{i(h),s(0),e(!0)},a=()=>{e(!1),i(null),s(0)},l=()=>{t&&r<t.images.length-1&&s(r+1)},u=()=>{t&&r>0&&s(r-1)};return ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{variants:FM(),children:[ne.jsx("p",{className:`${gi.sectionSubText} `,children:"My work"}),ne.jsx("h2",{className:`${gi.sectionHeadText}`,children:"Projects."})]}),ne.jsx("div",{className:"w-full flex",children:ne.jsx("p",{variants:Pv("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Following projects showcases my skills and experience through real-world examples of my work. Each project contains a gallery of pictures. The projects reflect my ability to solve complex problems, work with different technologies, and manage projects effectively."})}),ne.jsx("div",{className:"mt-20 flex flex-wrap gap-7",children:zJ.map((h,d)=>ne.jsx(wY,{index:d,...h,onClick:()=>o(h)},`project-${d}`))}),t&&ne.jsxs(iN,{isOpen:n,onRequestClose:a,style:MY,contentLabel:"Project Details",children:[ne.jsx("button",{onClick:a,className:"absolute top-0 right-0 m-4 text-white",children:"Close"}),ne.jsxs("div",{className:"p-10 flex flex-col items-center",children:[ne.jsx("h2",{className:"text-white font-bold text-[24px]",children:t.name}),ne.jsx("p",{className:"mt-2 text-secondary text-[14px]",children:t.description}),ne.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.tags.map(h=>ne.jsxs("p",{className:`text-[14px] ${h.color}`,children:["#",h.name]},`${t.name}-${h.name}`))}),ne.jsxs("div",{className:"mt-5 w-full flex justify-center items-center",children:[ne.jsx(is.div,{whileTap:{scale:.8},className:"flex justify-center mt-4",children:ne.jsx("button",{onClick:u,disabled:r===0,className:"text-white arrow-button mx-2",children:"<"})}),ne.jsx("div",{className:"relative h-auto object-cover max-h-[1200px] rounded-2xl",children:ne.jsx(oN,{src:t.images[r],zoomType:"click",zoomPreload:!0,zoomScale:1})}),ne.jsx(is.div,{whileTap:{scale:.8},className:"flex justify-center mt-4",children:ne.jsx("button",{onClick:l,disabled:r===t.images.length-1,className:"text-white arrow-button mx-2",children:">"})})]})]})]})]})},CY=Ad(EY,"projects"),TY=({index:n,testimonial:e,name:t,designation:i,company:r,image:s})=>ne.jsxs(is.div,{variants:Pv("","spring",n*.5,.75),className:"bg-black-200 p-10 rounded-3xl xs:w-[320px] w-full",children:[ne.jsx("p",{className:"text-white font-black text-[48px]",children:"🏆"}),ne.jsxs("div",{className:"mt-1",children:[ne.jsx("p",{className:"text-white tracking-wider text-[18px]",children:e}),ne.jsx("div",{className:"mt-7 flex justify-between items-center gap-1",children:ne.jsxs("div",{className:"flex-1 flex flex-col",children:[ne.jsx("p",{className:"text-white font-medium text-[16px]",children:t}),ne.jsx("p",{className:"mt-1 text-secondary text-[12px]",children:i})]})})]})]}),bY=()=>ne.jsxs("div",{className:"mt-12 bg-black-100 rounded-[20px]",children:[ne.jsx("div",{className:`bg-tertiary rounded-2xl ${gi.padding} min-h-[300px]`,children:ne.jsxs(is.div,{variants:FM(),children:[ne.jsx("p",{className:gi.sectionSubText,children:"Other Achievements"}),ne.jsx("h2",{className:gi.sectionHeadText,children:"Awards."})]})}),ne.jsx("div",{className:`-mt-20 pb-14 ${gi.paddingX} flex flex-wrap gap-7`,children:HJ.map((n,e)=>ne.jsx(TY,{index:e,...n},n.testimonial))})]}),RY=Ad(bY,"awards");class wd{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const PY=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},qn={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:PY()},GM=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},BY=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=GM(n);qn.publicKey=t.publicKey,qn.blockHeadless=t.blockHeadless,qn.storageProvider=t.storageProvider,qn.blockList=t.blockList,qn.limitRate=t.limitRate,qn.origin=t.origin||e},aN=async(n,e,t={})=>{const i=await fetch(qn.origin+n,{method:"POST",headers:t,body:e}),r=await i.text(),s=new wd(i.status,r);if(i.ok)return s;throw s},lN=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},IY=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},cN=n=>n.webdriver||!n.languages||n.languages.length===0,uN=()=>new wd(451,"Unavailable For Headless Browser"),DY=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},LY=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},NY=(n,e)=>n instanceof FormData?n.get(e):n[e],fN=(n,e)=>{if(LY(n))return!1;DY(n.list,n.watchVariable);const t=NY(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},hN=()=>new wd(403,"Forbidden"),FY=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a string"},OY=async(n,e,t)=>{const i=Number(await t.get(n)||0);return e-Date.now()+i},dN=async(n,e,t)=>{if(!e.throttle||!t)return!1;FY(e.throttle,e.id);const i=e.id||n;return await OY(i,e.throttle,t)>0?!0:(await t.set(i,Date.now().toString()),!1)},pN=()=>new wd(429,"Too Many Requests"),UY=async(n,e,t,i)=>{const r=GM(i),s=r.publicKey||qn.publicKey,o=r.blockHeadless||qn.blockHeadless,a=qn.storageProvider||r.storageProvider,l={...qn.blockList,...r.blockList},u={...qn.limitRate,...r.limitRate};return o&&cN(navigator)?Promise.reject(uN()):(lN(s,n,e),IY(t),t&&fN(l,t)?Promise.reject(hN()):await dN(location.pathname,u,a)?Promise.reject(pN()):aN("/api/v1.0/email/send",JSON.stringify({lib_version:"4.3.3",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},kY=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},HY=n=>typeof n=="string"?document.querySelector(n):n,zY=async(n,e,t,i)=>{const r=GM(i),s=r.publicKey||qn.publicKey,o=r.blockHeadless||qn.blockHeadless,a=qn.storageProvider||r.storageProvider,l={...qn.blockList,...r.blockList},u={...qn.limitRate,...r.limitRate};if(o&&cN(navigator))return Promise.reject(uN());const h=HY(t);lN(s,n,e),kY(h);const d=new FormData(h);return fN(l,d)?Promise.reject(hN()):await dN(location.pathname,u,a)?Promise.reject(pN()):(d.append("lib_version","4.3.3"),d.append("service_id",n),d.append("template_id",e),d.append("user_id",s),aN("/api/v1.0/email/send-form",d))},GY={init:BY,send:UY,sendForm:zY,EmailJSResponseStatus:wd},VY=()=>{const n=X.useRef(),[e,t]=X.useState({name:"",email:"",message:""}),[i,r]=X.useState(!1),s=a=>{const{target:l}=a,{name:u,value:h}=l;t({...e,[u]:h})},o=a=>{a.preventDefault(),r(!0),GY.send("service_jkmtj7u","template_qiu1krb",{from_name:e.name,to_name:"Elliott",from_email:e.email,to_email:"Elliott.young@hotmail.com",message:e.message},"0hkvVqdSfssJ20UAe").then(()=>{r(!1),alert("Thank you. I will get back to you as soon as possible."),t({name:"",email:"",message:""})},l=>{r(!1),console.error(l),alert("Ahh, something went wrong. Please try again.")})};return ne.jsxs("div",{className:"xl:mt-12 flex xl:flex-row flex-col-reverse gap-10 overflow-hidden",children:[ne.jsxs(is.div,{variants:n2("left","tween",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[ne.jsx("p",{className:gi.sectionSubText,children:"Get in touch"}),ne.jsx("h3",{className:gi.sectionHeadText,children:"Contact."}),ne.jsxs("form",{ref:n,onSubmit:o,className:"mt-12 flex flex-col gap-8",children:[ne.jsxs("label",{className:"flex flex-col",children:[ne.jsx("span",{className:"text-white font-medium mb-4",children:"Your Name"}),ne.jsx("input",{type:"text",name:"name",value:e.name,onChange:s,placeholder:"What's your good name?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),ne.jsxs("label",{className:"flex flex-col",children:[ne.jsx("span",{className:"text-white font-medium mb-4",children:"Your email"}),ne.jsx("input",{type:"email",name:"email",value:e.email,onChange:s,placeholder:"What's your web address?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),ne.jsxs("label",{className:"flex flex-col",children:[ne.jsx("span",{className:"text-white font-medium mb-4",children:"Your Message"}),ne.jsx("textarea",{rows:7,name:"message",value:e.message,onChange:s,placeholder:"What you want to say?",className:"bg-tertiary py-4 px-6 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium"})]}),ne.jsx("button",{type:"submit",className:"bg-tertiary py-3 px-8 rounded-xl outline-none w-fit text-white font-bold shadow-md shadow-primary",children:i?"Sending...":"Send"})]})]}),ne.jsx(is.div,{variants:n2("right","tween",.2,1),className:"p-9  xl:flex-1 xl:h-auto md:h-[550px] sm:h-[450px] border-[#393E46] justify-center items-center",children:ne.jsx(ok,{src:FJ,alt:"Description of the image"})})]})},WY=Ad(VY,"contact");function jY(){return ne.jsx(tk,{children:ne.jsxs("div",{className:"relative z-0 bg-primary",children:[ne.jsxs("div",{className:"bg-white bg-cover-bg-no-repeat bg-center",children:[ne.jsx(GJ,{}),ne.jsx(bJ,{})]}),ne.jsx(ZJ,{}),ne.jsx(mK,{}),ne.jsx(CY,{}),ne.jsx(RY,{}),ne.jsxs("div",{className:"relative z-0",children:[ne.jsx(WY,{}),ne.jsx(cW,{})]})]})})}b_.createRoot(document.getElementById("root")).render(ne.jsx(Nn.StrictMode,{children:ne.jsx(jY,{})}));
